{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/README.md","path":"README.md","modified":1,"renderable":0},{"_id":"source/apple-touch-icon.png","path":"apple-touch-icon.png","modified":1,"renderable":0},{"_id":"source/favicon.png","path":"favicon.png","modified":1,"renderable":0},{"_id":"source/about/index.html","path":"about/index.html","modified":1,"renderable":0},{"_id":"source/demo/index.html","path":"demo/index.html","modified":1,"renderable":0},{"_id":"source/md/iOS-Eventä¼ é€’å’Œå“åº”é“¾.md","path":"md/iOS-Eventä¼ é€’å’Œå“åº”é“¾.md","modified":1,"renderable":0},{"_id":"source/demo/css/component.css","path":"demo/css/component.css","modified":1,"renderable":0},{"_id":"source/demo/css/init.css","path":"demo/css/init.css","modified":1,"renderable":0},{"_id":"source/demo/css/normalize.css","path":"demo/css/normalize.css","modified":1,"renderable":0},{"_id":"source/demo/css/demo.css","path":"demo/css/demo.css","modified":1,"renderable":0},{"_id":"source/demo/img/1.jpg","path":"demo/img/1.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/10.jpg","path":"demo/img/10.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/12.jpg","path":"demo/img/12.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/11.jpg","path":"demo/img/11.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/13.jpg","path":"demo/img/13.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/14.jpg","path":"demo/img/14.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/2.jpg","path":"demo/img/2.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/3.jpg","path":"demo/img/3.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/4.jpg","path":"demo/img/4.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/6.jpg","path":"demo/img/6.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/5.jpg","path":"demo/img/5.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/7.jpg","path":"demo/img/7.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/8.jpg","path":"demo/img/8.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/9.jpg","path":"demo/img/9.jpg","modified":1,"renderable":0},{"_id":"source/demo/img/Thumbs.db","path":"demo/img/Thumbs.db","modified":1,"renderable":0},{"_id":"source/demo/img/dummy.png","path":"demo/img/dummy.png","modified":1,"renderable":0},{"_id":"source/demo/img/loading.gif","path":"demo/img/loading.gif","modified":1,"renderable":0},{"_id":"source/demo/js/colorfinder-1.1.js","path":"demo/js/colorfinder-1.1.js","modified":1,"renderable":0},{"_id":"source/demo/js/gridScrollFx.js","path":"demo/js/gridScrollFx.js","modified":1,"renderable":0},{"_id":"source/demo/js/classie.js","path":"demo/js/classie.js","modified":1,"renderable":0},{"_id":"source/demo/js/imagesloaded.pkgd.min.js","path":"demo/js/imagesloaded.pkgd.min.js","modified":1,"renderable":0},{"_id":"source/demo/js/modernizr.custom.js","path":"demo/js/modernizr.custom.js","modified":1,"renderable":0},{"_id":"source/demo/js/masonry.pkgd.min.js","path":"demo/js/masonry.pkgd.min.js","modified":1,"renderable":0},{"_id":"themes/hollow/source/css/backtop.styl","path":"css/backtop.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/article.styl","path":"css/article.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/base.styl","path":"css/base.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/category.styl","path":"css/category.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/mixins.styl","path":"css/mixins.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/navigation.styl","path":"css/navigation.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/playball.css","path":"css/playball.css","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/variables.styl","path":"css/variables.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/css/search.styl","path":"css/search.styl","modified":1,"renderable":1},{"_id":"themes/hollow/source/images/default.cur","path":"images/default.cur","modified":1,"renderable":1},{"_id":"themes/hollow/source/js/backtop.js","path":"js/backtop.js","modified":1,"renderable":1},{"_id":"themes/hollow/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/hollow/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/hollow/source/images/pointer.cur","path":"images/pointer.cur","modified":1,"renderable":1},{"_id":"source/demo/fonts/codropsicons/codropsicons.svg","path":"demo/fonts/codropsicons/codropsicons.svg","modified":1,"renderable":0},{"_id":"source/demo/fonts/codropsicons/codropsicons.ttf","path":"demo/fonts/codropsicons/codropsicons.ttf","modified":1,"renderable":0},{"_id":"source/demo/fonts/codropsicons/license.txt","path":"demo/fonts/codropsicons/license.txt","modified":1,"renderable":0},{"_id":"source/demo/fonts/codropsicons/codropsicons.woff","path":"demo/fonts/codropsicons/codropsicons.woff","modified":1,"renderable":0},{"_id":"source/demo/fonts/codropsicons/codropsicons.eot","path":"demo/fonts/codropsicons/codropsicons.eot","modified":1,"renderable":0},{"_id":"themes/hollow/source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/hollow/source/images/background_1.jpg","path":"images/background_1.jpg","modified":1,"renderable":1},{"_id":"themes/hollow/source/images/background.jpg","path":"images/background.jpg","modified":1,"renderable":1},{"_id":"themes/hollow/source/images/background_bak.png","path":"images/background_bak.png","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"486d7f3b56f8ae7beedc054731275ee0f4017e81","modified":1516690817561},{"_id":"source/.DS_Store","hash":"77883f3f9fba489320e4b6b2924f7e3a2083dc80","modified":1519378483805},{"_id":"source/README.md","hash":"8a6e95294f12e968c8fbecf220b8949b940a428b","modified":1521077883141},{"_id":"source/apple-touch-icon.png","hash":"80f6acded913cc59552a76af528873603f15558e","modified":1508167532000},{"_id":"source/favicon.png","hash":"f19e255a25a7a47586074dee505d63c4db443438","modified":1508167532000},{"_id":"themes/hollow/LICENSE","hash":"0aa093714c449e496e41093e55e939d19dd791d6","modified":1508167532000},{"_id":"themes/hollow/README.md","hash":"9fb701d6366348c1d676a4f06e15cc6e4713b6fb","modified":1508167532000},{"_id":"themes/hollow/_config.yml","hash":"6a3c1e7d66c12f0b60ea567899e248331caf5ccb","modified":1508167532000},{"_id":"themes/hollow/.DS_Store","hash":"2abb4d41925a95c98c051344f2da8ac023dce75d","modified":1507558772000},{"_id":"source/_posts/autoresizingMask.md","hash":"30f4c67c40d7714bb7c32432bec0127d3ec0edfc","modified":1520410187228},{"_id":"source/_posts/hello-world.md","hash":"b922a6d5ee251eb0b561b1045c3eb950f991a975","modified":1522287893522},{"_id":"source/_posts/iOS-Eventä¼ é€’å’Œå“åº”é“¾.md","hash":"bcde1e8e33cbabc7d1ecc1fa762525216a5c14bf","modified":1520414340763},{"_id":"source/_posts/EZHeartForLike.md","hash":"83bb6e0db730b6ffc716aeae79098515cd44da97","modified":1520410444050},{"_id":"source/_posts/iOSä¸‹é‡è¦çš„å¤šçº¿ç¨‹GCD.md","hash":"7fdcc87d1aef4ad4750032e4c139c4e9172e3533","modified":1521018707465},{"_id":"source/_posts/ä½¿ç”¨MakeFileåˆ›å»ºé™æ€åº“.md","hash":"5e3d75dc9953625306f65fb32ec897b8f260d675","modified":1520399115588},{"_id":"source/_posts/æˆ‘æœ‰çƒ¦æ¼ï¼Œä½ æœ‰ç­”æ¡ˆ.md","hash":"cc2bdfec50223976c7ca9e0459da70cabdab5309","modified":1520409977251},{"_id":"source/_posts/å¯¹çº¿ç¨‹çš„ç®€å•ç†è§£.md","hash":"ebfcc375fda62c82c98da06b53303551e8670cf8","modified":1522372593800},{"_id":"source/_posts/ç±»æ–¹æ³•Blockå†…å­˜æ³„æ¼.md","hash":"80053b4d2c36b08747e1c0d2edc342e2daf34f63","modified":1520409925209},{"_id":"source/_posts/ç®€ç®€å•å•è¯´è¯´PKIOniOS.md","hash":"36912515fcd38560fbbe5bc6cf9b2cb3932b98a4","modified":1520409844756},{"_id":"source/_posts/é˜¿æ¾¤å›çš„ç‹¬ç™½.md","hash":"55661df7808c918837ad9bd6e3d2b7ca1712c5dc","modified":1520409140607},{"_id":"source/about/index.html","hash":"7352f5d48164b8fad4133e47173e5f765da7531f","modified":1508771529000},{"_id":"source/demo/.DS_Store","hash":"49ecd8db5fa7aa0d33e9fa1902311d566c758061","modified":1487929005000},{"_id":"source/about/.DS_Store","hash":"0026a41cc0ca8ce050d7446082c78516c5633432","modified":1487513878000},{"_id":"source/_posts/é¡¹ç›®Beautyæ€»ç»“.md","hash":"356473766c4aa711f6d1894ab536caa3948579e5","modified":1521077547566},{"_id":"source/demo/index.html","hash":"3fc289d5180fc995f129436406047a150ad42d82","modified":1508167532000},{"_id":"source/md/iOS-Eventä¼ é€’å’Œå“åº”é“¾.md","hash":"b9d984194906e0e52ea4c3ae7d4e846fd0f043e3","modified":1519354594570},{"_id":"source/tags/index.md","hash":"e4fcaa4a711ee1ed153ebf8cfdfb7eadc65365e4","modified":1508167532000},{"_id":"themes/hollow/languages/default.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1508167532000},{"_id":"themes/hollow/languages/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1508167532000},{"_id":"themes/hollow/languages/zh-Hans.yml","hash":"053c45b0db64929e9fa2b1dbf271588d1118b911","modified":1508167532000},{"_id":"themes/hollow/languages/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1508167532000},{"_id":"themes/hollow/languages/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1508167532000},{"_id":"source/_posts/.DS_Store","hash":"993e36049897308cae34696176d7ccee84269d16","modified":1522294874734},{"_id":"themes/hollow/layout/archive.ejs","hash":"7ad2499729da4ae5bdf1af5c5a2df926a93a553a","modified":1508167532000},{"_id":"themes/hollow/layout/layout.ejs","hash":"824c86a695dfd1c270c2fa7af7ec5b636fab5284","modified":1508167532000},{"_id":"themes/hollow/layout/index.ejs","hash":"3816065e156e1390a76ff09ac755d789eca4c760","modified":1518399265146},{"_id":"themes/hollow/layout/page.ejs","hash":"d74a7a45bdc65ce5b049bc622170032bf9940b56","modified":1508167532000},{"_id":"themes/hollow/layout/post.ejs","hash":"38382e9bbeb6b8d2eafbd53fff2984111f524c1a","modified":1508167532000},{"_id":"themes/hollow/source/.DS_Store","hash":"2da78585b61381e662a783b363f0bbf080f83a95","modified":1503217620000},{"_id":"themes/hollow/layout/.DS_Store","hash":"09637d84eac56c0bbeb9416686b898ea4bcdde92","modified":1487315304000},{"_id":"source/demo/css/component.css","hash":"3ee5f2a934986a74ab6fe1c24f2ffee8d9f0b40c","modified":1508167532000},{"_id":"source/demo/css/init.css","hash":"19249942460483b83425fd9072329b6b4decc9d6","modified":1508167532000},{"_id":"source/demo/css/normalize.css","hash":"a0ff1e2feee0b1bb7e54a88fd6367ba3e7435aaf","modified":1508167532000},{"_id":"source/demo/css/demo.css","hash":"5e610860218722103852254901ed4f561695bd38","modified":1508167532000},{"_id":"source/demo/img/1.jpg","hash":"2d1d841ae831bc8d88adbd95df9c1f3c331fb518","modified":1508167532000},{"_id":"source/demo/img/10.jpg","hash":"cf054dcda4fe76940264a2f7b45ace9a8f8788f2","modified":1508167532000},{"_id":"source/demo/img/12.jpg","hash":"e9857d9321c7b35847c24efd55e81a7657e3fc2d","modified":1508167532000},{"_id":"source/demo/img/11.jpg","hash":"9edc600344b745f9340fa041003254b6f60187ce","modified":1508167532000},{"_id":"source/demo/img/13.jpg","hash":"a5f476016a19effc9c588ba8938bf4c49414a089","modified":1508167532000},{"_id":"source/demo/img/14.jpg","hash":"99df3ffe7f7ce609402c27800ed758cddd8cd818","modified":1508167532000},{"_id":"source/demo/img/2.jpg","hash":"85d205dd455451e1235c33e27a1060ba5cf1b2c3","modified":1508167532000},{"_id":"source/demo/img/3.jpg","hash":"44945eec703223535155953fcf9c24c84e5b5056","modified":1508167532000},{"_id":"source/demo/img/4.jpg","hash":"769dbadadab1bd82b24b1a2cc4520a6713178120","modified":1508167532000},{"_id":"source/demo/img/6.jpg","hash":"688d59d3ddc43d117da60c2d86d4979d10b3e8f0","modified":1508167532000},{"_id":"source/demo/img/5.jpg","hash":"4fff7c86ad034e7c5f7697b4f7b12f7525068c8f","modified":1508167532000},{"_id":"source/demo/img/7.jpg","hash":"8069d3fc4a4737e3155799dcce2fedd4066d2bbb","modified":1508167532000},{"_id":"source/demo/img/8.jpg","hash":"5c1cc79f3c0dbab37493cb913f8f3a3b0ea38470","modified":1508167532000},{"_id":"source/demo/img/9.jpg","hash":"7c34266bb957f6b00a5d0bb5f5cedabd3a31fcf5","modified":1508167532000},{"_id":"source/demo/img/Thumbs.db","hash":"1f4318671088fdc6d057fa748a88f65519e721a8","modified":1508167532000},{"_id":"source/demo/img/dummy.png","hash":"b7bed4edd54d4b0d8dde97d03a102530fc9f9d54","modified":1508167532000},{"_id":"source/demo/img/loading.gif","hash":"deedbc14742a4163d1fcce18211cfc76ba06505f","modified":1508167532000},{"_id":"source/demo/js/colorfinder-1.1.js","hash":"fe47069f811272fcd33a7488642e30fd3f25d725","modified":1508167532000},{"_id":"source/demo/js/gridScrollFx.js","hash":"eaf98cdf8b39384e04ae61b901e08ed32aa485db","modified":1508167532000},{"_id":"source/demo/js/classie.js","hash":"782b9564f015a2ec7bdf9c89e238fab9b44bd587","modified":1508167532000},{"_id":"source/demo/js/imagesloaded.pkgd.min.js","hash":"dea4f6ecff8935bba3323104fee273a173f1262e","modified":1508167532000},{"_id":"source/demo/js/modernizr.custom.js","hash":"897d01634e1728d281fa5c6e27f37d1d7652290c","modified":1508167532000},{"_id":"source/demo/js/masonry.pkgd.min.js","hash":"d87128d50e1c17e03ac7a2297dd0337158775301","modified":1508167532000},{"_id":"source/demo/fonts/.DS_Store","hash":"f259329c67189902e9767884b6811df0ea138eb3","modified":1487298426000},{"_id":"themes/hollow/layout/_partial/.DS_Store","hash":"4bf4464ddc7b8b0e28b6d858fbb2a1b810bc96ac","modified":1486563700000},{"_id":"themes/hollow/layout/_partial/about.ejs","hash":"7f96c9e91e80c1628f9aa7f91eb5429103001a6e","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/all-tags-left.ejs","hash":"3247188df4892c281479662846b2e5e7ebac9189","modified":1521077721573},{"_id":"themes/hollow/layout/_partial/article-archive.ejs","hash":"d52b04f27427b0a4ff97522175bef8ec8e0a9130","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/all-tags.ejs","hash":"97a73c5e7274d234ee1314fc952d54c614a07c36","modified":1518399583266},{"_id":"themes/hollow/layout/_partial/article-full.ejs","hash":"bb84737a7c0169c0550354df69079b35f94383d5","modified":1519378310183},{"_id":"themes/hollow/layout/_partial/article-index.ejs","hash":"d9ca79142cae43cabe7f4f3a83a2e66dba79fe7e","modified":1518229640302},{"_id":"themes/hollow/layout/_partial/article-tags.ejs","hash":"156eb953ad23071f789c3f0566748a6209dc586d","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/backhome.ejs","hash":"aa44bb3d5c3e902f9cb3aaab8b5cba24acacfe78","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/backtop.ejs","hash":"15e23a92e9ee7260384c55d9d4d10c36d7dbdb9f","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/comment.ejs","hash":"cf942107e02af29c19bda11358942e7fd97a84fd","modified":1520397580952},{"_id":"themes/hollow/layout/_partial/demo.ejs","hash":"c6c7e88348b8c14136b2a3925234a4aa51b8bbaa","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/google-analytics.ejs","hash":"4e6e8de9becea5a1636a4dcadcf7a10c06e2426e","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/pagination.ejs","hash":"9f086bd506077b121563ff66123cdae4ccfbed50","modified":1508167532000},{"_id":"themes/hollow/layout/_partial/head.ejs","hash":"370c101307b5cd2e16a4bd9bf6e16a28736221c9","modified":1518424460478},{"_id":"themes/hollow/layout/_partial/scripts.ejs","hash":"b5bfae4e14d558f551478646752aa1cdce4c4454","modified":1518424396395},{"_id":"themes/hollow/layout/_partial/search.ejs","hash":"d9ed55be81676a68310d13495a4a32d1d75796ad","modified":1522804418527},{"_id":"themes/hollow/source/css/backtop.styl","hash":"ce075cb7d12f71ca45c744c38f6398bc9ef04e1c","modified":1520319144807},{"_id":"themes/hollow/source/css/article.styl","hash":"cf8bfe76b59afb42522cdbae6f7d8fd5d40c858d","modified":1519907341467},{"_id":"themes/hollow/source/css/base.styl","hash":"0ce1463ad28576f8f74312618bb893c87cd6d6a0","modified":1521076976281},{"_id":"themes/hollow/source/css/category.styl","hash":"14b5e8826307c026ae2bfd5472ac87db3cd94d55","modified":1520242936726},{"_id":"themes/hollow/source/css/main.styl","hash":"3c947cc0705c2cebb00edf9934ced14a6a54d565","modified":1520242727167},{"_id":"themes/hollow/source/css/mixins.styl","hash":"0b743c9bd7ecf2414687b2e06582d651298a24e8","modified":1521076116533},{"_id":"themes/hollow/source/css/navigation.styl","hash":"8b06a187aa99ca38c0810d667018dd44d7551cf9","modified":1520298250802},{"_id":"themes/hollow/source/css/playball.css","hash":"49045d0cceae613d902d2e1b3fac268e8e555ae8","modified":1508167532000},{"_id":"themes/hollow/source/css/style.styl","hash":"15ba84b537171dc16622dbbcb9870b8dfa045885","modified":1508167532000},{"_id":"themes/hollow/source/css/variables.styl","hash":"c7a5d7efcf67c7790915353230c157aa14d25afd","modified":1520242772622},{"_id":"themes/hollow/source/css/search.styl","hash":"650681bd1750094c80e074453a43468648201de0","modified":1520298539383},{"_id":"themes/hollow/source/images/.DS_Store","hash":"4866bf27e45c38043503c610af24b78f3c330c51","modified":1508080808000},{"_id":"themes/hollow/source/images/default.cur","hash":"3381d41a9dcbb4c4e69559723481f85e2b8cf99e","modified":1520241091047},{"_id":"themes/hollow/source/js/backtop.js","hash":"9f1c5967e3585d3ee323bf97f412af290ee4404f","modified":1518424165773},{"_id":"themes/hollow/source/js/main.js","hash":"4e14f8cbfe3645876991a3541ba46f85a39b7252","modified":1508167532000},{"_id":"themes/hollow/source/js/search.js","hash":"163c7ffc824d38c1f69132803c762c828d896782","modified":1518504162879},{"_id":"themes/hollow/source/images/pointer.cur","hash":"3adb643f97571f547021fb57b2d9d768a252d546","modified":1520242292639},{"_id":"themes/hollow/layout/_partial/article-categories.ejs","hash":"5a0bf5a20f670621d8013c9b9d7976b45c8aa80f","modified":1508167532000},{"_id":"source/demo/fonts/codropsicons/codropsicons.svg","hash":"0de9f0aaf1cdf27ef9931d45c5eab3374c7142f4","modified":1508167532000},{"_id":"source/demo/fonts/codropsicons/codropsicons.ttf","hash":"e670d3deb662651d71461be5a41add4a48b8998a","modified":1508167532000},{"_id":"source/demo/fonts/codropsicons/license.txt","hash":"d3d34d2a512acf27557ea82ac82a51058df43091","modified":1508167532000},{"_id":"source/demo/fonts/codropsicons/codropsicons.woff","hash":"7c0ba611c947ddb5a82fa47a87a1ce63ed8bcd7f","modified":1508167532000},{"_id":"source/demo/fonts/codropsicons/codropsicons.eot","hash":"d3bd1eb3823f094524ddf6070c154ccab81e6951","modified":1508167532000},{"_id":"themes/hollow/source/images/avatar.jpg","hash":"159a800376aebf291e959414f8b19da833a10648","modified":1508167532000},{"_id":"themes/hollow/source/images/background_1.jpg","hash":"2dbf868225f7b454ca0c745c64a96ba948f00dc3","modified":1508167532000},{"_id":"themes/hollow/source/images/background.jpg","hash":"b28817e6107175d793fcab7f48120926db2a6217","modified":1508167532000},{"_id":"themes/hollow/source/images/background_bak.png","hash":"dcccd29a5e8b71153c3ed3f139c3de31f6fefd90","modified":1508167532000}],"Category":[],"Data":[],"Page":[{"title":"tags","date":"2017-10-09T14:51:34.000Z","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2017-10-09 22:51:34\n---\n","updated":"2017-10-16T15:25:32.000Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjfki12ar0001cqy8dt2wooab","content":"","excerpt":"","more":""}],"Post":[{"title":"Autoresizing Mask","date":"2016-03-19T15:41:26.000Z","typora-copy-images-to":"ipic","_content":"\nä¸çŸ¥é“å¤§å®¶åœ¨å¼€å‘çš„æ—¶å€™ä¼šä¸ä¼šä½¿ç”¨åˆ°UIViewçš„autoresizingMaskå±æ€§ã€‚æˆ‘è‡ªå·±çš„è¯è‡ªä»å¼€å§‹å‡ºç°autoLayoutå°±æ²¡å†ç”¨è¿‡äº†ã€‚å‰å‡ å¤©ç¿»çœ‹ä¸€äº›è¾ƒè€çš„ä¹¦ç±ï¼Œå‘ç°äº†å®ƒé™é™èººåœ¨è§’è½ã€‚ä¸çŸ¥ä¸è§‰è¿˜çœŸçš„æœ‰äº›å¿˜è®°äº†ï¼Œäºæ˜¯æ¸©æ•…çŸ¥æ–°ï¼Œå†å­¦ä¹ äº†ä¸€ä¸‹ã€‚\n\n<!--more-->\n\n# autoresizingMask\nå®ƒå¯¹åº”ç€ä¸€ä¸ªæšä¸¾ï¼Œå±æ€§æ˜¯è‡ªåŠ¨è°ƒæ•´SubViewå’ŒSuperViewä¹‹é—´çš„ä½ç½®å’Œå®½é«˜ã€‚\n```\nenum {\n   UIViewAutoresizingNone                 = 0,\n   UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,\n   UIViewAutoresizingFlexibleWidth        = 1 << 1,\n   UIViewAutoresizingFlexibleRightMargin  = 1 << 2,\n   UIViewAutoresizingFlexibleTopMargin    = 1 << 3,\n   UIViewAutoresizingFlexibleHeight       = 1 << 4,\n   UIViewAutoresizingFlexibleBottomMargin = 1 << 5\n};\n```\n## ç®€å•ä»‹ç»\n### UIViewAutoresizingNone\nä¸è®¾ç½®è‡ªåŠ¨è°ƒæ•´ï¼Œé»˜è®¤å€¼\n### UIViewAutoresizingFlexibleRightMargin \nè¿™é‡Œå°±åªè®²UIViewAutoresizingFlexibleRightMargin,å› ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½æ˜¯ä¸€è‡´çš„åŸç†\n![autoresizingMask_FlexibleRightMargin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/skwhi.jpg)\n### UIViewAutoresizingFlexibleWidth\nUIViewAutoresizingFlexibleWidthå’ŒUIViewAutoresizingFlexibleHeightä¹Ÿæ˜¯åŒæ ·çš„åŸç†\n![autoresizingMask_FlexibleWidthCompare](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wrxva.jpg)\n\n### ç»„åˆèµ·æ¥\næšä¸¾ä¸­çš„å€¼æ˜¯å…è®¸ä½¿ç”¨|ç»„åˆèµ·æ¥çš„ï¼ŒåŒæ—¶æ‹¥æœ‰å¤šä¸ªå€¼çš„åŠŸèƒ½ï¼Œlike thisï¼š\n``` objc\nUIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRIGHTMargin\n```\nè¡¨ç¤ºå·¦å³é—´éš”éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ•ˆæœå°±åƒä¸Šé¢é‚£å¼ å›¾ä¸€æ ·~\n\n## æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\n``` objc\n#define kTopSpace 64\n#define kMargin 20\n#define kTopViewHeight 44\n#define kTopViewWidth 280\n#define kTextLabelWidth 200\n#define kTextLabelHeight 30\n//ä»¥Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€ï¼Œè®¾ç½®å„æ§ä»¶çš„ä½ç½®\n//æ³¨æ„ï¼šå¿…é¡»æ‰€æœ‰æ§ä»¶éƒ½æŒ‰ç…§Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸ç„¶æŒ‰æ¯”ä¾‹ç¼©æ”¾æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼\nUIView *topView = [[UIView alloc] initWithFrame:CGRectMake(kMargin, kTopSpace, kTopViewWidth, kTopViewHeight)];\nCGFloat textLabelTop = (topView.frame.size.width - kTextLabelWidth) / 2;\nCGFloat textLabelWidth = (topView.frame.size.height - kTextLabelHeight) / 2;\nUILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(textLabelTop, textLabelWidth, kTextLabelWidth, kTextLabelHeight)];\n//è®¾ç½®æ–‡å­—åŠå±…ä¸­\n[textLabel setText:@\"Ezfen\"];\n[textLabel setTextAlignment:NSTextAlignmentCenter];\n//åˆ†åˆ«è®¾ç½®æ ·å¼\n[topView setBackgroundColor:[UIColor redColor]];\n[textLabel setTextColor:[UIColor whiteColor]];\n//è®¾ç½®æ–‡å­—æ§ä»¶çš„å®½åº¦æŒ‰ç…§ä¸Šä¸€çº§è§†å›¾ï¼ˆtopViewï¼‰çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾\n[textLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];\n//æ·»åŠ è§†å›¾\n[topView addSubview:textLabel];\n[self.view addSubview:topView];\n//æ³¨æ„ï¼šé‡æ–°è®¾ç½®topViewä½ç½®çš„ä»£ç ï¼Œå¿…é¡»è¦å†™åœ¨æ·»åŠ è§†å›¾çš„åé¢ï¼Œä¸ç„¶autoresizingçš„ä½ç½®è®¡ç®—ä¼šå‡ºé”™ï¼\nCGFloat topViewWidth = kUIScreen.size.width - kMargin * 2;\n[topView setFrame:CGRectMake(kMargin, kTopSpace, topViewWidth, kTopViewHeight)];\n```\n\nä¸Šé¢çš„ä»£ç ä¸­å°ºå¯¸å®½åº¦è¢«é™å®šä¸ºiPhone4sçš„320ã€‚æ²¡æœ‰è®¾ç½®å­Viewï¼ˆè“è‰²çš„Viewï¼‰çš„autoresizingMaskå±æ€§çš„è¯è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n![autoresizingMask_4s](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pmjrs.jpg)\n\nè®¾ç½®äº†å­Viewï¼ˆè“è‰²çš„Viewï¼‰autoresizingMaskåï¼Œå†ä¿®æ”¹çˆ¶Viewçš„å®½åº¦ï¼Œå¯ä»¥çœ‹åˆ°éšç€èµ‹å€¼çš„ä¸åŒï¼Œæœ‰ä¸åŒçš„æ•ˆæœï¼š\nè®¾ç½®äº†UIViewAutoresizingFlexibleLeftMargin\n![autoresizingMask_FlexibleLeftMargin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m2hgw.jpg)\n\nè¿˜æœ‰çš„å…¶ä»–å€¼å¯¹åº”çš„æ•ˆæœå›¾åœ¨ä¸Šæ–‡å·²ç»æ‘†å‡ºæ¥äº†ï¼Œè¯·å‚é˜…å“ˆ~~\n","source":"_posts/autoresizingMask.md","raw":"---\ntitle: Autoresizing Mask\ndate: 2016-03-19 23:41:26\ntags: \n- UIView\ntypora-copy-images-to: ipic\n---\n\nä¸çŸ¥é“å¤§å®¶åœ¨å¼€å‘çš„æ—¶å€™ä¼šä¸ä¼šä½¿ç”¨åˆ°UIViewçš„autoresizingMaskå±æ€§ã€‚æˆ‘è‡ªå·±çš„è¯è‡ªä»å¼€å§‹å‡ºç°autoLayoutå°±æ²¡å†ç”¨è¿‡äº†ã€‚å‰å‡ å¤©ç¿»çœ‹ä¸€äº›è¾ƒè€çš„ä¹¦ç±ï¼Œå‘ç°äº†å®ƒé™é™èººåœ¨è§’è½ã€‚ä¸çŸ¥ä¸è§‰è¿˜çœŸçš„æœ‰äº›å¿˜è®°äº†ï¼Œäºæ˜¯æ¸©æ•…çŸ¥æ–°ï¼Œå†å­¦ä¹ äº†ä¸€ä¸‹ã€‚\n\n<!--more-->\n\n# autoresizingMask\nå®ƒå¯¹åº”ç€ä¸€ä¸ªæšä¸¾ï¼Œå±æ€§æ˜¯è‡ªåŠ¨è°ƒæ•´SubViewå’ŒSuperViewä¹‹é—´çš„ä½ç½®å’Œå®½é«˜ã€‚\n```\nenum {\n   UIViewAutoresizingNone                 = 0,\n   UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,\n   UIViewAutoresizingFlexibleWidth        = 1 << 1,\n   UIViewAutoresizingFlexibleRightMargin  = 1 << 2,\n   UIViewAutoresizingFlexibleTopMargin    = 1 << 3,\n   UIViewAutoresizingFlexibleHeight       = 1 << 4,\n   UIViewAutoresizingFlexibleBottomMargin = 1 << 5\n};\n```\n## ç®€å•ä»‹ç»\n### UIViewAutoresizingNone\nä¸è®¾ç½®è‡ªåŠ¨è°ƒæ•´ï¼Œé»˜è®¤å€¼\n### UIViewAutoresizingFlexibleRightMargin \nè¿™é‡Œå°±åªè®²UIViewAutoresizingFlexibleRightMargin,å› ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½æ˜¯ä¸€è‡´çš„åŸç†\n![autoresizingMask_FlexibleRightMargin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/skwhi.jpg)\n### UIViewAutoresizingFlexibleWidth\nUIViewAutoresizingFlexibleWidthå’ŒUIViewAutoresizingFlexibleHeightä¹Ÿæ˜¯åŒæ ·çš„åŸç†\n![autoresizingMask_FlexibleWidthCompare](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wrxva.jpg)\n\n### ç»„åˆèµ·æ¥\næšä¸¾ä¸­çš„å€¼æ˜¯å…è®¸ä½¿ç”¨|ç»„åˆèµ·æ¥çš„ï¼ŒåŒæ—¶æ‹¥æœ‰å¤šä¸ªå€¼çš„åŠŸèƒ½ï¼Œlike thisï¼š\n``` objc\nUIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRIGHTMargin\n```\nè¡¨ç¤ºå·¦å³é—´éš”éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ•ˆæœå°±åƒä¸Šé¢é‚£å¼ å›¾ä¸€æ ·~\n\n## æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\n``` objc\n#define kTopSpace 64\n#define kMargin 20\n#define kTopViewHeight 44\n#define kTopViewWidth 280\n#define kTextLabelWidth 200\n#define kTextLabelHeight 30\n//ä»¥Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€ï¼Œè®¾ç½®å„æ§ä»¶çš„ä½ç½®\n//æ³¨æ„ï¼šå¿…é¡»æ‰€æœ‰æ§ä»¶éƒ½æŒ‰ç…§Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸ç„¶æŒ‰æ¯”ä¾‹ç¼©æ”¾æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼\nUIView *topView = [[UIView alloc] initWithFrame:CGRectMake(kMargin, kTopSpace, kTopViewWidth, kTopViewHeight)];\nCGFloat textLabelTop = (topView.frame.size.width - kTextLabelWidth) / 2;\nCGFloat textLabelWidth = (topView.frame.size.height - kTextLabelHeight) / 2;\nUILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(textLabelTop, textLabelWidth, kTextLabelWidth, kTextLabelHeight)];\n//è®¾ç½®æ–‡å­—åŠå±…ä¸­\n[textLabel setText:@\"Ezfen\"];\n[textLabel setTextAlignment:NSTextAlignmentCenter];\n//åˆ†åˆ«è®¾ç½®æ ·å¼\n[topView setBackgroundColor:[UIColor redColor]];\n[textLabel setTextColor:[UIColor whiteColor]];\n//è®¾ç½®æ–‡å­—æ§ä»¶çš„å®½åº¦æŒ‰ç…§ä¸Šä¸€çº§è§†å›¾ï¼ˆtopViewï¼‰çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾\n[textLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];\n//æ·»åŠ è§†å›¾\n[topView addSubview:textLabel];\n[self.view addSubview:topView];\n//æ³¨æ„ï¼šé‡æ–°è®¾ç½®topViewä½ç½®çš„ä»£ç ï¼Œå¿…é¡»è¦å†™åœ¨æ·»åŠ è§†å›¾çš„åé¢ï¼Œä¸ç„¶autoresizingçš„ä½ç½®è®¡ç®—ä¼šå‡ºé”™ï¼\nCGFloat topViewWidth = kUIScreen.size.width - kMargin * 2;\n[topView setFrame:CGRectMake(kMargin, kTopSpace, topViewWidth, kTopViewHeight)];\n```\n\nä¸Šé¢çš„ä»£ç ä¸­å°ºå¯¸å®½åº¦è¢«é™å®šä¸ºiPhone4sçš„320ã€‚æ²¡æœ‰è®¾ç½®å­Viewï¼ˆè“è‰²çš„Viewï¼‰çš„autoresizingMaskå±æ€§çš„è¯è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n![autoresizingMask_4s](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pmjrs.jpg)\n\nè®¾ç½®äº†å­Viewï¼ˆè“è‰²çš„Viewï¼‰autoresizingMaskåï¼Œå†ä¿®æ”¹çˆ¶Viewçš„å®½åº¦ï¼Œå¯ä»¥çœ‹åˆ°éšç€èµ‹å€¼çš„ä¸åŒï¼Œæœ‰ä¸åŒçš„æ•ˆæœï¼š\nè®¾ç½®äº†UIViewAutoresizingFlexibleLeftMargin\n![autoresizingMask_FlexibleLeftMargin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m2hgw.jpg)\n\nè¿˜æœ‰çš„å…¶ä»–å€¼å¯¹åº”çš„æ•ˆæœå›¾åœ¨ä¸Šæ–‡å·²ç»æ‘†å‡ºæ¥äº†ï¼Œè¯·å‚é˜…å“ˆ~~\n","slug":"autoresizingMask","published":1,"updated":"2018-03-07T08:09:47.228Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12ao0000cqy8yiggb46n","content":"<p>ä¸çŸ¥é“å¤§å®¶åœ¨å¼€å‘çš„æ—¶å€™ä¼šä¸ä¼šä½¿ç”¨åˆ°UIViewçš„autoresizingMaskå±æ€§ã€‚æˆ‘è‡ªå·±çš„è¯è‡ªä»å¼€å§‹å‡ºç°autoLayoutå°±æ²¡å†ç”¨è¿‡äº†ã€‚å‰å‡ å¤©ç¿»çœ‹ä¸€äº›è¾ƒè€çš„ä¹¦ç±ï¼Œå‘ç°äº†å®ƒé™é™èººåœ¨è§’è½ã€‚ä¸çŸ¥ä¸è§‰è¿˜çœŸçš„æœ‰äº›å¿˜è®°äº†ï¼Œäºæ˜¯æ¸©æ•…çŸ¥æ–°ï¼Œå†å­¦ä¹ äº†ä¸€ä¸‹ã€‚</p>\n<a id=\"more\"></a>\n<h1 id=\"autoresizingMask\"><a href=\"#autoresizingMask\" class=\"headerlink\" title=\"autoresizingMask\"></a>autoresizingMask</h1><p>å®ƒå¯¹åº”ç€ä¸€ä¸ªæšä¸¾ï¼Œå±æ€§æ˜¯è‡ªåŠ¨è°ƒæ•´SubViewå’ŒSuperViewä¹‹é—´çš„ä½ç½®å’Œå®½é«˜ã€‚</p>\n<pre><code>enum {\n   UIViewAutoresizingNone                 = 0,\n   UIViewAutoresizingFlexibleLeftMargin   = 1 &lt;&lt; 0,\n   UIViewAutoresizingFlexibleWidth        = 1 &lt;&lt; 1,\n   UIViewAutoresizingFlexibleRightMargin  = 1 &lt;&lt; 2,\n   UIViewAutoresizingFlexibleTopMargin    = 1 &lt;&lt; 3,\n   UIViewAutoresizingFlexibleHeight       = 1 &lt;&lt; 4,\n   UIViewAutoresizingFlexibleBottomMargin = 1 &lt;&lt; 5\n};\n</code></pre><h2 id=\"ç®€å•ä»‹ç»\"><a href=\"#ç®€å•ä»‹ç»\" class=\"headerlink\" title=\"ç®€å•ä»‹ç»\"></a>ç®€å•ä»‹ç»</h2><h3 id=\"UIViewAutoresizingNone\"><a href=\"#UIViewAutoresizingNone\" class=\"headerlink\" title=\"UIViewAutoresizingNone\"></a>UIViewAutoresizingNone</h3><p>ä¸è®¾ç½®è‡ªåŠ¨è°ƒæ•´ï¼Œé»˜è®¤å€¼</p>\n<h3 id=\"UIViewAutoresizingFlexibleRightMargin\"><a href=\"#UIViewAutoresizingFlexibleRightMargin\" class=\"headerlink\" title=\"UIViewAutoresizingFlexibleRightMargin\"></a>UIViewAutoresizingFlexibleRightMargin</h3><p>è¿™é‡Œå°±åªè®²UIViewAutoresizingFlexibleRightMargin,å› ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½æ˜¯ä¸€è‡´çš„åŸç†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/skwhi.jpg\" alt=\"autoresizingMask_FlexibleRightMargin\"></p>\n<h3 id=\"UIViewAutoresizingFlexibleWidth\"><a href=\"#UIViewAutoresizingFlexibleWidth\" class=\"headerlink\" title=\"UIViewAutoresizingFlexibleWidth\"></a>UIViewAutoresizingFlexibleWidth</h3><p>UIViewAutoresizingFlexibleWidthå’ŒUIViewAutoresizingFlexibleHeightä¹Ÿæ˜¯åŒæ ·çš„åŸç†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wrxva.jpg\" alt=\"autoresizingMask_FlexibleWidthCompare\"></p>\n<h3 id=\"ç»„åˆèµ·æ¥\"><a href=\"#ç»„åˆèµ·æ¥\" class=\"headerlink\" title=\"ç»„åˆèµ·æ¥\"></a>ç»„åˆèµ·æ¥</h3><p>æšä¸¾ä¸­çš„å€¼æ˜¯å…è®¸ä½¿ç”¨|ç»„åˆèµ·æ¥çš„ï¼ŒåŒæ—¶æ‹¥æœ‰å¤šä¸ªå€¼çš„åŠŸèƒ½ï¼Œlike thisï¼š</p>\n<pre><code class=\"objc\">UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRIGHTMargin\n</code></pre>\n<p>è¡¨ç¤ºå·¦å³é—´éš”éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ•ˆæœå°±åƒä¸Šé¢é‚£å¼ å›¾ä¸€æ ·~</p>\n<h2 id=\"æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\"><a href=\"#æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\" class=\"headerlink\" title=\"æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\"></a>æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›</h2><pre><code class=\"objc\">#define kTopSpace 64\n#define kMargin 20\n#define kTopViewHeight 44\n#define kTopViewWidth 280\n#define kTextLabelWidth 200\n#define kTextLabelHeight 30\n//ä»¥Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€ï¼Œè®¾ç½®å„æ§ä»¶çš„ä½ç½®\n//æ³¨æ„ï¼šå¿…é¡»æ‰€æœ‰æ§ä»¶éƒ½æŒ‰ç…§Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸ç„¶æŒ‰æ¯”ä¾‹ç¼©æ”¾æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼\nUIView *topView = [[UIView alloc] initWithFrame:CGRectMake(kMargin, kTopSpace, kTopViewWidth, kTopViewHeight)];\nCGFloat textLabelTop = (topView.frame.size.width - kTextLabelWidth) / 2;\nCGFloat textLabelWidth = (topView.frame.size.height - kTextLabelHeight) / 2;\nUILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(textLabelTop, textLabelWidth, kTextLabelWidth, kTextLabelHeight)];\n//è®¾ç½®æ–‡å­—åŠå±…ä¸­\n[textLabel setText:@&quot;Ezfen&quot;];\n[textLabel setTextAlignment:NSTextAlignmentCenter];\n//åˆ†åˆ«è®¾ç½®æ ·å¼\n[topView setBackgroundColor:[UIColor redColor]];\n[textLabel setTextColor:[UIColor whiteColor]];\n//è®¾ç½®æ–‡å­—æ§ä»¶çš„å®½åº¦æŒ‰ç…§ä¸Šä¸€çº§è§†å›¾ï¼ˆtopViewï¼‰çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾\n[textLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];\n//æ·»åŠ è§†å›¾\n[topView addSubview:textLabel];\n[self.view addSubview:topView];\n//æ³¨æ„ï¼šé‡æ–°è®¾ç½®topViewä½ç½®çš„ä»£ç ï¼Œå¿…é¡»è¦å†™åœ¨æ·»åŠ è§†å›¾çš„åé¢ï¼Œä¸ç„¶autoresizingçš„ä½ç½®è®¡ç®—ä¼šå‡ºé”™ï¼\nCGFloat topViewWidth = kUIScreen.size.width - kMargin * 2;\n[topView setFrame:CGRectMake(kMargin, kTopSpace, topViewWidth, kTopViewHeight)];\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç ä¸­å°ºå¯¸å®½åº¦è¢«é™å®šä¸ºiPhone4sçš„320ã€‚æ²¡æœ‰è®¾ç½®å­Viewï¼ˆè“è‰²çš„Viewï¼‰çš„autoresizingMaskå±æ€§çš„è¯è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pmjrs.jpg\" alt=\"autoresizingMask_4s\"></p>\n<p>è®¾ç½®äº†å­Viewï¼ˆè“è‰²çš„Viewï¼‰autoresizingMaskåï¼Œå†ä¿®æ”¹çˆ¶Viewçš„å®½åº¦ï¼Œå¯ä»¥çœ‹åˆ°éšç€èµ‹å€¼çš„ä¸åŒï¼Œæœ‰ä¸åŒçš„æ•ˆæœï¼š<br>è®¾ç½®äº†UIViewAutoresizingFlexibleLeftMargin<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m2hgw.jpg\" alt=\"autoresizingMask_FlexibleLeftMargin\"></p>\n<p>è¿˜æœ‰çš„å…¶ä»–å€¼å¯¹åº”çš„æ•ˆæœå›¾åœ¨ä¸Šæ–‡å·²ç»æ‘†å‡ºæ¥äº†ï¼Œè¯·å‚é˜…å“ˆ~~</p>\n","excerpt":"<p>ä¸çŸ¥é“å¤§å®¶åœ¨å¼€å‘çš„æ—¶å€™ä¼šä¸ä¼šä½¿ç”¨åˆ°UIViewçš„autoresizingMaskå±æ€§ã€‚æˆ‘è‡ªå·±çš„è¯è‡ªä»å¼€å§‹å‡ºç°autoLayoutå°±æ²¡å†ç”¨è¿‡äº†ã€‚å‰å‡ å¤©ç¿»çœ‹ä¸€äº›è¾ƒè€çš„ä¹¦ç±ï¼Œå‘ç°äº†å®ƒé™é™èººåœ¨è§’è½ã€‚ä¸çŸ¥ä¸è§‰è¿˜çœŸçš„æœ‰äº›å¿˜è®°äº†ï¼Œäºæ˜¯æ¸©æ•…çŸ¥æ–°ï¼Œå†å­¦ä¹ äº†ä¸€ä¸‹ã€‚</p>","more":"<h1 id=\"autoresizingMask\"><a href=\"#autoresizingMask\" class=\"headerlink\" title=\"autoresizingMask\"></a>autoresizingMask</h1><p>å®ƒå¯¹åº”ç€ä¸€ä¸ªæšä¸¾ï¼Œå±æ€§æ˜¯è‡ªåŠ¨è°ƒæ•´SubViewå’ŒSuperViewä¹‹é—´çš„ä½ç½®å’Œå®½é«˜ã€‚</p>\n<pre><code>enum {\n   UIViewAutoresizingNone                 = 0,\n   UIViewAutoresizingFlexibleLeftMargin   = 1 &lt;&lt; 0,\n   UIViewAutoresizingFlexibleWidth        = 1 &lt;&lt; 1,\n   UIViewAutoresizingFlexibleRightMargin  = 1 &lt;&lt; 2,\n   UIViewAutoresizingFlexibleTopMargin    = 1 &lt;&lt; 3,\n   UIViewAutoresizingFlexibleHeight       = 1 &lt;&lt; 4,\n   UIViewAutoresizingFlexibleBottomMargin = 1 &lt;&lt; 5\n};\n</code></pre><h2 id=\"ç®€å•ä»‹ç»\"><a href=\"#ç®€å•ä»‹ç»\" class=\"headerlink\" title=\"ç®€å•ä»‹ç»\"></a>ç®€å•ä»‹ç»</h2><h3 id=\"UIViewAutoresizingNone\"><a href=\"#UIViewAutoresizingNone\" class=\"headerlink\" title=\"UIViewAutoresizingNone\"></a>UIViewAutoresizingNone</h3><p>ä¸è®¾ç½®è‡ªåŠ¨è°ƒæ•´ï¼Œé»˜è®¤å€¼</p>\n<h3 id=\"UIViewAutoresizingFlexibleRightMargin\"><a href=\"#UIViewAutoresizingFlexibleRightMargin\" class=\"headerlink\" title=\"UIViewAutoresizingFlexibleRightMargin\"></a>UIViewAutoresizingFlexibleRightMargin</h3><p>è¿™é‡Œå°±åªè®²UIViewAutoresizingFlexibleRightMargin,å› ä¸ºä¸Šä¸‹å·¦å³å››ä¸ªæ–¹ä½æ˜¯ä¸€è‡´çš„åŸç†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/skwhi.jpg\" alt=\"autoresizingMask_FlexibleRightMargin\"></p>\n<h3 id=\"UIViewAutoresizingFlexibleWidth\"><a href=\"#UIViewAutoresizingFlexibleWidth\" class=\"headerlink\" title=\"UIViewAutoresizingFlexibleWidth\"></a>UIViewAutoresizingFlexibleWidth</h3><p>UIViewAutoresizingFlexibleWidthå’ŒUIViewAutoresizingFlexibleHeightä¹Ÿæ˜¯åŒæ ·çš„åŸç†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wrxva.jpg\" alt=\"autoresizingMask_FlexibleWidthCompare\"></p>\n<h3 id=\"ç»„åˆèµ·æ¥\"><a href=\"#ç»„åˆèµ·æ¥\" class=\"headerlink\" title=\"ç»„åˆèµ·æ¥\"></a>ç»„åˆèµ·æ¥</h3><p>æšä¸¾ä¸­çš„å€¼æ˜¯å…è®¸ä½¿ç”¨|ç»„åˆèµ·æ¥çš„ï¼ŒåŒæ—¶æ‹¥æœ‰å¤šä¸ªå€¼çš„åŠŸèƒ½ï¼Œlike thisï¼š</p>\n<pre><code class=\"objc\">UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRIGHTMargin\n</code></pre>\n<p>è¡¨ç¤ºå·¦å³é—´éš”éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ•ˆæœå°±åƒä¸Šé¢é‚£å¼ å›¾ä¸€æ ·~</p>\n<h2 id=\"æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\"><a href=\"#æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\" class=\"headerlink\" title=\"æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›\"></a>æœ‰ç‚¹ä»£ç å¯¹æ¯”ä¼šå¥½äº›</h2><pre><code class=\"objc\">#define kTopSpace 64\n#define kMargin 20\n#define kTopViewHeight 44\n#define kTopViewWidth 280\n#define kTextLabelWidth 200\n#define kTextLabelHeight 30\n//ä»¥Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€ï¼Œè®¾ç½®å„æ§ä»¶çš„ä½ç½®\n//æ³¨æ„ï¼šå¿…é¡»æ‰€æœ‰æ§ä»¶éƒ½æŒ‰ç…§Iphone4ï¼ˆ320ï¼Œ 480ï¼‰ä¸ºåŸºç¡€åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸ç„¶æŒ‰æ¯”ä¾‹ç¼©æ”¾æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼\nUIView *topView = [[UIView alloc] initWithFrame:CGRectMake(kMargin, kTopSpace, kTopViewWidth, kTopViewHeight)];\nCGFloat textLabelTop = (topView.frame.size.width - kTextLabelWidth) / 2;\nCGFloat textLabelWidth = (topView.frame.size.height - kTextLabelHeight) / 2;\nUILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(textLabelTop, textLabelWidth, kTextLabelWidth, kTextLabelHeight)];\n//è®¾ç½®æ–‡å­—åŠå±…ä¸­\n[textLabel setText:@&quot;Ezfen&quot;];\n[textLabel setTextAlignment:NSTextAlignmentCenter];\n//åˆ†åˆ«è®¾ç½®æ ·å¼\n[topView setBackgroundColor:[UIColor redColor]];\n[textLabel setTextColor:[UIColor whiteColor]];\n//è®¾ç½®æ–‡å­—æ§ä»¶çš„å®½åº¦æŒ‰ç…§ä¸Šä¸€çº§è§†å›¾ï¼ˆtopViewï¼‰çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾\n[textLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];\n//æ·»åŠ è§†å›¾\n[topView addSubview:textLabel];\n[self.view addSubview:topView];\n//æ³¨æ„ï¼šé‡æ–°è®¾ç½®topViewä½ç½®çš„ä»£ç ï¼Œå¿…é¡»è¦å†™åœ¨æ·»åŠ è§†å›¾çš„åé¢ï¼Œä¸ç„¶autoresizingçš„ä½ç½®è®¡ç®—ä¼šå‡ºé”™ï¼\nCGFloat topViewWidth = kUIScreen.size.width - kMargin * 2;\n[topView setFrame:CGRectMake(kMargin, kTopSpace, topViewWidth, kTopViewHeight)];\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç ä¸­å°ºå¯¸å®½åº¦è¢«é™å®šä¸ºiPhone4sçš„320ã€‚æ²¡æœ‰è®¾ç½®å­Viewï¼ˆè“è‰²çš„Viewï¼‰çš„autoresizingMaskå±æ€§çš„è¯è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pmjrs.jpg\" alt=\"autoresizingMask_4s\"></p>\n<p>è®¾ç½®äº†å­Viewï¼ˆè“è‰²çš„Viewï¼‰autoresizingMaskåï¼Œå†ä¿®æ”¹çˆ¶Viewçš„å®½åº¦ï¼Œå¯ä»¥çœ‹åˆ°éšç€èµ‹å€¼çš„ä¸åŒï¼Œæœ‰ä¸åŒçš„æ•ˆæœï¼š<br>è®¾ç½®äº†UIViewAutoresizingFlexibleLeftMargin<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m2hgw.jpg\" alt=\"autoresizingMask_FlexibleLeftMargin\"></p>\n<p>è¿˜æœ‰çš„å…¶ä»–å€¼å¯¹åº”çš„æ•ˆæœå›¾åœ¨ä¸Šæ–‡å·²ç»æ‘†å‡ºæ¥äº†ï¼Œè¯·å‚é˜…å“ˆ~~</p>"},{"title":"Hello World Again","date":"2017-02-17T12:04:10.000Z","typora-copy-images-to":"ipic","_content":"å†³å®šç»™åšå®¢çš„åå­—èµ·ä¸º**ç«¥å¹´CHILDHOOD**ã€‚\n\n**å¦‚ç«¥å¹´èˆ¬çº¯çœŸï¼Œçƒ­çˆ±ï¼Œä¸æœ½ã€‚**\n\nè¶ç€æœ€è¿‘æ²¡æœ‰åŠ¨åŠ›çœ‹ä¹¦ï¼Œåˆä¸æƒ³è„‘è¢‹ç”Ÿé”ˆï¼Œåˆçœ‹è…»äº†ä¹‹å‰Hexoçš„yiliaä¸»é¢˜ã€‚æ‰€ä»¥æ¢ä¸ªåšå®¢ä¸»é¢˜ï¼ŒHello World Againã€‚\n\n<!-- more -->\n\n## å¼€å§‹æ£é¼“\n\nä¸æ˜¯å‰ç«¯erè¦è‡ªå·±å†™ä¸ªä¸»é¢˜å‡ºæ¥è¿˜çœŸä¸æ˜¯ç®€å•çš„äº‹æƒ…ã€‚æ‰€ä»¥å€Ÿé‰´äº†hollowä¸»é¢˜ï¼Œå¹¶åœ¨å…¶ä¸Šè¿›è¡Œä¿®æ”¹ã€‚\n\n### ä¸»é¡µ\n\nä¸»é¡µå¤§è‡´ä¸Šæ²¡æœ‰åšå¤ªå¤šçš„ä¿®æ”¹ï¼Œå› ä¸ºä¸€å¼€å§‹å°±æ˜¯çœ‹ä¸Šè¿™ç§ç®€ç®€å•å•çš„ï¼Œæ²¡æœ‰å¤ªå¤šå¤æ‚æˆåˆ†çš„æ’ç‰ˆã€‚åŒå€¦äº†yiliaï¼Œç¬¬ä¸€æ˜¯ï¼šä¸æƒ³è¦å·¦å³ç‰ˆå¼çš„é¡µé¢ï¼Œæ˜¾å¾—å·¦ä¾§çš„èœå•æ æœ‰ç‚¹å–§å®¾å¤ºä¸»ã€‚ç¬¬äºŒæ˜¯ï¼šæ€»æŠŠäººè„¸ç•™åœ¨å·¦è¾¹æ˜¾çœ¼çš„ä½ç½®ï¼Œçº¯ç²¹çš„ä¸å–œæ¬¢ã€‚\n\nhollowä¸»é¢˜åªæ˜¯åŒ…å«äº†ä¸»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºæ–‡ç« åºåˆ—å’Œæ–‡ç« è¯¦æƒ…ã€‚å…¶ä»–çš„éƒ½æ²¡æœ‰ã€‚\n\n### Tags\n\nè¿›å…¥æ ‡ç­¾é¡µé¢åœ¨ä¸»é¡µå³ä¸Šè§’çš„ *äº•å·* æŒ‰é’®ï¼Œæ ‡ç­¾é¡µé¢æ˜¯æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ã€‚\n\nå› ä¸ºæš‚æ—¶ä¸æ”¯æŒç«™å†…æœç´¢ï¼ˆè¿˜åœ¨æ„æ€ä¸­...ï¼‰ï¼Œå¦‚æœè¦æ‰¾æŸä¸€ç¯‡æ–‡ç« éœ€è¦ä¸€é¡µé¡µåœ°ç¿»ï¼Œæ„Ÿè§‰ä¼šå¾ˆç¹çã€‚æ‰€ä»¥å»ºç«‹äº†ä¸ªæ ‡ç­¾é¡µé¢ã€‚\n\næˆ‘æ˜¯é€šè¿‡ä¿®æ”¹page.ejsæ¥è¾¾åˆ°ç›®çš„ã€‚\n\n``` html\n<section class=\"article-container\">\n<!-- Back Home -->\n<%- partial('_partial/backhome') %>\n\n<!-- Page Header -->\n<header class=\"intro-header\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\">\n                <div class=\"post-heading\">\n                    <h1>TAGS</h1>\n                </div>\n            </div>\n        </div>\n    </div>\n</header>\n\n<!-- Post Content -->\n<article>\n    <div class=\"container\">\n        <div class=\"row\">\n            <!-- Post Main Content -->\n            <div class=\"post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\">\n                <% site.tags.each(function(category){ %>\n                    <a class=\"category\" href=\"<%-category.name%>\"><%-category.name%></a>\n                <% }); %>\n            </div>\n        </div>\n    </div>\n</article>\n</section>\n<!-- Back to top -->\n<%- partial('_partial/backtop') %>\n```\n\nä¿®æ”¹å®Œpage.ejsåï¼Œæ‰§è¡Œ`hexo new page \"tags\"`å°±å¯ä»¥åˆ›å»ºtagsé¡µäº†ã€‚ç„¶åè°ƒæ•´æ ¼å¼å°±å¯ä»¥äº†ã€‚\n\n### Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­...ï¼‰\n\nè¿™ä¸ªé¡µé¢æ˜¯è‡ªå·±æ·»åŠ çš„ã€‚\n\nè¿™ä¸ªé¡µé¢æ˜¯æœ€å¤æ‚çš„ã€‚é¦–å…ˆHexoåªæ”¯æŒ`index`,`page`,`post`,`layout`,`archive`è¿™å‡ ç§è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€ä»¥ä¿®æ”¹äº†`page`åä½œä¸ºcategoryé¡µé¢ä¹‹åå°±ä¸èƒ½é€šè¿‡ä¿®æ”¹é¡¹ç›®é¡µé¢æ¨¡æ¿æ¥æ·»åŠ æ–°çš„è‡ªå®šä¹‰é¡µé¢äº†ã€‚\n\nä½†æ˜¯å¥½åœ¨Hexoè¿˜æ˜¯æ¯”è¾ƒäººæ€§åŒ–çš„ã€‚\n\né™¤äº†ä¿®æ”¹Hexoçš„æ¨¡æ¿ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è‡ªå®šä¹‰é¡µé¢\n\n1. å…ˆæ‰§è¡Œ`hexo new page \"xxx\"`ï¼Œåœ¨sourceä¸­å‡ºç°xxxæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰xxx.mdï¼Œç„¶ååœ¨xxx.mdå‰åŠ ä¸Šlayoutï¼šfalseï¼Œå¯ä»¥ç»•è¿‡Hexoè§£æï¼Œç›´æ¥å°†mdä¸­çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨mdé‡Œé¢å†™htmlä»£ç äº†ã€‚è¯¦è§[Hexoæ–‡æ¡£](https://hexo.io/zh-cn/docs/writing.html)\n2. æ‰§è¡Œ`hexo new page \"xxx\"`ï¼ŒåŒæ ·å¾—åˆ°xxxæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä½œä¸€ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­å°½æƒ…åˆ›å»ºhtmlï¼Œcssï¼Œjsï¼Œwhatever you wantã€‚ç„¶åè®°å¾—åœ¨åšå®¢çš„ä¸»_config.ymlä¸­çš„skip_renderé¡¹æ·»åŠ xxx/**ï¼Œå°±å¯ä»¥äº†ã€‚\n\n### è¯„è®º\n\nè¯„è®ºå°±ä¸åŠ å•¦ï¼Œæ¯•ç«Ÿæ¸…æ¸…çˆ½çˆ½è¿˜æ˜¯æœ€çˆ±å•Šã€‚\n\nè€Œä¸”å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆå¤šäººæ¥è¿‡è¿™ä¸ªåšå®¢ï¼Œç­‰ä»¥åæœ‰éœ€è¦å†åŠ ä¸Šè¯„è®ºå§ã€‚\n\nåŒå€¦äº†å¤šè¯´ç­‰è¯„è®ºç®¡ç†å¹³å°çš„è¯ï¼Œæ¨èä¸€ä¸ª [Gitment](https://github.com/imsun/gitment)ï¼Œè§‚æœ›äº†å¾ˆä¹…è¿˜æ˜¯è§‰å¾—è¿™ä¸ªæ¯”è¾ƒç®€æ´ï¼Œä¸éœ€è¦ä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå®ƒæ˜¯å°†è¯„è®ºæ”¾åœ¨Githubçš„issueé‡Œé¢ï¼Œå¾ˆé€‚åˆæ‰˜ç®¡åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç©ºé—´çš„åšå®¢ä½¿ç”¨ã€‚\n\næœ‰é—®é¢˜åœ¨å¾®åšç­‰ç¤¾äº¤å¹³å°è”ç³»å§ã€‚\n\n### åŸŸåå’Œå…¨ç«™HTTPS\n\nåŸŸååœ¨ä¸‡ç½‘ä¸Šè´­ä¹°ï¼Œå®åè®¤è¯ï¼Œè§£æåˆ°github pageã€‚éƒ½æ˜¯å¾ˆç®€å•çš„æ“ä½œã€‚\n\nåœ¨å®ç°å…¨ç«™HTTPSçš„æ—¶å€™èµ°äº†ä¸å°‘å¼¯è·¯ã€‚ä¸»è¦æƒ³å®ç°çš„æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š\n\n- [x] å…¨ç«™å°ç»¿é”\n\n\n- [x] æ€•HTTPSæ…¢ï¼Œæ‰€ä»¥ä¸ŠCDN\n\n\n- [ ] ~~è‡ªå®šä¹‰SSLè¯ä¹¦~~ (æ— è§£)\n\nå› ä¸ºåšå®¢æ˜¯æ‰˜ç®¡åœ¨Githubä¸Šçš„ï¼Œè¦å¼ºåˆ¶HTTPSï¼ŒCodingå¯ä»¥åšåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦å†éƒ¨ç½²ä¸€å¥—åˆ°Codingä¸Šã€‚æ‰€ä»¥å°±æƒ³åˆ°ä½¿ç”¨CDNæ¥å®ç°ï¼Œé¡ºä¾¿è§£å†³ç½‘é¡µçš„è®¿é—®é€Ÿåº¦é—®é¢˜ã€‚\n\nCDNæœ‰å›½å†…å‡ å®¶äº‘æœåŠ¡å‚å•†æœ‰å…è´¹æµé‡ï¼Œåˆæ‹äº‘ã€è…¾è®¯äº‘ç­‰ã€‚éƒ½æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰SSLè¯ä¹¦ã€‚ä½†æˆ‘çš„åšå®¢æ²¡æœ‰å›½å†…çš„æœåŠ¡å™¨ç©ºé—´ï¼Œè‡ªç„¶æ²¡æœ‰ç§é’¥ï¼Œæ— æ³•ç”³è¯·è¯ä¹¦ã€‚\n\nå·¥ä¿¡éƒ¨çš„å¤‡æ¡ˆç³»ç»Ÿè™½ç„¶å‡å°‘äº†å¾ˆå¤šé»‘ç½‘ç«™ï¼Œä½†ä¹Ÿè®©æˆ‘ä»¬è¿™äº›åªæœ‰åŸŸåæ²¡æœ‰ç©ºé—´çš„äººå¾’å¢äº†è®¸å¤šéº»çƒ¦ã€‚æ‰€ä»¥æœ€åé€‰äº†å›½å¤–çš„CDNå‚å•†[Cloudflare](https://www.cloudflare.com/)æ¥è§£ææˆ‘çš„åŸŸåï¼ŒCloudflareå’Œç™¾åº¦äº‘åˆä½œï¼Œåœ¨å›½å†…ä¹Ÿæœ‰CDNæœåŠ¡å™¨ï¼Œå…ˆè¯•è¯•é€Ÿåº¦å¦‚ä½•ï¼Œä¸”å…è´¹ç‰ˆæœ¬åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ï¼Œé…ç½®ä¹Ÿä¸éš¾ã€‚\n\nåœ¨CloudflareæˆåŠŸè§£æåï¼Œåœ¨Page rulesä¸­å®šä¹‰é‡å®šå‘ï¼Œå°†`http`301æ°¸ä¹…é‡å®šå‘åˆ°`https`ã€‚Cloudflareè¿˜å¯ä»¥è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œè®¾ç½®ç”¨æˆ·ä¸DNSã€DNSä¸æˆ‘ä»¬åšå®¢çš„æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦ä½¿ç”¨SSLï¼Œå‹ç¼©CSSã€JSï¼Œæ°¸ä¹…åœ¨çº¿ï¼ˆä¸å®šæ—¶å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼‰ï¼Œå®‰å…¨çº§åˆ«ï¼ˆé˜²DDoSï¼‰ç­‰ã€‚\n\nè®¾ç½®å®Œåï¼Œçœ‹åˆ°äº†ä¹…è¿çš„å°ç»¿é”ï¼š\n\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rwfkq.png)\n\nä½†æ˜¯ï¼Œç‚¹å‡»æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/dw1rg.png)\n\nè®¿é—®æ—¶å°±æœ‰ã€å¹¶éå®Œæˆå®‰å…¨ã€çš„æç¤ºï¼Œè¿™æ¶‰åŠä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾åºŠï¼Œæˆ‘çš„å›¾ç‰‡èµ„æºæ˜¯æ‰˜ç®¡åœ¨ä¸ƒç‰›äº‘ä¸Šçš„ï¼Œä¹‹å‰ä¸ƒç‰›äº‘è¿˜æä¾›`https`çš„äºŒçº§åŸŸåï¼Œä½†ç°åœ¨å·²ç»å…³é—­ï¼Œè¦ä½¿ç”¨`https`éœ€è¦è‡ªå®šä¹‰åŸŸåï¼Œè¿™åˆå›åˆ°ä¸Šé¢æ‰€è¯´çš„å¤‡æ¡ˆé—®é¢˜ã€‚çº ç»“ä¹‹ä½™ï¼Œå°†ä¸ƒç‰›äº‘è¿ç§»åˆ°è…¾è®¯äº‘COSä¸Šï¼Œè…¾è®¯äº‘COSå°±æœ‰æ”¯æŒSSLçš„å›¾åºŠæµ‹è¯•åŸŸåï¼Œä¸”æä¾›CDNæœåŠ¡ï¼ŒåŒæ ·æ˜¯æ¯æœˆå…è´¹ç©ºé—´ï¼Œå…è´¹æµé‡ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå°ç«™æ¥è¯´ï¼Œè¶³å¤Ÿäº†ã€‚\n\næ‰€ä»¥ï¼ŒCongratulations~ğŸ˜„ğŸ˜„ğŸ˜„ğŸ‰ğŸ‰ğŸ‰~\n\n## å†™åœ¨åé¢\n\næ€»æœ‰ä¸€äº›å¥‡æ€å¦™æƒ³ï¼Œæ‰€ä»¥æœ¬æ–‡ä»åœ¨ä¸æ–­æ›´æ–°...\n\nåšå®¢æ˜¯åœ¨hollowä¸»é¢˜çš„[åˆ›ä½œå®¶](https://github.com/zchen9/hexo-theme-hollow)çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œå¯¹æ­¤è¡¨ç¤ºæœ€çœŸæŒšçš„æ„Ÿè°¢ï¼Œå¼€æºä¸‡å²ã€‚\n\nå¦‚æœè¦è‡ªå·±å†™ä¸»é¢˜ï¼Œ[Hexoæ–‡æ¡£](https://hexo.io/zh-cn/docs/writing.html)è®°å¾—å¤šçœ‹çœ‹ã€‚\n\nå¯¹äºåŸŸåè´­ä¹°å’ŒCloudflareã€è…¾è®¯äº‘çš„ä½¿ç”¨ï¼ŒGoogleå¯ä»¥æœåˆ°è®¸å¤šç²¾å½©ä¸”è¯¦ç»†çš„æ–‡ç« ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ã€‚\n\n### å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\n\n* è™½ç„¶æ˜¯Node.jså°ç™½ï¼Œä½†å‹‰å¼ºåšå¾—å‡ºæ¥ï¼Œå› ä¸ºä¸€è¡Œnodejsçš„ä»£ç éƒ½æ²¡å†™åˆ°\n* HTMLã€CSSã€JSå¯ä»¥åšå¾ˆå¤šäº‹æƒ…\n* éœ€è¦å­¦ä¹ ä¸‹ejsã€stylusï¼Œéƒ½ä¸æ˜¯å¾ˆéš¾\n* å¤šçœ‹çœ‹åˆ«äººçš„ä»£ç ï¼Œå¾ˆå—å¯å‘","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World Again\ndate: 2017-2-17 20:04:10\ntags: \n- Mood\ntypora-copy-images-to: ipic\n---\nå†³å®šç»™åšå®¢çš„åå­—èµ·ä¸º**ç«¥å¹´CHILDHOOD**ã€‚\n\n**å¦‚ç«¥å¹´èˆ¬çº¯çœŸï¼Œçƒ­çˆ±ï¼Œä¸æœ½ã€‚**\n\nè¶ç€æœ€è¿‘æ²¡æœ‰åŠ¨åŠ›çœ‹ä¹¦ï¼Œåˆä¸æƒ³è„‘è¢‹ç”Ÿé”ˆï¼Œåˆçœ‹è…»äº†ä¹‹å‰Hexoçš„yiliaä¸»é¢˜ã€‚æ‰€ä»¥æ¢ä¸ªåšå®¢ä¸»é¢˜ï¼ŒHello World Againã€‚\n\n<!-- more -->\n\n## å¼€å§‹æ£é¼“\n\nä¸æ˜¯å‰ç«¯erè¦è‡ªå·±å†™ä¸ªä¸»é¢˜å‡ºæ¥è¿˜çœŸä¸æ˜¯ç®€å•çš„äº‹æƒ…ã€‚æ‰€ä»¥å€Ÿé‰´äº†hollowä¸»é¢˜ï¼Œå¹¶åœ¨å…¶ä¸Šè¿›è¡Œä¿®æ”¹ã€‚\n\n### ä¸»é¡µ\n\nä¸»é¡µå¤§è‡´ä¸Šæ²¡æœ‰åšå¤ªå¤šçš„ä¿®æ”¹ï¼Œå› ä¸ºä¸€å¼€å§‹å°±æ˜¯çœ‹ä¸Šè¿™ç§ç®€ç®€å•å•çš„ï¼Œæ²¡æœ‰å¤ªå¤šå¤æ‚æˆåˆ†çš„æ’ç‰ˆã€‚åŒå€¦äº†yiliaï¼Œç¬¬ä¸€æ˜¯ï¼šä¸æƒ³è¦å·¦å³ç‰ˆå¼çš„é¡µé¢ï¼Œæ˜¾å¾—å·¦ä¾§çš„èœå•æ æœ‰ç‚¹å–§å®¾å¤ºä¸»ã€‚ç¬¬äºŒæ˜¯ï¼šæ€»æŠŠäººè„¸ç•™åœ¨å·¦è¾¹æ˜¾çœ¼çš„ä½ç½®ï¼Œçº¯ç²¹çš„ä¸å–œæ¬¢ã€‚\n\nhollowä¸»é¢˜åªæ˜¯åŒ…å«äº†ä¸»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºæ–‡ç« åºåˆ—å’Œæ–‡ç« è¯¦æƒ…ã€‚å…¶ä»–çš„éƒ½æ²¡æœ‰ã€‚\n\n### Tags\n\nè¿›å…¥æ ‡ç­¾é¡µé¢åœ¨ä¸»é¡µå³ä¸Šè§’çš„ *äº•å·* æŒ‰é’®ï¼Œæ ‡ç­¾é¡µé¢æ˜¯æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ã€‚\n\nå› ä¸ºæš‚æ—¶ä¸æ”¯æŒç«™å†…æœç´¢ï¼ˆè¿˜åœ¨æ„æ€ä¸­...ï¼‰ï¼Œå¦‚æœè¦æ‰¾æŸä¸€ç¯‡æ–‡ç« éœ€è¦ä¸€é¡µé¡µåœ°ç¿»ï¼Œæ„Ÿè§‰ä¼šå¾ˆç¹çã€‚æ‰€ä»¥å»ºç«‹äº†ä¸ªæ ‡ç­¾é¡µé¢ã€‚\n\næˆ‘æ˜¯é€šè¿‡ä¿®æ”¹page.ejsæ¥è¾¾åˆ°ç›®çš„ã€‚\n\n``` html\n<section class=\"article-container\">\n<!-- Back Home -->\n<%- partial('_partial/backhome') %>\n\n<!-- Page Header -->\n<header class=\"intro-header\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\">\n                <div class=\"post-heading\">\n                    <h1>TAGS</h1>\n                </div>\n            </div>\n        </div>\n    </div>\n</header>\n\n<!-- Post Content -->\n<article>\n    <div class=\"container\">\n        <div class=\"row\">\n            <!-- Post Main Content -->\n            <div class=\"post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\">\n                <% site.tags.each(function(category){ %>\n                    <a class=\"category\" href=\"<%-category.name%>\"><%-category.name%></a>\n                <% }); %>\n            </div>\n        </div>\n    </div>\n</article>\n</section>\n<!-- Back to top -->\n<%- partial('_partial/backtop') %>\n```\n\nä¿®æ”¹å®Œpage.ejsåï¼Œæ‰§è¡Œ`hexo new page \"tags\"`å°±å¯ä»¥åˆ›å»ºtagsé¡µäº†ã€‚ç„¶åè°ƒæ•´æ ¼å¼å°±å¯ä»¥äº†ã€‚\n\n### Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­...ï¼‰\n\nè¿™ä¸ªé¡µé¢æ˜¯è‡ªå·±æ·»åŠ çš„ã€‚\n\nè¿™ä¸ªé¡µé¢æ˜¯æœ€å¤æ‚çš„ã€‚é¦–å…ˆHexoåªæ”¯æŒ`index`,`page`,`post`,`layout`,`archive`è¿™å‡ ç§è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€ä»¥ä¿®æ”¹äº†`page`åä½œä¸ºcategoryé¡µé¢ä¹‹åå°±ä¸èƒ½é€šè¿‡ä¿®æ”¹é¡¹ç›®é¡µé¢æ¨¡æ¿æ¥æ·»åŠ æ–°çš„è‡ªå®šä¹‰é¡µé¢äº†ã€‚\n\nä½†æ˜¯å¥½åœ¨Hexoè¿˜æ˜¯æ¯”è¾ƒäººæ€§åŒ–çš„ã€‚\n\né™¤äº†ä¿®æ”¹Hexoçš„æ¨¡æ¿ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è‡ªå®šä¹‰é¡µé¢\n\n1. å…ˆæ‰§è¡Œ`hexo new page \"xxx\"`ï¼Œåœ¨sourceä¸­å‡ºç°xxxæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰xxx.mdï¼Œç„¶ååœ¨xxx.mdå‰åŠ ä¸Šlayoutï¼šfalseï¼Œå¯ä»¥ç»•è¿‡Hexoè§£æï¼Œç›´æ¥å°†mdä¸­çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨mdé‡Œé¢å†™htmlä»£ç äº†ã€‚è¯¦è§[Hexoæ–‡æ¡£](https://hexo.io/zh-cn/docs/writing.html)\n2. æ‰§è¡Œ`hexo new page \"xxx\"`ï¼ŒåŒæ ·å¾—åˆ°xxxæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä½œä¸€ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­å°½æƒ…åˆ›å»ºhtmlï¼Œcssï¼Œjsï¼Œwhatever you wantã€‚ç„¶åè®°å¾—åœ¨åšå®¢çš„ä¸»_config.ymlä¸­çš„skip_renderé¡¹æ·»åŠ xxx/**ï¼Œå°±å¯ä»¥äº†ã€‚\n\n### è¯„è®º\n\nè¯„è®ºå°±ä¸åŠ å•¦ï¼Œæ¯•ç«Ÿæ¸…æ¸…çˆ½çˆ½è¿˜æ˜¯æœ€çˆ±å•Šã€‚\n\nè€Œä¸”å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆå¤šäººæ¥è¿‡è¿™ä¸ªåšå®¢ï¼Œç­‰ä»¥åæœ‰éœ€è¦å†åŠ ä¸Šè¯„è®ºå§ã€‚\n\nåŒå€¦äº†å¤šè¯´ç­‰è¯„è®ºç®¡ç†å¹³å°çš„è¯ï¼Œæ¨èä¸€ä¸ª [Gitment](https://github.com/imsun/gitment)ï¼Œè§‚æœ›äº†å¾ˆä¹…è¿˜æ˜¯è§‰å¾—è¿™ä¸ªæ¯”è¾ƒç®€æ´ï¼Œä¸éœ€è¦ä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå®ƒæ˜¯å°†è¯„è®ºæ”¾åœ¨Githubçš„issueé‡Œé¢ï¼Œå¾ˆé€‚åˆæ‰˜ç®¡åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç©ºé—´çš„åšå®¢ä½¿ç”¨ã€‚\n\næœ‰é—®é¢˜åœ¨å¾®åšç­‰ç¤¾äº¤å¹³å°è”ç³»å§ã€‚\n\n### åŸŸåå’Œå…¨ç«™HTTPS\n\nåŸŸååœ¨ä¸‡ç½‘ä¸Šè´­ä¹°ï¼Œå®åè®¤è¯ï¼Œè§£æåˆ°github pageã€‚éƒ½æ˜¯å¾ˆç®€å•çš„æ“ä½œã€‚\n\nåœ¨å®ç°å…¨ç«™HTTPSçš„æ—¶å€™èµ°äº†ä¸å°‘å¼¯è·¯ã€‚ä¸»è¦æƒ³å®ç°çš„æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š\n\n- [x] å…¨ç«™å°ç»¿é”\n\n\n- [x] æ€•HTTPSæ…¢ï¼Œæ‰€ä»¥ä¸ŠCDN\n\n\n- [ ] ~~è‡ªå®šä¹‰SSLè¯ä¹¦~~ (æ— è§£)\n\nå› ä¸ºåšå®¢æ˜¯æ‰˜ç®¡åœ¨Githubä¸Šçš„ï¼Œè¦å¼ºåˆ¶HTTPSï¼ŒCodingå¯ä»¥åšåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦å†éƒ¨ç½²ä¸€å¥—åˆ°Codingä¸Šã€‚æ‰€ä»¥å°±æƒ³åˆ°ä½¿ç”¨CDNæ¥å®ç°ï¼Œé¡ºä¾¿è§£å†³ç½‘é¡µçš„è®¿é—®é€Ÿåº¦é—®é¢˜ã€‚\n\nCDNæœ‰å›½å†…å‡ å®¶äº‘æœåŠ¡å‚å•†æœ‰å…è´¹æµé‡ï¼Œåˆæ‹äº‘ã€è…¾è®¯äº‘ç­‰ã€‚éƒ½æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰SSLè¯ä¹¦ã€‚ä½†æˆ‘çš„åšå®¢æ²¡æœ‰å›½å†…çš„æœåŠ¡å™¨ç©ºé—´ï¼Œè‡ªç„¶æ²¡æœ‰ç§é’¥ï¼Œæ— æ³•ç”³è¯·è¯ä¹¦ã€‚\n\nå·¥ä¿¡éƒ¨çš„å¤‡æ¡ˆç³»ç»Ÿè™½ç„¶å‡å°‘äº†å¾ˆå¤šé»‘ç½‘ç«™ï¼Œä½†ä¹Ÿè®©æˆ‘ä»¬è¿™äº›åªæœ‰åŸŸåæ²¡æœ‰ç©ºé—´çš„äººå¾’å¢äº†è®¸å¤šéº»çƒ¦ã€‚æ‰€ä»¥æœ€åé€‰äº†å›½å¤–çš„CDNå‚å•†[Cloudflare](https://www.cloudflare.com/)æ¥è§£ææˆ‘çš„åŸŸåï¼ŒCloudflareå’Œç™¾åº¦äº‘åˆä½œï¼Œåœ¨å›½å†…ä¹Ÿæœ‰CDNæœåŠ¡å™¨ï¼Œå…ˆè¯•è¯•é€Ÿåº¦å¦‚ä½•ï¼Œä¸”å…è´¹ç‰ˆæœ¬åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ï¼Œé…ç½®ä¹Ÿä¸éš¾ã€‚\n\nåœ¨CloudflareæˆåŠŸè§£æåï¼Œåœ¨Page rulesä¸­å®šä¹‰é‡å®šå‘ï¼Œå°†`http`301æ°¸ä¹…é‡å®šå‘åˆ°`https`ã€‚Cloudflareè¿˜å¯ä»¥è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œè®¾ç½®ç”¨æˆ·ä¸DNSã€DNSä¸æˆ‘ä»¬åšå®¢çš„æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦ä½¿ç”¨SSLï¼Œå‹ç¼©CSSã€JSï¼Œæ°¸ä¹…åœ¨çº¿ï¼ˆä¸å®šæ—¶å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼‰ï¼Œå®‰å…¨çº§åˆ«ï¼ˆé˜²DDoSï¼‰ç­‰ã€‚\n\nè®¾ç½®å®Œåï¼Œçœ‹åˆ°äº†ä¹…è¿çš„å°ç»¿é”ï¼š\n\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rwfkq.png)\n\nä½†æ˜¯ï¼Œç‚¹å‡»æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/dw1rg.png)\n\nè®¿é—®æ—¶å°±æœ‰ã€å¹¶éå®Œæˆå®‰å…¨ã€çš„æç¤ºï¼Œè¿™æ¶‰åŠä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾åºŠï¼Œæˆ‘çš„å›¾ç‰‡èµ„æºæ˜¯æ‰˜ç®¡åœ¨ä¸ƒç‰›äº‘ä¸Šçš„ï¼Œä¹‹å‰ä¸ƒç‰›äº‘è¿˜æä¾›`https`çš„äºŒçº§åŸŸåï¼Œä½†ç°åœ¨å·²ç»å…³é—­ï¼Œè¦ä½¿ç”¨`https`éœ€è¦è‡ªå®šä¹‰åŸŸåï¼Œè¿™åˆå›åˆ°ä¸Šé¢æ‰€è¯´çš„å¤‡æ¡ˆé—®é¢˜ã€‚çº ç»“ä¹‹ä½™ï¼Œå°†ä¸ƒç‰›äº‘è¿ç§»åˆ°è…¾è®¯äº‘COSä¸Šï¼Œè…¾è®¯äº‘COSå°±æœ‰æ”¯æŒSSLçš„å›¾åºŠæµ‹è¯•åŸŸåï¼Œä¸”æä¾›CDNæœåŠ¡ï¼ŒåŒæ ·æ˜¯æ¯æœˆå…è´¹ç©ºé—´ï¼Œå…è´¹æµé‡ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå°ç«™æ¥è¯´ï¼Œè¶³å¤Ÿäº†ã€‚\n\næ‰€ä»¥ï¼ŒCongratulations~ğŸ˜„ğŸ˜„ğŸ˜„ğŸ‰ğŸ‰ğŸ‰~\n\n## å†™åœ¨åé¢\n\næ€»æœ‰ä¸€äº›å¥‡æ€å¦™æƒ³ï¼Œæ‰€ä»¥æœ¬æ–‡ä»åœ¨ä¸æ–­æ›´æ–°...\n\nåšå®¢æ˜¯åœ¨hollowä¸»é¢˜çš„[åˆ›ä½œå®¶](https://github.com/zchen9/hexo-theme-hollow)çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œå¯¹æ­¤è¡¨ç¤ºæœ€çœŸæŒšçš„æ„Ÿè°¢ï¼Œå¼€æºä¸‡å²ã€‚\n\nå¦‚æœè¦è‡ªå·±å†™ä¸»é¢˜ï¼Œ[Hexoæ–‡æ¡£](https://hexo.io/zh-cn/docs/writing.html)è®°å¾—å¤šçœ‹çœ‹ã€‚\n\nå¯¹äºåŸŸåè´­ä¹°å’ŒCloudflareã€è…¾è®¯äº‘çš„ä½¿ç”¨ï¼ŒGoogleå¯ä»¥æœåˆ°è®¸å¤šç²¾å½©ä¸”è¯¦ç»†çš„æ–‡ç« ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ã€‚\n\n### å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\n\n* è™½ç„¶æ˜¯Node.jså°ç™½ï¼Œä½†å‹‰å¼ºåšå¾—å‡ºæ¥ï¼Œå› ä¸ºä¸€è¡Œnodejsçš„ä»£ç éƒ½æ²¡å†™åˆ°\n* HTMLã€CSSã€JSå¯ä»¥åšå¾ˆå¤šäº‹æƒ…\n* éœ€è¦å­¦ä¹ ä¸‹ejsã€stylusï¼Œéƒ½ä¸æ˜¯å¾ˆéš¾\n* å¤šçœ‹çœ‹åˆ«äººçš„ä»£ç ï¼Œå¾ˆå—å¯å‘","slug":"hello-world","published":1,"updated":"2018-03-29T01:44:53.522Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12at0002cqy86pbdojhs","content":"<p>å†³å®šç»™åšå®¢çš„åå­—èµ·ä¸º<strong>ç«¥å¹´CHILDHOOD</strong>ã€‚</p>\n<p><strong>å¦‚ç«¥å¹´èˆ¬çº¯çœŸï¼Œçƒ­çˆ±ï¼Œä¸æœ½ã€‚</strong></p>\n<p>è¶ç€æœ€è¿‘æ²¡æœ‰åŠ¨åŠ›çœ‹ä¹¦ï¼Œåˆä¸æƒ³è„‘è¢‹ç”Ÿé”ˆï¼Œåˆçœ‹è…»äº†ä¹‹å‰Hexoçš„yiliaä¸»é¢˜ã€‚æ‰€ä»¥æ¢ä¸ªåšå®¢ä¸»é¢˜ï¼ŒHello World Againã€‚</p>\n<a id=\"more\"></a>\n<h2 id=\"å¼€å§‹æ£é¼“\"><a href=\"#å¼€å§‹æ£é¼“\" class=\"headerlink\" title=\"å¼€å§‹æ£é¼“\"></a>å¼€å§‹æ£é¼“</h2><p>ä¸æ˜¯å‰ç«¯erè¦è‡ªå·±å†™ä¸ªä¸»é¢˜å‡ºæ¥è¿˜çœŸä¸æ˜¯ç®€å•çš„äº‹æƒ…ã€‚æ‰€ä»¥å€Ÿé‰´äº†hollowä¸»é¢˜ï¼Œå¹¶åœ¨å…¶ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p>\n<h3 id=\"ä¸»é¡µ\"><a href=\"#ä¸»é¡µ\" class=\"headerlink\" title=\"ä¸»é¡µ\"></a>ä¸»é¡µ</h3><p>ä¸»é¡µå¤§è‡´ä¸Šæ²¡æœ‰åšå¤ªå¤šçš„ä¿®æ”¹ï¼Œå› ä¸ºä¸€å¼€å§‹å°±æ˜¯çœ‹ä¸Šè¿™ç§ç®€ç®€å•å•çš„ï¼Œæ²¡æœ‰å¤ªå¤šå¤æ‚æˆåˆ†çš„æ’ç‰ˆã€‚åŒå€¦äº†yiliaï¼Œç¬¬ä¸€æ˜¯ï¼šä¸æƒ³è¦å·¦å³ç‰ˆå¼çš„é¡µé¢ï¼Œæ˜¾å¾—å·¦ä¾§çš„èœå•æ æœ‰ç‚¹å–§å®¾å¤ºä¸»ã€‚ç¬¬äºŒæ˜¯ï¼šæ€»æŠŠäººè„¸ç•™åœ¨å·¦è¾¹æ˜¾çœ¼çš„ä½ç½®ï¼Œçº¯ç²¹çš„ä¸å–œæ¬¢ã€‚</p>\n<p>hollowä¸»é¢˜åªæ˜¯åŒ…å«äº†ä¸»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºæ–‡ç« åºåˆ—å’Œæ–‡ç« è¯¦æƒ…ã€‚å…¶ä»–çš„éƒ½æ²¡æœ‰ã€‚</p>\n<h3 id=\"Tags\"><a href=\"#Tags\" class=\"headerlink\" title=\"Tags\"></a>Tags</h3><p>è¿›å…¥æ ‡ç­¾é¡µé¢åœ¨ä¸»é¡µå³ä¸Šè§’çš„ <em>äº•å·</em> æŒ‰é’®ï¼Œæ ‡ç­¾é¡µé¢æ˜¯æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ã€‚</p>\n<p>å› ä¸ºæš‚æ—¶ä¸æ”¯æŒç«™å†…æœç´¢ï¼ˆè¿˜åœ¨æ„æ€ä¸­â€¦ï¼‰ï¼Œå¦‚æœè¦æ‰¾æŸä¸€ç¯‡æ–‡ç« éœ€è¦ä¸€é¡µé¡µåœ°ç¿»ï¼Œæ„Ÿè§‰ä¼šå¾ˆç¹çã€‚æ‰€ä»¥å»ºç«‹äº†ä¸ªæ ‡ç­¾é¡µé¢ã€‚</p>\n<p>æˆ‘æ˜¯é€šè¿‡ä¿®æ”¹page.ejsæ¥è¾¾åˆ°ç›®çš„ã€‚</p>\n<pre><code class=\"html\">&lt;section class=&quot;article-container&quot;&gt;\n&lt;!-- Back Home --&gt;\n&lt;%- partial(&#39;_partial/backhome&#39;) %&gt;\n\n&lt;!-- Page Header --&gt;\n&lt;header class=&quot;intro-header&quot;&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1&quot;&gt;\n                &lt;div class=&quot;post-heading&quot;&gt;\n                    &lt;h1&gt;TAGS&lt;/h1&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/header&gt;\n\n&lt;!-- Post Content --&gt;\n&lt;article&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;!-- Post Main Content --&gt;\n            &lt;div class=&quot;post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1&quot;&gt;\n                &lt;% site.tags.each(function(category){ %&gt;\n                    &lt;a class=&quot;category&quot; href=&quot;&lt;%-category.name%&gt;&quot;&gt;&lt;%-category.name%&gt;&lt;/a&gt;\n                &lt;% }); %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/article&gt;\n&lt;/section&gt;\n&lt;!-- Back to top --&gt;\n&lt;%- partial(&#39;_partial/backtop&#39;) %&gt;\n</code></pre>\n<p>ä¿®æ”¹å®Œpage.ejsåï¼Œæ‰§è¡Œ<code>hexo new page &quot;tags&quot;</code>å°±å¯ä»¥åˆ›å»ºtagsé¡µäº†ã€‚ç„¶åè°ƒæ•´æ ¼å¼å°±å¯ä»¥äº†ã€‚</p>\n<h3 id=\"Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\"><a href=\"#Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\" class=\"headerlink\" title=\"Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\"></a>Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰</h3><p>è¿™ä¸ªé¡µé¢æ˜¯è‡ªå·±æ·»åŠ çš„ã€‚</p>\n<p>è¿™ä¸ªé¡µé¢æ˜¯æœ€å¤æ‚çš„ã€‚é¦–å…ˆHexoåªæ”¯æŒ<code>index</code>,<code>page</code>,<code>post</code>,<code>layout</code>,<code>archive</code>è¿™å‡ ç§è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€ä»¥ä¿®æ”¹äº†<code>page</code>åä½œä¸ºcategoryé¡µé¢ä¹‹åå°±ä¸èƒ½é€šè¿‡ä¿®æ”¹é¡¹ç›®é¡µé¢æ¨¡æ¿æ¥æ·»åŠ æ–°çš„è‡ªå®šä¹‰é¡µé¢äº†ã€‚</p>\n<p>ä½†æ˜¯å¥½åœ¨Hexoè¿˜æ˜¯æ¯”è¾ƒäººæ€§åŒ–çš„ã€‚</p>\n<p>é™¤äº†ä¿®æ”¹Hexoçš„æ¨¡æ¿ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è‡ªå®šä¹‰é¡µé¢</p>\n<ol>\n<li>å…ˆæ‰§è¡Œ<code>hexo new page &quot;xxx&quot;</code>ï¼Œåœ¨sourceä¸­å‡ºç°xxxæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰xxx.mdï¼Œç„¶ååœ¨xxx.mdå‰åŠ ä¸Šlayoutï¼šfalseï¼Œå¯ä»¥ç»•è¿‡Hexoè§£æï¼Œç›´æ¥å°†mdä¸­çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨mdé‡Œé¢å†™htmlä»£ç äº†ã€‚è¯¦è§<a href=\"https://hexo.io/zh-cn/docs/writing.html\" target=\"_blank\" rel=\"external\">Hexoæ–‡æ¡£</a></li>\n<li>æ‰§è¡Œ<code>hexo new page &quot;xxx&quot;</code>ï¼ŒåŒæ ·å¾—åˆ°xxxæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä½œä¸€ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­å°½æƒ…åˆ›å»ºhtmlï¼Œcssï¼Œjsï¼Œwhatever you wantã€‚ç„¶åè®°å¾—åœ¨åšå®¢çš„ä¸»_config.ymlä¸­çš„skip_renderé¡¹æ·»åŠ xxx/**ï¼Œå°±å¯ä»¥äº†ã€‚</li>\n</ol>\n<h3 id=\"è¯„è®º\"><a href=\"#è¯„è®º\" class=\"headerlink\" title=\"è¯„è®º\"></a>è¯„è®º</h3><p>è¯„è®ºå°±ä¸åŠ å•¦ï¼Œæ¯•ç«Ÿæ¸…æ¸…çˆ½çˆ½è¿˜æ˜¯æœ€çˆ±å•Šã€‚</p>\n<p>è€Œä¸”å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆå¤šäººæ¥è¿‡è¿™ä¸ªåšå®¢ï¼Œç­‰ä»¥åæœ‰éœ€è¦å†åŠ ä¸Šè¯„è®ºå§ã€‚</p>\n<p>åŒå€¦äº†å¤šè¯´ç­‰è¯„è®ºç®¡ç†å¹³å°çš„è¯ï¼Œæ¨èä¸€ä¸ª <a href=\"https://github.com/imsun/gitment\" target=\"_blank\" rel=\"external\">Gitment</a>ï¼Œè§‚æœ›äº†å¾ˆä¹…è¿˜æ˜¯è§‰å¾—è¿™ä¸ªæ¯”è¾ƒç®€æ´ï¼Œä¸éœ€è¦ä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå®ƒæ˜¯å°†è¯„è®ºæ”¾åœ¨Githubçš„issueé‡Œé¢ï¼Œå¾ˆé€‚åˆæ‰˜ç®¡åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç©ºé—´çš„åšå®¢ä½¿ç”¨ã€‚</p>\n<p>æœ‰é—®é¢˜åœ¨å¾®åšç­‰ç¤¾äº¤å¹³å°è”ç³»å§ã€‚</p>\n<h3 id=\"åŸŸåå’Œå…¨ç«™HTTPS\"><a href=\"#åŸŸåå’Œå…¨ç«™HTTPS\" class=\"headerlink\" title=\"åŸŸåå’Œå…¨ç«™HTTPS\"></a>åŸŸåå’Œå…¨ç«™HTTPS</h3><p>åŸŸååœ¨ä¸‡ç½‘ä¸Šè´­ä¹°ï¼Œå®åè®¤è¯ï¼Œè§£æåˆ°github pageã€‚éƒ½æ˜¯å¾ˆç®€å•çš„æ“ä½œã€‚</p>\n<p>åœ¨å®ç°å…¨ç«™HTTPSçš„æ—¶å€™èµ°äº†ä¸å°‘å¼¯è·¯ã€‚ä¸»è¦æƒ³å®ç°çš„æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li>[x] å…¨ç«™å°ç»¿é”</li>\n</ul>\n<ul>\n<li>[x] æ€•HTTPSæ…¢ï¼Œæ‰€ä»¥ä¸ŠCDN</li>\n</ul>\n<ul>\n<li>[ ] <del>è‡ªå®šä¹‰SSLè¯ä¹¦</del> (æ— è§£)</li>\n</ul>\n<p>å› ä¸ºåšå®¢æ˜¯æ‰˜ç®¡åœ¨Githubä¸Šçš„ï¼Œè¦å¼ºåˆ¶HTTPSï¼ŒCodingå¯ä»¥åšåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦å†éƒ¨ç½²ä¸€å¥—åˆ°Codingä¸Šã€‚æ‰€ä»¥å°±æƒ³åˆ°ä½¿ç”¨CDNæ¥å®ç°ï¼Œé¡ºä¾¿è§£å†³ç½‘é¡µçš„è®¿é—®é€Ÿåº¦é—®é¢˜ã€‚</p>\n<p>CDNæœ‰å›½å†…å‡ å®¶äº‘æœåŠ¡å‚å•†æœ‰å…è´¹æµé‡ï¼Œåˆæ‹äº‘ã€è…¾è®¯äº‘ç­‰ã€‚éƒ½æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰SSLè¯ä¹¦ã€‚ä½†æˆ‘çš„åšå®¢æ²¡æœ‰å›½å†…çš„æœåŠ¡å™¨ç©ºé—´ï¼Œè‡ªç„¶æ²¡æœ‰ç§é’¥ï¼Œæ— æ³•ç”³è¯·è¯ä¹¦ã€‚</p>\n<p>å·¥ä¿¡éƒ¨çš„å¤‡æ¡ˆç³»ç»Ÿè™½ç„¶å‡å°‘äº†å¾ˆå¤šé»‘ç½‘ç«™ï¼Œä½†ä¹Ÿè®©æˆ‘ä»¬è¿™äº›åªæœ‰åŸŸåæ²¡æœ‰ç©ºé—´çš„äººå¾’å¢äº†è®¸å¤šéº»çƒ¦ã€‚æ‰€ä»¥æœ€åé€‰äº†å›½å¤–çš„CDNå‚å•†<a href=\"https://www.cloudflare.com/\" target=\"_blank\" rel=\"external\">Cloudflare</a>æ¥è§£ææˆ‘çš„åŸŸåï¼ŒCloudflareå’Œç™¾åº¦äº‘åˆä½œï¼Œåœ¨å›½å†…ä¹Ÿæœ‰CDNæœåŠ¡å™¨ï¼Œå…ˆè¯•è¯•é€Ÿåº¦å¦‚ä½•ï¼Œä¸”å…è´¹ç‰ˆæœ¬åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ï¼Œé…ç½®ä¹Ÿä¸éš¾ã€‚</p>\n<p>åœ¨CloudflareæˆåŠŸè§£æåï¼Œåœ¨Page rulesä¸­å®šä¹‰é‡å®šå‘ï¼Œå°†<code>http</code>301æ°¸ä¹…é‡å®šå‘åˆ°<code>https</code>ã€‚Cloudflareè¿˜å¯ä»¥è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œè®¾ç½®ç”¨æˆ·ä¸DNSã€DNSä¸æˆ‘ä»¬åšå®¢çš„æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦ä½¿ç”¨SSLï¼Œå‹ç¼©CSSã€JSï¼Œæ°¸ä¹…åœ¨çº¿ï¼ˆä¸å®šæ—¶å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼‰ï¼Œå®‰å…¨çº§åˆ«ï¼ˆé˜²DDoSï¼‰ç­‰ã€‚</p>\n<p>è®¾ç½®å®Œåï¼Œçœ‹åˆ°äº†ä¹…è¿çš„å°ç»¿é”ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rwfkq.png\" alt=\"\"></p>\n<p>ä½†æ˜¯ï¼Œç‚¹å‡»æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/dw1rg.png\" alt=\"\"></p>\n<p>è®¿é—®æ—¶å°±æœ‰ã€å¹¶éå®Œæˆå®‰å…¨ã€çš„æç¤ºï¼Œè¿™æ¶‰åŠä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾åºŠï¼Œæˆ‘çš„å›¾ç‰‡èµ„æºæ˜¯æ‰˜ç®¡åœ¨ä¸ƒç‰›äº‘ä¸Šçš„ï¼Œä¹‹å‰ä¸ƒç‰›äº‘è¿˜æä¾›<code>https</code>çš„äºŒçº§åŸŸåï¼Œä½†ç°åœ¨å·²ç»å…³é—­ï¼Œè¦ä½¿ç”¨<code>https</code>éœ€è¦è‡ªå®šä¹‰åŸŸåï¼Œè¿™åˆå›åˆ°ä¸Šé¢æ‰€è¯´çš„å¤‡æ¡ˆé—®é¢˜ã€‚çº ç»“ä¹‹ä½™ï¼Œå°†ä¸ƒç‰›äº‘è¿ç§»åˆ°è…¾è®¯äº‘COSä¸Šï¼Œè…¾è®¯äº‘COSå°±æœ‰æ”¯æŒSSLçš„å›¾åºŠæµ‹è¯•åŸŸåï¼Œä¸”æä¾›CDNæœåŠ¡ï¼ŒåŒæ ·æ˜¯æ¯æœˆå…è´¹ç©ºé—´ï¼Œå…è´¹æµé‡ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå°ç«™æ¥è¯´ï¼Œè¶³å¤Ÿäº†ã€‚</p>\n<p>æ‰€ä»¥ï¼ŒCongratulations~ğŸ˜„ğŸ˜„ğŸ˜„ğŸ‰ğŸ‰ğŸ‰~</p>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><p>æ€»æœ‰ä¸€äº›å¥‡æ€å¦™æƒ³ï¼Œæ‰€ä»¥æœ¬æ–‡ä»åœ¨ä¸æ–­æ›´æ–°â€¦</p>\n<p>åšå®¢æ˜¯åœ¨hollowä¸»é¢˜çš„<a href=\"https://github.com/zchen9/hexo-theme-hollow\" target=\"_blank\" rel=\"external\">åˆ›ä½œå®¶</a>çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œå¯¹æ­¤è¡¨ç¤ºæœ€çœŸæŒšçš„æ„Ÿè°¢ï¼Œå¼€æºä¸‡å²ã€‚</p>\n<p>å¦‚æœè¦è‡ªå·±å†™ä¸»é¢˜ï¼Œ<a href=\"https://hexo.io/zh-cn/docs/writing.html\" target=\"_blank\" rel=\"external\">Hexoæ–‡æ¡£</a>è®°å¾—å¤šçœ‹çœ‹ã€‚</p>\n<p>å¯¹äºåŸŸåè´­ä¹°å’ŒCloudflareã€è…¾è®¯äº‘çš„ä½¿ç”¨ï¼ŒGoogleå¯ä»¥æœåˆ°è®¸å¤šç²¾å½©ä¸”è¯¦ç»†çš„æ–‡ç« ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ã€‚</p>\n<h3 id=\"å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\"><a href=\"#å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\" class=\"headerlink\" title=\"å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\"></a>å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š</h3><ul>\n<li>è™½ç„¶æ˜¯Node.jså°ç™½ï¼Œä½†å‹‰å¼ºåšå¾—å‡ºæ¥ï¼Œå› ä¸ºä¸€è¡Œnodejsçš„ä»£ç éƒ½æ²¡å†™åˆ°</li>\n<li>HTMLã€CSSã€JSå¯ä»¥åšå¾ˆå¤šäº‹æƒ…</li>\n<li>éœ€è¦å­¦ä¹ ä¸‹ejsã€stylusï¼Œéƒ½ä¸æ˜¯å¾ˆéš¾</li>\n<li>å¤šçœ‹çœ‹åˆ«äººçš„ä»£ç ï¼Œå¾ˆå—å¯å‘</li>\n</ul>\n","excerpt":"<p>å†³å®šç»™åšå®¢çš„åå­—èµ·ä¸º<strong>ç«¥å¹´CHILDHOOD</strong>ã€‚</p>\n<p><strong>å¦‚ç«¥å¹´èˆ¬çº¯çœŸï¼Œçƒ­çˆ±ï¼Œä¸æœ½ã€‚</strong></p>\n<p>è¶ç€æœ€è¿‘æ²¡æœ‰åŠ¨åŠ›çœ‹ä¹¦ï¼Œåˆä¸æƒ³è„‘è¢‹ç”Ÿé”ˆï¼Œåˆçœ‹è…»äº†ä¹‹å‰Hexoçš„yiliaä¸»é¢˜ã€‚æ‰€ä»¥æ¢ä¸ªåšå®¢ä¸»é¢˜ï¼ŒHello World Againã€‚</p>","more":"<h2 id=\"å¼€å§‹æ£é¼“\"><a href=\"#å¼€å§‹æ£é¼“\" class=\"headerlink\" title=\"å¼€å§‹æ£é¼“\"></a>å¼€å§‹æ£é¼“</h2><p>ä¸æ˜¯å‰ç«¯erè¦è‡ªå·±å†™ä¸ªä¸»é¢˜å‡ºæ¥è¿˜çœŸä¸æ˜¯ç®€å•çš„äº‹æƒ…ã€‚æ‰€ä»¥å€Ÿé‰´äº†hollowä¸»é¢˜ï¼Œå¹¶åœ¨å…¶ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p>\n<h3 id=\"ä¸»é¡µ\"><a href=\"#ä¸»é¡µ\" class=\"headerlink\" title=\"ä¸»é¡µ\"></a>ä¸»é¡µ</h3><p>ä¸»é¡µå¤§è‡´ä¸Šæ²¡æœ‰åšå¤ªå¤šçš„ä¿®æ”¹ï¼Œå› ä¸ºä¸€å¼€å§‹å°±æ˜¯çœ‹ä¸Šè¿™ç§ç®€ç®€å•å•çš„ï¼Œæ²¡æœ‰å¤ªå¤šå¤æ‚æˆåˆ†çš„æ’ç‰ˆã€‚åŒå€¦äº†yiliaï¼Œç¬¬ä¸€æ˜¯ï¼šä¸æƒ³è¦å·¦å³ç‰ˆå¼çš„é¡µé¢ï¼Œæ˜¾å¾—å·¦ä¾§çš„èœå•æ æœ‰ç‚¹å–§å®¾å¤ºä¸»ã€‚ç¬¬äºŒæ˜¯ï¼šæ€»æŠŠäººè„¸ç•™åœ¨å·¦è¾¹æ˜¾çœ¼çš„ä½ç½®ï¼Œçº¯ç²¹çš„ä¸å–œæ¬¢ã€‚</p>\n<p>hollowä¸»é¢˜åªæ˜¯åŒ…å«äº†ä¸»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºæ–‡ç« åºåˆ—å’Œæ–‡ç« è¯¦æƒ…ã€‚å…¶ä»–çš„éƒ½æ²¡æœ‰ã€‚</p>\n<h3 id=\"Tags\"><a href=\"#Tags\" class=\"headerlink\" title=\"Tags\"></a>Tags</h3><p>è¿›å…¥æ ‡ç­¾é¡µé¢åœ¨ä¸»é¡µå³ä¸Šè§’çš„ <em>äº•å·</em> æŒ‰é’®ï¼Œæ ‡ç­¾é¡µé¢æ˜¯æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ã€‚</p>\n<p>å› ä¸ºæš‚æ—¶ä¸æ”¯æŒç«™å†…æœç´¢ï¼ˆè¿˜åœ¨æ„æ€ä¸­â€¦ï¼‰ï¼Œå¦‚æœè¦æ‰¾æŸä¸€ç¯‡æ–‡ç« éœ€è¦ä¸€é¡µé¡µåœ°ç¿»ï¼Œæ„Ÿè§‰ä¼šå¾ˆç¹çã€‚æ‰€ä»¥å»ºç«‹äº†ä¸ªæ ‡ç­¾é¡µé¢ã€‚</p>\n<p>æˆ‘æ˜¯é€šè¿‡ä¿®æ”¹page.ejsæ¥è¾¾åˆ°ç›®çš„ã€‚</p>\n<pre><code class=\"html\">&lt;section class=&quot;article-container&quot;&gt;\n&lt;!-- Back Home --&gt;\n&lt;%- partial(&#39;_partial/backhome&#39;) %&gt;\n\n&lt;!-- Page Header --&gt;\n&lt;header class=&quot;intro-header&quot;&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1&quot;&gt;\n                &lt;div class=&quot;post-heading&quot;&gt;\n                    &lt;h1&gt;TAGS&lt;/h1&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/header&gt;\n\n&lt;!-- Post Content --&gt;\n&lt;article&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;!-- Post Main Content --&gt;\n            &lt;div class=&quot;post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1&quot;&gt;\n                &lt;% site.tags.each(function(category){ %&gt;\n                    &lt;a class=&quot;category&quot; href=&quot;&lt;%-category.name%&gt;&quot;&gt;&lt;%-category.name%&gt;&lt;/a&gt;\n                &lt;% }); %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/article&gt;\n&lt;/section&gt;\n&lt;!-- Back to top --&gt;\n&lt;%- partial(&#39;_partial/backtop&#39;) %&gt;\n</code></pre>\n<p>ä¿®æ”¹å®Œpage.ejsåï¼Œæ‰§è¡Œ<code>hexo new page &quot;tags&quot;</code>å°±å¯ä»¥åˆ›å»ºtagsé¡µäº†ã€‚ç„¶åè°ƒæ•´æ ¼å¼å°±å¯ä»¥äº†ã€‚</p>\n<h3 id=\"Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\"><a href=\"#Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\" class=\"headerlink\" title=\"Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰\"></a>Aboutï¼ˆæœ€è¿‘ä¿®æ”¹ä¸­â€¦ï¼‰</h3><p>è¿™ä¸ªé¡µé¢æ˜¯è‡ªå·±æ·»åŠ çš„ã€‚</p>\n<p>è¿™ä¸ªé¡µé¢æ˜¯æœ€å¤æ‚çš„ã€‚é¦–å…ˆHexoåªæ”¯æŒ<code>index</code>,<code>page</code>,<code>post</code>,<code>layout</code>,<code>archive</code>è¿™å‡ ç§è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€ä»¥ä¿®æ”¹äº†<code>page</code>åä½œä¸ºcategoryé¡µé¢ä¹‹åå°±ä¸èƒ½é€šè¿‡ä¿®æ”¹é¡¹ç›®é¡µé¢æ¨¡æ¿æ¥æ·»åŠ æ–°çš„è‡ªå®šä¹‰é¡µé¢äº†ã€‚</p>\n<p>ä½†æ˜¯å¥½åœ¨Hexoè¿˜æ˜¯æ¯”è¾ƒäººæ€§åŒ–çš„ã€‚</p>\n<p>é™¤äº†ä¿®æ”¹Hexoçš„æ¨¡æ¿ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è‡ªå®šä¹‰é¡µé¢</p>\n<ol>\n<li>å…ˆæ‰§è¡Œ<code>hexo new page &quot;xxx&quot;</code>ï¼Œåœ¨sourceä¸­å‡ºç°xxxæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰xxx.mdï¼Œç„¶ååœ¨xxx.mdå‰åŠ ä¸Šlayoutï¼šfalseï¼Œå¯ä»¥ç»•è¿‡Hexoè§£æï¼Œç›´æ¥å°†mdä¸­çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨mdé‡Œé¢å†™htmlä»£ç äº†ã€‚è¯¦è§<a href=\"https://hexo.io/zh-cn/docs/writing.html\">Hexoæ–‡æ¡£</a></li>\n<li>æ‰§è¡Œ<code>hexo new page &quot;xxx&quot;</code>ï¼ŒåŒæ ·å¾—åˆ°xxxæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä½œä¸€ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­å°½æƒ…åˆ›å»ºhtmlï¼Œcssï¼Œjsï¼Œwhatever you wantã€‚ç„¶åè®°å¾—åœ¨åšå®¢çš„ä¸»_config.ymlä¸­çš„skip_renderé¡¹æ·»åŠ xxx/**ï¼Œå°±å¯ä»¥äº†ã€‚</li>\n</ol>\n<h3 id=\"è¯„è®º\"><a href=\"#è¯„è®º\" class=\"headerlink\" title=\"è¯„è®º\"></a>è¯„è®º</h3><p>è¯„è®ºå°±ä¸åŠ å•¦ï¼Œæ¯•ç«Ÿæ¸…æ¸…çˆ½çˆ½è¿˜æ˜¯æœ€çˆ±å•Šã€‚</p>\n<p>è€Œä¸”å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆå¤šäººæ¥è¿‡è¿™ä¸ªåšå®¢ï¼Œç­‰ä»¥åæœ‰éœ€è¦å†åŠ ä¸Šè¯„è®ºå§ã€‚</p>\n<p>åŒå€¦äº†å¤šè¯´ç­‰è¯„è®ºç®¡ç†å¹³å°çš„è¯ï¼Œæ¨èä¸€ä¸ª <a href=\"https://github.com/imsun/gitment\">Gitment</a>ï¼Œè§‚æœ›äº†å¾ˆä¹…è¿˜æ˜¯è§‰å¾—è¿™ä¸ªæ¯”è¾ƒç®€æ´ï¼Œä¸éœ€è¦ä¾èµ–å…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå®ƒæ˜¯å°†è¯„è®ºæ”¾åœ¨Githubçš„issueé‡Œé¢ï¼Œå¾ˆé€‚åˆæ‰˜ç®¡åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç©ºé—´çš„åšå®¢ä½¿ç”¨ã€‚</p>\n<p>æœ‰é—®é¢˜åœ¨å¾®åšç­‰ç¤¾äº¤å¹³å°è”ç³»å§ã€‚</p>\n<h3 id=\"åŸŸåå’Œå…¨ç«™HTTPS\"><a href=\"#åŸŸåå’Œå…¨ç«™HTTPS\" class=\"headerlink\" title=\"åŸŸåå’Œå…¨ç«™HTTPS\"></a>åŸŸåå’Œå…¨ç«™HTTPS</h3><p>åŸŸååœ¨ä¸‡ç½‘ä¸Šè´­ä¹°ï¼Œå®åè®¤è¯ï¼Œè§£æåˆ°github pageã€‚éƒ½æ˜¯å¾ˆç®€å•çš„æ“ä½œã€‚</p>\n<p>åœ¨å®ç°å…¨ç«™HTTPSçš„æ—¶å€™èµ°äº†ä¸å°‘å¼¯è·¯ã€‚ä¸»è¦æƒ³å®ç°çš„æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li>[x] å…¨ç«™å°ç»¿é”</li>\n</ul>\n<ul>\n<li>[x] æ€•HTTPSæ…¢ï¼Œæ‰€ä»¥ä¸ŠCDN</li>\n</ul>\n<ul>\n<li>[ ] <del>è‡ªå®šä¹‰SSLè¯ä¹¦</del> (æ— è§£)</li>\n</ul>\n<p>å› ä¸ºåšå®¢æ˜¯æ‰˜ç®¡åœ¨Githubä¸Šçš„ï¼Œè¦å¼ºåˆ¶HTTPSï¼ŒCodingå¯ä»¥åšåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦å†éƒ¨ç½²ä¸€å¥—åˆ°Codingä¸Šã€‚æ‰€ä»¥å°±æƒ³åˆ°ä½¿ç”¨CDNæ¥å®ç°ï¼Œé¡ºä¾¿è§£å†³ç½‘é¡µçš„è®¿é—®é€Ÿåº¦é—®é¢˜ã€‚</p>\n<p>CDNæœ‰å›½å†…å‡ å®¶äº‘æœåŠ¡å‚å•†æœ‰å…è´¹æµé‡ï¼Œåˆæ‹äº‘ã€è…¾è®¯äº‘ç­‰ã€‚éƒ½æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰SSLè¯ä¹¦ã€‚ä½†æˆ‘çš„åšå®¢æ²¡æœ‰å›½å†…çš„æœåŠ¡å™¨ç©ºé—´ï¼Œè‡ªç„¶æ²¡æœ‰ç§é’¥ï¼Œæ— æ³•ç”³è¯·è¯ä¹¦ã€‚</p>\n<p>å·¥ä¿¡éƒ¨çš„å¤‡æ¡ˆç³»ç»Ÿè™½ç„¶å‡å°‘äº†å¾ˆå¤šé»‘ç½‘ç«™ï¼Œä½†ä¹Ÿè®©æˆ‘ä»¬è¿™äº›åªæœ‰åŸŸåæ²¡æœ‰ç©ºé—´çš„äººå¾’å¢äº†è®¸å¤šéº»çƒ¦ã€‚æ‰€ä»¥æœ€åé€‰äº†å›½å¤–çš„CDNå‚å•†<a href=\"https://www.cloudflare.com/\">Cloudflare</a>æ¥è§£ææˆ‘çš„åŸŸåï¼ŒCloudflareå’Œç™¾åº¦äº‘åˆä½œï¼Œåœ¨å›½å†…ä¹Ÿæœ‰CDNæœåŠ¡å™¨ï¼Œå…ˆè¯•è¯•é€Ÿåº¦å¦‚ä½•ï¼Œä¸”å…è´¹ç‰ˆæœ¬åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ï¼Œé…ç½®ä¹Ÿä¸éš¾ã€‚</p>\n<p>åœ¨CloudflareæˆåŠŸè§£æåï¼Œåœ¨Page rulesä¸­å®šä¹‰é‡å®šå‘ï¼Œå°†<code>http</code>301æ°¸ä¹…é‡å®šå‘åˆ°<code>https</code>ã€‚Cloudflareè¿˜å¯ä»¥è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œè®¾ç½®ç”¨æˆ·ä¸DNSã€DNSä¸æˆ‘ä»¬åšå®¢çš„æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦ä½¿ç”¨SSLï¼Œå‹ç¼©CSSã€JSï¼Œæ°¸ä¹…åœ¨çº¿ï¼ˆä¸å®šæ—¶å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼‰ï¼Œå®‰å…¨çº§åˆ«ï¼ˆé˜²DDoSï¼‰ç­‰ã€‚</p>\n<p>è®¾ç½®å®Œåï¼Œçœ‹åˆ°äº†ä¹…è¿çš„å°ç»¿é”ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rwfkq.png\" alt=\"\"></p>\n<p>ä½†æ˜¯ï¼Œç‚¹å‡»æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/dw1rg.png\" alt=\"\"></p>\n<p>è®¿é—®æ—¶å°±æœ‰ã€å¹¶éå®Œæˆå®‰å…¨ã€çš„æç¤ºï¼Œè¿™æ¶‰åŠä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾åºŠï¼Œæˆ‘çš„å›¾ç‰‡èµ„æºæ˜¯æ‰˜ç®¡åœ¨ä¸ƒç‰›äº‘ä¸Šçš„ï¼Œä¹‹å‰ä¸ƒç‰›äº‘è¿˜æä¾›<code>https</code>çš„äºŒçº§åŸŸåï¼Œä½†ç°åœ¨å·²ç»å…³é—­ï¼Œè¦ä½¿ç”¨<code>https</code>éœ€è¦è‡ªå®šä¹‰åŸŸåï¼Œè¿™åˆå›åˆ°ä¸Šé¢æ‰€è¯´çš„å¤‡æ¡ˆé—®é¢˜ã€‚çº ç»“ä¹‹ä½™ï¼Œå°†ä¸ƒç‰›äº‘è¿ç§»åˆ°è…¾è®¯äº‘COSä¸Šï¼Œè…¾è®¯äº‘COSå°±æœ‰æ”¯æŒSSLçš„å›¾åºŠæµ‹è¯•åŸŸåï¼Œä¸”æä¾›CDNæœåŠ¡ï¼ŒåŒæ ·æ˜¯æ¯æœˆå…è´¹ç©ºé—´ï¼Œå…è´¹æµé‡ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå°ç«™æ¥è¯´ï¼Œè¶³å¤Ÿäº†ã€‚</p>\n<p>æ‰€ä»¥ï¼ŒCongratulations~ğŸ˜„ğŸ˜„ğŸ˜„ğŸ‰ğŸ‰ğŸ‰~</p>\n<h2 id=\"å†™åœ¨åé¢\"><a href=\"#å†™åœ¨åé¢\" class=\"headerlink\" title=\"å†™åœ¨åé¢\"></a>å†™åœ¨åé¢</h2><p>æ€»æœ‰ä¸€äº›å¥‡æ€å¦™æƒ³ï¼Œæ‰€ä»¥æœ¬æ–‡ä»åœ¨ä¸æ–­æ›´æ–°â€¦</p>\n<p>åšå®¢æ˜¯åœ¨hollowä¸»é¢˜çš„<a href=\"https://github.com/zchen9/hexo-theme-hollow\">åˆ›ä½œå®¶</a>çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ï¼Œå¯¹æ­¤è¡¨ç¤ºæœ€çœŸæŒšçš„æ„Ÿè°¢ï¼Œå¼€æºä¸‡å²ã€‚</p>\n<p>å¦‚æœè¦è‡ªå·±å†™ä¸»é¢˜ï¼Œ<a href=\"https://hexo.io/zh-cn/docs/writing.html\">Hexoæ–‡æ¡£</a>è®°å¾—å¤šçœ‹çœ‹ã€‚</p>\n<p>å¯¹äºåŸŸåè´­ä¹°å’ŒCloudflareã€è…¾è®¯äº‘çš„ä½¿ç”¨ï¼ŒGoogleå¯ä»¥æœåˆ°è®¸å¤šç²¾å½©ä¸”è¯¦ç»†çš„æ–‡ç« ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ã€‚</p>\n<h3 id=\"å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\"><a href=\"#å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\" class=\"headerlink\" title=\"å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š\"></a>å¯¹äºè¿™æ¬¡å®è·µçš„æ€»ç»“ï¼š</h3><ul>\n<li>è™½ç„¶æ˜¯Node.jså°ç™½ï¼Œä½†å‹‰å¼ºåšå¾—å‡ºæ¥ï¼Œå› ä¸ºä¸€è¡Œnodejsçš„ä»£ç éƒ½æ²¡å†™åˆ°</li>\n<li>HTMLã€CSSã€JSå¯ä»¥åšå¾ˆå¤šäº‹æƒ…</li>\n<li>éœ€è¦å­¦ä¹ ä¸‹ejsã€stylusï¼Œéƒ½ä¸æ˜¯å¾ˆéš¾</li>\n<li>å¤šçœ‹çœ‹åˆ«äººçš„ä»£ç ï¼Œå¾ˆå—å¯å‘</li>\n</ul>"},{"title":"iOS Touch Eventä¼ é€’å’Œå“åº”é“¾","date":"2017-02-27T10:54:59.000Z","id":"8539A86063B11E16","typora-copy-images-to":"ipic","_content":"\næœ¬æ¥ä¸æƒ³é‡å¤é€ è½®å­ï¼Œå› ä¸ºç½‘ä¸Šå·²ç»å¾ˆå¤šå…³äºiOSè§¦ç¢°äº‹ä»¶ä¼ é€’å“åº”é“¾çš„æ–‡ç« ï¼Œè€Œä¸”è‹¹æœå®˜æ–¹æ–‡æ¡£ä¹Ÿå·²ç»è§£é‡Šå¾—å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯ä¸Šå‘¨å’Œæœ‹å‹åƒé¥­çš„æ—¶å€™èŠåˆ°å´ä¸èƒ½å¾ˆå¥½åœ°å°†æƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œæ‰€ä»¥æ„Ÿè§‰è¿˜æ˜¯å†™ä¸€å†™ï¼ŒåŠ æ·±å°è±¡å§ï½\n\n<!-- more -->\n\næ¯‹åº¸ç½®ç–‘åœ°ï¼Œåœ¨è®ºåŠäº‹ä»¶ä¼ é€’çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šå¾ˆé¡ºå£åœ°ä½¿ç”¨ç”¨ä¸Šä¸‹æ–¹å‘æ¥è¡¨è¾¾äº‹ä»¶ä¼ é€’(Event Delivery)ï¼Œä»UIApplicationåˆ°å“åº”äº‹ä»¶çš„UIViewæ˜¯ã€Œä»ä¸‹å¾€ä¸Šã€ï¼Œåè¿‡æ¥è‡ªç„¶å°±æ˜¯ã€Œä»ä¸Šå¾€ä¸‹ã€äº†ã€‚\n\n## ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View\n\nå½“ä¸€ä¸ªç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶å‘ç”Ÿå¹¶è¢«ç³»ç»Ÿæ•è·åˆ°åï¼ŒUIKitä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡(Event Object)ï¼Œæºå¸¦ç€ä¸€äº›å¤„ç†ä¿¡æ¯ï¼Œeg:ç‚¹å‡»ä½ç½®ã€äº‹ä»¶ç±»å‹ç­‰ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡å­˜æ”¾åœ¨UIApplicationçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å¤„ç†ã€‚\n\næˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æ˜¯è§¦ç¢°äº‹ä»¶(Touch Event)ï¼Œä¹Ÿåªæœ‰è§¦ç¢°äº‹ä»¶æ‰éœ€è¦iOSä¸ºæˆ‘ä»¬å¯»æ‰¾**HitTest View**ï¼Œå³**å¯»æ‰¾å“åº”è¯¥äº‹ä»¶çš„View**ï¼Œè¿™ä¸€è¿‡ç¨‹ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œç§°ä¸º***Hit-Testing***ã€‚\n\näº†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œå…ˆäº†è§£UIViewçš„ä¸¤ä¸ªå¯é‡è½½çš„æ–¹æ³•ï¼š\n\n1. `- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event`\n\n   ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯`CGPoint point`å’Œ`UIEvent *event` ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‹¥æŠ¤è§¦ç¢°äº‹ä»¶çš„**è§¦ç¢°ç‚¹**å’Œå¯¹åº”çš„**äº‹ä»¶**ï¼Œeventå¯ä¸ºnilï¼Œè¿”å›çš„æ˜¯`Boolean`è¡¨ç¤ºpointæ˜¯å¦åœ¨å½“å‰Viewçš„Boundsä¸­ã€‚\n\n2. `- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`\n\n   åŒæ ·ï¼Œä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯`CGPoint point`å’Œ`UIEvent *event` ï¼Œeventå¯ä¸ºnil(æˆ‘ä»¬æœ¬æ¬¡è®¨è®ºçš„æ˜¯è§¦ç¢°äº‹ä»¶çš„Hit-Testingï¼Œè‡ªç„¶æ­¤å‚æ•°ä¸ä¼šä¸ºç©º)ï¼Œæ­¤æ–¹æ³•è¿”å›çš„æ˜¯pointæ‰€åœ¨çš„Viewã€‚\n\n\n\n`hitTest:withEvent:`å†…éƒ¨ä¼šå…ˆè°ƒç”¨`pointInside:withEvent:`ï¼Œæ¥æ£€æµ‹è§¦ç¢°ç‚¹æ˜¯å¦åœ¨å½“å‰Viewä¸­\n\n- è‹¥è¿”å›`NO`,åˆ™ç›´æ¥è¿”å›nilï¼Œä¸”æ‰€æœ‰çš„SubViewéƒ½ä¸ä¼šå“åº”å½“å‰äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œæ•²é‡ç‚¹å•¦ï¼Œå¯¹äº`clipsToBounds`è®¾ç½®ä¸º`NO`ï¼Œå…è®¸SubViewå‘å¤–å»¶ä¼¸çš„Viewï¼Œéœ€è¦é‡è½½`pointInside:withEvent:`ï¼Œä¾‹å¦‚ï¼š\n\n  ![TouchEvent_WechatIMG3](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rkb9k.jpg)\n\n  ```objective-c\n  - (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{\n    \t//ä»¥ä¸‹æ˜¯ä¼ªä»£ç   \n    \tif (point inside blueArea) return true;\n    \telse return false;\n  }\n  ```\n\n  å¦‚æœæ²¡æœ‰é‡è½½`pointInside:withEvent:`ï¼Œé‚£ä¹ˆç”¨æˆ·ç‚¹å‡»ä¸Šå›¾è§¦ç¢°ç‚¹ï¼ŒSubViewå°†ä¸å“åº”äº‹ä»¶ã€‚\n\n\n- è‹¥è¿”å›`YES`ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰SubViewçš„`hitTest:withEvent:`ï¼Œç»§ç»­å¯»æ‰¾HitTest Viewã€‚åœ¨è§†å›¾å±‚çº§æ ‘(è¿™æ ·ç¿»è¯‘?! view hierarchy)ä¸­**æœ€åæ·»åŠ çš„å¶ç»“ç‚¹**ä¸”**åŒ…å«è§¦ç¢°ç‚¹**çš„Viewå°±ä¼šå…‰è£åœ°æˆä¸º**HitTest View**(å¦‚ä¸‹å›¾æœ€åä¸€ä¸ªUIView)ï¼Œé¦–å…ˆæ¥å—äº‹ä»¶ï¼Œå¹¶åšä¸‹ä¸€æ­¥æ“ä½œâ€”â€”å¯»æ‰¾å“åº”å¯¹è±¡ã€‚\n\n  ![TouchEvent_WechatIMG1](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zedzb.jpg)\n\n\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸­é€”æˆªæ–­ç³»ç»Ÿçš„Hit-Testingï¼Œå¦‚æœä½ æƒ³è®©æŸä¸ªViewçš„æ‰€æœ‰SubViewéƒ½ä¸å“åº”äº‹ä»¶ï¼Œæœ€ç®€å•çš„å°±æ˜¯é‡è½½è¯¥Viewçš„`hitTest:withEvent:`ï¼Œè¿”å›Viewï¼ˆè‡ªå·±å“åº”ç‚¹å‡»äº‹ä»¶ï¼‰æˆ–è€…nilï¼ˆéƒ½ä¸å“åº”ï¼‰ã€‚\n\n```objective-c\n-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {\n    //return nil; æœ¬Viewå’ŒSubViewéƒ½ä¸æˆä¸ºHitTest Viewï¼Œéƒ½ä¸å“åº”äº‹ä»¶\n  \treturn self;\t// è‡ªå·±æˆä¸ºHitTest View\n}\n```\n\n## ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\n\n![1387344-cd500e5bd93d9606](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/2fznc.png)\n\nè¿™å¼ å›¾ç›¸ä¿¡åœ¨å…¶ä»–åœ°æ–¹å·²ç»çœ‹äº†ä¸€åƒéäº†ï¼Œä½†æ˜¯æœ‰å›¾è¿˜æ˜¯å®¹æ˜“ç†è§£ï¼Œä»ä¸Šå¾€ä¸‹çš„æ„æ€æ˜¯ï¼š\n\nå½“ä¸Šä¸€æ­¥æ‰¾åˆ°çš„HitTest Viewæ²¡èƒ½å“åº”äº‹ä»¶æ—¶(eg:userInteractionEnabledä¸ºNOæˆ–è€…æ²¡æœ‰å®šä¹‰å“åº”äº‹ä»¶çš„æ–¹æ³•)ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šè¢«ä¼ é€’åˆ°SuperViewæˆ–ç€Controllerã€‚ç›´è‡³Applicaionéƒ½ä¸èƒ½å¤„ç†è¯¥äº‹ä»¶åˆ™å¿½ç•¥ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ä¼ é€’åªä¼šç»™SuperViewæˆ–ç€Controllerï¼Œå¹¶ä¸ä¼šä¼ é€’ç»™ä¸è‡ªå·±ç›¸åŒçº§åˆ«çš„Viewï¼Œé™¤éä½ è‡ªå·±æ§åˆ¶ã€‚\n\niOS10çš„UIResponderä¸­å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„Propertyï¼š\n\n1. `nextResponder(Swiftæ˜¯next)`ï¼šè¿™ä¸ªæ¯”è¾ƒè›‹ç–¼ï¼Œå› ä¸ºUIResponderä¸­å®ƒé»˜è®¤è¿”å›çš„æ˜¯nilï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è®©ç‰¹å®šçš„Responderå“åº”äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ç±»ä¸­é‡è½½Getæ–¹æ³•ï¼Œè¿”å›è‡ªå·±æƒ³è¦çš„ä¸‹ä¸€ä¸ªResponderã€‚\n2. `isFirstResponder`ï¼šåˆ¤æ–­å½“å‰Viewæˆ–Controlleræ˜¯å¦ä¸ºå³å°†å“åº”äº‹ä»¶çš„Responderã€‚ä¸èƒ½æ˜ç™½ï¼Ÿï¼é‚£ä¹ˆæƒ³æƒ³è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š`becomeFirstResponder`å’Œ`resignFirstResponder`ï¼šï¼‰\n\n## æ€»ç»“\n\nåºŸè¯äº†è¿™ä¹ˆå¤šï¼Œä¸‰ç‚¹ï¼š\n\n1. iOSçš„Touch Eventå…ˆã€Œä»ä¸‹å¾€ä¸Šã€å¯»æ‰¾HitTest View(FirstResponder)ï¼Œå†ã€Œä»ä¸Šå¾€ä¸‹ã€å¯»æ‰¾çœŸæ­£å“åº”è¯¥äº‹ä»¶çš„Responderã€‚\n2. å¯ä»¥é€šè¿‡é‡è½½`hitTest:withEvent:`ï¼Œå†³å®šHitTest Viewï¼Œå³æœ€å¼€å§‹**æ¥æ”¶ï¼ˆæ•²é‡ç‚¹ï¼Œåªæ˜¯æ¥æ”¶ï¼‰**äº‹ä»¶çš„Responderã€‚\n3. Responderä¸ä¸€å®šä¼šå“åº”äº‹ä»¶ï¼Œçœ‹æœ‰æ²¡æœ‰å“åº”äº‹ä»¶çš„æ–¹æ³•ã€‚\n\n\n\næ‰€ä»¥ï¼Œä»¥åå¦‚æœæœ‰äººé—®ä½ ï¼šä¸¤ä¸ªViewé‡å åœ¨ä¸€èµ·ï¼Œåœ¨ä¸Šé¢çš„Viewå°†ä¸‹é¢çš„Viewå®Œå…¨è¦†ç›–ï¼Œä¸”ä¸Šé¢çš„Viewä¸èƒ½å“åº”äº‹ä»¶ï¼Œä¸‹é¢çš„Viewä¼šå“åº”å—ï¼Ÿ\n\nä½ ä¸å¦‚å…ˆåé—®ä¸€å¥ï¼Œä¸¤ä¸ªViewæ˜¯å¦ä¸ºSuperViewå’ŒSubViewçš„å…³ç³»ï¼Ÿï¼\n\nå†åˆ†é—¨åˆ«ç±»åœ°å›ç­”ï½\n\nä»¥ä¸Š\n\n\n\n## å‚è€ƒæ–‡çŒ®\n\n[Event Handling Guide for iOS](https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW1)\n\n","source":"_posts/iOS-Eventä¼ é€’å’Œå“åº”é“¾.md","raw":"---\ntitle: iOS Touch Eventä¼ é€’å’Œå“åº”é“¾\ndate: 2017-02-27 18:54:59\nid: 8539A86063B11E16\ntags: \n- UIView \ntypora-copy-images-to: ipic\n---\n\næœ¬æ¥ä¸æƒ³é‡å¤é€ è½®å­ï¼Œå› ä¸ºç½‘ä¸Šå·²ç»å¾ˆå¤šå…³äºiOSè§¦ç¢°äº‹ä»¶ä¼ é€’å“åº”é“¾çš„æ–‡ç« ï¼Œè€Œä¸”è‹¹æœå®˜æ–¹æ–‡æ¡£ä¹Ÿå·²ç»è§£é‡Šå¾—å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯ä¸Šå‘¨å’Œæœ‹å‹åƒé¥­çš„æ—¶å€™èŠåˆ°å´ä¸èƒ½å¾ˆå¥½åœ°å°†æƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œæ‰€ä»¥æ„Ÿè§‰è¿˜æ˜¯å†™ä¸€å†™ï¼ŒåŠ æ·±å°è±¡å§ï½\n\n<!-- more -->\n\næ¯‹åº¸ç½®ç–‘åœ°ï¼Œåœ¨è®ºåŠäº‹ä»¶ä¼ é€’çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šå¾ˆé¡ºå£åœ°ä½¿ç”¨ç”¨ä¸Šä¸‹æ–¹å‘æ¥è¡¨è¾¾äº‹ä»¶ä¼ é€’(Event Delivery)ï¼Œä»UIApplicationåˆ°å“åº”äº‹ä»¶çš„UIViewæ˜¯ã€Œä»ä¸‹å¾€ä¸Šã€ï¼Œåè¿‡æ¥è‡ªç„¶å°±æ˜¯ã€Œä»ä¸Šå¾€ä¸‹ã€äº†ã€‚\n\n## ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View\n\nå½“ä¸€ä¸ªç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶å‘ç”Ÿå¹¶è¢«ç³»ç»Ÿæ•è·åˆ°åï¼ŒUIKitä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡(Event Object)ï¼Œæºå¸¦ç€ä¸€äº›å¤„ç†ä¿¡æ¯ï¼Œeg:ç‚¹å‡»ä½ç½®ã€äº‹ä»¶ç±»å‹ç­‰ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡å­˜æ”¾åœ¨UIApplicationçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å¤„ç†ã€‚\n\næˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æ˜¯è§¦ç¢°äº‹ä»¶(Touch Event)ï¼Œä¹Ÿåªæœ‰è§¦ç¢°äº‹ä»¶æ‰éœ€è¦iOSä¸ºæˆ‘ä»¬å¯»æ‰¾**HitTest View**ï¼Œå³**å¯»æ‰¾å“åº”è¯¥äº‹ä»¶çš„View**ï¼Œè¿™ä¸€è¿‡ç¨‹ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œç§°ä¸º***Hit-Testing***ã€‚\n\näº†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œå…ˆäº†è§£UIViewçš„ä¸¤ä¸ªå¯é‡è½½çš„æ–¹æ³•ï¼š\n\n1. `- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event`\n\n   ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯`CGPoint point`å’Œ`UIEvent *event` ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‹¥æŠ¤è§¦ç¢°äº‹ä»¶çš„**è§¦ç¢°ç‚¹**å’Œå¯¹åº”çš„**äº‹ä»¶**ï¼Œeventå¯ä¸ºnilï¼Œè¿”å›çš„æ˜¯`Boolean`è¡¨ç¤ºpointæ˜¯å¦åœ¨å½“å‰Viewçš„Boundsä¸­ã€‚\n\n2. `- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`\n\n   åŒæ ·ï¼Œä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯`CGPoint point`å’Œ`UIEvent *event` ï¼Œeventå¯ä¸ºnil(æˆ‘ä»¬æœ¬æ¬¡è®¨è®ºçš„æ˜¯è§¦ç¢°äº‹ä»¶çš„Hit-Testingï¼Œè‡ªç„¶æ­¤å‚æ•°ä¸ä¼šä¸ºç©º)ï¼Œæ­¤æ–¹æ³•è¿”å›çš„æ˜¯pointæ‰€åœ¨çš„Viewã€‚\n\n\n\n`hitTest:withEvent:`å†…éƒ¨ä¼šå…ˆè°ƒç”¨`pointInside:withEvent:`ï¼Œæ¥æ£€æµ‹è§¦ç¢°ç‚¹æ˜¯å¦åœ¨å½“å‰Viewä¸­\n\n- è‹¥è¿”å›`NO`,åˆ™ç›´æ¥è¿”å›nilï¼Œä¸”æ‰€æœ‰çš„SubViewéƒ½ä¸ä¼šå“åº”å½“å‰äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œæ•²é‡ç‚¹å•¦ï¼Œå¯¹äº`clipsToBounds`è®¾ç½®ä¸º`NO`ï¼Œå…è®¸SubViewå‘å¤–å»¶ä¼¸çš„Viewï¼Œéœ€è¦é‡è½½`pointInside:withEvent:`ï¼Œä¾‹å¦‚ï¼š\n\n  ![TouchEvent_WechatIMG3](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rkb9k.jpg)\n\n  ```objective-c\n  - (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{\n    \t//ä»¥ä¸‹æ˜¯ä¼ªä»£ç   \n    \tif (point inside blueArea) return true;\n    \telse return false;\n  }\n  ```\n\n  å¦‚æœæ²¡æœ‰é‡è½½`pointInside:withEvent:`ï¼Œé‚£ä¹ˆç”¨æˆ·ç‚¹å‡»ä¸Šå›¾è§¦ç¢°ç‚¹ï¼ŒSubViewå°†ä¸å“åº”äº‹ä»¶ã€‚\n\n\n- è‹¥è¿”å›`YES`ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰SubViewçš„`hitTest:withEvent:`ï¼Œç»§ç»­å¯»æ‰¾HitTest Viewã€‚åœ¨è§†å›¾å±‚çº§æ ‘(è¿™æ ·ç¿»è¯‘?! view hierarchy)ä¸­**æœ€åæ·»åŠ çš„å¶ç»“ç‚¹**ä¸”**åŒ…å«è§¦ç¢°ç‚¹**çš„Viewå°±ä¼šå…‰è£åœ°æˆä¸º**HitTest View**(å¦‚ä¸‹å›¾æœ€åä¸€ä¸ªUIView)ï¼Œé¦–å…ˆæ¥å—äº‹ä»¶ï¼Œå¹¶åšä¸‹ä¸€æ­¥æ“ä½œâ€”â€”å¯»æ‰¾å“åº”å¯¹è±¡ã€‚\n\n  ![TouchEvent_WechatIMG1](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zedzb.jpg)\n\n\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸­é€”æˆªæ–­ç³»ç»Ÿçš„Hit-Testingï¼Œå¦‚æœä½ æƒ³è®©æŸä¸ªViewçš„æ‰€æœ‰SubViewéƒ½ä¸å“åº”äº‹ä»¶ï¼Œæœ€ç®€å•çš„å°±æ˜¯é‡è½½è¯¥Viewçš„`hitTest:withEvent:`ï¼Œè¿”å›Viewï¼ˆè‡ªå·±å“åº”ç‚¹å‡»äº‹ä»¶ï¼‰æˆ–è€…nilï¼ˆéƒ½ä¸å“åº”ï¼‰ã€‚\n\n```objective-c\n-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {\n    //return nil; æœ¬Viewå’ŒSubViewéƒ½ä¸æˆä¸ºHitTest Viewï¼Œéƒ½ä¸å“åº”äº‹ä»¶\n  \treturn self;\t// è‡ªå·±æˆä¸ºHitTest View\n}\n```\n\n## ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\n\n![1387344-cd500e5bd93d9606](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/2fznc.png)\n\nè¿™å¼ å›¾ç›¸ä¿¡åœ¨å…¶ä»–åœ°æ–¹å·²ç»çœ‹äº†ä¸€åƒéäº†ï¼Œä½†æ˜¯æœ‰å›¾è¿˜æ˜¯å®¹æ˜“ç†è§£ï¼Œä»ä¸Šå¾€ä¸‹çš„æ„æ€æ˜¯ï¼š\n\nå½“ä¸Šä¸€æ­¥æ‰¾åˆ°çš„HitTest Viewæ²¡èƒ½å“åº”äº‹ä»¶æ—¶(eg:userInteractionEnabledä¸ºNOæˆ–è€…æ²¡æœ‰å®šä¹‰å“åº”äº‹ä»¶çš„æ–¹æ³•)ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šè¢«ä¼ é€’åˆ°SuperViewæˆ–ç€Controllerã€‚ç›´è‡³Applicaionéƒ½ä¸èƒ½å¤„ç†è¯¥äº‹ä»¶åˆ™å¿½ç•¥ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ä¼ é€’åªä¼šç»™SuperViewæˆ–ç€Controllerï¼Œå¹¶ä¸ä¼šä¼ é€’ç»™ä¸è‡ªå·±ç›¸åŒçº§åˆ«çš„Viewï¼Œé™¤éä½ è‡ªå·±æ§åˆ¶ã€‚\n\niOS10çš„UIResponderä¸­å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„Propertyï¼š\n\n1. `nextResponder(Swiftæ˜¯next)`ï¼šè¿™ä¸ªæ¯”è¾ƒè›‹ç–¼ï¼Œå› ä¸ºUIResponderä¸­å®ƒé»˜è®¤è¿”å›çš„æ˜¯nilï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è®©ç‰¹å®šçš„Responderå“åº”äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ç±»ä¸­é‡è½½Getæ–¹æ³•ï¼Œè¿”å›è‡ªå·±æƒ³è¦çš„ä¸‹ä¸€ä¸ªResponderã€‚\n2. `isFirstResponder`ï¼šåˆ¤æ–­å½“å‰Viewæˆ–Controlleræ˜¯å¦ä¸ºå³å°†å“åº”äº‹ä»¶çš„Responderã€‚ä¸èƒ½æ˜ç™½ï¼Ÿï¼é‚£ä¹ˆæƒ³æƒ³è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š`becomeFirstResponder`å’Œ`resignFirstResponder`ï¼šï¼‰\n\n## æ€»ç»“\n\nåºŸè¯äº†è¿™ä¹ˆå¤šï¼Œä¸‰ç‚¹ï¼š\n\n1. iOSçš„Touch Eventå…ˆã€Œä»ä¸‹å¾€ä¸Šã€å¯»æ‰¾HitTest View(FirstResponder)ï¼Œå†ã€Œä»ä¸Šå¾€ä¸‹ã€å¯»æ‰¾çœŸæ­£å“åº”è¯¥äº‹ä»¶çš„Responderã€‚\n2. å¯ä»¥é€šè¿‡é‡è½½`hitTest:withEvent:`ï¼Œå†³å®šHitTest Viewï¼Œå³æœ€å¼€å§‹**æ¥æ”¶ï¼ˆæ•²é‡ç‚¹ï¼Œåªæ˜¯æ¥æ”¶ï¼‰**äº‹ä»¶çš„Responderã€‚\n3. Responderä¸ä¸€å®šä¼šå“åº”äº‹ä»¶ï¼Œçœ‹æœ‰æ²¡æœ‰å“åº”äº‹ä»¶çš„æ–¹æ³•ã€‚\n\n\n\næ‰€ä»¥ï¼Œä»¥åå¦‚æœæœ‰äººé—®ä½ ï¼šä¸¤ä¸ªViewé‡å åœ¨ä¸€èµ·ï¼Œåœ¨ä¸Šé¢çš„Viewå°†ä¸‹é¢çš„Viewå®Œå…¨è¦†ç›–ï¼Œä¸”ä¸Šé¢çš„Viewä¸èƒ½å“åº”äº‹ä»¶ï¼Œä¸‹é¢çš„Viewä¼šå“åº”å—ï¼Ÿ\n\nä½ ä¸å¦‚å…ˆåé—®ä¸€å¥ï¼Œä¸¤ä¸ªViewæ˜¯å¦ä¸ºSuperViewå’ŒSubViewçš„å…³ç³»ï¼Ÿï¼\n\nå†åˆ†é—¨åˆ«ç±»åœ°å›ç­”ï½\n\nä»¥ä¸Š\n\n\n\n## å‚è€ƒæ–‡çŒ®\n\n[Event Handling Guide for iOS](https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW1)\n\n","slug":"iOS-Eventä¼ é€’å’Œå“åº”é“¾","published":1,"updated":"2018-03-07T09:19:00.763Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12ax0004cqy8cb0efvhg","content":"<p>æœ¬æ¥ä¸æƒ³é‡å¤é€ è½®å­ï¼Œå› ä¸ºç½‘ä¸Šå·²ç»å¾ˆå¤šå…³äºiOSè§¦ç¢°äº‹ä»¶ä¼ é€’å“åº”é“¾çš„æ–‡ç« ï¼Œè€Œä¸”è‹¹æœå®˜æ–¹æ–‡æ¡£ä¹Ÿå·²ç»è§£é‡Šå¾—å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯ä¸Šå‘¨å’Œæœ‹å‹åƒé¥­çš„æ—¶å€™èŠåˆ°å´ä¸èƒ½å¾ˆå¥½åœ°å°†æƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œæ‰€ä»¥æ„Ÿè§‰è¿˜æ˜¯å†™ä¸€å†™ï¼ŒåŠ æ·±å°è±¡å§ï½</p>\n<a id=\"more\"></a>\n<p>æ¯‹åº¸ç½®ç–‘åœ°ï¼Œåœ¨è®ºåŠäº‹ä»¶ä¼ é€’çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šå¾ˆé¡ºå£åœ°ä½¿ç”¨ç”¨ä¸Šä¸‹æ–¹å‘æ¥è¡¨è¾¾äº‹ä»¶ä¼ é€’(Event Delivery)ï¼Œä»UIApplicationåˆ°å“åº”äº‹ä»¶çš„UIViewæ˜¯ã€Œä»ä¸‹å¾€ä¸Šã€ï¼Œåè¿‡æ¥è‡ªç„¶å°±æ˜¯ã€Œä»ä¸Šå¾€ä¸‹ã€äº†ã€‚</p>\n<h2 id=\"ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest-View\"><a href=\"#ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest-View\" class=\"headerlink\" title=\"ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View\"></a>ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View</h2><p>å½“ä¸€ä¸ªç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶å‘ç”Ÿå¹¶è¢«ç³»ç»Ÿæ•è·åˆ°åï¼ŒUIKitä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡(Event Object)ï¼Œæºå¸¦ç€ä¸€äº›å¤„ç†ä¿¡æ¯ï¼Œeg:ç‚¹å‡»ä½ç½®ã€äº‹ä»¶ç±»å‹ç­‰ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡å­˜æ”¾åœ¨UIApplicationçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å¤„ç†ã€‚</p>\n<p>æˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æ˜¯è§¦ç¢°äº‹ä»¶(Touch Event)ï¼Œä¹Ÿåªæœ‰è§¦ç¢°äº‹ä»¶æ‰éœ€è¦iOSä¸ºæˆ‘ä»¬å¯»æ‰¾<strong>HitTest View</strong>ï¼Œå³<strong>å¯»æ‰¾å“åº”è¯¥äº‹ä»¶çš„View</strong>ï¼Œè¿™ä¸€è¿‡ç¨‹ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œç§°ä¸º<strong><em>Hit-Testing</em></strong>ã€‚</p>\n<p>äº†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œå…ˆäº†è§£UIViewçš„ä¸¤ä¸ªå¯é‡è½½çš„æ–¹æ³•ï¼š</p>\n<ol>\n<li><p><code>- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event</code></p>\n<p>ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯<code>CGPoint point</code>å’Œ<code>UIEvent *event</code> ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‹¥æŠ¤è§¦ç¢°äº‹ä»¶çš„<strong>è§¦ç¢°ç‚¹</strong>å’Œå¯¹åº”çš„<strong>äº‹ä»¶</strong>ï¼Œeventå¯ä¸ºnilï¼Œè¿”å›çš„æ˜¯<code>Boolean</code>è¡¨ç¤ºpointæ˜¯å¦åœ¨å½“å‰Viewçš„Boundsä¸­ã€‚</p>\n</li>\n<li><p><code>- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event</code></p>\n<p>åŒæ ·ï¼Œä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯<code>CGPoint point</code>å’Œ<code>UIEvent *event</code> ï¼Œeventå¯ä¸ºnil(æˆ‘ä»¬æœ¬æ¬¡è®¨è®ºçš„æ˜¯è§¦ç¢°äº‹ä»¶çš„Hit-Testingï¼Œè‡ªç„¶æ­¤å‚æ•°ä¸ä¼šä¸ºç©º)ï¼Œæ­¤æ–¹æ³•è¿”å›çš„æ˜¯pointæ‰€åœ¨çš„Viewã€‚</p>\n</li>\n</ol>\n<p><code>hitTest:withEvent:</code>å†…éƒ¨ä¼šå…ˆè°ƒç”¨<code>pointInside:withEvent:</code>ï¼Œæ¥æ£€æµ‹è§¦ç¢°ç‚¹æ˜¯å¦åœ¨å½“å‰Viewä¸­</p>\n<ul>\n<li><p>è‹¥è¿”å›<code>NO</code>,åˆ™ç›´æ¥è¿”å›nilï¼Œä¸”æ‰€æœ‰çš„SubViewéƒ½ä¸ä¼šå“åº”å½“å‰äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œæ•²é‡ç‚¹å•¦ï¼Œå¯¹äº<code>clipsToBounds</code>è®¾ç½®ä¸º<code>NO</code>ï¼Œå…è®¸SubViewå‘å¤–å»¶ä¼¸çš„Viewï¼Œéœ€è¦é‡è½½<code>pointInside:withEvent:</code>ï¼Œä¾‹å¦‚ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rkb9k.jpg\" alt=\"TouchEvent_WechatIMG3\"></p>\n<pre><code class=\"objective-c\">- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{\n      //ä»¥ä¸‹æ˜¯ä¼ªä»£ç   \n      if (point inside blueArea) return true;\n      else return false;\n}\n</code></pre>\n<p>å¦‚æœæ²¡æœ‰é‡è½½<code>pointInside:withEvent:</code>ï¼Œé‚£ä¹ˆç”¨æˆ·ç‚¹å‡»ä¸Šå›¾è§¦ç¢°ç‚¹ï¼ŒSubViewå°†ä¸å“åº”äº‹ä»¶ã€‚</p>\n</li>\n</ul>\n<ul>\n<li><p>è‹¥è¿”å›<code>YES</code>ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰SubViewçš„<code>hitTest:withEvent:</code>ï¼Œç»§ç»­å¯»æ‰¾HitTest Viewã€‚åœ¨è§†å›¾å±‚çº§æ ‘(è¿™æ ·ç¿»è¯‘?! view hierarchy)ä¸­<strong>æœ€åæ·»åŠ çš„å¶ç»“ç‚¹</strong>ä¸”<strong>åŒ…å«è§¦ç¢°ç‚¹</strong>çš„Viewå°±ä¼šå…‰è£åœ°æˆä¸º<strong>HitTest View</strong>(å¦‚ä¸‹å›¾æœ€åä¸€ä¸ªUIView)ï¼Œé¦–å…ˆæ¥å—äº‹ä»¶ï¼Œå¹¶åšä¸‹ä¸€æ­¥æ“ä½œâ€”â€”å¯»æ‰¾å“åº”å¯¹è±¡ã€‚</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zedzb.jpg\" alt=\"TouchEvent_WechatIMG1\"></p>\n</li>\n</ul>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸­é€”æˆªæ–­ç³»ç»Ÿçš„Hit-Testingï¼Œå¦‚æœä½ æƒ³è®©æŸä¸ªViewçš„æ‰€æœ‰SubViewéƒ½ä¸å“åº”äº‹ä»¶ï¼Œæœ€ç®€å•çš„å°±æ˜¯é‡è½½è¯¥Viewçš„<code>hitTest:withEvent:</code>ï¼Œè¿”å›Viewï¼ˆè‡ªå·±å“åº”ç‚¹å‡»äº‹ä»¶ï¼‰æˆ–è€…nilï¼ˆéƒ½ä¸å“åº”ï¼‰ã€‚</p>\n<pre><code class=\"objective-c\">-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {\n    //return nil; æœ¬Viewå’ŒSubViewéƒ½ä¸æˆä¸ºHitTest Viewï¼Œéƒ½ä¸å“åº”äº‹ä»¶\n      return self;    // è‡ªå·±æˆä¸ºHitTest View\n}\n</code></pre>\n<h2 id=\"ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\"><a href=\"#ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\" class=\"headerlink\" title=\"ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\"></a>ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡</h2><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/2fznc.png\" alt=\"1387344-cd500e5bd93d9606\"></p>\n<p>è¿™å¼ å›¾ç›¸ä¿¡åœ¨å…¶ä»–åœ°æ–¹å·²ç»çœ‹äº†ä¸€åƒéäº†ï¼Œä½†æ˜¯æœ‰å›¾è¿˜æ˜¯å®¹æ˜“ç†è§£ï¼Œä»ä¸Šå¾€ä¸‹çš„æ„æ€æ˜¯ï¼š</p>\n<p>å½“ä¸Šä¸€æ­¥æ‰¾åˆ°çš„HitTest Viewæ²¡èƒ½å“åº”äº‹ä»¶æ—¶(eg:userInteractionEnabledä¸ºNOæˆ–è€…æ²¡æœ‰å®šä¹‰å“åº”äº‹ä»¶çš„æ–¹æ³•)ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šè¢«ä¼ é€’åˆ°SuperViewæˆ–ç€Controllerã€‚ç›´è‡³Applicaionéƒ½ä¸èƒ½å¤„ç†è¯¥äº‹ä»¶åˆ™å¿½ç•¥ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ä¼ é€’åªä¼šç»™SuperViewæˆ–ç€Controllerï¼Œå¹¶ä¸ä¼šä¼ é€’ç»™ä¸è‡ªå·±ç›¸åŒçº§åˆ«çš„Viewï¼Œé™¤éä½ è‡ªå·±æ§åˆ¶ã€‚</p>\n<p>iOS10çš„UIResponderä¸­å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„Propertyï¼š</p>\n<ol>\n<li><code>nextResponder(Swiftæ˜¯next)</code>ï¼šè¿™ä¸ªæ¯”è¾ƒè›‹ç–¼ï¼Œå› ä¸ºUIResponderä¸­å®ƒé»˜è®¤è¿”å›çš„æ˜¯nilï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è®©ç‰¹å®šçš„Responderå“åº”äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ç±»ä¸­é‡è½½Getæ–¹æ³•ï¼Œè¿”å›è‡ªå·±æƒ³è¦çš„ä¸‹ä¸€ä¸ªResponderã€‚</li>\n<li><code>isFirstResponder</code>ï¼šåˆ¤æ–­å½“å‰Viewæˆ–Controlleræ˜¯å¦ä¸ºå³å°†å“åº”äº‹ä»¶çš„Responderã€‚ä¸èƒ½æ˜ç™½ï¼Ÿï¼é‚£ä¹ˆæƒ³æƒ³è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š<code>becomeFirstResponder</code>å’Œ<code>resignFirstResponder</code>ï¼šï¼‰</li>\n</ol>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>åºŸè¯äº†è¿™ä¹ˆå¤šï¼Œä¸‰ç‚¹ï¼š</p>\n<ol>\n<li>iOSçš„Touch Eventå…ˆã€Œä»ä¸‹å¾€ä¸Šã€å¯»æ‰¾HitTest View(FirstResponder)ï¼Œå†ã€Œä»ä¸Šå¾€ä¸‹ã€å¯»æ‰¾çœŸæ­£å“åº”è¯¥äº‹ä»¶çš„Responderã€‚</li>\n<li>å¯ä»¥é€šè¿‡é‡è½½<code>hitTest:withEvent:</code>ï¼Œå†³å®šHitTest Viewï¼Œå³æœ€å¼€å§‹<strong>æ¥æ”¶ï¼ˆæ•²é‡ç‚¹ï¼Œåªæ˜¯æ¥æ”¶ï¼‰</strong>äº‹ä»¶çš„Responderã€‚</li>\n<li>Responderä¸ä¸€å®šä¼šå“åº”äº‹ä»¶ï¼Œçœ‹æœ‰æ²¡æœ‰å“åº”äº‹ä»¶çš„æ–¹æ³•ã€‚</li>\n</ol>\n<p>æ‰€ä»¥ï¼Œä»¥åå¦‚æœæœ‰äººé—®ä½ ï¼šä¸¤ä¸ªViewé‡å åœ¨ä¸€èµ·ï¼Œåœ¨ä¸Šé¢çš„Viewå°†ä¸‹é¢çš„Viewå®Œå…¨è¦†ç›–ï¼Œä¸”ä¸Šé¢çš„Viewä¸èƒ½å“åº”äº‹ä»¶ï¼Œä¸‹é¢çš„Viewä¼šå“åº”å—ï¼Ÿ</p>\n<p>ä½ ä¸å¦‚å…ˆåé—®ä¸€å¥ï¼Œä¸¤ä¸ªViewæ˜¯å¦ä¸ºSuperViewå’ŒSubViewçš„å…³ç³»ï¼Ÿï¼</p>\n<p>å†åˆ†é—¨åˆ«ç±»åœ°å›ç­”ï½</p>\n<p>ä»¥ä¸Š</p>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href=\"https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW1\" target=\"_blank\" rel=\"external\">Event Handling Guide for iOS</a></p>\n","excerpt":"<p>æœ¬æ¥ä¸æƒ³é‡å¤é€ è½®å­ï¼Œå› ä¸ºç½‘ä¸Šå·²ç»å¾ˆå¤šå…³äºiOSè§¦ç¢°äº‹ä»¶ä¼ é€’å“åº”é“¾çš„æ–‡ç« ï¼Œè€Œä¸”è‹¹æœå®˜æ–¹æ–‡æ¡£ä¹Ÿå·²ç»è§£é‡Šå¾—å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯ä¸Šå‘¨å’Œæœ‹å‹åƒé¥­çš„æ—¶å€™èŠåˆ°å´ä¸èƒ½å¾ˆå¥½åœ°å°†æƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œæ‰€ä»¥æ„Ÿè§‰è¿˜æ˜¯å†™ä¸€å†™ï¼ŒåŠ æ·±å°è±¡å§ï½</p>","more":"<p>æ¯‹åº¸ç½®ç–‘åœ°ï¼Œåœ¨è®ºåŠäº‹ä»¶ä¼ é€’çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šå¾ˆé¡ºå£åœ°ä½¿ç”¨ç”¨ä¸Šä¸‹æ–¹å‘æ¥è¡¨è¾¾äº‹ä»¶ä¼ é€’(Event Delivery)ï¼Œä»UIApplicationåˆ°å“åº”äº‹ä»¶çš„UIViewæ˜¯ã€Œä»ä¸‹å¾€ä¸Šã€ï¼Œåè¿‡æ¥è‡ªç„¶å°±æ˜¯ã€Œä»ä¸Šå¾€ä¸‹ã€äº†ã€‚</p>\n<h2 id=\"ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest-View\"><a href=\"#ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest-View\" class=\"headerlink\" title=\"ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View\"></a>ä»ä¸‹å¾€ä¸Šâ€”â€”å¯»æ‰¾HitTest View</h2><p>å½“ä¸€ä¸ªç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶å‘ç”Ÿå¹¶è¢«ç³»ç»Ÿæ•è·åˆ°åï¼ŒUIKitä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡(Event Object)ï¼Œæºå¸¦ç€ä¸€äº›å¤„ç†ä¿¡æ¯ï¼Œeg:ç‚¹å‡»ä½ç½®ã€äº‹ä»¶ç±»å‹ç­‰ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡å­˜æ”¾åœ¨UIApplicationçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å¤„ç†ã€‚</p>\n<p>æˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æ˜¯è§¦ç¢°äº‹ä»¶(Touch Event)ï¼Œä¹Ÿåªæœ‰è§¦ç¢°äº‹ä»¶æ‰éœ€è¦iOSä¸ºæˆ‘ä»¬å¯»æ‰¾<strong>HitTest View</strong>ï¼Œå³<strong>å¯»æ‰¾å“åº”è¯¥äº‹ä»¶çš„View</strong>ï¼Œè¿™ä¸€è¿‡ç¨‹ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œç§°ä¸º<strong><em>Hit-Testing</em></strong>ã€‚</p>\n<p>äº†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œå…ˆäº†è§£UIViewçš„ä¸¤ä¸ªå¯é‡è½½çš„æ–¹æ³•ï¼š</p>\n<ol>\n<li><p><code>- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event</code></p>\n<p>ä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯<code>CGPoint point</code>å’Œ<code>UIEvent *event</code> ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‹¥æŠ¤è§¦ç¢°äº‹ä»¶çš„<strong>è§¦ç¢°ç‚¹</strong>å’Œå¯¹åº”çš„<strong>äº‹ä»¶</strong>ï¼Œeventå¯ä¸ºnilï¼Œè¿”å›çš„æ˜¯<code>Boolean</code>è¡¨ç¤ºpointæ˜¯å¦åœ¨å½“å‰Viewçš„Boundsä¸­ã€‚</p>\n</li>\n<li><p><code>- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event</code></p>\n<p>åŒæ ·ï¼Œä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯<code>CGPoint point</code>å’Œ<code>UIEvent *event</code> ï¼Œeventå¯ä¸ºnil(æˆ‘ä»¬æœ¬æ¬¡è®¨è®ºçš„æ˜¯è§¦ç¢°äº‹ä»¶çš„Hit-Testingï¼Œè‡ªç„¶æ­¤å‚æ•°ä¸ä¼šä¸ºç©º)ï¼Œæ­¤æ–¹æ³•è¿”å›çš„æ˜¯pointæ‰€åœ¨çš„Viewã€‚</p>\n</li>\n</ol>\n<p><code>hitTest:withEvent:</code>å†…éƒ¨ä¼šå…ˆè°ƒç”¨<code>pointInside:withEvent:</code>ï¼Œæ¥æ£€æµ‹è§¦ç¢°ç‚¹æ˜¯å¦åœ¨å½“å‰Viewä¸­</p>\n<ul>\n<li><p>è‹¥è¿”å›<code>NO</code>,åˆ™ç›´æ¥è¿”å›nilï¼Œä¸”æ‰€æœ‰çš„SubViewéƒ½ä¸ä¼šå“åº”å½“å‰äº‹ä»¶ã€‚æ‰€ä»¥ï¼Œæ•²é‡ç‚¹å•¦ï¼Œå¯¹äº<code>clipsToBounds</code>è®¾ç½®ä¸º<code>NO</code>ï¼Œå…è®¸SubViewå‘å¤–å»¶ä¼¸çš„Viewï¼Œéœ€è¦é‡è½½<code>pointInside:withEvent:</code>ï¼Œä¾‹å¦‚ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/rkb9k.jpg\" alt=\"TouchEvent_WechatIMG3\"></p>\n<pre><code class=\"objective-c\">- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{\n      //ä»¥ä¸‹æ˜¯ä¼ªä»£ç   \n      if (point inside blueArea) return true;\n      else return false;\n}\n</code></pre>\n<p>å¦‚æœæ²¡æœ‰é‡è½½<code>pointInside:withEvent:</code>ï¼Œé‚£ä¹ˆç”¨æˆ·ç‚¹å‡»ä¸Šå›¾è§¦ç¢°ç‚¹ï¼ŒSubViewå°†ä¸å“åº”äº‹ä»¶ã€‚</p>\n</li>\n</ul>\n<ul>\n<li><p>è‹¥è¿”å›<code>YES</code>ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰SubViewçš„<code>hitTest:withEvent:</code>ï¼Œç»§ç»­å¯»æ‰¾HitTest Viewã€‚åœ¨è§†å›¾å±‚çº§æ ‘(è¿™æ ·ç¿»è¯‘?! view hierarchy)ä¸­<strong>æœ€åæ·»åŠ çš„å¶ç»“ç‚¹</strong>ä¸”<strong>åŒ…å«è§¦ç¢°ç‚¹</strong>çš„Viewå°±ä¼šå…‰è£åœ°æˆä¸º<strong>HitTest View</strong>(å¦‚ä¸‹å›¾æœ€åä¸€ä¸ªUIView)ï¼Œé¦–å…ˆæ¥å—äº‹ä»¶ï¼Œå¹¶åšä¸‹ä¸€æ­¥æ“ä½œâ€”â€”å¯»æ‰¾å“åº”å¯¹è±¡ã€‚</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zedzb.jpg\" alt=\"TouchEvent_WechatIMG1\"></p>\n</li>\n</ul>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸­é€”æˆªæ–­ç³»ç»Ÿçš„Hit-Testingï¼Œå¦‚æœä½ æƒ³è®©æŸä¸ªViewçš„æ‰€æœ‰SubViewéƒ½ä¸å“åº”äº‹ä»¶ï¼Œæœ€ç®€å•çš„å°±æ˜¯é‡è½½è¯¥Viewçš„<code>hitTest:withEvent:</code>ï¼Œè¿”å›Viewï¼ˆè‡ªå·±å“åº”ç‚¹å‡»äº‹ä»¶ï¼‰æˆ–è€…nilï¼ˆéƒ½ä¸å“åº”ï¼‰ã€‚</p>\n<pre><code class=\"objective-c\">-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {\n    //return nil; æœ¬Viewå’ŒSubViewéƒ½ä¸æˆä¸ºHitTest Viewï¼Œéƒ½ä¸å“åº”äº‹ä»¶\n      return self;    // è‡ªå·±æˆä¸ºHitTest View\n}\n</code></pre>\n<h2 id=\"ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\"><a href=\"#ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\" class=\"headerlink\" title=\"ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡\"></a>ä»ä¸Šå¾€ä¸‹â€”â€”å¯»æ‰¾å“åº”å¯¹è±¡</h2><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/2fznc.png\" alt=\"1387344-cd500e5bd93d9606\"></p>\n<p>è¿™å¼ å›¾ç›¸ä¿¡åœ¨å…¶ä»–åœ°æ–¹å·²ç»çœ‹äº†ä¸€åƒéäº†ï¼Œä½†æ˜¯æœ‰å›¾è¿˜æ˜¯å®¹æ˜“ç†è§£ï¼Œä»ä¸Šå¾€ä¸‹çš„æ„æ€æ˜¯ï¼š</p>\n<p>å½“ä¸Šä¸€æ­¥æ‰¾åˆ°çš„HitTest Viewæ²¡èƒ½å“åº”äº‹ä»¶æ—¶(eg:userInteractionEnabledä¸ºNOæˆ–è€…æ²¡æœ‰å®šä¹‰å“åº”äº‹ä»¶çš„æ–¹æ³•)ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šè¢«ä¼ é€’åˆ°SuperViewæˆ–ç€Controllerã€‚ç›´è‡³Applicaionéƒ½ä¸èƒ½å¤„ç†è¯¥äº‹ä»¶åˆ™å¿½ç•¥ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ä¼ é€’åªä¼šç»™SuperViewæˆ–ç€Controllerï¼Œå¹¶ä¸ä¼šä¼ é€’ç»™ä¸è‡ªå·±ç›¸åŒçº§åˆ«çš„Viewï¼Œé™¤éä½ è‡ªå·±æ§åˆ¶ã€‚</p>\n<p>iOS10çš„UIResponderä¸­å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„Propertyï¼š</p>\n<ol>\n<li><code>nextResponder(Swiftæ˜¯next)</code>ï¼šè¿™ä¸ªæ¯”è¾ƒè›‹ç–¼ï¼Œå› ä¸ºUIResponderä¸­å®ƒé»˜è®¤è¿”å›çš„æ˜¯nilï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è®©ç‰¹å®šçš„Responderå“åº”äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„ç±»ä¸­é‡è½½Getæ–¹æ³•ï¼Œè¿”å›è‡ªå·±æƒ³è¦çš„ä¸‹ä¸€ä¸ªResponderã€‚</li>\n<li><code>isFirstResponder</code>ï¼šåˆ¤æ–­å½“å‰Viewæˆ–Controlleræ˜¯å¦ä¸ºå³å°†å“åº”äº‹ä»¶çš„Responderã€‚ä¸èƒ½æ˜ç™½ï¼Ÿï¼é‚£ä¹ˆæƒ³æƒ³è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š<code>becomeFirstResponder</code>å’Œ<code>resignFirstResponder</code>ï¼šï¼‰</li>\n</ol>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>åºŸè¯äº†è¿™ä¹ˆå¤šï¼Œä¸‰ç‚¹ï¼š</p>\n<ol>\n<li>iOSçš„Touch Eventå…ˆã€Œä»ä¸‹å¾€ä¸Šã€å¯»æ‰¾HitTest View(FirstResponder)ï¼Œå†ã€Œä»ä¸Šå¾€ä¸‹ã€å¯»æ‰¾çœŸæ­£å“åº”è¯¥äº‹ä»¶çš„Responderã€‚</li>\n<li>å¯ä»¥é€šè¿‡é‡è½½<code>hitTest:withEvent:</code>ï¼Œå†³å®šHitTest Viewï¼Œå³æœ€å¼€å§‹<strong>æ¥æ”¶ï¼ˆæ•²é‡ç‚¹ï¼Œåªæ˜¯æ¥æ”¶ï¼‰</strong>äº‹ä»¶çš„Responderã€‚</li>\n<li>Responderä¸ä¸€å®šä¼šå“åº”äº‹ä»¶ï¼Œçœ‹æœ‰æ²¡æœ‰å“åº”äº‹ä»¶çš„æ–¹æ³•ã€‚</li>\n</ol>\n<p>æ‰€ä»¥ï¼Œä»¥åå¦‚æœæœ‰äººé—®ä½ ï¼šä¸¤ä¸ªViewé‡å åœ¨ä¸€èµ·ï¼Œåœ¨ä¸Šé¢çš„Viewå°†ä¸‹é¢çš„Viewå®Œå…¨è¦†ç›–ï¼Œä¸”ä¸Šé¢çš„Viewä¸èƒ½å“åº”äº‹ä»¶ï¼Œä¸‹é¢çš„Viewä¼šå“åº”å—ï¼Ÿ</p>\n<p>ä½ ä¸å¦‚å…ˆåé—®ä¸€å¥ï¼Œä¸¤ä¸ªViewæ˜¯å¦ä¸ºSuperViewå’ŒSubViewçš„å…³ç³»ï¼Ÿï¼</p>\n<p>å†åˆ†é—¨åˆ«ç±»åœ°å›ç­”ï½</p>\n<p>ä»¥ä¸Š</p>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href=\"https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW1\">Event Handling Guide for iOS</a></p>"},{"title":"ç©¿è¶Šçš„æ¡ƒå¿ƒ~","date":"2016-05-21T07:23:18.000Z","typora-copy-images-to":"ipic","_content":"\næœ€è¿‘æ²¡äº‹çœ‹çœ‹Instagramçš„æ—¶å€™ï¼Œå¯¹äºåŒå‡»ç‚¹èµçš„åŠŸèƒ½æ„Ÿè§‰è›®Likeã€‚æ‰€ä»¥å°±æƒ³è‡ªå·±ä»¿ç…§åšä¸€ä¸ªã€‚ä½†æ˜¯å˜ï¼Œç›´æ¥ä»¿é€ æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç©ï¼Œæ‰€ä»¥å°±è‡ªå·±æƒ³æ·»åŠ ç‚¹æ–°ä¸œè¥¿ï¼Œå› æ­¤å°±æœ‰äº†EZHeartForLikeã€‚:)\n\n<!--more-->\n\n![EZHeartForLike_logo](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pwmtz.png)    \næ•ˆæœå›¾(ç¬¬ä¸€å¼ æ˜¯åŒå‡»å›¾ç‰‡è§¦å‘ï¼Œç¬¬äºŒå¼ æ˜¯å•å‡»æŒ‰é’®)ï¼š\n![](https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/double.gif)       ![](https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/single.gif)    \nå…ˆè¯´è¯´è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚    \nä¸€å¼€å§‹æˆ‘æ˜¯åœ¨Instagramçš„åŸºç¡€ä¸Šå¼€å§‹åšçš„ã€‚åŒå‡»ç‚¹å‡»å›¾ç‰‡å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¡ƒå¿ƒï¼Œéšå³ä¸‹é¢çš„å°æ¡ƒå¿ƒç‚¹äº®ã€‚å®Œæˆç‚¹èµçš„æ“ä½œã€‚like this(ä¸“é—¨æˆªäº†æˆ‘â¤ï¸GEMâ¤ï¸è¿‡æ¥ï¼ŒInstagramçš„å¿ƒæŒ¡ä½å¥¹çš„è„¸äº†ã€‚ã€‚ã€‚)ï¼š\n![EZHeartForLike_gem](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/37lsw.jpg)    \nå¥½å§ï¼Œå°ºå¯¸æ˜¯æ˜¯ç”¨æˆ‘åˆçˆ±åˆæ¨çš„4Sçš„ 320 x 480    \nç´§æ¥ç€å°±æƒ³ï¼Œèƒ½ä¸èƒ½å®ç°å¤§æ¡ƒå¿ƒä¸€è¾¹ç§»åŠ¨ä¸€è¾¹ç¼©å°ï¼Œæœ€ååˆ°å¤§å°æ¡ƒå¿ƒçš„ä½ç½®å¹¶æ›¿æ¢å®ƒï¼Ÿï¼å°±åƒä¸Šé¢æœ€ç»ˆæ•ˆæœä¸€æ ·\n![aixin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/4p80z.jpg)\nå¾ˆå¿«æˆ‘é‡åˆ°é—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­ï¼Œè¯ç”˜æ˜“å•¦ï¼ï¼ï¼ä½†æ˜¯ç°åœ¨çš„æƒ…å†µæ˜¯ä¸¤ä¸ªæ¡ƒå¿ƒå¹¶ä¸åœ¨åŒä¸€ä¸ªViewä¸­ï¼ˆç°å®ä¸­å¾ˆå¤šæƒ…å†µéƒ½ä¸ä¼šï¼‰ï¼Œ**ä½ç½®ä¸æ˜ç¡®**æ˜¯ä¸€ä¸ªSuperå·¨å¤§çš„é—®é¢˜ã€‚å› æ­¤è·¨Viewçš„åŠ¨ç”»æ˜¯EZHeartForLikeæ˜¯è¿™æ¬¡çš„ä¸»è¦è¯é¢˜ã€‚å½“ç„¶åŠ¨ç”»æ˜¯ä½¿ç”¨UIViewæ¥å®ç°çš„~~    \né‚£ä¹ˆï¼Œè®²è®²æˆ‘çš„æ€è·¯å†ç¨‹å§ï¼š    \né¦–å…ˆï¼Œæˆ‘æƒ³äº†ä¸‹èƒ½ä¸èƒ½åœ¨ä¸€ä¸ªEZHeartForLikeViewä¸­åˆ†åˆ«æ”¾å…¥ä¸‹åˆ—ä¸‰ä¸ªViewï¼Œå·²å®ç°æˆ‘çš„æƒ³æ³•ï¼š    \n* ContentView ï¼šç”¨äºè®©ç”¨æˆ·å°†è‡ªå·±çš„Viewæ”¾å…¥å…¶ä¸­ã€‚ç±»ä¼¼iOS8é‡Œé¢çš„UIVisualEffectViewçš„contentViewä¸€æ ·ã€‚    \n* SmallHeart ï¼šè¢«å½“åšæŒ‰é’®çš„å°æ¡ƒå¿ƒï¼Œæ˜¯Publicçš„ï¼Œæä¾›ç»™ç”¨æˆ·æ”¹é€ å®ƒçš„æ ·å¼ã€å¤§å°ã€ä½ç½®ç­‰ã€‚ \n* BigHeart ï¼šå‡ºç°åœ¨å›¾ç‰‡(ImageView)ä¸­çš„å¤§æ¡ƒå¿ƒ\n\nåœ¨æˆ‘è‡ªå·±æ¶‚æ¶‚ç”»ç”»åæ˜¯è¿™æ ·çš„ï¼š    \n![EZHeartForLike_begin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r0ov5.jpg)\n\nä¸€å¼€å§‹è§‰å¾—å¯èƒ½èƒ½è¡Œï¼Œå› ä¸ºä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­(EZHeartForLikeView)ï¼Œè¦å®ç°åŠ¨ç”»åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åæ¥æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘æŠŠå°æ¡ƒå¿ƒä½œä¸ºPublicå¯¹å¤–æä¾›ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥å°†å®ƒæ”¾å…¥è‡ªå·±çš„Viewä¸­ã€‚å› æ­¤è¿™ä¸ªæƒ³æ³•å¾ˆå¿«è¢«å¦äº†ã€‚ã€‚ã€‚\n\nè¿™ä¸ªé—®é¢˜è®©æˆ‘ä¾¿ç§˜äº†ä¸¤å¤©ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚åæ¥åœ¨æ´—æ¾¡æ—¶æƒ³åˆ°ä¸€ä¸ªæˆ–è®¸èƒ½è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œè™½ç„¶å¤§å°æ¡ƒå¿ƒçš„ä½ç½®éƒ½ä¸æ¸…æ¥šï¼Œä½†æ˜¯ä»–ä»¬è‡³å°‘æœ‰åŒä¸€ä¸ªSuperViewï¼Œæˆ–è®¸åŠ ä»¥åˆ©ç”¨å°±èƒ½å®ç°è¿™ä¸ªæƒ³æ³•ã€‚è°çŸ¥é“å˜ï¼Œè¯•ä¸€ä¸‹å§ï¼š    \nç®€å•ä¸€å¥è¯å°±æ˜¯ï¼š**æ‰¾åˆ°ç›¸åŒçš„SuperViewï¼Œæ˜ å°„åæ ‡ï¼Œåœ¨SuperViewä¸Šå®ŒæˆåŠ¨ç”»çš„å®ç°**    \n![EZHeartForLike_findview](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1c4s3.jpg)\nå…·ä½“æ€ä¹ˆæ‰¾åˆ°ç›¸åŒçš„SuperViewå˜ï¼Œé‚£å°±è¦æ‰¯åˆ°å¦å¤–ä¸€ä¸ªç®—æ³•äº†ï¼Œé‚£å°±æ˜¯åˆ¤æ–­ä¸¤æ¡é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œä¸”äº¤ç‚¹æ˜¯å“ªä¸€ä¸ªçš„é—®é¢˜ã€‚    \nè¿™é‡Œæˆ‘åˆè¦ç¥­å‡ºæˆ‘çš„çµé­‚ç”»é£äº†\n![EZHeartForLike_lianbiao](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e0q6r.jpg)    \nå®ç°èµ·æ¥å…¶å®ä¸æ˜¯èƒ½éš¾ï¼Œä¸”çœ‹ä»£ç ï¼š\n\n``` objc\n- (UIView *)findTheMutualSuperView {\n    // æ‰¾å‡ºå°æ¡ƒå¿ƒï¼ˆselfï¼‰å’Œå¤§æ¡ƒå¿ƒï¼ˆself.BigHeartï¼‰çš„å…±åŒçš„SuperView\n    // è®¡ç®—selfåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view1 = self;\n    NSInteger smallViewSuperViewCount = 0;\n    while (![view1 isKindOfClass:[UIWindow class]]) {\n        smallViewSuperViewCount ++;\n        view1 = view1.superview;\n    }\n    // è®¡ç®—self.BigHeartåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view2 = self.BigHeart;\n    NSInteger bigViewSuperViewCount = 0;\n    while (![view2 isKindOfClass:[UIWindow class]]) {\n        bigViewSuperViewCount ++;\n        view2 = view2.superview;\n    }\n    // å…±åŒçš„SuperViewä¹‹åçš„Viewè‚¯å®šæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤å°æ¡ƒå¿ƒå’Œå¤§æ¡ƒå¿ƒåˆ°UIWindowçš„è·ç¦»ä¹‹é—´çš„å·®\n    // å®åœ¨å…±åŒçš„SuperViewä¹‹å‰å°±å­˜åœ¨çš„ã€‚æ‰€ä»¥ï¼Œåˆ¤æ–­äºŒè€…åˆ°UIWindowçš„è·ç¦»å¤§å°ï¼Œå¹¶åˆ©ç”¨ä¸¤è€…ä¹‹é—´\n    // çš„å·®è·å°±å¯ä»¥æ‰¾åˆ°å…±åŒçš„SuperView\n    NSInteger mutualViewCount = labs(smallViewSuperViewCount - bigViewSuperViewCount);\n    view1 = self;\n    view2 = self.BigHeart;\n    if (smallViewSuperViewCount > bigViewSuperViewCount) {\n        for (int i = 0; i < mutualViewCount; ++ i) {\n            view1 = view1.superview;\n        }\n    } else {\n        for (int i = 0; i < mutualViewCount; ++ i) {\n            view2 = view2.superview;\n        }\n    }\n    while (view1 != view2) {\n        view1 = view1.superview;\n        view2 = view2.superview;\n    }\n    return view1;\n}\n```\n\næœ‰äº†ä¸Šé¢çš„æ€æƒ³ï¼Œæ˜ å°„åæ ‡åŒæ ·å˜å¾—ç®€å•ï¼š\n\n``` objc \n    //æ˜ å°„ä¸¤ä¸ªHeartçš„åæ ‡ã€‚\n    // é¦–å…ˆæ˜¯å°æ¡ƒå¿ƒ(self)\n    UIView *view1 = self;\n    CGPoint smallHeartPoint = CGPointZero;\n    while (view1 != mutualSuperView) {\n        smallHeartPoint.x += view1.frame.origin.x;\n        smallHeartPoint.y += view1.frame.origin.y;\n        view1 = view1.superview;\n    }\n    // å…¶æ¬¡æ˜¯å¤§æ¡ƒå¿ƒ(self.BigHeart)\n    UIView *view2 = self.BigHeart;\n    CGPoint bigHeartPoint = CGPointZero;\n    while (view2 != mutualSuperView) {\n        bigHeartPoint.x += view2.frame.origin.x;\n        bigHeartPoint.y += view2.frame.origin.y;\n        view2 = view2.superview;\n    }\n```\n\næ—¢ç„¶å¾—åˆ°ä¸¤ä¸ªæ¡ƒå¿ƒçš„åæ ‡äº†ï¼Œå®ç°åŠ¨ç”»å°±è‡ªç„¶å˜å¾—ç®€å•å•¦ï¼Œå°±ä¸èµ˜è¿°äº†:)    \næœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„[Github](https://github.com/objchris/EZHeartForLike)ï¼Œå¯ä»¥ä¸‹è½½åœ¨é¡¹ç›®ä¸­ï¼Œé¡ºä¾¿ç»™æˆ‘ä¸ªLikeå§![hahaha](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg)","source":"_posts/EZHeartForLike.md","raw":"---\ntitle: ç©¿è¶Šçš„æ¡ƒå¿ƒ~\ndate: 2016-05-21 15:23:18\ntags: \n- Animation\ntypora-copy-images-to: ipic\n---\n\næœ€è¿‘æ²¡äº‹çœ‹çœ‹Instagramçš„æ—¶å€™ï¼Œå¯¹äºåŒå‡»ç‚¹èµçš„åŠŸèƒ½æ„Ÿè§‰è›®Likeã€‚æ‰€ä»¥å°±æƒ³è‡ªå·±ä»¿ç…§åšä¸€ä¸ªã€‚ä½†æ˜¯å˜ï¼Œç›´æ¥ä»¿é€ æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç©ï¼Œæ‰€ä»¥å°±è‡ªå·±æƒ³æ·»åŠ ç‚¹æ–°ä¸œè¥¿ï¼Œå› æ­¤å°±æœ‰äº†EZHeartForLikeã€‚:)\n\n<!--more-->\n\n![EZHeartForLike_logo](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pwmtz.png)    \næ•ˆæœå›¾(ç¬¬ä¸€å¼ æ˜¯åŒå‡»å›¾ç‰‡è§¦å‘ï¼Œç¬¬äºŒå¼ æ˜¯å•å‡»æŒ‰é’®)ï¼š\n![](https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/double.gif)       ![](https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/single.gif)    \nå…ˆè¯´è¯´è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚    \nä¸€å¼€å§‹æˆ‘æ˜¯åœ¨Instagramçš„åŸºç¡€ä¸Šå¼€å§‹åšçš„ã€‚åŒå‡»ç‚¹å‡»å›¾ç‰‡å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¡ƒå¿ƒï¼Œéšå³ä¸‹é¢çš„å°æ¡ƒå¿ƒç‚¹äº®ã€‚å®Œæˆç‚¹èµçš„æ“ä½œã€‚like this(ä¸“é—¨æˆªäº†æˆ‘â¤ï¸GEMâ¤ï¸è¿‡æ¥ï¼ŒInstagramçš„å¿ƒæŒ¡ä½å¥¹çš„è„¸äº†ã€‚ã€‚ã€‚)ï¼š\n![EZHeartForLike_gem](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/37lsw.jpg)    \nå¥½å§ï¼Œå°ºå¯¸æ˜¯æ˜¯ç”¨æˆ‘åˆçˆ±åˆæ¨çš„4Sçš„ 320 x 480    \nç´§æ¥ç€å°±æƒ³ï¼Œèƒ½ä¸èƒ½å®ç°å¤§æ¡ƒå¿ƒä¸€è¾¹ç§»åŠ¨ä¸€è¾¹ç¼©å°ï¼Œæœ€ååˆ°å¤§å°æ¡ƒå¿ƒçš„ä½ç½®å¹¶æ›¿æ¢å®ƒï¼Ÿï¼å°±åƒä¸Šé¢æœ€ç»ˆæ•ˆæœä¸€æ ·\n![aixin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/4p80z.jpg)\nå¾ˆå¿«æˆ‘é‡åˆ°é—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­ï¼Œè¯ç”˜æ˜“å•¦ï¼ï¼ï¼ä½†æ˜¯ç°åœ¨çš„æƒ…å†µæ˜¯ä¸¤ä¸ªæ¡ƒå¿ƒå¹¶ä¸åœ¨åŒä¸€ä¸ªViewä¸­ï¼ˆç°å®ä¸­å¾ˆå¤šæƒ…å†µéƒ½ä¸ä¼šï¼‰ï¼Œ**ä½ç½®ä¸æ˜ç¡®**æ˜¯ä¸€ä¸ªSuperå·¨å¤§çš„é—®é¢˜ã€‚å› æ­¤è·¨Viewçš„åŠ¨ç”»æ˜¯EZHeartForLikeæ˜¯è¿™æ¬¡çš„ä¸»è¦è¯é¢˜ã€‚å½“ç„¶åŠ¨ç”»æ˜¯ä½¿ç”¨UIViewæ¥å®ç°çš„~~    \né‚£ä¹ˆï¼Œè®²è®²æˆ‘çš„æ€è·¯å†ç¨‹å§ï¼š    \né¦–å…ˆï¼Œæˆ‘æƒ³äº†ä¸‹èƒ½ä¸èƒ½åœ¨ä¸€ä¸ªEZHeartForLikeViewä¸­åˆ†åˆ«æ”¾å…¥ä¸‹åˆ—ä¸‰ä¸ªViewï¼Œå·²å®ç°æˆ‘çš„æƒ³æ³•ï¼š    \n* ContentView ï¼šç”¨äºè®©ç”¨æˆ·å°†è‡ªå·±çš„Viewæ”¾å…¥å…¶ä¸­ã€‚ç±»ä¼¼iOS8é‡Œé¢çš„UIVisualEffectViewçš„contentViewä¸€æ ·ã€‚    \n* SmallHeart ï¼šè¢«å½“åšæŒ‰é’®çš„å°æ¡ƒå¿ƒï¼Œæ˜¯Publicçš„ï¼Œæä¾›ç»™ç”¨æˆ·æ”¹é€ å®ƒçš„æ ·å¼ã€å¤§å°ã€ä½ç½®ç­‰ã€‚ \n* BigHeart ï¼šå‡ºç°åœ¨å›¾ç‰‡(ImageView)ä¸­çš„å¤§æ¡ƒå¿ƒ\n\nåœ¨æˆ‘è‡ªå·±æ¶‚æ¶‚ç”»ç”»åæ˜¯è¿™æ ·çš„ï¼š    \n![EZHeartForLike_begin](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r0ov5.jpg)\n\nä¸€å¼€å§‹è§‰å¾—å¯èƒ½èƒ½è¡Œï¼Œå› ä¸ºä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­(EZHeartForLikeView)ï¼Œè¦å®ç°åŠ¨ç”»åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åæ¥æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘æŠŠå°æ¡ƒå¿ƒä½œä¸ºPublicå¯¹å¤–æä¾›ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥å°†å®ƒæ”¾å…¥è‡ªå·±çš„Viewä¸­ã€‚å› æ­¤è¿™ä¸ªæƒ³æ³•å¾ˆå¿«è¢«å¦äº†ã€‚ã€‚ã€‚\n\nè¿™ä¸ªé—®é¢˜è®©æˆ‘ä¾¿ç§˜äº†ä¸¤å¤©ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚åæ¥åœ¨æ´—æ¾¡æ—¶æƒ³åˆ°ä¸€ä¸ªæˆ–è®¸èƒ½è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œè™½ç„¶å¤§å°æ¡ƒå¿ƒçš„ä½ç½®éƒ½ä¸æ¸…æ¥šï¼Œä½†æ˜¯ä»–ä»¬è‡³å°‘æœ‰åŒä¸€ä¸ªSuperViewï¼Œæˆ–è®¸åŠ ä»¥åˆ©ç”¨å°±èƒ½å®ç°è¿™ä¸ªæƒ³æ³•ã€‚è°çŸ¥é“å˜ï¼Œè¯•ä¸€ä¸‹å§ï¼š    \nç®€å•ä¸€å¥è¯å°±æ˜¯ï¼š**æ‰¾åˆ°ç›¸åŒçš„SuperViewï¼Œæ˜ å°„åæ ‡ï¼Œåœ¨SuperViewä¸Šå®ŒæˆåŠ¨ç”»çš„å®ç°**    \n![EZHeartForLike_findview](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1c4s3.jpg)\nå…·ä½“æ€ä¹ˆæ‰¾åˆ°ç›¸åŒçš„SuperViewå˜ï¼Œé‚£å°±è¦æ‰¯åˆ°å¦å¤–ä¸€ä¸ªç®—æ³•äº†ï¼Œé‚£å°±æ˜¯åˆ¤æ–­ä¸¤æ¡é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œä¸”äº¤ç‚¹æ˜¯å“ªä¸€ä¸ªçš„é—®é¢˜ã€‚    \nè¿™é‡Œæˆ‘åˆè¦ç¥­å‡ºæˆ‘çš„çµé­‚ç”»é£äº†\n![EZHeartForLike_lianbiao](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e0q6r.jpg)    \nå®ç°èµ·æ¥å…¶å®ä¸æ˜¯èƒ½éš¾ï¼Œä¸”çœ‹ä»£ç ï¼š\n\n``` objc\n- (UIView *)findTheMutualSuperView {\n    // æ‰¾å‡ºå°æ¡ƒå¿ƒï¼ˆselfï¼‰å’Œå¤§æ¡ƒå¿ƒï¼ˆself.BigHeartï¼‰çš„å…±åŒçš„SuperView\n    // è®¡ç®—selfåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view1 = self;\n    NSInteger smallViewSuperViewCount = 0;\n    while (![view1 isKindOfClass:[UIWindow class]]) {\n        smallViewSuperViewCount ++;\n        view1 = view1.superview;\n    }\n    // è®¡ç®—self.BigHeartåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view2 = self.BigHeart;\n    NSInteger bigViewSuperViewCount = 0;\n    while (![view2 isKindOfClass:[UIWindow class]]) {\n        bigViewSuperViewCount ++;\n        view2 = view2.superview;\n    }\n    // å…±åŒçš„SuperViewä¹‹åçš„Viewè‚¯å®šæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤å°æ¡ƒå¿ƒå’Œå¤§æ¡ƒå¿ƒåˆ°UIWindowçš„è·ç¦»ä¹‹é—´çš„å·®\n    // å®åœ¨å…±åŒçš„SuperViewä¹‹å‰å°±å­˜åœ¨çš„ã€‚æ‰€ä»¥ï¼Œåˆ¤æ–­äºŒè€…åˆ°UIWindowçš„è·ç¦»å¤§å°ï¼Œå¹¶åˆ©ç”¨ä¸¤è€…ä¹‹é—´\n    // çš„å·®è·å°±å¯ä»¥æ‰¾åˆ°å…±åŒçš„SuperView\n    NSInteger mutualViewCount = labs(smallViewSuperViewCount - bigViewSuperViewCount);\n    view1 = self;\n    view2 = self.BigHeart;\n    if (smallViewSuperViewCount > bigViewSuperViewCount) {\n        for (int i = 0; i < mutualViewCount; ++ i) {\n            view1 = view1.superview;\n        }\n    } else {\n        for (int i = 0; i < mutualViewCount; ++ i) {\n            view2 = view2.superview;\n        }\n    }\n    while (view1 != view2) {\n        view1 = view1.superview;\n        view2 = view2.superview;\n    }\n    return view1;\n}\n```\n\næœ‰äº†ä¸Šé¢çš„æ€æƒ³ï¼Œæ˜ å°„åæ ‡åŒæ ·å˜å¾—ç®€å•ï¼š\n\n``` objc \n    //æ˜ å°„ä¸¤ä¸ªHeartçš„åæ ‡ã€‚\n    // é¦–å…ˆæ˜¯å°æ¡ƒå¿ƒ(self)\n    UIView *view1 = self;\n    CGPoint smallHeartPoint = CGPointZero;\n    while (view1 != mutualSuperView) {\n        smallHeartPoint.x += view1.frame.origin.x;\n        smallHeartPoint.y += view1.frame.origin.y;\n        view1 = view1.superview;\n    }\n    // å…¶æ¬¡æ˜¯å¤§æ¡ƒå¿ƒ(self.BigHeart)\n    UIView *view2 = self.BigHeart;\n    CGPoint bigHeartPoint = CGPointZero;\n    while (view2 != mutualSuperView) {\n        bigHeartPoint.x += view2.frame.origin.x;\n        bigHeartPoint.y += view2.frame.origin.y;\n        view2 = view2.superview;\n    }\n```\n\næ—¢ç„¶å¾—åˆ°ä¸¤ä¸ªæ¡ƒå¿ƒçš„åæ ‡äº†ï¼Œå®ç°åŠ¨ç”»å°±è‡ªç„¶å˜å¾—ç®€å•å•¦ï¼Œå°±ä¸èµ˜è¿°äº†:)    \næœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„[Github](https://github.com/objchris/EZHeartForLike)ï¼Œå¯ä»¥ä¸‹è½½åœ¨é¡¹ç›®ä¸­ï¼Œé¡ºä¾¿ç»™æˆ‘ä¸ªLikeå§![hahaha](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg)","slug":"EZHeartForLike","published":1,"updated":"2018-03-07T08:14:04.050Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12az0005cqy8k08cnixm","content":"<p>æœ€è¿‘æ²¡äº‹çœ‹çœ‹Instagramçš„æ—¶å€™ï¼Œå¯¹äºåŒå‡»ç‚¹èµçš„åŠŸèƒ½æ„Ÿè§‰è›®Likeã€‚æ‰€ä»¥å°±æƒ³è‡ªå·±ä»¿ç…§åšä¸€ä¸ªã€‚ä½†æ˜¯å˜ï¼Œç›´æ¥ä»¿é€ æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç©ï¼Œæ‰€ä»¥å°±è‡ªå·±æƒ³æ·»åŠ ç‚¹æ–°ä¸œè¥¿ï¼Œå› æ­¤å°±æœ‰äº†EZHeartForLikeã€‚:)</p>\n<a id=\"more\"></a>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pwmtz.png\" alt=\"EZHeartForLike_logo\"><br>æ•ˆæœå›¾(ç¬¬ä¸€å¼ æ˜¯åŒå‡»å›¾ç‰‡è§¦å‘ï¼Œç¬¬äºŒå¼ æ˜¯å•å‡»æŒ‰é’®)ï¼š<br><img src=\"https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/double.gif\" alt=\"\">       <img src=\"https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/single.gif\" alt=\"\"><br>å…ˆè¯´è¯´è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚<br>ä¸€å¼€å§‹æˆ‘æ˜¯åœ¨Instagramçš„åŸºç¡€ä¸Šå¼€å§‹åšçš„ã€‚åŒå‡»ç‚¹å‡»å›¾ç‰‡å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¡ƒå¿ƒï¼Œéšå³ä¸‹é¢çš„å°æ¡ƒå¿ƒç‚¹äº®ã€‚å®Œæˆç‚¹èµçš„æ“ä½œã€‚like this(ä¸“é—¨æˆªäº†æˆ‘â¤ï¸GEMâ¤ï¸è¿‡æ¥ï¼ŒInstagramçš„å¿ƒæŒ¡ä½å¥¹çš„è„¸äº†ã€‚ã€‚ã€‚)ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/37lsw.jpg\" alt=\"EZHeartForLike_gem\"><br>å¥½å§ï¼Œå°ºå¯¸æ˜¯æ˜¯ç”¨æˆ‘åˆçˆ±åˆæ¨çš„4Sçš„ 320 x 480<br>ç´§æ¥ç€å°±æƒ³ï¼Œèƒ½ä¸èƒ½å®ç°å¤§æ¡ƒå¿ƒä¸€è¾¹ç§»åŠ¨ä¸€è¾¹ç¼©å°ï¼Œæœ€ååˆ°å¤§å°æ¡ƒå¿ƒçš„ä½ç½®å¹¶æ›¿æ¢å®ƒï¼Ÿï¼å°±åƒä¸Šé¢æœ€ç»ˆæ•ˆæœä¸€æ ·<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/4p80z.jpg\" alt=\"aixin\"><br>å¾ˆå¿«æˆ‘é‡åˆ°é—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­ï¼Œè¯ç”˜æ˜“å•¦ï¼ï¼ï¼ä½†æ˜¯ç°åœ¨çš„æƒ…å†µæ˜¯ä¸¤ä¸ªæ¡ƒå¿ƒå¹¶ä¸åœ¨åŒä¸€ä¸ªViewä¸­ï¼ˆç°å®ä¸­å¾ˆå¤šæƒ…å†µéƒ½ä¸ä¼šï¼‰ï¼Œ<strong>ä½ç½®ä¸æ˜ç¡®</strong>æ˜¯ä¸€ä¸ªSuperå·¨å¤§çš„é—®é¢˜ã€‚å› æ­¤è·¨Viewçš„åŠ¨ç”»æ˜¯EZHeartForLikeæ˜¯è¿™æ¬¡çš„ä¸»è¦è¯é¢˜ã€‚å½“ç„¶åŠ¨ç”»æ˜¯ä½¿ç”¨UIViewæ¥å®ç°çš„~~<br>é‚£ä¹ˆï¼Œè®²è®²æˆ‘çš„æ€è·¯å†ç¨‹å§ï¼š<br>é¦–å…ˆï¼Œæˆ‘æƒ³äº†ä¸‹èƒ½ä¸èƒ½åœ¨ä¸€ä¸ªEZHeartForLikeViewä¸­åˆ†åˆ«æ”¾å…¥ä¸‹åˆ—ä¸‰ä¸ªViewï¼Œå·²å®ç°æˆ‘çš„æƒ³æ³•ï¼š    </p>\n<ul>\n<li>ContentView ï¼šç”¨äºè®©ç”¨æˆ·å°†è‡ªå·±çš„Viewæ”¾å…¥å…¶ä¸­ã€‚ç±»ä¼¼iOS8é‡Œé¢çš„UIVisualEffectViewçš„contentViewä¸€æ ·ã€‚    </li>\n<li>SmallHeart ï¼šè¢«å½“åšæŒ‰é’®çš„å°æ¡ƒå¿ƒï¼Œæ˜¯Publicçš„ï¼Œæä¾›ç»™ç”¨æˆ·æ”¹é€ å®ƒçš„æ ·å¼ã€å¤§å°ã€ä½ç½®ç­‰ã€‚ </li>\n<li>BigHeart ï¼šå‡ºç°åœ¨å›¾ç‰‡(ImageView)ä¸­çš„å¤§æ¡ƒå¿ƒ</li>\n</ul>\n<p>åœ¨æˆ‘è‡ªå·±æ¶‚æ¶‚ç”»ç”»åæ˜¯è¿™æ ·çš„ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r0ov5.jpg\" alt=\"EZHeartForLike_begin\"></p>\n<p>ä¸€å¼€å§‹è§‰å¾—å¯èƒ½èƒ½è¡Œï¼Œå› ä¸ºä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­(EZHeartForLikeView)ï¼Œè¦å®ç°åŠ¨ç”»åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åæ¥æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘æŠŠå°æ¡ƒå¿ƒä½œä¸ºPublicå¯¹å¤–æä¾›ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥å°†å®ƒæ”¾å…¥è‡ªå·±çš„Viewä¸­ã€‚å› æ­¤è¿™ä¸ªæƒ³æ³•å¾ˆå¿«è¢«å¦äº†ã€‚ã€‚ã€‚</p>\n<p>è¿™ä¸ªé—®é¢˜è®©æˆ‘ä¾¿ç§˜äº†ä¸¤å¤©ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚åæ¥åœ¨æ´—æ¾¡æ—¶æƒ³åˆ°ä¸€ä¸ªæˆ–è®¸èƒ½è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œè™½ç„¶å¤§å°æ¡ƒå¿ƒçš„ä½ç½®éƒ½ä¸æ¸…æ¥šï¼Œä½†æ˜¯ä»–ä»¬è‡³å°‘æœ‰åŒä¸€ä¸ªSuperViewï¼Œæˆ–è®¸åŠ ä»¥åˆ©ç”¨å°±èƒ½å®ç°è¿™ä¸ªæƒ³æ³•ã€‚è°çŸ¥é“å˜ï¼Œè¯•ä¸€ä¸‹å§ï¼š<br>ç®€å•ä¸€å¥è¯å°±æ˜¯ï¼š<strong>æ‰¾åˆ°ç›¸åŒçš„SuperViewï¼Œæ˜ å°„åæ ‡ï¼Œåœ¨SuperViewä¸Šå®ŒæˆåŠ¨ç”»çš„å®ç°</strong><br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1c4s3.jpg\" alt=\"EZHeartForLike_findview\"><br>å…·ä½“æ€ä¹ˆæ‰¾åˆ°ç›¸åŒçš„SuperViewå˜ï¼Œé‚£å°±è¦æ‰¯åˆ°å¦å¤–ä¸€ä¸ªç®—æ³•äº†ï¼Œé‚£å°±æ˜¯åˆ¤æ–­ä¸¤æ¡é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œä¸”äº¤ç‚¹æ˜¯å“ªä¸€ä¸ªçš„é—®é¢˜ã€‚<br>è¿™é‡Œæˆ‘åˆè¦ç¥­å‡ºæˆ‘çš„çµé­‚ç”»é£äº†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e0q6r.jpg\" alt=\"EZHeartForLike_lianbiao\"><br>å®ç°èµ·æ¥å…¶å®ä¸æ˜¯èƒ½éš¾ï¼Œä¸”çœ‹ä»£ç ï¼š</p>\n<pre><code class=\"objc\">- (UIView *)findTheMutualSuperView {\n    // æ‰¾å‡ºå°æ¡ƒå¿ƒï¼ˆselfï¼‰å’Œå¤§æ¡ƒå¿ƒï¼ˆself.BigHeartï¼‰çš„å…±åŒçš„SuperView\n    // è®¡ç®—selfåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view1 = self;\n    NSInteger smallViewSuperViewCount = 0;\n    while (![view1 isKindOfClass:[UIWindow class]]) {\n        smallViewSuperViewCount ++;\n        view1 = view1.superview;\n    }\n    // è®¡ç®—self.BigHeartåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view2 = self.BigHeart;\n    NSInteger bigViewSuperViewCount = 0;\n    while (![view2 isKindOfClass:[UIWindow class]]) {\n        bigViewSuperViewCount ++;\n        view2 = view2.superview;\n    }\n    // å…±åŒçš„SuperViewä¹‹åçš„Viewè‚¯å®šæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤å°æ¡ƒå¿ƒå’Œå¤§æ¡ƒå¿ƒåˆ°UIWindowçš„è·ç¦»ä¹‹é—´çš„å·®\n    // å®åœ¨å…±åŒçš„SuperViewä¹‹å‰å°±å­˜åœ¨çš„ã€‚æ‰€ä»¥ï¼Œåˆ¤æ–­äºŒè€…åˆ°UIWindowçš„è·ç¦»å¤§å°ï¼Œå¹¶åˆ©ç”¨ä¸¤è€…ä¹‹é—´\n    // çš„å·®è·å°±å¯ä»¥æ‰¾åˆ°å…±åŒçš„SuperView\n    NSInteger mutualViewCount = labs(smallViewSuperViewCount - bigViewSuperViewCount);\n    view1 = self;\n    view2 = self.BigHeart;\n    if (smallViewSuperViewCount &gt; bigViewSuperViewCount) {\n        for (int i = 0; i &lt; mutualViewCount; ++ i) {\n            view1 = view1.superview;\n        }\n    } else {\n        for (int i = 0; i &lt; mutualViewCount; ++ i) {\n            view2 = view2.superview;\n        }\n    }\n    while (view1 != view2) {\n        view1 = view1.superview;\n        view2 = view2.superview;\n    }\n    return view1;\n}\n</code></pre>\n<p>æœ‰äº†ä¸Šé¢çš„æ€æƒ³ï¼Œæ˜ å°„åæ ‡åŒæ ·å˜å¾—ç®€å•ï¼š</p>\n<pre><code class=\"objc\">    //æ˜ å°„ä¸¤ä¸ªHeartçš„åæ ‡ã€‚\n    // é¦–å…ˆæ˜¯å°æ¡ƒå¿ƒ(self)\n    UIView *view1 = self;\n    CGPoint smallHeartPoint = CGPointZero;\n    while (view1 != mutualSuperView) {\n        smallHeartPoint.x += view1.frame.origin.x;\n        smallHeartPoint.y += view1.frame.origin.y;\n        view1 = view1.superview;\n    }\n    // å…¶æ¬¡æ˜¯å¤§æ¡ƒå¿ƒ(self.BigHeart)\n    UIView *view2 = self.BigHeart;\n    CGPoint bigHeartPoint = CGPointZero;\n    while (view2 != mutualSuperView) {\n        bigHeartPoint.x += view2.frame.origin.x;\n        bigHeartPoint.y += view2.frame.origin.y;\n        view2 = view2.superview;\n    }\n</code></pre>\n<p>æ—¢ç„¶å¾—åˆ°ä¸¤ä¸ªæ¡ƒå¿ƒçš„åæ ‡äº†ï¼Œå®ç°åŠ¨ç”»å°±è‡ªç„¶å˜å¾—ç®€å•å•¦ï¼Œå°±ä¸èµ˜è¿°äº†:)<br>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„<a href=\"https://github.com/objchris/EZHeartForLike\" target=\"_blank\" rel=\"external\">Github</a>ï¼Œå¯ä»¥ä¸‹è½½åœ¨é¡¹ç›®ä¸­ï¼Œé¡ºä¾¿ç»™æˆ‘ä¸ªLikeå§<img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg\" alt=\"hahaha\"></p>\n","excerpt":"<p>æœ€è¿‘æ²¡äº‹çœ‹çœ‹Instagramçš„æ—¶å€™ï¼Œå¯¹äºåŒå‡»ç‚¹èµçš„åŠŸèƒ½æ„Ÿè§‰è›®Likeã€‚æ‰€ä»¥å°±æƒ³è‡ªå·±ä»¿ç…§åšä¸€ä¸ªã€‚ä½†æ˜¯å˜ï¼Œç›´æ¥ä»¿é€ æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç©ï¼Œæ‰€ä»¥å°±è‡ªå·±æƒ³æ·»åŠ ç‚¹æ–°ä¸œè¥¿ï¼Œå› æ­¤å°±æœ‰äº†EZHeartForLikeã€‚:)</p>","more":"<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pwmtz.png\" alt=\"EZHeartForLike_logo\"><br>æ•ˆæœå›¾(ç¬¬ä¸€å¼ æ˜¯åŒå‡»å›¾ç‰‡è§¦å‘ï¼Œç¬¬äºŒå¼ æ˜¯å•å‡»æŒ‰é’®)ï¼š<br><img src=\"https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/double.gif\" alt=\"\">       <img src=\"https://raw.githubusercontent.com/Ezfen/EZHeartForLike/master/single.gif\" alt=\"\"><br>å…ˆè¯´è¯´è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚<br>ä¸€å¼€å§‹æˆ‘æ˜¯åœ¨Instagramçš„åŸºç¡€ä¸Šå¼€å§‹åšçš„ã€‚åŒå‡»ç‚¹å‡»å›¾ç‰‡å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¡ƒå¿ƒï¼Œéšå³ä¸‹é¢çš„å°æ¡ƒå¿ƒç‚¹äº®ã€‚å®Œæˆç‚¹èµçš„æ“ä½œã€‚like this(ä¸“é—¨æˆªäº†æˆ‘â¤ï¸GEMâ¤ï¸è¿‡æ¥ï¼ŒInstagramçš„å¿ƒæŒ¡ä½å¥¹çš„è„¸äº†ã€‚ã€‚ã€‚)ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/37lsw.jpg\" alt=\"EZHeartForLike_gem\"><br>å¥½å§ï¼Œå°ºå¯¸æ˜¯æ˜¯ç”¨æˆ‘åˆçˆ±åˆæ¨çš„4Sçš„ 320 x 480<br>ç´§æ¥ç€å°±æƒ³ï¼Œèƒ½ä¸èƒ½å®ç°å¤§æ¡ƒå¿ƒä¸€è¾¹ç§»åŠ¨ä¸€è¾¹ç¼©å°ï¼Œæœ€ååˆ°å¤§å°æ¡ƒå¿ƒçš„ä½ç½®å¹¶æ›¿æ¢å®ƒï¼Ÿï¼å°±åƒä¸Šé¢æœ€ç»ˆæ•ˆæœä¸€æ ·<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/4p80z.jpg\" alt=\"aixin\"><br>å¾ˆå¿«æˆ‘é‡åˆ°é—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­ï¼Œè¯ç”˜æ˜“å•¦ï¼ï¼ï¼ä½†æ˜¯ç°åœ¨çš„æƒ…å†µæ˜¯ä¸¤ä¸ªæ¡ƒå¿ƒå¹¶ä¸åœ¨åŒä¸€ä¸ªViewä¸­ï¼ˆç°å®ä¸­å¾ˆå¤šæƒ…å†µéƒ½ä¸ä¼šï¼‰ï¼Œ<strong>ä½ç½®ä¸æ˜ç¡®</strong>æ˜¯ä¸€ä¸ªSuperå·¨å¤§çš„é—®é¢˜ã€‚å› æ­¤è·¨Viewçš„åŠ¨ç”»æ˜¯EZHeartForLikeæ˜¯è¿™æ¬¡çš„ä¸»è¦è¯é¢˜ã€‚å½“ç„¶åŠ¨ç”»æ˜¯ä½¿ç”¨UIViewæ¥å®ç°çš„~~<br>é‚£ä¹ˆï¼Œè®²è®²æˆ‘çš„æ€è·¯å†ç¨‹å§ï¼š<br>é¦–å…ˆï¼Œæˆ‘æƒ³äº†ä¸‹èƒ½ä¸èƒ½åœ¨ä¸€ä¸ªEZHeartForLikeViewä¸­åˆ†åˆ«æ”¾å…¥ä¸‹åˆ—ä¸‰ä¸ªViewï¼Œå·²å®ç°æˆ‘çš„æƒ³æ³•ï¼š    </p>\n<ul>\n<li>ContentView ï¼šç”¨äºè®©ç”¨æˆ·å°†è‡ªå·±çš„Viewæ”¾å…¥å…¶ä¸­ã€‚ç±»ä¼¼iOS8é‡Œé¢çš„UIVisualEffectViewçš„contentViewä¸€æ ·ã€‚    </li>\n<li>SmallHeart ï¼šè¢«å½“åšæŒ‰é’®çš„å°æ¡ƒå¿ƒï¼Œæ˜¯Publicçš„ï¼Œæä¾›ç»™ç”¨æˆ·æ”¹é€ å®ƒçš„æ ·å¼ã€å¤§å°ã€ä½ç½®ç­‰ã€‚ </li>\n<li>BigHeart ï¼šå‡ºç°åœ¨å›¾ç‰‡(ImageView)ä¸­çš„å¤§æ¡ƒå¿ƒ</li>\n</ul>\n<p>åœ¨æˆ‘è‡ªå·±æ¶‚æ¶‚ç”»ç”»åæ˜¯è¿™æ ·çš„ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r0ov5.jpg\" alt=\"EZHeartForLike_begin\"></p>\n<p>ä¸€å¼€å§‹è§‰å¾—å¯èƒ½èƒ½è¡Œï¼Œå› ä¸ºä¸¤ä¸ªæ¡ƒå¿ƒéƒ½åœ¨åŒä¸€ä¸ªViewä¸­(EZHeartForLikeView)ï¼Œè¦å®ç°åŠ¨ç”»åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åæ¥æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘æŠŠå°æ¡ƒå¿ƒä½œä¸ºPublicå¯¹å¤–æä¾›ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥å°†å®ƒæ”¾å…¥è‡ªå·±çš„Viewä¸­ã€‚å› æ­¤è¿™ä¸ªæƒ³æ³•å¾ˆå¿«è¢«å¦äº†ã€‚ã€‚ã€‚</p>\n<p>è¿™ä¸ªé—®é¢˜è®©æˆ‘ä¾¿ç§˜äº†ä¸¤å¤©ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚åæ¥åœ¨æ´—æ¾¡æ—¶æƒ³åˆ°ä¸€ä¸ªæˆ–è®¸èƒ½è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œè™½ç„¶å¤§å°æ¡ƒå¿ƒçš„ä½ç½®éƒ½ä¸æ¸…æ¥šï¼Œä½†æ˜¯ä»–ä»¬è‡³å°‘æœ‰åŒä¸€ä¸ªSuperViewï¼Œæˆ–è®¸åŠ ä»¥åˆ©ç”¨å°±èƒ½å®ç°è¿™ä¸ªæƒ³æ³•ã€‚è°çŸ¥é“å˜ï¼Œè¯•ä¸€ä¸‹å§ï¼š<br>ç®€å•ä¸€å¥è¯å°±æ˜¯ï¼š<strong>æ‰¾åˆ°ç›¸åŒçš„SuperViewï¼Œæ˜ å°„åæ ‡ï¼Œåœ¨SuperViewä¸Šå®ŒæˆåŠ¨ç”»çš„å®ç°</strong><br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1c4s3.jpg\" alt=\"EZHeartForLike_findview\"><br>å…·ä½“æ€ä¹ˆæ‰¾åˆ°ç›¸åŒçš„SuperViewå˜ï¼Œé‚£å°±è¦æ‰¯åˆ°å¦å¤–ä¸€ä¸ªç®—æ³•äº†ï¼Œé‚£å°±æ˜¯åˆ¤æ–­ä¸¤æ¡é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œä¸”äº¤ç‚¹æ˜¯å“ªä¸€ä¸ªçš„é—®é¢˜ã€‚<br>è¿™é‡Œæˆ‘åˆè¦ç¥­å‡ºæˆ‘çš„çµé­‚ç”»é£äº†<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e0q6r.jpg\" alt=\"EZHeartForLike_lianbiao\"><br>å®ç°èµ·æ¥å…¶å®ä¸æ˜¯èƒ½éš¾ï¼Œä¸”çœ‹ä»£ç ï¼š</p>\n<pre><code class=\"objc\">- (UIView *)findTheMutualSuperView {\n    // æ‰¾å‡ºå°æ¡ƒå¿ƒï¼ˆselfï¼‰å’Œå¤§æ¡ƒå¿ƒï¼ˆself.BigHeartï¼‰çš„å…±åŒçš„SuperView\n    // è®¡ç®—selfåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view1 = self;\n    NSInteger smallViewSuperViewCount = 0;\n    while (![view1 isKindOfClass:[UIWindow class]]) {\n        smallViewSuperViewCount ++;\n        view1 = view1.superview;\n    }\n    // è®¡ç®—self.BigHeartåˆ°UIWindowçš„è·ç¦»ï¼ˆä»¥ä¸­é—´Viewçš„å±‚æ•°ä¸ºè·ç¦»è®¡é‡ï¼‰\n    UIView *view2 = self.BigHeart;\n    NSInteger bigViewSuperViewCount = 0;\n    while (![view2 isKindOfClass:[UIWindow class]]) {\n        bigViewSuperViewCount ++;\n        view2 = view2.superview;\n    }\n    // å…±åŒçš„SuperViewä¹‹åçš„Viewè‚¯å®šæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤å°æ¡ƒå¿ƒå’Œå¤§æ¡ƒå¿ƒåˆ°UIWindowçš„è·ç¦»ä¹‹é—´çš„å·®\n    // å®åœ¨å…±åŒçš„SuperViewä¹‹å‰å°±å­˜åœ¨çš„ã€‚æ‰€ä»¥ï¼Œåˆ¤æ–­äºŒè€…åˆ°UIWindowçš„è·ç¦»å¤§å°ï¼Œå¹¶åˆ©ç”¨ä¸¤è€…ä¹‹é—´\n    // çš„å·®è·å°±å¯ä»¥æ‰¾åˆ°å…±åŒçš„SuperView\n    NSInteger mutualViewCount = labs(smallViewSuperViewCount - bigViewSuperViewCount);\n    view1 = self;\n    view2 = self.BigHeart;\n    if (smallViewSuperViewCount &gt; bigViewSuperViewCount) {\n        for (int i = 0; i &lt; mutualViewCount; ++ i) {\n            view1 = view1.superview;\n        }\n    } else {\n        for (int i = 0; i &lt; mutualViewCount; ++ i) {\n            view2 = view2.superview;\n        }\n    }\n    while (view1 != view2) {\n        view1 = view1.superview;\n        view2 = view2.superview;\n    }\n    return view1;\n}\n</code></pre>\n<p>æœ‰äº†ä¸Šé¢çš„æ€æƒ³ï¼Œæ˜ å°„åæ ‡åŒæ ·å˜å¾—ç®€å•ï¼š</p>\n<pre><code class=\"objc\">    //æ˜ å°„ä¸¤ä¸ªHeartçš„åæ ‡ã€‚\n    // é¦–å…ˆæ˜¯å°æ¡ƒå¿ƒ(self)\n    UIView *view1 = self;\n    CGPoint smallHeartPoint = CGPointZero;\n    while (view1 != mutualSuperView) {\n        smallHeartPoint.x += view1.frame.origin.x;\n        smallHeartPoint.y += view1.frame.origin.y;\n        view1 = view1.superview;\n    }\n    // å…¶æ¬¡æ˜¯å¤§æ¡ƒå¿ƒ(self.BigHeart)\n    UIView *view2 = self.BigHeart;\n    CGPoint bigHeartPoint = CGPointZero;\n    while (view2 != mutualSuperView) {\n        bigHeartPoint.x += view2.frame.origin.x;\n        bigHeartPoint.y += view2.frame.origin.y;\n        view2 = view2.superview;\n    }\n</code></pre>\n<p>æ—¢ç„¶å¾—åˆ°ä¸¤ä¸ªæ¡ƒå¿ƒçš„åæ ‡äº†ï¼Œå®ç°åŠ¨ç”»å°±è‡ªç„¶å˜å¾—ç®€å•å•¦ï¼Œå°±ä¸èµ˜è¿°äº†:)<br>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹æˆ‘çš„<a href=\"https://github.com/objchris/EZHeartForLike\">Github</a>ï¼Œå¯ä»¥ä¸‹è½½åœ¨é¡¹ç›®ä¸­ï¼Œé¡ºä¾¿ç»™æˆ‘ä¸ªLikeå§<img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg\" alt=\"hahaha\"></p>"},{"title":"iOSä¸‹é‡è¦çš„å¤šçº¿ç¨‹GCD","date":"2017-03-23T04:15:06.000Z","typora-copy-images-to":"ipic","_content":"\n**å¤šçº¿ç¨‹**æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼Œå¸¦ç»™ç”¨æˆ·æ›´å¤šçš„ä¾¿åˆ©ï¼Œä¼´éšç€å‹å¥½åº¦çš„æå‡ï¼ŒAPPçš„è¢«ä½¿ç”¨ç‡å’Œè¢«ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šæ›´åŠ é«˜ã€‚    \næ­¤ç¯‡ç¬”è®°å‚è€ƒäº†ç½‘ç»œä¸Šä¸€äº›å¥½æ–‡ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚åœ¨Ray Wenderlichä¸Šæ‘˜å½•äº†ä¸€äº›é˜Ÿåˆ—çš„å¸¸ç”¨æƒ…æ™¯ï¼Œå¸Œæœ›è‡ªå·±å¾—åˆ°æé«˜çš„åŒæ—¶åˆ†äº«ç»™å¤§å®¶ã€‚\n\n<!--more-->\n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\n## ä¸€äº›æ¦‚å¿µ\n\n### ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰\n- ä»»åŠ¡ä¸²è¡Œï¼Œæ„å‘³ç€åœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå³ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚\n- ä»»åŠ¡å¹¶å‘ï¼Œæ„å‘³ç€å¯¹äºç”¨æˆ·ä½“éªŒï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰å¤šä¸ªä»»åŠ¡è¢«æ‰§è¡Œã€‚\n\n### åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰\n- åŒæ­¥æ´¾å‘(sync)ä¼šå°½å¯èƒ½åœ°åœ¨å½“å‰çº¿ç¨‹æ´¾å‘ä»»åŠ¡ã€‚ä½†å¦‚æœåœ¨å…¶ä»–é˜Ÿåˆ—å¾€ä¸»é˜Ÿåˆ—åŒæ­¥æ´¾å‘ï¼Œä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ \n- å¼‚æ­¥æ´¾å‘(async)ä¹Ÿä¸ç»å¯¹ä¼šå¦å¼€çº¿ç¨‹ã€‚ä¾‹å¦‚åœ¨ä¸»çº¿ç¨‹å¼‚æ­¥æ´¾å‘åˆ°ä¸»çº¿ç¨‹ï¼Œæ´¾å‘ä¾æ—§æ˜¯å¼‚æ­¥çš„ï¼Œä»»åŠ¡ä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚\n\nåŒæ­¥å¼‚æ­¥çš„é‡è¦åŒºåˆ«åœ¨äºæ´¾å‘æ–¹æ³•æ˜¯å¦éœ€è¦ç­‰å¾… block å®Œæˆåæ‰èƒ½è¿”å›ã€‚\n\n### ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰\nä¸€æ®µä»£ç ä¸èƒ½è¢«å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œè¿™æ®µä»£ç ã€‚è¿™å¾ˆå¸¸è§ï¼Œå› ä¸ºä»£ç å»æ“ä½œä¸€ä¸ªå…±äº«èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªå˜é‡è‹¥èƒ½è¢«å¹¶å‘è¿›ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½ä¼šå˜è´¨ï¼ˆå®ƒçš„å€¼ä¸å†å¯ä¿¡ï¼‰ã€‚\n\n### æ­»é”ï¼ˆDeadlockï¼‰    \nåœæ­¢ç­‰å¾…äº‹æƒ…çš„çº¿ç¨‹ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ç›¸äº’ç»´æŒç­‰å¾…ï¼Œå³æ­»é”ã€‚    \nä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰çº¿ç¨‹å¡ä½äº†ï¼Œç­‰å¾…å¯¹æ–¹å®Œæˆæˆ–æ‰§è¡Œå…¶å®ƒæ“ä½œã€‚ç¬¬ä¸€ä¸ªä¸èƒ½å®Œæˆæ˜¯å› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬äºŒä¸ªçš„å®Œæˆã€‚ä½†ç¬¬äºŒä¸ªä¹Ÿä¸èƒ½å®Œæˆï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªçš„å®Œæˆã€‚\n\n### çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰\nçº¿ç¨‹å®‰å…¨çš„ä»£ç èƒ½åœ¨å¤šçº¿ç¨‹æˆ–å¹¶å‘ä»»åŠ¡ä¸­è¢«å®‰å…¨çš„è°ƒç”¨ï¼Œè€Œä¸ä¼šå¯¼è‡´ä»»ä½•é—®é¢˜ï¼ˆæ•°æ®æŸåï¼Œå´©æºƒç­‰ï¼‰ã€‚çº¿ç¨‹ä¸å®‰å…¨çš„ä»£ç åœ¨æŸä¸ªæ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä»£ç çš„ä¾‹å­æ˜¯NSDictionaryã€‚ä½ å¯ä»¥åœ¨åŒä¸€æ—¶é—´åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨å®ƒè€Œä¸ä¼šæœ‰é—®é¢˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒNSMutableDictionaryå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåº”è¯¥ä¿è¯ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®ƒã€‚æ›´å¤šè¯·çœ‹ï¼š[helpful and somewhat chilling list](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/multithreading/ThreadSafetySummary/ThreadSafetySummary.html)\n\n### ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰\nä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢æŒ‡å½“ä½ åœ¨å•ä¸ªè¿›ç¨‹é‡Œåˆ‡æ¢æ‰§è¡Œä¸åŒçš„çº¿ç¨‹æ—¶å­˜å‚¨ä¸æ¢å¤æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–å†™å¤šä»»åŠ¡åº”ç”¨æ—¶å¾ˆæ™®éï¼Œä½†ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚\n\n### å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰\nå¹¶è¡Œè¦æ±‚å¹¶å‘ï¼Œä½†å¹¶å‘ä¸èƒ½ä¿è¯å¹¶è¡Œï¼Œå°±è®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå¼€å¯çº¿ç¨‹æ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹å®ä¸Šï¼Œåœ¨æŸæ¬¡å¹¶å‘å¤„ç†ä»»åŠ¡ä¸­ï¼Œå¼€å¯çš„çº¿ç¨‹æ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœä¸Šé™ä¸º2ï¼Œå³æ¯æ¬¡å¼€å¯çš„æ–°çº¿ç¨‹ä¸º2ï¼Œé‚£ä¹ˆæ˜¯æœ‰å¯èƒ½å‡ºç°å¹¶å‘å´ä¸å¹¶è¡Œçš„æƒ…å†µã€‚\nå¹¶å‘ä»£ç çš„ä¸åŒéƒ¨åˆ†å¯ä»¥â€œåŒæ­¥â€æ‰§è¡Œã€‚ç„¶è€Œï¼Œè¯¥æ€æ ·å‘ç”Ÿæˆ–æ˜¯å¦å‘ç”Ÿéƒ½å–å†³äºç³»ç»Ÿã€‚å¤šæ ¸è®¾å¤‡é€šè¿‡å¹¶è¡Œæ¥åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼›ç„¶è€Œï¼Œä¸ºäº†ä½¿å•æ ¸è®¾å¤‡ä¹Ÿèƒ½å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä»¬å¿…é¡»å…ˆè¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç„¶åè¿è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ°è¶³å¤Ÿå¿«ä»¥è‡´ç»™æˆ‘ä»¬å¹¶å‘æ‰§è¡Œåœ°é”™è§‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\n\n## é˜Ÿåˆ—ï¼ˆqueueï¼‰\n\n|  é˜Ÿåˆ—  |   çº¿ç¨‹   |\n| :--: | :----: |\n|  ä¸²è¡Œ  | å½“å‰çº¿ç¨‹è¿è¡Œ |\n|  å¹¶å‘  | å¦å¼€çº¿ç¨‹è¿è¡Œ |\n\n### ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰\n---\n![Serial-Queue](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/26uxx.png)\n`dispatch_queue_create(\"com.selander.GooglyPuff.photoQueue\",DISPATCH_QUEUE_SERIAL);`    \nä¸²è¡Œé˜Ÿåˆ—æœ€å…¸å‹çš„æ˜¯**main queue**ï¼šä¸»çº¿ç¨‹æ‰€å¯¹åº”çš„queueï¼Œä¸»è¦ç”¨äºæ›´æ–°UIã€‚\n\n\n### å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰\n---\n![Concurrent-Queue](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/ggsfu.png)\n`dispatch_queue_create(\"com.selander.GooglyPuff.photoQueue\",DISPATCH_QUEUE_CONCURRENT);`    \né™¤äº†é€šè¿‡DISPATCH_QUEUE_CONCURRENTåˆ›å»ºçš„queueå¤–ï¼Œç³»ç»Ÿæä¾›äº†Global Dispatch Queuesï¼šåˆ†åˆ«æœ‰å››ç§ä¼˜å…ˆçº§ï¼ˆbackground, low, default, highï¼‰    \n`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)`\n\n\n## GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\n\n### dispatch_sync\n\n![dispatch_sync_in_action](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wx3ao.gif)\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šCautionï¼ï¼éœ€è¦æ³¨æ„ä¸èƒ½å¾€æœ¬é˜Ÿåˆ—æ´¾å‘ä»»åŠ¡ï¼Œå¦åˆ™ä¼šé€ æˆæ­»é”ã€‚    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n### dispatch_async\n\n![dispatch_async_in_action](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zst1c.gif)    \n- ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n### dispatch barriers\n\n![Dispatch-Barrier](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/b3668.png)    \næ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šä½¿ç”¨dispatch\\_barriers\\_syncæˆ–dispatch\\_barries\\_asyncä¼šåœ¨ä½ åˆ›å»ºçš„é˜Ÿåˆ—ä¸­æ’å…¥Barrier Blockï¼Œè€Œè¿™ä¸ªBlockè¢«æ‰§è¡Œæ—¶ç¡®ä¿å½“å‰ä»…æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œä¸­ã€‚è¿™å°±å¾ˆå¥½åœ°åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­ä¿æŒä¸€æ®µæš‚æ—¶ä¸²è¡Œçš„ä»»åŠ¡æ‰§è¡Œé¡ºåºã€‚è¿™å¾ˆé€‚åˆäºï¼šå¦‚å¯¹æŸä¸€ä¸ªæ•°ç»„æˆ–å­˜å‚¨ç»“æ„æ·»åŠ æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å°†è¯¥ä»»åŠ¡ä½œä¸ºBarrier Blockæ’å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå³ä¿è¯äº†è¯¥æ•°ç»„çš„åŸå­æ€§ï¼Œé˜²æ­¢è„æ•°æ®çš„äº§ç”Ÿã€‚    \n- ä¸²è¡Œé˜Ÿåˆ—ï¼šå®Œå…¨æ²¡å¿…è¦....\n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n#### read and write è¯»å†™é—®é¢˜\n\n```\n- (void)addPhoto:(Photo *)photo \n{ \nif (photo) { // 1 \ndispatch_barrier_async(self.concurrentPhotoQueue, ^{ // 2 \n[_photosArray addObject:photo]; // 3 \ndispatch_async(dispatch_get_main_queue(), ^{ // 4 \n[self postContentAddedNotification]; \n}); \n}); \n} \n}\n```\n```\n- (NSArray *)photos \n{ \n__block NSArray *array; // 1 \ndispatch_sync(self.concurrentPhotoQueue, ^{ // 2 \narray = [NSArray arrayWithArray:_photosArray]; // 3 \n}); \nreturn array; \n}\n```\n\n### dispatch_after\n\ndispatch\\_afteræœ‰ä¸€ä¸ªéå¸¸ä½¿ç”¨çš„æƒ…æ™¯ï¼šå½“ä½ éœ€è¦åœ¨APPå¯åŠ¨æ—¶è®©å¯åŠ¨å›¾ç‰‡å†æ˜¾ç¤ºå°±ä¸€äº›ï¼Œè®©APPæœ‰æ›´å……è¶³çš„æ—¶é—´å‡†å¤‡ä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œæ—¶ï¼Œå°±ä½¿ç”¨dispatch\\_after.è€Œä¸”æ­£å¦‚ä¸‹æ–‡å°†è¯´åˆ°çš„ï¼šdispatch\\_afteræœ€å¥½åªåœ¨main queueä¸­ä½¿ç”¨ã€‚\n```\ndouble delayInSeconds = 1.0; \ndispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC)); // 1 \ndispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // 2 \nif (!count) { \n[self.navigationItem setPrompt:@\"Add photos with faces to Googlyify them!\"]; \n} else { \n[self.navigationItem setPrompt:nil]; \n} \n}); \n```\n**åªèƒ½ç”¨äºMain Queueï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼**\n\n### dispatch_once\n\n```\nstatic PhotoManager *sharedPhotoManager = nil; \nstatic dispatch_once_t onceToken; \ndispatch_once(&onceToken, ^{ \nsharedPhotoManager = [[PhotoManager alloc] init]; \nsharedPhotoManager->_photosArray = [NSMutableArray array]; \n}); \nreturn sharedPhotoManager; \n```\n\n### dispatch_groups\n\n```\ndispatch_group_t downloadGroup = dispatch_group_create(); \n//ä»»åŠ¡å¼€å§‹ä¹‹å‰è¦æ‰§è¡Œä¸‹é¢çš„enterå‡½æ•° \ndispatch_group_enter(downloadGroup); \n//åœ¨ä»»åŠ¡ç»“æŸçš„æ—¶å€™è¦æ‰§è¡Œä¸‹é¢çš„leaveå‡½æ•° \ndispatch_group_leave(downloadGroup); \ndispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER);//é˜»å¡è¿›ç¨‹ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸ \n// or äº¤ç»™groupé€šçŸ¥ \ndispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^{ // 4 \nif (completionBlock) { \ncompletionBlock(error); \n} \n}); \n```\ngroupä¸­çš„ä»»åŠ¡ä¸ä¸€å®šåœ¨åŒä¸€ä¸ªqueueé‡Œé¢ã€‚ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶å‘é˜Ÿåˆ—éƒ½å¯ç”¨ã€‚\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n### dispatch_apply\n\n```\ndispatch_apply(3, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(size_t i) { \n}//å°±åƒforå¾ªç¯ä¸€æ ·\n```\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šæ²¡ä»€ä¹ˆå¿…è¦....ä¸²è¡Œé˜Ÿåˆ—ä½¿ç”¨è·Ÿæ™®é€šçš„å¾ªç¯æ²¡æœ‰åŒºåˆ«ã€‚\n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n## å‚è€ƒæ–‡çŒ®\n\n[Grand Central Dispatch In-Depth: Part 1/2](https://www.raywenderlich.com/60749/grand-central-dispatch-in-depth-part-1)\n\n[Grand Central Dispatch In-Depth: Part 2/2](https://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2)","source":"_posts/iOSä¸‹é‡è¦çš„å¤šçº¿ç¨‹GCD.md","raw":"---\ntitle: iOSä¸‹é‡è¦çš„å¤šçº¿ç¨‹GCD\ndate: 2017-03-23 12:15:06\ntags: \n- Thread\ntypora-copy-images-to: ipic\n---\n\n**å¤šçº¿ç¨‹**æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼Œå¸¦ç»™ç”¨æˆ·æ›´å¤šçš„ä¾¿åˆ©ï¼Œä¼´éšç€å‹å¥½åº¦çš„æå‡ï¼ŒAPPçš„è¢«ä½¿ç”¨ç‡å’Œè¢«ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šæ›´åŠ é«˜ã€‚    \næ­¤ç¯‡ç¬”è®°å‚è€ƒäº†ç½‘ç»œä¸Šä¸€äº›å¥½æ–‡ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚åœ¨Ray Wenderlichä¸Šæ‘˜å½•äº†ä¸€äº›é˜Ÿåˆ—çš„å¸¸ç”¨æƒ…æ™¯ï¼Œå¸Œæœ›è‡ªå·±å¾—åˆ°æé«˜çš„åŒæ—¶åˆ†äº«ç»™å¤§å®¶ã€‚\n\n<!--more-->\n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\n## ä¸€äº›æ¦‚å¿µ\n\n### ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰\n- ä»»åŠ¡ä¸²è¡Œï¼Œæ„å‘³ç€åœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå³ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚\n- ä»»åŠ¡å¹¶å‘ï¼Œæ„å‘³ç€å¯¹äºç”¨æˆ·ä½“éªŒï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰å¤šä¸ªä»»åŠ¡è¢«æ‰§è¡Œã€‚\n\n### åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰\n- åŒæ­¥æ´¾å‘(sync)ä¼šå°½å¯èƒ½åœ°åœ¨å½“å‰çº¿ç¨‹æ´¾å‘ä»»åŠ¡ã€‚ä½†å¦‚æœåœ¨å…¶ä»–é˜Ÿåˆ—å¾€ä¸»é˜Ÿåˆ—åŒæ­¥æ´¾å‘ï¼Œä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ \n- å¼‚æ­¥æ´¾å‘(async)ä¹Ÿä¸ç»å¯¹ä¼šå¦å¼€çº¿ç¨‹ã€‚ä¾‹å¦‚åœ¨ä¸»çº¿ç¨‹å¼‚æ­¥æ´¾å‘åˆ°ä¸»çº¿ç¨‹ï¼Œæ´¾å‘ä¾æ—§æ˜¯å¼‚æ­¥çš„ï¼Œä»»åŠ¡ä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚\n\nåŒæ­¥å¼‚æ­¥çš„é‡è¦åŒºåˆ«åœ¨äºæ´¾å‘æ–¹æ³•æ˜¯å¦éœ€è¦ç­‰å¾… block å®Œæˆåæ‰èƒ½è¿”å›ã€‚\n\n### ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰\nä¸€æ®µä»£ç ä¸èƒ½è¢«å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œè¿™æ®µä»£ç ã€‚è¿™å¾ˆå¸¸è§ï¼Œå› ä¸ºä»£ç å»æ“ä½œä¸€ä¸ªå…±äº«èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªå˜é‡è‹¥èƒ½è¢«å¹¶å‘è¿›ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½ä¼šå˜è´¨ï¼ˆå®ƒçš„å€¼ä¸å†å¯ä¿¡ï¼‰ã€‚\n\n### æ­»é”ï¼ˆDeadlockï¼‰    \nåœæ­¢ç­‰å¾…äº‹æƒ…çš„çº¿ç¨‹ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ç›¸äº’ç»´æŒç­‰å¾…ï¼Œå³æ­»é”ã€‚    \nä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰çº¿ç¨‹å¡ä½äº†ï¼Œç­‰å¾…å¯¹æ–¹å®Œæˆæˆ–æ‰§è¡Œå…¶å®ƒæ“ä½œã€‚ç¬¬ä¸€ä¸ªä¸èƒ½å®Œæˆæ˜¯å› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬äºŒä¸ªçš„å®Œæˆã€‚ä½†ç¬¬äºŒä¸ªä¹Ÿä¸èƒ½å®Œæˆï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªçš„å®Œæˆã€‚\n\n### çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰\nçº¿ç¨‹å®‰å…¨çš„ä»£ç èƒ½åœ¨å¤šçº¿ç¨‹æˆ–å¹¶å‘ä»»åŠ¡ä¸­è¢«å®‰å…¨çš„è°ƒç”¨ï¼Œè€Œä¸ä¼šå¯¼è‡´ä»»ä½•é—®é¢˜ï¼ˆæ•°æ®æŸåï¼Œå´©æºƒç­‰ï¼‰ã€‚çº¿ç¨‹ä¸å®‰å…¨çš„ä»£ç åœ¨æŸä¸ªæ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä»£ç çš„ä¾‹å­æ˜¯NSDictionaryã€‚ä½ å¯ä»¥åœ¨åŒä¸€æ—¶é—´åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨å®ƒè€Œä¸ä¼šæœ‰é—®é¢˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒNSMutableDictionaryå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåº”è¯¥ä¿è¯ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®ƒã€‚æ›´å¤šè¯·çœ‹ï¼š[helpful and somewhat chilling list](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/multithreading/ThreadSafetySummary/ThreadSafetySummary.html)\n\n### ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰\nä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢æŒ‡å½“ä½ åœ¨å•ä¸ªè¿›ç¨‹é‡Œåˆ‡æ¢æ‰§è¡Œä¸åŒçš„çº¿ç¨‹æ—¶å­˜å‚¨ä¸æ¢å¤æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–å†™å¤šä»»åŠ¡åº”ç”¨æ—¶å¾ˆæ™®éï¼Œä½†ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚\n\n### å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰\nå¹¶è¡Œè¦æ±‚å¹¶å‘ï¼Œä½†å¹¶å‘ä¸èƒ½ä¿è¯å¹¶è¡Œï¼Œå°±è®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå¼€å¯çº¿ç¨‹æ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹å®ä¸Šï¼Œåœ¨æŸæ¬¡å¹¶å‘å¤„ç†ä»»åŠ¡ä¸­ï¼Œå¼€å¯çš„çº¿ç¨‹æ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœä¸Šé™ä¸º2ï¼Œå³æ¯æ¬¡å¼€å¯çš„æ–°çº¿ç¨‹ä¸º2ï¼Œé‚£ä¹ˆæ˜¯æœ‰å¯èƒ½å‡ºç°å¹¶å‘å´ä¸å¹¶è¡Œçš„æƒ…å†µã€‚\nå¹¶å‘ä»£ç çš„ä¸åŒéƒ¨åˆ†å¯ä»¥â€œåŒæ­¥â€æ‰§è¡Œã€‚ç„¶è€Œï¼Œè¯¥æ€æ ·å‘ç”Ÿæˆ–æ˜¯å¦å‘ç”Ÿéƒ½å–å†³äºç³»ç»Ÿã€‚å¤šæ ¸è®¾å¤‡é€šè¿‡å¹¶è¡Œæ¥åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼›ç„¶è€Œï¼Œä¸ºäº†ä½¿å•æ ¸è®¾å¤‡ä¹Ÿèƒ½å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä»¬å¿…é¡»å…ˆè¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç„¶åè¿è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ°è¶³å¤Ÿå¿«ä»¥è‡´ç»™æˆ‘ä»¬å¹¶å‘æ‰§è¡Œåœ°é”™è§‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\n\n## é˜Ÿåˆ—ï¼ˆqueueï¼‰\n\n|  é˜Ÿåˆ—  |   çº¿ç¨‹   |\n| :--: | :----: |\n|  ä¸²è¡Œ  | å½“å‰çº¿ç¨‹è¿è¡Œ |\n|  å¹¶å‘  | å¦å¼€çº¿ç¨‹è¿è¡Œ |\n\n### ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰\n---\n![Serial-Queue](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/26uxx.png)\n`dispatch_queue_create(\"com.selander.GooglyPuff.photoQueue\",DISPATCH_QUEUE_SERIAL);`    \nä¸²è¡Œé˜Ÿåˆ—æœ€å…¸å‹çš„æ˜¯**main queue**ï¼šä¸»çº¿ç¨‹æ‰€å¯¹åº”çš„queueï¼Œä¸»è¦ç”¨äºæ›´æ–°UIã€‚\n\n\n### å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰\n---\n![Concurrent-Queue](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/ggsfu.png)\n`dispatch_queue_create(\"com.selander.GooglyPuff.photoQueue\",DISPATCH_QUEUE_CONCURRENT);`    \né™¤äº†é€šè¿‡DISPATCH_QUEUE_CONCURRENTåˆ›å»ºçš„queueå¤–ï¼Œç³»ç»Ÿæä¾›äº†Global Dispatch Queuesï¼šåˆ†åˆ«æœ‰å››ç§ä¼˜å…ˆçº§ï¼ˆbackground, low, default, highï¼‰    \n`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)`\n\n\n## GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\n\n### dispatch_sync\n\n![dispatch_sync_in_action](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wx3ao.gif)\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šCautionï¼ï¼éœ€è¦æ³¨æ„ä¸èƒ½å¾€æœ¬é˜Ÿåˆ—æ´¾å‘ä»»åŠ¡ï¼Œå¦åˆ™ä¼šé€ æˆæ­»é”ã€‚    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n### dispatch_async\n\n![dispatch_async_in_action](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zst1c.gif)    \n- ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n### dispatch barriers\n\n![Dispatch-Barrier](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/b3668.png)    \næ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šä½¿ç”¨dispatch\\_barriers\\_syncæˆ–dispatch\\_barries\\_asyncä¼šåœ¨ä½ åˆ›å»ºçš„é˜Ÿåˆ—ä¸­æ’å…¥Barrier Blockï¼Œè€Œè¿™ä¸ªBlockè¢«æ‰§è¡Œæ—¶ç¡®ä¿å½“å‰ä»…æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œä¸­ã€‚è¿™å°±å¾ˆå¥½åœ°åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­ä¿æŒä¸€æ®µæš‚æ—¶ä¸²è¡Œçš„ä»»åŠ¡æ‰§è¡Œé¡ºåºã€‚è¿™å¾ˆé€‚åˆäºï¼šå¦‚å¯¹æŸä¸€ä¸ªæ•°ç»„æˆ–å­˜å‚¨ç»“æ„æ·»åŠ æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å°†è¯¥ä»»åŠ¡ä½œä¸ºBarrier Blockæ’å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå³ä¿è¯äº†è¯¥æ•°ç»„çš„åŸå­æ€§ï¼Œé˜²æ­¢è„æ•°æ®çš„äº§ç”Ÿã€‚    \n- ä¸²è¡Œé˜Ÿåˆ—ï¼šå®Œå…¨æ²¡å¿…è¦....\n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n#### read and write è¯»å†™é—®é¢˜\n\n```\n- (void)addPhoto:(Photo *)photo \n{ \nif (photo) { // 1 \ndispatch_barrier_async(self.concurrentPhotoQueue, ^{ // 2 \n[_photosArray addObject:photo]; // 3 \ndispatch_async(dispatch_get_main_queue(), ^{ // 4 \n[self postContentAddedNotification]; \n}); \n}); \n} \n}\n```\n```\n- (NSArray *)photos \n{ \n__block NSArray *array; // 1 \ndispatch_sync(self.concurrentPhotoQueue, ^{ // 2 \narray = [NSArray arrayWithArray:_photosArray]; // 3 \n}); \nreturn array; \n}\n```\n\n### dispatch_after\n\ndispatch\\_afteræœ‰ä¸€ä¸ªéå¸¸ä½¿ç”¨çš„æƒ…æ™¯ï¼šå½“ä½ éœ€è¦åœ¨APPå¯åŠ¨æ—¶è®©å¯åŠ¨å›¾ç‰‡å†æ˜¾ç¤ºå°±ä¸€äº›ï¼Œè®©APPæœ‰æ›´å……è¶³çš„æ—¶é—´å‡†å¤‡ä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œæ—¶ï¼Œå°±ä½¿ç”¨dispatch\\_after.è€Œä¸”æ­£å¦‚ä¸‹æ–‡å°†è¯´åˆ°çš„ï¼šdispatch\\_afteræœ€å¥½åªåœ¨main queueä¸­ä½¿ç”¨ã€‚\n```\ndouble delayInSeconds = 1.0; \ndispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC)); // 1 \ndispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // 2 \nif (!count) { \n[self.navigationItem setPrompt:@\"Add photos with faces to Googlyify them!\"]; \n} else { \n[self.navigationItem setPrompt:nil]; \n} \n}); \n```\n**åªèƒ½ç”¨äºMain Queueï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼**\n\n### dispatch_once\n\n```\nstatic PhotoManager *sharedPhotoManager = nil; \nstatic dispatch_once_t onceToken; \ndispatch_once(&onceToken, ^{ \nsharedPhotoManager = [[PhotoManager alloc] init]; \nsharedPhotoManager->_photosArray = [NSMutableArray array]; \n}); \nreturn sharedPhotoManager; \n```\n\n### dispatch_groups\n\n```\ndispatch_group_t downloadGroup = dispatch_group_create(); \n//ä»»åŠ¡å¼€å§‹ä¹‹å‰è¦æ‰§è¡Œä¸‹é¢çš„enterå‡½æ•° \ndispatch_group_enter(downloadGroup); \n//åœ¨ä»»åŠ¡ç»“æŸçš„æ—¶å€™è¦æ‰§è¡Œä¸‹é¢çš„leaveå‡½æ•° \ndispatch_group_leave(downloadGroup); \ndispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER);//é˜»å¡è¿›ç¨‹ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸ \n// or äº¤ç»™groupé€šçŸ¥ \ndispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^{ // 4 \nif (completionBlock) { \ncompletionBlock(error); \n} \n}); \n```\ngroupä¸­çš„ä»»åŠ¡ä¸ä¸€å®šåœ¨åŒä¸€ä¸ªqueueé‡Œé¢ã€‚ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶å‘é˜Ÿåˆ—éƒ½å¯ç”¨ã€‚\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    \n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n### dispatch_apply\n\n```\ndispatch_apply(3, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(size_t i) { \n}//å°±åƒforå¾ªç¯ä¸€æ ·\n```\n- ä¸²è¡Œé˜Ÿåˆ—ï¼šæ²¡ä»€ä¹ˆå¿…è¦....ä¸²è¡Œé˜Ÿåˆ—ä½¿ç”¨è·Ÿæ™®é€šçš„å¾ªç¯æ²¡æœ‰åŒºåˆ«ã€‚\n- å¹¶å‘é˜Ÿåˆ—ï¼šâˆš\n\n\n## å‚è€ƒæ–‡çŒ®\n\n[Grand Central Dispatch In-Depth: Part 1/2](https://www.raywenderlich.com/60749/grand-central-dispatch-in-depth-part-1)\n\n[Grand Central Dispatch In-Depth: Part 2/2](https://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2)","slug":"iOSä¸‹é‡è¦çš„å¤šçº¿ç¨‹GCD","published":1,"updated":"2018-03-14T09:11:47.465Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12b00006cqy8k1cc0pq6","content":"<p><strong>å¤šçº¿ç¨‹</strong>æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼Œå¸¦ç»™ç”¨æˆ·æ›´å¤šçš„ä¾¿åˆ©ï¼Œä¼´éšç€å‹å¥½åº¦çš„æå‡ï¼ŒAPPçš„è¢«ä½¿ç”¨ç‡å’Œè¢«ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šæ›´åŠ é«˜ã€‚<br>æ­¤ç¯‡ç¬”è®°å‚è€ƒäº†ç½‘ç»œä¸Šä¸€äº›å¥½æ–‡ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚åœ¨Ray Wenderlichä¸Šæ‘˜å½•äº†ä¸€äº›é˜Ÿåˆ—çš„å¸¸ç”¨æƒ…æ™¯ï¼Œå¸Œæœ›è‡ªå·±å¾—åˆ°æé«˜çš„åŒæ—¶åˆ†äº«ç»™å¤§å®¶ã€‚</p>\n<a id=\"more\"></a>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<h2 id=\"ä¸€äº›æ¦‚å¿µ\"><a href=\"#ä¸€äº›æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸€äº›æ¦‚å¿µ\"></a>ä¸€äº›æ¦‚å¿µ</h2><h3 id=\"ä¸²è¡Œï¼ˆSerialï¼‰ä¸-å¹¶å‘ï¼ˆConcurrentï¼‰\"><a href=\"#ä¸²è¡Œï¼ˆSerialï¼‰ä¸-å¹¶å‘ï¼ˆConcurrentï¼‰\" class=\"headerlink\" title=\"ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰\"></a>ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰</h3><ul>\n<li>ä»»åŠ¡ä¸²è¡Œï¼Œæ„å‘³ç€åœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå³ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</li>\n<li>ä»»åŠ¡å¹¶å‘ï¼Œæ„å‘³ç€å¯¹äºç”¨æˆ·ä½“éªŒï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰å¤šä¸ªä»»åŠ¡è¢«æ‰§è¡Œã€‚</li>\n</ul>\n<h3 id=\"åŒæ­¥ï¼ˆSynchronousï¼‰ä¸-å¼‚æ­¥-ï¼ˆAsynchronousï¼‰\"><a href=\"#åŒæ­¥ï¼ˆSynchronousï¼‰ä¸-å¼‚æ­¥-ï¼ˆAsynchronousï¼‰\" class=\"headerlink\" title=\"åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰\"></a>åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰</h3><ul>\n<li>åŒæ­¥æ´¾å‘(sync)ä¼šå°½å¯èƒ½åœ°åœ¨å½“å‰çº¿ç¨‹æ´¾å‘ä»»åŠ¡ã€‚ä½†å¦‚æœåœ¨å…¶ä»–é˜Ÿåˆ—å¾€ä¸»é˜Ÿåˆ—åŒæ­¥æ´¾å‘ï¼Œä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ </li>\n<li>å¼‚æ­¥æ´¾å‘(async)ä¹Ÿä¸ç»å¯¹ä¼šå¦å¼€çº¿ç¨‹ã€‚ä¾‹å¦‚åœ¨ä¸»çº¿ç¨‹å¼‚æ­¥æ´¾å‘åˆ°ä¸»çº¿ç¨‹ï¼Œæ´¾å‘ä¾æ—§æ˜¯å¼‚æ­¥çš„ï¼Œä»»åŠ¡ä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li>\n</ul>\n<p>åŒæ­¥å¼‚æ­¥çš„é‡è¦åŒºåˆ«åœ¨äºæ´¾å‘æ–¹æ³•æ˜¯å¦éœ€è¦ç­‰å¾… block å®Œæˆåæ‰èƒ½è¿”å›ã€‚</p>\n<h3 id=\"ä¸´ç•ŒåŒºï¼ˆCritical-Sectionï¼‰\"><a href=\"#ä¸´ç•ŒåŒºï¼ˆCritical-Sectionï¼‰\" class=\"headerlink\" title=\"ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰\"></a>ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰</h3><p>ä¸€æ®µä»£ç ä¸èƒ½è¢«å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œè¿™æ®µä»£ç ã€‚è¿™å¾ˆå¸¸è§ï¼Œå› ä¸ºä»£ç å»æ“ä½œä¸€ä¸ªå…±äº«èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªå˜é‡è‹¥èƒ½è¢«å¹¶å‘è¿›ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½ä¼šå˜è´¨ï¼ˆå®ƒçš„å€¼ä¸å†å¯ä¿¡ï¼‰ã€‚</p>\n<h3 id=\"æ­»é”ï¼ˆDeadlockï¼‰\"><a href=\"#æ­»é”ï¼ˆDeadlockï¼‰\" class=\"headerlink\" title=\"æ­»é”ï¼ˆDeadlockï¼‰\"></a>æ­»é”ï¼ˆDeadlockï¼‰</h3><p>åœæ­¢ç­‰å¾…äº‹æƒ…çš„çº¿ç¨‹ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ç›¸äº’ç»´æŒç­‰å¾…ï¼Œå³æ­»é”ã€‚<br>ä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰çº¿ç¨‹å¡ä½äº†ï¼Œç­‰å¾…å¯¹æ–¹å®Œæˆæˆ–æ‰§è¡Œå…¶å®ƒæ“ä½œã€‚ç¬¬ä¸€ä¸ªä¸èƒ½å®Œæˆæ˜¯å› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬äºŒä¸ªçš„å®Œæˆã€‚ä½†ç¬¬äºŒä¸ªä¹Ÿä¸èƒ½å®Œæˆï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªçš„å®Œæˆã€‚</p>\n<h3 id=\"çº¿ç¨‹å®‰å…¨ï¼ˆThread-Safeï¼‰\"><a href=\"#çº¿ç¨‹å®‰å…¨ï¼ˆThread-Safeï¼‰\" class=\"headerlink\" title=\"çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰\"></a>çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰</h3><p>çº¿ç¨‹å®‰å…¨çš„ä»£ç èƒ½åœ¨å¤šçº¿ç¨‹æˆ–å¹¶å‘ä»»åŠ¡ä¸­è¢«å®‰å…¨çš„è°ƒç”¨ï¼Œè€Œä¸ä¼šå¯¼è‡´ä»»ä½•é—®é¢˜ï¼ˆæ•°æ®æŸåï¼Œå´©æºƒç­‰ï¼‰ã€‚çº¿ç¨‹ä¸å®‰å…¨çš„ä»£ç åœ¨æŸä¸ªæ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä»£ç çš„ä¾‹å­æ˜¯NSDictionaryã€‚ä½ å¯ä»¥åœ¨åŒä¸€æ—¶é—´åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨å®ƒè€Œä¸ä¼šæœ‰é—®é¢˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒNSMutableDictionaryå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåº”è¯¥ä¿è¯ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®ƒã€‚æ›´å¤šè¯·çœ‹ï¼š<a href=\"https://developer.apple.com/library/mac/documentation/cocoa/conceptual/multithreading/ThreadSafetySummary/ThreadSafetySummary.html\" target=\"_blank\" rel=\"external\">helpful and somewhat chilling list</a></p>\n<h3 id=\"ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext-Switchï¼‰\"><a href=\"#ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext-Switchï¼‰\" class=\"headerlink\" title=\"ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰\"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰</h3><p>ä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢æŒ‡å½“ä½ åœ¨å•ä¸ªè¿›ç¨‹é‡Œåˆ‡æ¢æ‰§è¡Œä¸åŒçš„çº¿ç¨‹æ—¶å­˜å‚¨ä¸æ¢å¤æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–å†™å¤šä»»åŠ¡åº”ç”¨æ—¶å¾ˆæ™®éï¼Œä½†ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚</p>\n<h3 id=\"å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸-å¹¶è¡Œ-ï¼ˆParallelismï¼‰\"><a href=\"#å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸-å¹¶è¡Œ-ï¼ˆParallelismï¼‰\" class=\"headerlink\" title=\"å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰\"></a>å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰</h3><p>å¹¶è¡Œè¦æ±‚å¹¶å‘ï¼Œä½†å¹¶å‘ä¸èƒ½ä¿è¯å¹¶è¡Œï¼Œå°±è®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå¼€å¯çº¿ç¨‹æ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹å®ä¸Šï¼Œåœ¨æŸæ¬¡å¹¶å‘å¤„ç†ä»»åŠ¡ä¸­ï¼Œå¼€å¯çš„çº¿ç¨‹æ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœä¸Šé™ä¸º2ï¼Œå³æ¯æ¬¡å¼€å¯çš„æ–°çº¿ç¨‹ä¸º2ï¼Œé‚£ä¹ˆæ˜¯æœ‰å¯èƒ½å‡ºç°å¹¶å‘å´ä¸å¹¶è¡Œçš„æƒ…å†µã€‚<br>å¹¶å‘ä»£ç çš„ä¸åŒéƒ¨åˆ†å¯ä»¥â€œåŒæ­¥â€æ‰§è¡Œã€‚ç„¶è€Œï¼Œè¯¥æ€æ ·å‘ç”Ÿæˆ–æ˜¯å¦å‘ç”Ÿéƒ½å–å†³äºç³»ç»Ÿã€‚å¤šæ ¸è®¾å¤‡é€šè¿‡å¹¶è¡Œæ¥åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼›ç„¶è€Œï¼Œä¸ºäº†ä½¿å•æ ¸è®¾å¤‡ä¹Ÿèƒ½å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä»¬å¿…é¡»å…ˆè¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç„¶åè¿è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ°è¶³å¤Ÿå¿«ä»¥è‡´ç»™æˆ‘ä»¬å¹¶å‘æ‰§è¡Œåœ°é”™è§‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<h2 id=\"é˜Ÿåˆ—ï¼ˆqueueï¼‰\"><a href=\"#é˜Ÿåˆ—ï¼ˆqueueï¼‰\" class=\"headerlink\" title=\"é˜Ÿåˆ—ï¼ˆqueueï¼‰\"></a>é˜Ÿåˆ—ï¼ˆqueueï¼‰</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:center\">é˜Ÿåˆ—</th>\n<th style=\"text-align:center\">çº¿ç¨‹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">ä¸²è¡Œ</td>\n<td style=\"text-align:center\">å½“å‰çº¿ç¨‹è¿è¡Œ</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">å¹¶å‘</td>\n<td style=\"text-align:center\">å¦å¼€çº¿ç¨‹è¿è¡Œ</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Queuesï¼‰\"><a href=\"#ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Queuesï¼‰\" class=\"headerlink\" title=\"ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰\"></a>ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰</h3><hr>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/26uxx.png\" alt=\"Serial-Queue\"><br><code>dispatch_queue_create(&quot;com.selander.GooglyPuff.photoQueue&quot;,DISPATCH_QUEUE_SERIAL);</code><br>ä¸²è¡Œé˜Ÿåˆ—æœ€å…¸å‹çš„æ˜¯<strong>main queue</strong>ï¼šä¸»çº¿ç¨‹æ‰€å¯¹åº”çš„queueï¼Œä¸»è¦ç”¨äºæ›´æ–°UIã€‚</p>\n<h3 id=\"å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent-Queuesï¼‰\"><a href=\"#å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent-Queuesï¼‰\" class=\"headerlink\" title=\"å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰\"></a>å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰</h3><hr>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/ggsfu.png\" alt=\"Concurrent-Queue\"><br><code>dispatch_queue_create(&quot;com.selander.GooglyPuff.photoQueue&quot;,DISPATCH_QUEUE_CONCURRENT);</code><br>é™¤äº†é€šè¿‡DISPATCH_QUEUE_CONCURRENTåˆ›å»ºçš„queueå¤–ï¼Œç³»ç»Ÿæä¾›äº†Global Dispatch Queuesï¼šåˆ†åˆ«æœ‰å››ç§ä¼˜å…ˆçº§ï¼ˆbackground, low, default, highï¼‰<br><code>dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)</code></p>\n<h2 id=\"GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\"><a href=\"#GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\" class=\"headerlink\" title=\"GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\"></a>GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´</h2><h3 id=\"dispatch-sync\"><a href=\"#dispatch-sync\" class=\"headerlink\" title=\"dispatch_sync\"></a>dispatch_sync</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wx3ao.gif\" alt=\"dispatch_sync_in_action\"></p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šCautionï¼ï¼éœ€è¦æ³¨æ„ä¸èƒ½å¾€æœ¬é˜Ÿåˆ—æ´¾å‘ä»»åŠ¡ï¼Œå¦åˆ™ä¼šé€ æˆæ­»é”ã€‚    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-async\"><a href=\"#dispatch-async\" class=\"headerlink\" title=\"dispatch_async\"></a>dispatch_async</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zst1c.gif\" alt=\"dispatch_async_in_action\">    </p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-barriers\"><a href=\"#dispatch-barriers\" class=\"headerlink\" title=\"dispatch barriers\"></a>dispatch barriers</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/b3668.png\" alt=\"Dispatch-Barrier\"><br>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šä½¿ç”¨dispatch_barriers_syncæˆ–dispatch_barries_asyncä¼šåœ¨ä½ åˆ›å»ºçš„é˜Ÿåˆ—ä¸­æ’å…¥Barrier Blockï¼Œè€Œè¿™ä¸ªBlockè¢«æ‰§è¡Œæ—¶ç¡®ä¿å½“å‰ä»…æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œä¸­ã€‚è¿™å°±å¾ˆå¥½åœ°åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­ä¿æŒä¸€æ®µæš‚æ—¶ä¸²è¡Œçš„ä»»åŠ¡æ‰§è¡Œé¡ºåºã€‚è¿™å¾ˆé€‚åˆäºï¼šå¦‚å¯¹æŸä¸€ä¸ªæ•°ç»„æˆ–å­˜å‚¨ç»“æ„æ·»åŠ æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å°†è¯¥ä»»åŠ¡ä½œä¸ºBarrier Blockæ’å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå³ä¿è¯äº†è¯¥æ•°ç»„çš„åŸå­æ€§ï¼Œé˜²æ­¢è„æ•°æ®çš„äº§ç”Ÿã€‚    </p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šå®Œå…¨æ²¡å¿…è¦â€¦.</li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h4 id=\"read-and-write-è¯»å†™é—®é¢˜\"><a href=\"#read-and-write-è¯»å†™é—®é¢˜\" class=\"headerlink\" title=\"read and write è¯»å†™é—®é¢˜\"></a>read and write è¯»å†™é—®é¢˜</h4><pre><code>- (void)addPhoto:(Photo *)photo \n{ \nif (photo) { // 1 \ndispatch_barrier_async(self.concurrentPhotoQueue, ^{ // 2 \n[_photosArray addObject:photo]; // 3 \ndispatch_async(dispatch_get_main_queue(), ^{ // 4 \n[self postContentAddedNotification]; \n}); \n}); \n} \n}\n</code></pre><pre><code>- (NSArray *)photos \n{ \n__block NSArray *array; // 1 \ndispatch_sync(self.concurrentPhotoQueue, ^{ // 2 \narray = [NSArray arrayWithArray:_photosArray]; // 3 \n}); \nreturn array; \n}\n</code></pre><h3 id=\"dispatch-after\"><a href=\"#dispatch-after\" class=\"headerlink\" title=\"dispatch_after\"></a>dispatch_after</h3><p>dispatch_afteræœ‰ä¸€ä¸ªéå¸¸ä½¿ç”¨çš„æƒ…æ™¯ï¼šå½“ä½ éœ€è¦åœ¨APPå¯åŠ¨æ—¶è®©å¯åŠ¨å›¾ç‰‡å†æ˜¾ç¤ºå°±ä¸€äº›ï¼Œè®©APPæœ‰æ›´å……è¶³çš„æ—¶é—´å‡†å¤‡ä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œæ—¶ï¼Œå°±ä½¿ç”¨dispatch_after.è€Œä¸”æ­£å¦‚ä¸‹æ–‡å°†è¯´åˆ°çš„ï¼šdispatch_afteræœ€å¥½åªåœ¨main queueä¸­ä½¿ç”¨ã€‚</p>\n<pre><code>double delayInSeconds = 1.0; \ndispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC)); // 1 \ndispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // 2 \nif (!count) { \n[self.navigationItem setPrompt:@&quot;Add photos with faces to Googlyify them!&quot;]; \n} else { \n[self.navigationItem setPrompt:nil]; \n} \n});\n</code></pre><p><strong>åªèƒ½ç”¨äºMain Queueï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p>\n<h3 id=\"dispatch-once\"><a href=\"#dispatch-once\" class=\"headerlink\" title=\"dispatch_once\"></a>dispatch_once</h3><pre><code>static PhotoManager *sharedPhotoManager = nil; \nstatic dispatch_once_t onceToken; \ndispatch_once(&amp;onceToken, ^{ \nsharedPhotoManager = [[PhotoManager alloc] init]; \nsharedPhotoManager-&gt;_photosArray = [NSMutableArray array]; \n}); \nreturn sharedPhotoManager;\n</code></pre><h3 id=\"dispatch-groups\"><a href=\"#dispatch-groups\" class=\"headerlink\" title=\"dispatch_groups\"></a>dispatch_groups</h3><pre><code>dispatch_group_t downloadGroup = dispatch_group_create(); \n//ä»»åŠ¡å¼€å§‹ä¹‹å‰è¦æ‰§è¡Œä¸‹é¢çš„enterå‡½æ•° \ndispatch_group_enter(downloadGroup); \n//åœ¨ä»»åŠ¡ç»“æŸçš„æ—¶å€™è¦æ‰§è¡Œä¸‹é¢çš„leaveå‡½æ•° \ndispatch_group_leave(downloadGroup); \ndispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER);//é˜»å¡è¿›ç¨‹ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸ \n// or äº¤ç»™groupé€šçŸ¥ \ndispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^{ // 4 \nif (completionBlock) { \ncompletionBlock(error); \n} \n});\n</code></pre><p>groupä¸­çš„ä»»åŠ¡ä¸ä¸€å®šåœ¨åŒä¸€ä¸ªqueueé‡Œé¢ã€‚ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶å‘é˜Ÿåˆ—éƒ½å¯ç”¨ã€‚</p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-apply\"><a href=\"#dispatch-apply\" class=\"headerlink\" title=\"dispatch_apply\"></a>dispatch_apply</h3><pre><code>dispatch_apply(3, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(size_t i) { \n}//å°±åƒforå¾ªç¯ä¸€æ ·\n</code></pre><ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šæ²¡ä»€ä¹ˆå¿…è¦â€¦.ä¸²è¡Œé˜Ÿåˆ—ä½¿ç”¨è·Ÿæ™®é€šçš„å¾ªç¯æ²¡æœ‰åŒºåˆ«ã€‚</li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href=\"https://www.raywenderlich.com/60749/grand-central-dispatch-in-depth-part-1\" target=\"_blank\" rel=\"external\">Grand Central Dispatch In-Depth: Part 1/2</a></p>\n<p><a href=\"https://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2\" target=\"_blank\" rel=\"external\">Grand Central Dispatch In-Depth: Part 2/2</a></p>\n","excerpt":"<p><strong>å¤šçº¿ç¨‹</strong>æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ï¼Œå¸¦ç»™ç”¨æˆ·æ›´å¤šçš„ä¾¿åˆ©ï¼Œä¼´éšç€å‹å¥½åº¦çš„æå‡ï¼ŒAPPçš„è¢«ä½¿ç”¨ç‡å’Œè¢«ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šæ›´åŠ é«˜ã€‚<br>æ­¤ç¯‡ç¬”è®°å‚è€ƒäº†ç½‘ç»œä¸Šä¸€äº›å¥½æ–‡ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚åœ¨Ray Wenderlichä¸Šæ‘˜å½•äº†ä¸€äº›é˜Ÿåˆ—çš„å¸¸ç”¨æƒ…æ™¯ï¼Œå¸Œæœ›è‡ªå·±å¾—åˆ°æé«˜çš„åŒæ—¶åˆ†äº«ç»™å¤§å®¶ã€‚</p>","more":"<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<h2 id=\"ä¸€äº›æ¦‚å¿µ\"><a href=\"#ä¸€äº›æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸€äº›æ¦‚å¿µ\"></a>ä¸€äº›æ¦‚å¿µ</h2><h3 id=\"ä¸²è¡Œï¼ˆSerialï¼‰ä¸-å¹¶å‘ï¼ˆConcurrentï¼‰\"><a href=\"#ä¸²è¡Œï¼ˆSerialï¼‰ä¸-å¹¶å‘ï¼ˆConcurrentï¼‰\" class=\"headerlink\" title=\"ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰\"></a>ä¸²è¡Œï¼ˆSerialï¼‰ä¸ å¹¶å‘ï¼ˆConcurrentï¼‰</h3><ul>\n<li>ä»»åŠ¡ä¸²è¡Œï¼Œæ„å‘³ç€åœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå³ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</li>\n<li>ä»»åŠ¡å¹¶å‘ï¼Œæ„å‘³ç€å¯¹äºç”¨æˆ·ä½“éªŒï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œæœ‰å¤šä¸ªä»»åŠ¡è¢«æ‰§è¡Œã€‚</li>\n</ul>\n<h3 id=\"åŒæ­¥ï¼ˆSynchronousï¼‰ä¸-å¼‚æ­¥-ï¼ˆAsynchronousï¼‰\"><a href=\"#åŒæ­¥ï¼ˆSynchronousï¼‰ä¸-å¼‚æ­¥-ï¼ˆAsynchronousï¼‰\" class=\"headerlink\" title=\"åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰\"></a>åŒæ­¥ï¼ˆSynchronousï¼‰ä¸ å¼‚æ­¥ ï¼ˆAsynchronousï¼‰</h3><ul>\n<li>åŒæ­¥æ´¾å‘(sync)ä¼šå°½å¯èƒ½åœ°åœ¨å½“å‰çº¿ç¨‹æ´¾å‘ä»»åŠ¡ã€‚ä½†å¦‚æœåœ¨å…¶ä»–é˜Ÿåˆ—å¾€ä¸»é˜Ÿåˆ—åŒæ­¥æ´¾å‘ï¼Œä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ </li>\n<li>å¼‚æ­¥æ´¾å‘(async)ä¹Ÿä¸ç»å¯¹ä¼šå¦å¼€çº¿ç¨‹ã€‚ä¾‹å¦‚åœ¨ä¸»çº¿ç¨‹å¼‚æ­¥æ´¾å‘åˆ°ä¸»çº¿ç¨‹ï¼Œæ´¾å‘ä¾æ—§æ˜¯å¼‚æ­¥çš„ï¼Œä»»åŠ¡ä¹Ÿä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</li>\n</ul>\n<p>åŒæ­¥å¼‚æ­¥çš„é‡è¦åŒºåˆ«åœ¨äºæ´¾å‘æ–¹æ³•æ˜¯å¦éœ€è¦ç­‰å¾… block å®Œæˆåæ‰èƒ½è¿”å›ã€‚</p>\n<h3 id=\"ä¸´ç•ŒåŒºï¼ˆCritical-Sectionï¼‰\"><a href=\"#ä¸´ç•ŒåŒºï¼ˆCritical-Sectionï¼‰\" class=\"headerlink\" title=\"ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰\"></a>ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰</h3><p>ä¸€æ®µä»£ç ä¸èƒ½è¢«å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸¤ä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œè¿™æ®µä»£ç ã€‚è¿™å¾ˆå¸¸è§ï¼Œå› ä¸ºä»£ç å»æ“ä½œä¸€ä¸ªå…±äº«èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªå˜é‡è‹¥èƒ½è¢«å¹¶å‘è¿›ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½ä¼šå˜è´¨ï¼ˆå®ƒçš„å€¼ä¸å†å¯ä¿¡ï¼‰ã€‚</p>\n<h3 id=\"æ­»é”ï¼ˆDeadlockï¼‰\"><a href=\"#æ­»é”ï¼ˆDeadlockï¼‰\" class=\"headerlink\" title=\"æ­»é”ï¼ˆDeadlockï¼‰\"></a>æ­»é”ï¼ˆDeadlockï¼‰</h3><p>åœæ­¢ç­‰å¾…äº‹æƒ…çš„çº¿ç¨‹ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹ç›¸äº’ç»´æŒç­‰å¾…ï¼Œå³æ­»é”ã€‚<br>ä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰çº¿ç¨‹å¡ä½äº†ï¼Œç­‰å¾…å¯¹æ–¹å®Œæˆæˆ–æ‰§è¡Œå…¶å®ƒæ“ä½œã€‚ç¬¬ä¸€ä¸ªä¸èƒ½å®Œæˆæ˜¯å› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬äºŒä¸ªçš„å®Œæˆã€‚ä½†ç¬¬äºŒä¸ªä¹Ÿä¸èƒ½å®Œæˆï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ç¬¬ä¸€ä¸ªçš„å®Œæˆã€‚</p>\n<h3 id=\"çº¿ç¨‹å®‰å…¨ï¼ˆThread-Safeï¼‰\"><a href=\"#çº¿ç¨‹å®‰å…¨ï¼ˆThread-Safeï¼‰\" class=\"headerlink\" title=\"çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰\"></a>çº¿ç¨‹å®‰å…¨ï¼ˆThread Safeï¼‰</h3><p>çº¿ç¨‹å®‰å…¨çš„ä»£ç èƒ½åœ¨å¤šçº¿ç¨‹æˆ–å¹¶å‘ä»»åŠ¡ä¸­è¢«å®‰å…¨çš„è°ƒç”¨ï¼Œè€Œä¸ä¼šå¯¼è‡´ä»»ä½•é—®é¢˜ï¼ˆæ•°æ®æŸåï¼Œå´©æºƒç­‰ï¼‰ã€‚çº¿ç¨‹ä¸å®‰å…¨çš„ä»£ç åœ¨æŸä¸ªæ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä»£ç çš„ä¾‹å­æ˜¯NSDictionaryã€‚ä½ å¯ä»¥åœ¨åŒä¸€æ—¶é—´åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨å®ƒè€Œä¸ä¼šæœ‰é—®é¢˜ã€‚å¦ä¸€æ–¹é¢ï¼ŒNSMutableDictionaryå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåº”è¯¥ä¿è¯ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®ƒã€‚æ›´å¤šè¯·çœ‹ï¼š<a href=\"https://developer.apple.com/library/mac/documentation/cocoa/conceptual/multithreading/ThreadSafetySummary/ThreadSafetySummary.html\">helpful and somewhat chilling list</a></p>\n<h3 id=\"ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext-Switchï¼‰\"><a href=\"#ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext-Switchï¼‰\" class=\"headerlink\" title=\"ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰\"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰</h3><p>ä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢æŒ‡å½“ä½ åœ¨å•ä¸ªè¿›ç¨‹é‡Œåˆ‡æ¢æ‰§è¡Œä¸åŒçš„çº¿ç¨‹æ—¶å­˜å‚¨ä¸æ¢å¤æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–å†™å¤šä»»åŠ¡åº”ç”¨æ—¶å¾ˆæ™®éï¼Œä½†ä¼šå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚</p>\n<h3 id=\"å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸-å¹¶è¡Œ-ï¼ˆParallelismï¼‰\"><a href=\"#å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸-å¹¶è¡Œ-ï¼ˆParallelismï¼‰\" class=\"headerlink\" title=\"å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰\"></a>å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸ å¹¶è¡Œ ï¼ˆParallelismï¼‰</h3><p>å¹¶è¡Œè¦æ±‚å¹¶å‘ï¼Œä½†å¹¶å‘ä¸èƒ½ä¿è¯å¹¶è¡Œï¼Œå°±è®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå¼€å¯çº¿ç¨‹æ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹å®ä¸Šï¼Œåœ¨æŸæ¬¡å¹¶å‘å¤„ç†ä»»åŠ¡ä¸­ï¼Œå¼€å¯çš„çº¿ç¨‹æ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœä¸Šé™ä¸º2ï¼Œå³æ¯æ¬¡å¼€å¯çš„æ–°çº¿ç¨‹ä¸º2ï¼Œé‚£ä¹ˆæ˜¯æœ‰å¯èƒ½å‡ºç°å¹¶å‘å´ä¸å¹¶è¡Œçš„æƒ…å†µã€‚<br>å¹¶å‘ä»£ç çš„ä¸åŒéƒ¨åˆ†å¯ä»¥â€œåŒæ­¥â€æ‰§è¡Œã€‚ç„¶è€Œï¼Œè¯¥æ€æ ·å‘ç”Ÿæˆ–æ˜¯å¦å‘ç”Ÿéƒ½å–å†³äºç³»ç»Ÿã€‚å¤šæ ¸è®¾å¤‡é€šè¿‡å¹¶è¡Œæ¥åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼›ç„¶è€Œï¼Œä¸ºäº†ä½¿å•æ ¸è®¾å¤‡ä¹Ÿèƒ½å®ç°è¿™ä¸€ç‚¹ï¼Œå®ƒä»¬å¿…é¡»å…ˆè¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œä¸€ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç„¶åè¿è¡Œå¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ°è¶³å¤Ÿå¿«ä»¥è‡´ç»™æˆ‘ä»¬å¹¶å‘æ‰§è¡Œåœ°é”™è§‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<h2 id=\"é˜Ÿåˆ—ï¼ˆqueueï¼‰\"><a href=\"#é˜Ÿåˆ—ï¼ˆqueueï¼‰\" class=\"headerlink\" title=\"é˜Ÿåˆ—ï¼ˆqueueï¼‰\"></a>é˜Ÿåˆ—ï¼ˆqueueï¼‰</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:center\">é˜Ÿåˆ—</th>\n<th style=\"text-align:center\">çº¿ç¨‹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">ä¸²è¡Œ</td>\n<td style=\"text-align:center\">å½“å‰çº¿ç¨‹è¿è¡Œ</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">å¹¶å‘</td>\n<td style=\"text-align:center\">å¦å¼€çº¿ç¨‹è¿è¡Œ</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Queuesï¼‰\"><a href=\"#ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial-Queuesï¼‰\" class=\"headerlink\" title=\"ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰\"></a>ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queuesï¼‰</h3><hr>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/26uxx.png\" alt=\"Serial-Queue\"><br><code>dispatch_queue_create(&quot;com.selander.GooglyPuff.photoQueue&quot;,DISPATCH_QUEUE_SERIAL);</code><br>ä¸²è¡Œé˜Ÿåˆ—æœ€å…¸å‹çš„æ˜¯<strong>main queue</strong>ï¼šä¸»çº¿ç¨‹æ‰€å¯¹åº”çš„queueï¼Œä¸»è¦ç”¨äºæ›´æ–°UIã€‚</p>\n<h3 id=\"å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent-Queuesï¼‰\"><a href=\"#å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent-Queuesï¼‰\" class=\"headerlink\" title=\"å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰\"></a>å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Queuesï¼‰</h3><hr>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/ggsfu.png\" alt=\"Concurrent-Queue\"><br><code>dispatch_queue_create(&quot;com.selander.GooglyPuff.photoQueue&quot;,DISPATCH_QUEUE_CONCURRENT);</code><br>é™¤äº†é€šè¿‡DISPATCH_QUEUE_CONCURRENTåˆ›å»ºçš„queueå¤–ï¼Œç³»ç»Ÿæä¾›äº†Global Dispatch Queuesï¼šåˆ†åˆ«æœ‰å››ç§ä¼˜å…ˆçº§ï¼ˆbackground, low, default, highï¼‰<br><code>dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0)</code></p>\n<h2 id=\"GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\"><a href=\"#GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\" class=\"headerlink\" title=\"GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´\"></a>GCDè¯­æ³•å’Œé€‚ç”¨èŒƒå›´</h2><h3 id=\"dispatch-sync\"><a href=\"#dispatch-sync\" class=\"headerlink\" title=\"dispatch_sync\"></a>dispatch_sync</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/wx3ao.gif\" alt=\"dispatch_sync_in_action\"></p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šCautionï¼ï¼éœ€è¦æ³¨æ„ä¸èƒ½å¾€æœ¬é˜Ÿåˆ—æ´¾å‘ä»»åŠ¡ï¼Œå¦åˆ™ä¼šé€ æˆæ­»é”ã€‚    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-async\"><a href=\"#dispatch-async\" class=\"headerlink\" title=\"dispatch_async\"></a>dispatch_async</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/zst1c.gif\" alt=\"dispatch_async_in_action\">    </p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-barriers\"><a href=\"#dispatch-barriers\" class=\"headerlink\" title=\"dispatch barriers\"></a>dispatch barriers</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/b3668.png\" alt=\"Dispatch-Barrier\"><br>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šä½¿ç”¨dispatch_barriers_syncæˆ–dispatch_barries_asyncä¼šåœ¨ä½ åˆ›å»ºçš„é˜Ÿåˆ—ä¸­æ’å…¥Barrier Blockï¼Œè€Œè¿™ä¸ªBlockè¢«æ‰§è¡Œæ—¶ç¡®ä¿å½“å‰ä»…æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œä¸­ã€‚è¿™å°±å¾ˆå¥½åœ°åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­ä¿æŒä¸€æ®µæš‚æ—¶ä¸²è¡Œçš„ä»»åŠ¡æ‰§è¡Œé¡ºåºã€‚è¿™å¾ˆé€‚åˆäºï¼šå¦‚å¯¹æŸä¸€ä¸ªæ•°ç»„æˆ–å­˜å‚¨ç»“æ„æ·»åŠ æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å°†è¯¥ä»»åŠ¡ä½œä¸ºBarrier Blockæ’å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå³ä¿è¯äº†è¯¥æ•°ç»„çš„åŸå­æ€§ï¼Œé˜²æ­¢è„æ•°æ®çš„äº§ç”Ÿã€‚    </p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šå®Œå…¨æ²¡å¿…è¦â€¦.</li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h4 id=\"read-and-write-è¯»å†™é—®é¢˜\"><a href=\"#read-and-write-è¯»å†™é—®é¢˜\" class=\"headerlink\" title=\"read and write è¯»å†™é—®é¢˜\"></a>read and write è¯»å†™é—®é¢˜</h4><pre><code>- (void)addPhoto:(Photo *)photo \n{ \nif (photo) { // 1 \ndispatch_barrier_async(self.concurrentPhotoQueue, ^{ // 2 \n[_photosArray addObject:photo]; // 3 \ndispatch_async(dispatch_get_main_queue(), ^{ // 4 \n[self postContentAddedNotification]; \n}); \n}); \n} \n}\n</code></pre><pre><code>- (NSArray *)photos \n{ \n__block NSArray *array; // 1 \ndispatch_sync(self.concurrentPhotoQueue, ^{ // 2 \narray = [NSArray arrayWithArray:_photosArray]; // 3 \n}); \nreturn array; \n}\n</code></pre><h3 id=\"dispatch-after\"><a href=\"#dispatch-after\" class=\"headerlink\" title=\"dispatch_after\"></a>dispatch_after</h3><p>dispatch_afteræœ‰ä¸€ä¸ªéå¸¸ä½¿ç”¨çš„æƒ…æ™¯ï¼šå½“ä½ éœ€è¦åœ¨APPå¯åŠ¨æ—¶è®©å¯åŠ¨å›¾ç‰‡å†æ˜¾ç¤ºå°±ä¸€äº›ï¼Œè®©APPæœ‰æ›´å……è¶³çš„æ—¶é—´å‡†å¤‡ä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œæ—¶ï¼Œå°±ä½¿ç”¨dispatch_after.è€Œä¸”æ­£å¦‚ä¸‹æ–‡å°†è¯´åˆ°çš„ï¼šdispatch_afteræœ€å¥½åªåœ¨main queueä¸­ä½¿ç”¨ã€‚</p>\n<pre><code>double delayInSeconds = 1.0; \ndispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC)); // 1 \ndispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // 2 \nif (!count) { \n[self.navigationItem setPrompt:@&quot;Add photos with faces to Googlyify them!&quot;]; \n} else { \n[self.navigationItem setPrompt:nil]; \n} \n});\n</code></pre><p><strong>åªèƒ½ç”¨äºMain Queueï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p>\n<h3 id=\"dispatch-once\"><a href=\"#dispatch-once\" class=\"headerlink\" title=\"dispatch_once\"></a>dispatch_once</h3><pre><code>static PhotoManager *sharedPhotoManager = nil; \nstatic dispatch_once_t onceToken; \ndispatch_once(&amp;onceToken, ^{ \nsharedPhotoManager = [[PhotoManager alloc] init]; \nsharedPhotoManager-&gt;_photosArray = [NSMutableArray array]; \n}); \nreturn sharedPhotoManager;\n</code></pre><h3 id=\"dispatch-groups\"><a href=\"#dispatch-groups\" class=\"headerlink\" title=\"dispatch_groups\"></a>dispatch_groups</h3><pre><code>dispatch_group_t downloadGroup = dispatch_group_create(); \n//ä»»åŠ¡å¼€å§‹ä¹‹å‰è¦æ‰§è¡Œä¸‹é¢çš„enterå‡½æ•° \ndispatch_group_enter(downloadGroup); \n//åœ¨ä»»åŠ¡ç»“æŸçš„æ—¶å€™è¦æ‰§è¡Œä¸‹é¢çš„leaveå‡½æ•° \ndispatch_group_leave(downloadGroup); \ndispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER);//é˜»å¡è¿›ç¨‹ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸ \n// or äº¤ç»™groupé€šçŸ¥ \ndispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^{ // 4 \nif (completionBlock) { \ncompletionBlock(error); \n} \n});\n</code></pre><p>groupä¸­çš„ä»»åŠ¡ä¸ä¸€å®šåœ¨åŒä¸€ä¸ªqueueé‡Œé¢ã€‚ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶å‘é˜Ÿåˆ—éƒ½å¯ç”¨ã€‚</p>\n<ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šâˆš    </li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h3 id=\"dispatch-apply\"><a href=\"#dispatch-apply\" class=\"headerlink\" title=\"dispatch_apply\"></a>dispatch_apply</h3><pre><code>dispatch_apply(3, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(size_t i) { \n}//å°±åƒforå¾ªç¯ä¸€æ ·\n</code></pre><ul>\n<li>ä¸²è¡Œé˜Ÿåˆ—ï¼šæ²¡ä»€ä¹ˆå¿…è¦â€¦.ä¸²è¡Œé˜Ÿåˆ—ä½¿ç”¨è·Ÿæ™®é€šçš„å¾ªç¯æ²¡æœ‰åŒºåˆ«ã€‚</li>\n<li>å¹¶å‘é˜Ÿåˆ—ï¼šâˆš</li>\n</ul>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><p><a href=\"https://www.raywenderlich.com/60749/grand-central-dispatch-in-depth-part-1\">Grand Central Dispatch In-Depth: Part 1/2</a></p>\n<p><a href=\"https://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2\">Grand Central Dispatch In-Depth: Part 2/2</a></p>"},{"title":"ä½¿ç”¨makefileåˆ›å»ºé™æ€åº“","thumbnail":"http://7xs4ed.com1.z0.glb.clouddn.com/Dubai_paohui.jpg","date":"2017-08-08T14:17:57.000Z","id":"42F1A99632F0B88D","_content":"\næœ€è¿‘å·¥ä½œä¸Šéœ€è¦å°†Winä¸Šçš„ä¸€ä¸ªCåº“ç§»æ¤åˆ°iOSä¸Šä»¥æ”¯æŒä¸šåŠ¡çš„å¼€å±•ï¼Œä¿®æ”¹ä»£ç åéœ€è¦ç¼–è¯‘æˆé™æ€åº“ä¾›iOSä½¿ç”¨ï¼Œä¸ºäº†ä½¿ç”¨Windowsæˆ–Linuxçš„åŒäº‹åœ¨ä¿®æ”¹å®Œä»£ç åä¹Ÿèƒ½ç¼–è¯‘å‡ºé™æ€åº“è€Œæ— éœ€å†æ¬åˆ°Macä¸Šæ“ä½œï¼Œå­¦ä¹ äº†ä¸€ä¸‹makefileã€‚    \n\n<!--more-->\n\nè¯´æ¥æƒ­æ„§ï¼Œè‡ªå·±çš„C/C++æ°´å¹³è¿˜æ²¡æœ‰åˆ°è¾¾å¾ˆé«˜çš„æ°´å¹³ï¼Œæœ€å¼€å§‹æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åˆ›å»º`Cocoa Touch Static Library`é¡¹ç›®ï¼Œç„¶åç›´æ¥å°†æ‰€éœ€è¦çš„ä»£ç æ–‡ä»¶æ— è„‘æ·»åŠ åˆ°é¡¹ç›®é‡Œé¢ï¼Œç¼–è¯‘ï¼Œåˆæˆã€‚    \n\nä½†æ˜¯ä¸ºäº†è®©å…¶ä»–åŒäº‹æ›´å¿«æ·åœ°å®Œæˆå·¥ä½œï¼Œå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨makefileæ¥ç¼–è¯‘é™æ€åº“ã€‚\n\næœ¬æ–‡åªæ˜¯çš®æ¯›ï¼Œä¸»è¦æ˜¯åœ¨æ­¤æ¬¡å·¥ä½œä¸­çš„ä¸€äº›å†ç¨‹ã€‚     \n\n## é™æ€åº“ç‰¹ç‚¹\n\n> - é™æ€åº“å¯¹å‡½æ•°åº“çš„é“¾æ¥æ˜¯æ”¾åœ¨ç¼–è¯‘æ—¶æœŸå®Œæˆçš„ã€‚\n> - ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸å‡½æ•°åº“å†æ— å…³ç³»ï¼Œç§»æ¤æ–¹ä¾¿ã€‚\n> - æµªè´¹ç©ºé—´å’Œèµ„æºï¼Œå› ä¸ºæ‰€æœ‰ç›¸å…³çš„ç›®æ ‡æ–‡ä»¶ä¸ç‰µæ¶‰åˆ°çš„å‡½æ•°åº“è¢«é“¾æ¥åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚\n> - æ›´æ–°å›°éš¾ã€‚å½“ç¨‹åºæ‰€ä¾èµ–çš„é™æ€åº“æœ‰ä»»ä½•æ›´æ–°ï¼Œæ•´ä¸ªç¨‹åºå°±è¦é‡æ–°é“¾æ¥ã€‚\n\nç•™ä¸‹ç–‘é—®ï¼šæ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šåªéœ€è¦å…¶ä»–åº“çš„å¤´æ–‡ä»¶ï¼Ÿ\n\n## makefile\n\nmakefileæœ¬èº«åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥è¾…åŠ©makeå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå‘Šè¯‰makeå‘½ä»¤æ€ä¹ˆå»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚    \n\né‚£ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™æ˜¯ï¼š\n\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰Cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªCæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚\n\nGoogleå¯ä»¥æœç´¢åˆ°å¾ˆå¤šmakefileçš„å¥½æ–‡ç« ï¼Œè¿™é‡Œç®€ç•¥ä»‹ç»ä¸€ä¸‹ï¼š\n\n### åŸºæœ¬è¯­å¥\n\n```\ntarget : prerequisites\n\tcommand\n```\n\n- target : ç¼–è¯‘æˆ–é“¾æ¥æœ€ç»ˆå¾—åˆ°çš„ç›®æ ‡æ–‡ä»¶ï¼Œä¾‹å¦‚.oç»“å°¾çš„ä¸­é—´æ–‡ä»¶ã€ç”±.oæ–‡ä»¶é“¾æ¥è€Œæˆçš„Winä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ.oæ–‡ä»¶æ‰“åŒ…è€Œæˆçš„é™æ€åº“æ–‡ä»¶\n- prerequisites : ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æˆ.oçš„.cã€.cppã€.må’Œ.hï¼Œé“¾æ¥æˆåŠ¨æ€åº“ã€é™æ€åº“ã€å¯æ‰§è¡Œæ–‡ä»¶çš„.o\n- command : å‘½ä»¤ï¼Œå³å¦‚ä½•å°†ä¸Šè¿°çš„ä¾èµ–ç¼–è¯‘æˆ–é“¾æ¥æˆæˆ‘ä»¬è¦çš„targetï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcommandå‰å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ¶è¡¨ç¬¦(tab)ï¼Œä¸èƒ½æ˜¯ä¸€è¿ä¸²çš„ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½ç¼ºå¤±ã€‚\n\n\n\n\n\n#### Phony Target\n\nPHONY ç›®æ ‡å¹¶éå®é™…çš„æ–‡ä»¶åï¼šåªæ˜¯åœ¨æ˜¾å¼è¯·æ±‚æ—¶æ‰§è¡Œå‘½ä»¤çš„åå­—ã€‚    \n\nåƒå¹³å¸¸æˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œå®Œé“¾æ¥åéœ€è¦æ¸…æ¥šäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶æˆ–å…¶ä»–é…ç½®ç­‰ï¼Œéœ€è¦æ‰§è¡Œ`make clean`ï¼Œè¿™é‡Œçš„cleanå°±æ˜¯makefileä¸­è¢«å®šä¹‰çš„Phony Targetã€‚ä¸‹é¢ä¾‹å­ä¼šè¯´åˆ°ã€‚    \n\nä¸€ä¸ªmakefileåªèƒ½æœ‰ä¸€ä¸ªæ€»çš„Target(ç¼–è¯‘é“¾æ¥å¾—åˆ°æˆ‘ä»¬æœ€ç»ˆéœ€è¦çš„æ–‡ä»¶)ï¼Œå¦‚æœéœ€è¦å¤šä¸ªTargetï¼Œå¯ä»¥ä½¿ç”¨Phony Targetæ¥å®ç°ã€‚å½“ç„¶ï¼Œä¸Šè¿°è¯´åˆ°çš„é™¤ç¼–è¯‘é“¾æ¥ä¹‹å¤–çš„æ“ä½œç”¨Phony Targetä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚\n\n\n\n### å˜é‡\n\nåƒå†™ç¨‹åºä¸€æ ·ç›´æ¥å®šä¹‰å˜é‡ï¼Œå˜é‡åœ¨å·¦ä¾§ï¼Œå€¼åœ¨å³ä¾§ï¼Œç­‰å·åˆ†å¼€ï¼Œç„¶åé€šè¿‡`${å˜é‡}`ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š\n\n```\nDEVICE=OS\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\n```\n\n\n\n### æ–‡ä»¶ååŠä½¿ç”¨\n\nå½“ç„¶ï¼Œæ—¢ç„¶å«makefileï¼Œæ–‡ä»¶åæœ€å¥½å°±å«makefileå•¦ï¼ŒMakefileä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯åœ¨makefileä¸å­˜åœ¨çš„æ—¶å€™ï¼Œmakeå‘½ä»¤æ‰ä¼šå»ä½¿ç”¨ã€‚\n\nå¦‚æœå†ä¸å–œæ¬¢ï¼Œæ–‡ä»¶åå†™æˆ`chris`ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯makeçš„æ—¶å€™åŠ ä¸Š-få’Œæ–‡ä»¶åå°±å¥½äº†~\n\n`make -f chris`\n\n\n\n## æ —å­ğŸŒ°\n\nå¥½å•¦ï¼Œè¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å®é™…æ“ä½œå´éœ€è¦äº›è®¸è€å¿ƒ~\n\nä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªç®€å•çš„makefileï¼Œç”¨äºç¼–è¯‘èµ„æºæ–‡ä»¶å’Œæ‰“åŒ…æˆé™æ€åº“ï¼Œè¿˜æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œç»“åˆmakefileï¼Œæ‰“åŒ…armv7,armv7s,arm64,i386,x86_64è¿™äº”ä¸ªå¹³å°çš„é™æ€åº“ï¼Œå¹¶ä½¿ç”¨lipoåˆæˆä¸º\"Fat Library\"ã€‚\n\n### makefile\n\n```cmake\nOUT_D=out\nARCH_D=${OUT_D}/${ARCH}\nOBJ_D=tmp\n# DEVICE å’Œ ARCH æ˜¯å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œç”¨äºåŒºåˆ†æ˜¯OSè¿˜æ˜¯SIMULATORï¼Œå¹³å°æ˜¯å“ªç§\n# ç”±äºCä»£ç ä¸­ä½¿ç”¨åˆ°äº†CoreFoundationå’Œè·¨å¹³å°ç¼–è¯‘ä½¿ç”¨åˆ°__APPLE__ã€TARGET_OS_IPHONEç­‰å®ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥iOSçš„SDK\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\nSDK_PATH=${DEV_PATH}/SDKs/iPhone${DEVICE}10.3.sdk\n\nCPP=clang\nCC=clang\n\nINC_PATH_FLAG=-I. \n# iOSå¹³å°çš„ç¼–è¯‘é€‰é¡¹\nIOS_FLAG=-arch ${ARCH} -isysroot ${SDK_PATH} -miphoneos-version-min=8.0\nCFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\nCPPFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\n\nIOS_LINK_FLAG=-framework CoreFoundation \n\nRM=rm\nMKDIR=mkdir\n\n# OBJECTSå˜é‡ï¼Œåæ–‡ä¼šé€šè¿‡${OBJECTS}æ¥ä½¿ç”¨\nOBJECTS=${OBJ_D}/string.o \\\n\t${OBJ_D}/lock.o \\\n    ${OBJ_D}/time.o \\\n    ${OBJ_D}/NETCA_Alloc.o \\\n    ${OBJ_D}/NETCA_ArrayList.o \\\n    ${OBJ_D}/NETCA_BigInteger.o \\\n    ${OBJ_D}/NETCA_BitSet.o \\\n    ${OBJ_D}/NETCA_Error.o \\\n    ${OBJ_D}/NETCA_Stream.o \\\n\t${OBJ_D}/NETCA_Stream_Base64.o \\\n    ${OBJ_D}/NETCA_Stream_File.o \\\n    ${OBJ_D}/NETCA_Stream_Hex.o \\\n    ${OBJ_D}/NETCA_Stream_HMAC.o \\\n    ${OBJ_D}/NETCA_Stream_MD.o \\\n    ${OBJ_D}/NETCA_Stream_Mem.o \\\n    ${OBJ_D}/NETCA_Stream_Null.o \\\n    ${OBJ_D}/NETCA_Time.o \\\n    ${OBJ_D}/NETCA_UString.o \\\n    ${OBJ_D}/NETCA_Util.o \\\n\t${OBJ_D}/NETCA_JSON.o\n\t\n# æœ€ç»ˆtargetï¼Œmakeè§£æmakefileçš„æ—¶å€™ä¼šå°†ç¬¬ä¸€ä¸ªé‡åˆ°çš„targetä½œä¸ºæœ€ç»ˆtargetæ¥æ‰§è¡Œæœ¬æ¬¡æ“ä½œ\nall:${ARCH_D}/libnetca_util.2.5.1.a\n\n#ä¸‹é¢æ˜¯å¯¹èµ„æºæ–‡ä»¶çš„ç¼–è¯‘ï¼Œç”Ÿæˆ.oä¸­é—´æ–‡ä»¶        \n${OBJ_D}/string.o:unix/string.c\n\t${CC} ${CFLAG} -c unix/string.c -o ${OBJ_D}/string.o\n\n${OBJ_D}/time.o:unix/time.c\n\t${CC} ${CFLAG} -c unix/time.c -o ${OBJ_D}/time.o\n\n${OBJ_D}/lock.o:unix/lock.c\n\t${CC} -D_GNU_SOURCE ${CFLAG} -c unix/lock.c -o ${OBJ_D}/lock.o\n\n${OBJ_D}/NETCA_Alloc.o:NETCA_Alloc.c\n\t${CC} ${CFLAG} -c NETCA_Alloc.c -o ${OBJ_D}/NETCA_Alloc.o\n\n${OBJ_D}/NETCA_ArrayList.o:NETCA_ArrayList.c\n\t${CC} ${CFLAG} -c NETCA_ArrayList.c -o ${OBJ_D}/NETCA_ArrayList.o\n\t\n${OBJ_D}/NETCA_BigInteger.o:NETCA_BigInteger_Openssl.c\n\t${CC} ${CFLAG} -Wno-deprecated-declarations -c NETCA_BigInteger_Openssl.c -o ${OBJ_D}/NETCA_BigInteger.o\n\n${OBJ_D}/NETCA_BitSet.o:NETCA_BitSet.c\n\t${CC} ${CFLAG} -c NETCA_BitSet.c -o ${OBJ_D}/NETCA_BitSet.o\n\n${OBJ_D}/NETCA_Error.o:NETCA_Error.c\n\t${CC} ${CFLAG} -c NETCA_Error.c -o ${OBJ_D}/NETCA_Error.o\n\n${OBJ_D}/NETCA_Stream.o:NETCA_Stream.c\n\t${CC} ${CFLAG} -c NETCA_Stream.c -o ${OBJ_D}/NETCA_Stream.o\n\n${OBJ_D}/NETCA_Stream_Base64.o:NETCA_Stream_Base64.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Base64.c -o ${OBJ_D}/NETCA_Stream_Base64.o\n\n${OBJ_D}/NETCA_Stream_File.o:NETCA_Stream_File.c\n\t${CC} ${CFLAG} -c NETCA_Stream_File.c -o ${OBJ_D}/NETCA_Stream_File.o\n\n${OBJ_D}/NETCA_Stream_Hex.o:NETCA_Stream_Hex.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Hex.c -o ${OBJ_D}/NETCA_Stream_Hex.o\n\n${OBJ_D}/NETCA_Stream_HMAC.o:NETCA_Stream_HMAC.c\n\t${CC} ${CFLAG} -c NETCA_Stream_HMAC.c -o ${OBJ_D}/NETCA_Stream_HMAC.o\n\n${OBJ_D}/NETCA_Stream_MD.o:NETCA_Stream_MD.c\n\t${CC} ${CFLAG} -c NETCA_Stream_MD.c -o ${OBJ_D}/NETCA_Stream_MD.o\n\n${OBJ_D}/NETCA_Stream_Mem.o:NETCA_Stream_Mem.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Mem.c -o ${OBJ_D}/NETCA_Stream_Mem.o\n\n${OBJ_D}/NETCA_Stream_Null.o:NETCA_Stream_Null.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Null.c -o ${OBJ_D}/NETCA_Stream_Null.o\n\n${OBJ_D}/NETCA_Time.o:NETCA_Time.c\n\t${CC} ${CFLAG} -std=c99 -c NETCA_Time.c -o ${OBJ_D}/NETCA_Time.o\n\n${OBJ_D}/NETCA_UString.o:NETCA_UString.c NETCA_UString_Unicode_Data.c\n\t${CC} ${CFLAG} -c NETCA_UString.c -o ${OBJ_D}/NETCA_UString.o\n\n\n${OBJ_D}/NETCA_Util.o:NETCA_Util.c\n\t${CC} ${CFLAG} -c NETCA_Util.c -o ${OBJ_D}/NETCA_Util.o\n\n${OBJ_D}/NETCA_JSON.o:NETCA_JSON.c\n\t${CC} ${CFLAG} -c NETCA_JSON.c -o ${OBJ_D}/NETCA_JSON.o\n\n\n$(OBJ_D):\n\t${MKDIR} ${OBJ_D}\n\n$(OUT_D):\n\t${MKDIR} ${OUT_D}\n\n$(ARCH_D):\n\t${MKDIR} ${ARCH_D}\n\n# å¯¹åº”äºä¸Šé¢çš„allï¼Œä¾èµ–é¡¹æ˜¯${OUT_D} ${ARCH_D} ${OBJ_D}å¯¹åº”çš„æ–‡ä»¶å¤¹çš„åˆ›å»ºå’Œ${OBJECTS} å¯¹åº”çš„èµ„æºæ–‡ä»¶çš„ç¼–è¯‘\n${ARCH_D}/libnetca_util.2.5.1.a: ${OUT_D} ${ARCH_D} ${OBJ_D} ${OBJECTS} \n\tlibtool -static ${IOS_LINK_FLAG} -o ${ARCH_D}/libnetca_util.2.5.1.a ${OBJECTS} #æ­¤å¤„å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨Linuxçš„ ar å‘½ä»¤\n\t\n# Phony Target: realclean ä¾èµ–äºcleançš„æ‰§è¡Œï¼Œè°ƒç”¨make realcleanä¼šå…ˆè°ƒç”¨make cleanæ¸…é™¤ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸­é—´æ–‡ä»¶ï¼Œå†æ¸…é™¤ç›®æ ‡æ–‡ä»¶(ä¸ºäº†å¤šå¹³å°)\nrealclean: clean\n\t${RM} -rf ${OUT_D}\n\nclean:\n\t${RM} -rf ${OBJ_D}\n```\n\n### Shell\n\n```shell\nLIB_NAME=libnetca_util.2.5.1.a\nLIB_OS_NAME=libnetca_util.2.5.1_os.a\nLIB_SIMULATOR_NAME=libnetca_util.2.5.1_simulator.a\n\nOUT_D=out\nHEADER_D=${OUT_D}/include\n\nARCH_OS_LIST=(\"armv7\" \"armv7s\" \"arm64\")\n# å¾—åˆ°ARCH_OS_LISTçš„æ•°é‡\nARCH_OS_COUNT=${#ARCH_OS_LIST[@]}\n# ç»„åˆARCH_OS_LISTä¸­æ¯ä¸€ä¸ªå…ƒç´ å’ŒLIB_OS_NAMEï¼Œå¾—åˆ°æ•°ç»„(\"armv7/libnetca_util.2.5.1_os.a\",...)\nLIB_OS_PATHS=(${ARCH_OS_LIST[@]/%//${LIB_NAME}})\n\nARCH_SIM_LIST=(\"i386\" \"x86_64\")\nARCH_SIM_COUNT=${#ARCH_SIM_LIST[@]}\nLIB_SIM_PATHS=(${ARCH_SIM_LIST[@]/%//${LIB_NAME}})\n\n#Compile ä½¿ç”¨-fæŒ‡å®šmakefileï¼ŒPhony Target realcleanæ¸…é™¤æ‰€æœ‰ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶\nmake -f makefile.ios realclean\n\n#å®šä¹‰å‡½æ•°\narch_make() {\n\tmake -f makefile.ios clean\n\tmake -f makefile.ios ARCH=$1 DEVICE=$2\n}\n\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºOSçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i < ${ARCH_OS_COUNT}; i++))\ndo\n\tarch_make ${ARCH_OS_LIST[i]} \"OS\"\ndone\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºSIMULATORçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i < ${ARCH_SIM_COUNT}; i++))\ndo\n\tarch_make ${ARCH_SIM_LIST[i]} \"Simulator\"\ndone\n\n#HEADER FILE å¤´æ–‡ä»¶æå–å‡ºæ¥\nmkdir ${HEADER_D}\ncp NETCA_*.h ${HEADER_D}/\n\n#LIPO åˆæˆä¸º\"Fat Library\"\ncd ${OUT_D}\nlipo -create ${LIB_OS_PATHS[@]} -output ${LIB_OS_NAME}\nlipo -create ${LIB_SIM_PATHS[@]} -output ${LIB_SIMULATOR_NAME}\n\n\n```\n\n## æ€»ç»“\n\n1. æ„Ÿè§‰makefileè¿˜æ˜¯æœ‰å¿…è¦å­¦ä¼šï¼Œå› ä¸ºç¼–è¯‘å’Œé“¾æ¥å¯ä»¥ç”±è‡ªå·±æŒæ¡ã€‚\n2. æ­¤æ¬¡ç¼–å†™makefileçš„å·¥ä½œä¸æ˜¯å¾ˆéš¾ï¼Œå› ä¸ºè¿™åªæ˜¯è¦ç§»æ¤éƒ¨åˆ†é‡Œé¢æœ€ç®€å•æœ€å°çš„ä¸€ä¸ªåº“ã€‚\n3. makefileåœ¨iOSä¸Šçš„ä½¿ç”¨æ–¹é¢ï¼Œæœ€ä¸»è¦çš„å›°éš¾è¿˜æ˜¯å¦‚ä½•æŒ‡å®šSDKï¼Œæ¯•ç«Ÿç§»æ¤åˆ°iOSçš„æ—¶å€™ï¼ŒWinä¸Šæˆ–Linuxä¸Šçš„ä»£ç å¹¶ä¸æ˜¯éƒ½å¯ç”¨ï¼Œåƒè¿™æ¬¡å°±éœ€è¦ç”¨åˆ°iOSçš„SDKé‡ŒCoreFoundationçš„å†…å®¹å»æ›¿æ¢ä¸€äº›å·²æœ‰çš„å®ç°ã€‚\n\n\n\n","source":"_posts/ä½¿ç”¨MakeFileåˆ›å»ºé™æ€åº“.md","raw":"---\ntitle: ä½¿ç”¨makefileåˆ›å»ºé™æ€åº“\nthumbnail: http://7xs4ed.com1.z0.glb.clouddn.com/Dubai_paohui.jpg\ndate: 2017-08-08 22:17:57\nid: 42F1A99632F0B88D\ntags: \n- Library\n---\n\næœ€è¿‘å·¥ä½œä¸Šéœ€è¦å°†Winä¸Šçš„ä¸€ä¸ªCåº“ç§»æ¤åˆ°iOSä¸Šä»¥æ”¯æŒä¸šåŠ¡çš„å¼€å±•ï¼Œä¿®æ”¹ä»£ç åéœ€è¦ç¼–è¯‘æˆé™æ€åº“ä¾›iOSä½¿ç”¨ï¼Œä¸ºäº†ä½¿ç”¨Windowsæˆ–Linuxçš„åŒäº‹åœ¨ä¿®æ”¹å®Œä»£ç åä¹Ÿèƒ½ç¼–è¯‘å‡ºé™æ€åº“è€Œæ— éœ€å†æ¬åˆ°Macä¸Šæ“ä½œï¼Œå­¦ä¹ äº†ä¸€ä¸‹makefileã€‚    \n\n<!--more-->\n\nè¯´æ¥æƒ­æ„§ï¼Œè‡ªå·±çš„C/C++æ°´å¹³è¿˜æ²¡æœ‰åˆ°è¾¾å¾ˆé«˜çš„æ°´å¹³ï¼Œæœ€å¼€å§‹æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åˆ›å»º`Cocoa Touch Static Library`é¡¹ç›®ï¼Œç„¶åç›´æ¥å°†æ‰€éœ€è¦çš„ä»£ç æ–‡ä»¶æ— è„‘æ·»åŠ åˆ°é¡¹ç›®é‡Œé¢ï¼Œç¼–è¯‘ï¼Œåˆæˆã€‚    \n\nä½†æ˜¯ä¸ºäº†è®©å…¶ä»–åŒäº‹æ›´å¿«æ·åœ°å®Œæˆå·¥ä½œï¼Œå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨makefileæ¥ç¼–è¯‘é™æ€åº“ã€‚\n\næœ¬æ–‡åªæ˜¯çš®æ¯›ï¼Œä¸»è¦æ˜¯åœ¨æ­¤æ¬¡å·¥ä½œä¸­çš„ä¸€äº›å†ç¨‹ã€‚     \n\n## é™æ€åº“ç‰¹ç‚¹\n\n> - é™æ€åº“å¯¹å‡½æ•°åº“çš„é“¾æ¥æ˜¯æ”¾åœ¨ç¼–è¯‘æ—¶æœŸå®Œæˆçš„ã€‚\n> - ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸å‡½æ•°åº“å†æ— å…³ç³»ï¼Œç§»æ¤æ–¹ä¾¿ã€‚\n> - æµªè´¹ç©ºé—´å’Œèµ„æºï¼Œå› ä¸ºæ‰€æœ‰ç›¸å…³çš„ç›®æ ‡æ–‡ä»¶ä¸ç‰µæ¶‰åˆ°çš„å‡½æ•°åº“è¢«é“¾æ¥åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚\n> - æ›´æ–°å›°éš¾ã€‚å½“ç¨‹åºæ‰€ä¾èµ–çš„é™æ€åº“æœ‰ä»»ä½•æ›´æ–°ï¼Œæ•´ä¸ªç¨‹åºå°±è¦é‡æ–°é“¾æ¥ã€‚\n\nç•™ä¸‹ç–‘é—®ï¼šæ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šåªéœ€è¦å…¶ä»–åº“çš„å¤´æ–‡ä»¶ï¼Ÿ\n\n## makefile\n\nmakefileæœ¬èº«åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥è¾…åŠ©makeå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå‘Šè¯‰makeå‘½ä»¤æ€ä¹ˆå»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚    \n\né‚£ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™æ˜¯ï¼š\n\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰Cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªCæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚\n> - å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚\n\nGoogleå¯ä»¥æœç´¢åˆ°å¾ˆå¤šmakefileçš„å¥½æ–‡ç« ï¼Œè¿™é‡Œç®€ç•¥ä»‹ç»ä¸€ä¸‹ï¼š\n\n### åŸºæœ¬è¯­å¥\n\n```\ntarget : prerequisites\n\tcommand\n```\n\n- target : ç¼–è¯‘æˆ–é“¾æ¥æœ€ç»ˆå¾—åˆ°çš„ç›®æ ‡æ–‡ä»¶ï¼Œä¾‹å¦‚.oç»“å°¾çš„ä¸­é—´æ–‡ä»¶ã€ç”±.oæ–‡ä»¶é“¾æ¥è€Œæˆçš„Winä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ.oæ–‡ä»¶æ‰“åŒ…è€Œæˆçš„é™æ€åº“æ–‡ä»¶\n- prerequisites : ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æˆ.oçš„.cã€.cppã€.må’Œ.hï¼Œé“¾æ¥æˆåŠ¨æ€åº“ã€é™æ€åº“ã€å¯æ‰§è¡Œæ–‡ä»¶çš„.o\n- command : å‘½ä»¤ï¼Œå³å¦‚ä½•å°†ä¸Šè¿°çš„ä¾èµ–ç¼–è¯‘æˆ–é“¾æ¥æˆæˆ‘ä»¬è¦çš„targetï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcommandå‰å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ¶è¡¨ç¬¦(tab)ï¼Œä¸èƒ½æ˜¯ä¸€è¿ä¸²çš„ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½ç¼ºå¤±ã€‚\n\n\n\n\n\n#### Phony Target\n\nPHONY ç›®æ ‡å¹¶éå®é™…çš„æ–‡ä»¶åï¼šåªæ˜¯åœ¨æ˜¾å¼è¯·æ±‚æ—¶æ‰§è¡Œå‘½ä»¤çš„åå­—ã€‚    \n\nåƒå¹³å¸¸æˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œå®Œé“¾æ¥åéœ€è¦æ¸…æ¥šäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶æˆ–å…¶ä»–é…ç½®ç­‰ï¼Œéœ€è¦æ‰§è¡Œ`make clean`ï¼Œè¿™é‡Œçš„cleanå°±æ˜¯makefileä¸­è¢«å®šä¹‰çš„Phony Targetã€‚ä¸‹é¢ä¾‹å­ä¼šè¯´åˆ°ã€‚    \n\nä¸€ä¸ªmakefileåªèƒ½æœ‰ä¸€ä¸ªæ€»çš„Target(ç¼–è¯‘é“¾æ¥å¾—åˆ°æˆ‘ä»¬æœ€ç»ˆéœ€è¦çš„æ–‡ä»¶)ï¼Œå¦‚æœéœ€è¦å¤šä¸ªTargetï¼Œå¯ä»¥ä½¿ç”¨Phony Targetæ¥å®ç°ã€‚å½“ç„¶ï¼Œä¸Šè¿°è¯´åˆ°çš„é™¤ç¼–è¯‘é“¾æ¥ä¹‹å¤–çš„æ“ä½œç”¨Phony Targetä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚\n\n\n\n### å˜é‡\n\nåƒå†™ç¨‹åºä¸€æ ·ç›´æ¥å®šä¹‰å˜é‡ï¼Œå˜é‡åœ¨å·¦ä¾§ï¼Œå€¼åœ¨å³ä¾§ï¼Œç­‰å·åˆ†å¼€ï¼Œç„¶åé€šè¿‡`${å˜é‡}`ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š\n\n```\nDEVICE=OS\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\n```\n\n\n\n### æ–‡ä»¶ååŠä½¿ç”¨\n\nå½“ç„¶ï¼Œæ—¢ç„¶å«makefileï¼Œæ–‡ä»¶åæœ€å¥½å°±å«makefileå•¦ï¼ŒMakefileä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯åœ¨makefileä¸å­˜åœ¨çš„æ—¶å€™ï¼Œmakeå‘½ä»¤æ‰ä¼šå»ä½¿ç”¨ã€‚\n\nå¦‚æœå†ä¸å–œæ¬¢ï¼Œæ–‡ä»¶åå†™æˆ`chris`ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯makeçš„æ—¶å€™åŠ ä¸Š-få’Œæ–‡ä»¶åå°±å¥½äº†~\n\n`make -f chris`\n\n\n\n## æ —å­ğŸŒ°\n\nå¥½å•¦ï¼Œè¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å®é™…æ“ä½œå´éœ€è¦äº›è®¸è€å¿ƒ~\n\nä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªç®€å•çš„makefileï¼Œç”¨äºç¼–è¯‘èµ„æºæ–‡ä»¶å’Œæ‰“åŒ…æˆé™æ€åº“ï¼Œè¿˜æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œç»“åˆmakefileï¼Œæ‰“åŒ…armv7,armv7s,arm64,i386,x86_64è¿™äº”ä¸ªå¹³å°çš„é™æ€åº“ï¼Œå¹¶ä½¿ç”¨lipoåˆæˆä¸º\"Fat Library\"ã€‚\n\n### makefile\n\n```cmake\nOUT_D=out\nARCH_D=${OUT_D}/${ARCH}\nOBJ_D=tmp\n# DEVICE å’Œ ARCH æ˜¯å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œç”¨äºåŒºåˆ†æ˜¯OSè¿˜æ˜¯SIMULATORï¼Œå¹³å°æ˜¯å“ªç§\n# ç”±äºCä»£ç ä¸­ä½¿ç”¨åˆ°äº†CoreFoundationå’Œè·¨å¹³å°ç¼–è¯‘ä½¿ç”¨åˆ°__APPLE__ã€TARGET_OS_IPHONEç­‰å®ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥iOSçš„SDK\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\nSDK_PATH=${DEV_PATH}/SDKs/iPhone${DEVICE}10.3.sdk\n\nCPP=clang\nCC=clang\n\nINC_PATH_FLAG=-I. \n# iOSå¹³å°çš„ç¼–è¯‘é€‰é¡¹\nIOS_FLAG=-arch ${ARCH} -isysroot ${SDK_PATH} -miphoneos-version-min=8.0\nCFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\nCPPFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\n\nIOS_LINK_FLAG=-framework CoreFoundation \n\nRM=rm\nMKDIR=mkdir\n\n# OBJECTSå˜é‡ï¼Œåæ–‡ä¼šé€šè¿‡${OBJECTS}æ¥ä½¿ç”¨\nOBJECTS=${OBJ_D}/string.o \\\n\t${OBJ_D}/lock.o \\\n    ${OBJ_D}/time.o \\\n    ${OBJ_D}/NETCA_Alloc.o \\\n    ${OBJ_D}/NETCA_ArrayList.o \\\n    ${OBJ_D}/NETCA_BigInteger.o \\\n    ${OBJ_D}/NETCA_BitSet.o \\\n    ${OBJ_D}/NETCA_Error.o \\\n    ${OBJ_D}/NETCA_Stream.o \\\n\t${OBJ_D}/NETCA_Stream_Base64.o \\\n    ${OBJ_D}/NETCA_Stream_File.o \\\n    ${OBJ_D}/NETCA_Stream_Hex.o \\\n    ${OBJ_D}/NETCA_Stream_HMAC.o \\\n    ${OBJ_D}/NETCA_Stream_MD.o \\\n    ${OBJ_D}/NETCA_Stream_Mem.o \\\n    ${OBJ_D}/NETCA_Stream_Null.o \\\n    ${OBJ_D}/NETCA_Time.o \\\n    ${OBJ_D}/NETCA_UString.o \\\n    ${OBJ_D}/NETCA_Util.o \\\n\t${OBJ_D}/NETCA_JSON.o\n\t\n# æœ€ç»ˆtargetï¼Œmakeè§£æmakefileçš„æ—¶å€™ä¼šå°†ç¬¬ä¸€ä¸ªé‡åˆ°çš„targetä½œä¸ºæœ€ç»ˆtargetæ¥æ‰§è¡Œæœ¬æ¬¡æ“ä½œ\nall:${ARCH_D}/libnetca_util.2.5.1.a\n\n#ä¸‹é¢æ˜¯å¯¹èµ„æºæ–‡ä»¶çš„ç¼–è¯‘ï¼Œç”Ÿæˆ.oä¸­é—´æ–‡ä»¶        \n${OBJ_D}/string.o:unix/string.c\n\t${CC} ${CFLAG} -c unix/string.c -o ${OBJ_D}/string.o\n\n${OBJ_D}/time.o:unix/time.c\n\t${CC} ${CFLAG} -c unix/time.c -o ${OBJ_D}/time.o\n\n${OBJ_D}/lock.o:unix/lock.c\n\t${CC} -D_GNU_SOURCE ${CFLAG} -c unix/lock.c -o ${OBJ_D}/lock.o\n\n${OBJ_D}/NETCA_Alloc.o:NETCA_Alloc.c\n\t${CC} ${CFLAG} -c NETCA_Alloc.c -o ${OBJ_D}/NETCA_Alloc.o\n\n${OBJ_D}/NETCA_ArrayList.o:NETCA_ArrayList.c\n\t${CC} ${CFLAG} -c NETCA_ArrayList.c -o ${OBJ_D}/NETCA_ArrayList.o\n\t\n${OBJ_D}/NETCA_BigInteger.o:NETCA_BigInteger_Openssl.c\n\t${CC} ${CFLAG} -Wno-deprecated-declarations -c NETCA_BigInteger_Openssl.c -o ${OBJ_D}/NETCA_BigInteger.o\n\n${OBJ_D}/NETCA_BitSet.o:NETCA_BitSet.c\n\t${CC} ${CFLAG} -c NETCA_BitSet.c -o ${OBJ_D}/NETCA_BitSet.o\n\n${OBJ_D}/NETCA_Error.o:NETCA_Error.c\n\t${CC} ${CFLAG} -c NETCA_Error.c -o ${OBJ_D}/NETCA_Error.o\n\n${OBJ_D}/NETCA_Stream.o:NETCA_Stream.c\n\t${CC} ${CFLAG} -c NETCA_Stream.c -o ${OBJ_D}/NETCA_Stream.o\n\n${OBJ_D}/NETCA_Stream_Base64.o:NETCA_Stream_Base64.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Base64.c -o ${OBJ_D}/NETCA_Stream_Base64.o\n\n${OBJ_D}/NETCA_Stream_File.o:NETCA_Stream_File.c\n\t${CC} ${CFLAG} -c NETCA_Stream_File.c -o ${OBJ_D}/NETCA_Stream_File.o\n\n${OBJ_D}/NETCA_Stream_Hex.o:NETCA_Stream_Hex.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Hex.c -o ${OBJ_D}/NETCA_Stream_Hex.o\n\n${OBJ_D}/NETCA_Stream_HMAC.o:NETCA_Stream_HMAC.c\n\t${CC} ${CFLAG} -c NETCA_Stream_HMAC.c -o ${OBJ_D}/NETCA_Stream_HMAC.o\n\n${OBJ_D}/NETCA_Stream_MD.o:NETCA_Stream_MD.c\n\t${CC} ${CFLAG} -c NETCA_Stream_MD.c -o ${OBJ_D}/NETCA_Stream_MD.o\n\n${OBJ_D}/NETCA_Stream_Mem.o:NETCA_Stream_Mem.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Mem.c -o ${OBJ_D}/NETCA_Stream_Mem.o\n\n${OBJ_D}/NETCA_Stream_Null.o:NETCA_Stream_Null.c\n\t${CC} ${CFLAG} -c NETCA_Stream_Null.c -o ${OBJ_D}/NETCA_Stream_Null.o\n\n${OBJ_D}/NETCA_Time.o:NETCA_Time.c\n\t${CC} ${CFLAG} -std=c99 -c NETCA_Time.c -o ${OBJ_D}/NETCA_Time.o\n\n${OBJ_D}/NETCA_UString.o:NETCA_UString.c NETCA_UString_Unicode_Data.c\n\t${CC} ${CFLAG} -c NETCA_UString.c -o ${OBJ_D}/NETCA_UString.o\n\n\n${OBJ_D}/NETCA_Util.o:NETCA_Util.c\n\t${CC} ${CFLAG} -c NETCA_Util.c -o ${OBJ_D}/NETCA_Util.o\n\n${OBJ_D}/NETCA_JSON.o:NETCA_JSON.c\n\t${CC} ${CFLAG} -c NETCA_JSON.c -o ${OBJ_D}/NETCA_JSON.o\n\n\n$(OBJ_D):\n\t${MKDIR} ${OBJ_D}\n\n$(OUT_D):\n\t${MKDIR} ${OUT_D}\n\n$(ARCH_D):\n\t${MKDIR} ${ARCH_D}\n\n# å¯¹åº”äºä¸Šé¢çš„allï¼Œä¾èµ–é¡¹æ˜¯${OUT_D} ${ARCH_D} ${OBJ_D}å¯¹åº”çš„æ–‡ä»¶å¤¹çš„åˆ›å»ºå’Œ${OBJECTS} å¯¹åº”çš„èµ„æºæ–‡ä»¶çš„ç¼–è¯‘\n${ARCH_D}/libnetca_util.2.5.1.a: ${OUT_D} ${ARCH_D} ${OBJ_D} ${OBJECTS} \n\tlibtool -static ${IOS_LINK_FLAG} -o ${ARCH_D}/libnetca_util.2.5.1.a ${OBJECTS} #æ­¤å¤„å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨Linuxçš„ ar å‘½ä»¤\n\t\n# Phony Target: realclean ä¾èµ–äºcleançš„æ‰§è¡Œï¼Œè°ƒç”¨make realcleanä¼šå…ˆè°ƒç”¨make cleanæ¸…é™¤ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸­é—´æ–‡ä»¶ï¼Œå†æ¸…é™¤ç›®æ ‡æ–‡ä»¶(ä¸ºäº†å¤šå¹³å°)\nrealclean: clean\n\t${RM} -rf ${OUT_D}\n\nclean:\n\t${RM} -rf ${OBJ_D}\n```\n\n### Shell\n\n```shell\nLIB_NAME=libnetca_util.2.5.1.a\nLIB_OS_NAME=libnetca_util.2.5.1_os.a\nLIB_SIMULATOR_NAME=libnetca_util.2.5.1_simulator.a\n\nOUT_D=out\nHEADER_D=${OUT_D}/include\n\nARCH_OS_LIST=(\"armv7\" \"armv7s\" \"arm64\")\n# å¾—åˆ°ARCH_OS_LISTçš„æ•°é‡\nARCH_OS_COUNT=${#ARCH_OS_LIST[@]}\n# ç»„åˆARCH_OS_LISTä¸­æ¯ä¸€ä¸ªå…ƒç´ å’ŒLIB_OS_NAMEï¼Œå¾—åˆ°æ•°ç»„(\"armv7/libnetca_util.2.5.1_os.a\",...)\nLIB_OS_PATHS=(${ARCH_OS_LIST[@]/%//${LIB_NAME}})\n\nARCH_SIM_LIST=(\"i386\" \"x86_64\")\nARCH_SIM_COUNT=${#ARCH_SIM_LIST[@]}\nLIB_SIM_PATHS=(${ARCH_SIM_LIST[@]/%//${LIB_NAME}})\n\n#Compile ä½¿ç”¨-fæŒ‡å®šmakefileï¼ŒPhony Target realcleanæ¸…é™¤æ‰€æœ‰ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶\nmake -f makefile.ios realclean\n\n#å®šä¹‰å‡½æ•°\narch_make() {\n\tmake -f makefile.ios clean\n\tmake -f makefile.ios ARCH=$1 DEVICE=$2\n}\n\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºOSçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i < ${ARCH_OS_COUNT}; i++))\ndo\n\tarch_make ${ARCH_OS_LIST[i]} \"OS\"\ndone\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºSIMULATORçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i < ${ARCH_SIM_COUNT}; i++))\ndo\n\tarch_make ${ARCH_SIM_LIST[i]} \"Simulator\"\ndone\n\n#HEADER FILE å¤´æ–‡ä»¶æå–å‡ºæ¥\nmkdir ${HEADER_D}\ncp NETCA_*.h ${HEADER_D}/\n\n#LIPO åˆæˆä¸º\"Fat Library\"\ncd ${OUT_D}\nlipo -create ${LIB_OS_PATHS[@]} -output ${LIB_OS_NAME}\nlipo -create ${LIB_SIM_PATHS[@]} -output ${LIB_SIMULATOR_NAME}\n\n\n```\n\n## æ€»ç»“\n\n1. æ„Ÿè§‰makefileè¿˜æ˜¯æœ‰å¿…è¦å­¦ä¼šï¼Œå› ä¸ºç¼–è¯‘å’Œé“¾æ¥å¯ä»¥ç”±è‡ªå·±æŒæ¡ã€‚\n2. æ­¤æ¬¡ç¼–å†™makefileçš„å·¥ä½œä¸æ˜¯å¾ˆéš¾ï¼Œå› ä¸ºè¿™åªæ˜¯è¦ç§»æ¤éƒ¨åˆ†é‡Œé¢æœ€ç®€å•æœ€å°çš„ä¸€ä¸ªåº“ã€‚\n3. makefileåœ¨iOSä¸Šçš„ä½¿ç”¨æ–¹é¢ï¼Œæœ€ä¸»è¦çš„å›°éš¾è¿˜æ˜¯å¦‚ä½•æŒ‡å®šSDKï¼Œæ¯•ç«Ÿç§»æ¤åˆ°iOSçš„æ—¶å€™ï¼ŒWinä¸Šæˆ–Linuxä¸Šçš„ä»£ç å¹¶ä¸æ˜¯éƒ½å¯ç”¨ï¼Œåƒè¿™æ¬¡å°±éœ€è¦ç”¨åˆ°iOSçš„SDKé‡ŒCoreFoundationçš„å†…å®¹å»æ›¿æ¢ä¸€äº›å·²æœ‰çš„å®ç°ã€‚\n\n\n\n","slug":"ä½¿ç”¨MakeFileåˆ›å»ºé™æ€åº“","published":1,"updated":"2018-03-07T05:05:15.588Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12b20009cqy8e9oq7lsn","content":"<p>æœ€è¿‘å·¥ä½œä¸Šéœ€è¦å°†Winä¸Šçš„ä¸€ä¸ªCåº“ç§»æ¤åˆ°iOSä¸Šä»¥æ”¯æŒä¸šåŠ¡çš„å¼€å±•ï¼Œä¿®æ”¹ä»£ç åéœ€è¦ç¼–è¯‘æˆé™æ€åº“ä¾›iOSä½¿ç”¨ï¼Œä¸ºäº†ä½¿ç”¨Windowsæˆ–Linuxçš„åŒäº‹åœ¨ä¿®æ”¹å®Œä»£ç åä¹Ÿèƒ½ç¼–è¯‘å‡ºé™æ€åº“è€Œæ— éœ€å†æ¬åˆ°Macä¸Šæ“ä½œï¼Œå­¦ä¹ äº†ä¸€ä¸‹makefileã€‚    </p>\n<a id=\"more\"></a>\n<p>è¯´æ¥æƒ­æ„§ï¼Œè‡ªå·±çš„C/C++æ°´å¹³è¿˜æ²¡æœ‰åˆ°è¾¾å¾ˆé«˜çš„æ°´å¹³ï¼Œæœ€å¼€å§‹æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åˆ›å»º<code>Cocoa Touch Static Library</code>é¡¹ç›®ï¼Œç„¶åç›´æ¥å°†æ‰€éœ€è¦çš„ä»£ç æ–‡ä»¶æ— è„‘æ·»åŠ åˆ°é¡¹ç›®é‡Œé¢ï¼Œç¼–è¯‘ï¼Œåˆæˆã€‚    </p>\n<p>ä½†æ˜¯ä¸ºäº†è®©å…¶ä»–åŒäº‹æ›´å¿«æ·åœ°å®Œæˆå·¥ä½œï¼Œå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨makefileæ¥ç¼–è¯‘é™æ€åº“ã€‚</p>\n<p>æœ¬æ–‡åªæ˜¯çš®æ¯›ï¼Œä¸»è¦æ˜¯åœ¨æ­¤æ¬¡å·¥ä½œä¸­çš„ä¸€äº›å†ç¨‹ã€‚     </p>\n<h2 id=\"é™æ€åº“ç‰¹ç‚¹\"><a href=\"#é™æ€åº“ç‰¹ç‚¹\" class=\"headerlink\" title=\"é™æ€åº“ç‰¹ç‚¹\"></a>é™æ€åº“ç‰¹ç‚¹</h2><blockquote>\n<ul>\n<li>é™æ€åº“å¯¹å‡½æ•°åº“çš„é“¾æ¥æ˜¯æ”¾åœ¨ç¼–è¯‘æ—¶æœŸå®Œæˆçš„ã€‚</li>\n<li>ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸å‡½æ•°åº“å†æ— å…³ç³»ï¼Œç§»æ¤æ–¹ä¾¿ã€‚</li>\n<li>æµªè´¹ç©ºé—´å’Œèµ„æºï¼Œå› ä¸ºæ‰€æœ‰ç›¸å…³çš„ç›®æ ‡æ–‡ä»¶ä¸ç‰µæ¶‰åˆ°çš„å‡½æ•°åº“è¢«é“¾æ¥åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>\n<li>æ›´æ–°å›°éš¾ã€‚å½“ç¨‹åºæ‰€ä¾èµ–çš„é™æ€åº“æœ‰ä»»ä½•æ›´æ–°ï¼Œæ•´ä¸ªç¨‹åºå°±è¦é‡æ–°é“¾æ¥ã€‚</li>\n</ul>\n</blockquote>\n<p>ç•™ä¸‹ç–‘é—®ï¼šæ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šåªéœ€è¦å…¶ä»–åº“çš„å¤´æ–‡ä»¶ï¼Ÿ</p>\n<h2 id=\"makefile\"><a href=\"#makefile\" class=\"headerlink\" title=\"makefile\"></a>makefile</h2><p>makefileæœ¬èº«åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥è¾…åŠ©makeå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå‘Šè¯‰makeå‘½ä»¤æ€ä¹ˆå»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚    </p>\n<p>é‚£ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™æ˜¯ï¼š</p>\n<blockquote>\n<ul>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰Cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</li>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªCæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li>\n</ul>\n</blockquote>\n<p>Googleå¯ä»¥æœç´¢åˆ°å¾ˆå¤šmakefileçš„å¥½æ–‡ç« ï¼Œè¿™é‡Œç®€ç•¥ä»‹ç»ä¸€ä¸‹ï¼š</p>\n<h3 id=\"åŸºæœ¬è¯­å¥\"><a href=\"#åŸºæœ¬è¯­å¥\" class=\"headerlink\" title=\"åŸºæœ¬è¯­å¥\"></a>åŸºæœ¬è¯­å¥</h3><pre><code>target : prerequisites\n    command\n</code></pre><ul>\n<li>target : ç¼–è¯‘æˆ–é“¾æ¥æœ€ç»ˆå¾—åˆ°çš„ç›®æ ‡æ–‡ä»¶ï¼Œä¾‹å¦‚.oç»“å°¾çš„ä¸­é—´æ–‡ä»¶ã€ç”±.oæ–‡ä»¶é“¾æ¥è€Œæˆçš„Winä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ.oæ–‡ä»¶æ‰“åŒ…è€Œæˆçš„é™æ€åº“æ–‡ä»¶</li>\n<li>prerequisites : ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æˆ.oçš„.cã€.cppã€.må’Œ.hï¼Œé“¾æ¥æˆåŠ¨æ€åº“ã€é™æ€åº“ã€å¯æ‰§è¡Œæ–‡ä»¶çš„.o</li>\n<li>command : å‘½ä»¤ï¼Œå³å¦‚ä½•å°†ä¸Šè¿°çš„ä¾èµ–ç¼–è¯‘æˆ–é“¾æ¥æˆæˆ‘ä»¬è¦çš„targetï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcommandå‰å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ¶è¡¨ç¬¦(tab)ï¼Œä¸èƒ½æ˜¯ä¸€è¿ä¸²çš„ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½ç¼ºå¤±ã€‚</li>\n</ul>\n<h4 id=\"Phony-Target\"><a href=\"#Phony-Target\" class=\"headerlink\" title=\"Phony Target\"></a>Phony Target</h4><p>PHONY ç›®æ ‡å¹¶éå®é™…çš„æ–‡ä»¶åï¼šåªæ˜¯åœ¨æ˜¾å¼è¯·æ±‚æ—¶æ‰§è¡Œå‘½ä»¤çš„åå­—ã€‚    </p>\n<p>åƒå¹³å¸¸æˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œå®Œé“¾æ¥åéœ€è¦æ¸…æ¥šäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶æˆ–å…¶ä»–é…ç½®ç­‰ï¼Œéœ€è¦æ‰§è¡Œ<code>make clean</code>ï¼Œè¿™é‡Œçš„cleanå°±æ˜¯makefileä¸­è¢«å®šä¹‰çš„Phony Targetã€‚ä¸‹é¢ä¾‹å­ä¼šè¯´åˆ°ã€‚    </p>\n<p>ä¸€ä¸ªmakefileåªèƒ½æœ‰ä¸€ä¸ªæ€»çš„Target(ç¼–è¯‘é“¾æ¥å¾—åˆ°æˆ‘ä»¬æœ€ç»ˆéœ€è¦çš„æ–‡ä»¶)ï¼Œå¦‚æœéœ€è¦å¤šä¸ªTargetï¼Œå¯ä»¥ä½¿ç”¨Phony Targetæ¥å®ç°ã€‚å½“ç„¶ï¼Œä¸Šè¿°è¯´åˆ°çš„é™¤ç¼–è¯‘é“¾æ¥ä¹‹å¤–çš„æ“ä½œç”¨Phony Targetä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</p>\n<h3 id=\"å˜é‡\"><a href=\"#å˜é‡\" class=\"headerlink\" title=\"å˜é‡\"></a>å˜é‡</h3><p>åƒå†™ç¨‹åºä¸€æ ·ç›´æ¥å®šä¹‰å˜é‡ï¼Œå˜é‡åœ¨å·¦ä¾§ï¼Œå€¼åœ¨å³ä¾§ï¼Œç­‰å·åˆ†å¼€ï¼Œç„¶åé€šè¿‡<code>${å˜é‡}</code>ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>\n<pre><code>DEVICE=OS\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\n</code></pre><h3 id=\"æ–‡ä»¶ååŠä½¿ç”¨\"><a href=\"#æ–‡ä»¶ååŠä½¿ç”¨\" class=\"headerlink\" title=\"æ–‡ä»¶ååŠä½¿ç”¨\"></a>æ–‡ä»¶ååŠä½¿ç”¨</h3><p>å½“ç„¶ï¼Œæ—¢ç„¶å«makefileï¼Œæ–‡ä»¶åæœ€å¥½å°±å«makefileå•¦ï¼ŒMakefileä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯åœ¨makefileä¸å­˜åœ¨çš„æ—¶å€™ï¼Œmakeå‘½ä»¤æ‰ä¼šå»ä½¿ç”¨ã€‚</p>\n<p>å¦‚æœå†ä¸å–œæ¬¢ï¼Œæ–‡ä»¶åå†™æˆ<code>chris</code>ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯makeçš„æ—¶å€™åŠ ä¸Š-få’Œæ–‡ä»¶åå°±å¥½äº†~</p>\n<p><code>make -f chris</code></p>\n<h2 id=\"æ —å­ğŸŒ°\"><a href=\"#æ —å­ğŸŒ°\" class=\"headerlink\" title=\"æ —å­ğŸŒ°\"></a>æ —å­ğŸŒ°</h2><p>å¥½å•¦ï¼Œè¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å®é™…æ“ä½œå´éœ€è¦äº›è®¸è€å¿ƒ~</p>\n<p>ä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªç®€å•çš„makefileï¼Œç”¨äºç¼–è¯‘èµ„æºæ–‡ä»¶å’Œæ‰“åŒ…æˆé™æ€åº“ï¼Œè¿˜æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œç»“åˆmakefileï¼Œæ‰“åŒ…armv7,armv7s,arm64,i386,x86_64è¿™äº”ä¸ªå¹³å°çš„é™æ€åº“ï¼Œå¹¶ä½¿ç”¨lipoåˆæˆä¸ºâ€Fat Libraryâ€ã€‚</p>\n<h3 id=\"makefile-1\"><a href=\"#makefile-1\" class=\"headerlink\" title=\"makefile\"></a>makefile</h3><pre><code class=\"cmake\">OUT_D=out\nARCH_D=${OUT_D}/${ARCH}\nOBJ_D=tmp\n# DEVICE å’Œ ARCH æ˜¯å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œç”¨äºåŒºåˆ†æ˜¯OSè¿˜æ˜¯SIMULATORï¼Œå¹³å°æ˜¯å“ªç§\n# ç”±äºCä»£ç ä¸­ä½¿ç”¨åˆ°äº†CoreFoundationå’Œè·¨å¹³å°ç¼–è¯‘ä½¿ç”¨åˆ°__APPLE__ã€TARGET_OS_IPHONEç­‰å®ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥iOSçš„SDK\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\nSDK_PATH=${DEV_PATH}/SDKs/iPhone${DEVICE}10.3.sdk\n\nCPP=clang\nCC=clang\n\nINC_PATH_FLAG=-I. \n# iOSå¹³å°çš„ç¼–è¯‘é€‰é¡¹\nIOS_FLAG=-arch ${ARCH} -isysroot ${SDK_PATH} -miphoneos-version-min=8.0\nCFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\nCPPFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\n\nIOS_LINK_FLAG=-framework CoreFoundation \n\nRM=rm\nMKDIR=mkdir\n\n# OBJECTSå˜é‡ï¼Œåæ–‡ä¼šé€šè¿‡${OBJECTS}æ¥ä½¿ç”¨\nOBJECTS=${OBJ_D}/string.o \\\n    ${OBJ_D}/lock.o \\\n    ${OBJ_D}/time.o \\\n    ${OBJ_D}/NETCA_Alloc.o \\\n    ${OBJ_D}/NETCA_ArrayList.o \\\n    ${OBJ_D}/NETCA_BigInteger.o \\\n    ${OBJ_D}/NETCA_BitSet.o \\\n    ${OBJ_D}/NETCA_Error.o \\\n    ${OBJ_D}/NETCA_Stream.o \\\n    ${OBJ_D}/NETCA_Stream_Base64.o \\\n    ${OBJ_D}/NETCA_Stream_File.o \\\n    ${OBJ_D}/NETCA_Stream_Hex.o \\\n    ${OBJ_D}/NETCA_Stream_HMAC.o \\\n    ${OBJ_D}/NETCA_Stream_MD.o \\\n    ${OBJ_D}/NETCA_Stream_Mem.o \\\n    ${OBJ_D}/NETCA_Stream_Null.o \\\n    ${OBJ_D}/NETCA_Time.o \\\n    ${OBJ_D}/NETCA_UString.o \\\n    ${OBJ_D}/NETCA_Util.o \\\n    ${OBJ_D}/NETCA_JSON.o\n\n# æœ€ç»ˆtargetï¼Œmakeè§£æmakefileçš„æ—¶å€™ä¼šå°†ç¬¬ä¸€ä¸ªé‡åˆ°çš„targetä½œä¸ºæœ€ç»ˆtargetæ¥æ‰§è¡Œæœ¬æ¬¡æ“ä½œ\nall:${ARCH_D}/libnetca_util.2.5.1.a\n\n#ä¸‹é¢æ˜¯å¯¹èµ„æºæ–‡ä»¶çš„ç¼–è¯‘ï¼Œç”Ÿæˆ.oä¸­é—´æ–‡ä»¶        \n${OBJ_D}/string.o:unix/string.c\n    ${CC} ${CFLAG} -c unix/string.c -o ${OBJ_D}/string.o\n\n${OBJ_D}/time.o:unix/time.c\n    ${CC} ${CFLAG} -c unix/time.c -o ${OBJ_D}/time.o\n\n${OBJ_D}/lock.o:unix/lock.c\n    ${CC} -D_GNU_SOURCE ${CFLAG} -c unix/lock.c -o ${OBJ_D}/lock.o\n\n${OBJ_D}/NETCA_Alloc.o:NETCA_Alloc.c\n    ${CC} ${CFLAG} -c NETCA_Alloc.c -o ${OBJ_D}/NETCA_Alloc.o\n\n${OBJ_D}/NETCA_ArrayList.o:NETCA_ArrayList.c\n    ${CC} ${CFLAG} -c NETCA_ArrayList.c -o ${OBJ_D}/NETCA_ArrayList.o\n\n${OBJ_D}/NETCA_BigInteger.o:NETCA_BigInteger_Openssl.c\n    ${CC} ${CFLAG} -Wno-deprecated-declarations -c NETCA_BigInteger_Openssl.c -o ${OBJ_D}/NETCA_BigInteger.o\n\n${OBJ_D}/NETCA_BitSet.o:NETCA_BitSet.c\n    ${CC} ${CFLAG} -c NETCA_BitSet.c -o ${OBJ_D}/NETCA_BitSet.o\n\n${OBJ_D}/NETCA_Error.o:NETCA_Error.c\n    ${CC} ${CFLAG} -c NETCA_Error.c -o ${OBJ_D}/NETCA_Error.o\n\n${OBJ_D}/NETCA_Stream.o:NETCA_Stream.c\n    ${CC} ${CFLAG} -c NETCA_Stream.c -o ${OBJ_D}/NETCA_Stream.o\n\n${OBJ_D}/NETCA_Stream_Base64.o:NETCA_Stream_Base64.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Base64.c -o ${OBJ_D}/NETCA_Stream_Base64.o\n\n${OBJ_D}/NETCA_Stream_File.o:NETCA_Stream_File.c\n    ${CC} ${CFLAG} -c NETCA_Stream_File.c -o ${OBJ_D}/NETCA_Stream_File.o\n\n${OBJ_D}/NETCA_Stream_Hex.o:NETCA_Stream_Hex.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Hex.c -o ${OBJ_D}/NETCA_Stream_Hex.o\n\n${OBJ_D}/NETCA_Stream_HMAC.o:NETCA_Stream_HMAC.c\n    ${CC} ${CFLAG} -c NETCA_Stream_HMAC.c -o ${OBJ_D}/NETCA_Stream_HMAC.o\n\n${OBJ_D}/NETCA_Stream_MD.o:NETCA_Stream_MD.c\n    ${CC} ${CFLAG} -c NETCA_Stream_MD.c -o ${OBJ_D}/NETCA_Stream_MD.o\n\n${OBJ_D}/NETCA_Stream_Mem.o:NETCA_Stream_Mem.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Mem.c -o ${OBJ_D}/NETCA_Stream_Mem.o\n\n${OBJ_D}/NETCA_Stream_Null.o:NETCA_Stream_Null.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Null.c -o ${OBJ_D}/NETCA_Stream_Null.o\n\n${OBJ_D}/NETCA_Time.o:NETCA_Time.c\n    ${CC} ${CFLAG} -std=c99 -c NETCA_Time.c -o ${OBJ_D}/NETCA_Time.o\n\n${OBJ_D}/NETCA_UString.o:NETCA_UString.c NETCA_UString_Unicode_Data.c\n    ${CC} ${CFLAG} -c NETCA_UString.c -o ${OBJ_D}/NETCA_UString.o\n\n\n${OBJ_D}/NETCA_Util.o:NETCA_Util.c\n    ${CC} ${CFLAG} -c NETCA_Util.c -o ${OBJ_D}/NETCA_Util.o\n\n${OBJ_D}/NETCA_JSON.o:NETCA_JSON.c\n    ${CC} ${CFLAG} -c NETCA_JSON.c -o ${OBJ_D}/NETCA_JSON.o\n\n\n$(OBJ_D):\n    ${MKDIR} ${OBJ_D}\n\n$(OUT_D):\n    ${MKDIR} ${OUT_D}\n\n$(ARCH_D):\n    ${MKDIR} ${ARCH_D}\n\n# å¯¹åº”äºä¸Šé¢çš„allï¼Œä¾èµ–é¡¹æ˜¯${OUT_D} ${ARCH_D} ${OBJ_D}å¯¹åº”çš„æ–‡ä»¶å¤¹çš„åˆ›å»ºå’Œ${OBJECTS} å¯¹åº”çš„èµ„æºæ–‡ä»¶çš„ç¼–è¯‘\n${ARCH_D}/libnetca_util.2.5.1.a: ${OUT_D} ${ARCH_D} ${OBJ_D} ${OBJECTS} \n    libtool -static ${IOS_LINK_FLAG} -o ${ARCH_D}/libnetca_util.2.5.1.a ${OBJECTS} #æ­¤å¤„å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨Linuxçš„ ar å‘½ä»¤\n\n# Phony Target: realclean ä¾èµ–äºcleançš„æ‰§è¡Œï¼Œè°ƒç”¨make realcleanä¼šå…ˆè°ƒç”¨make cleanæ¸…é™¤ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸­é—´æ–‡ä»¶ï¼Œå†æ¸…é™¤ç›®æ ‡æ–‡ä»¶(ä¸ºäº†å¤šå¹³å°)\nrealclean: clean\n    ${RM} -rf ${OUT_D}\n\nclean:\n    ${RM} -rf ${OBJ_D}\n</code></pre>\n<h3 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h3><pre><code class=\"shell\">LIB_NAME=libnetca_util.2.5.1.a\nLIB_OS_NAME=libnetca_util.2.5.1_os.a\nLIB_SIMULATOR_NAME=libnetca_util.2.5.1_simulator.a\n\nOUT_D=out\nHEADER_D=${OUT_D}/include\n\nARCH_OS_LIST=(&quot;armv7&quot; &quot;armv7s&quot; &quot;arm64&quot;)\n# å¾—åˆ°ARCH_OS_LISTçš„æ•°é‡\nARCH_OS_COUNT=${#ARCH_OS_LIST[@]}\n# ç»„åˆARCH_OS_LISTä¸­æ¯ä¸€ä¸ªå…ƒç´ å’ŒLIB_OS_NAMEï¼Œå¾—åˆ°æ•°ç»„(&quot;armv7/libnetca_util.2.5.1_os.a&quot;,...)\nLIB_OS_PATHS=(${ARCH_OS_LIST[@]/%//${LIB_NAME}})\n\nARCH_SIM_LIST=(&quot;i386&quot; &quot;x86_64&quot;)\nARCH_SIM_COUNT=${#ARCH_SIM_LIST[@]}\nLIB_SIM_PATHS=(${ARCH_SIM_LIST[@]/%//${LIB_NAME}})\n\n#Compile ä½¿ç”¨-fæŒ‡å®šmakefileï¼ŒPhony Target realcleanæ¸…é™¤æ‰€æœ‰ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶\nmake -f makefile.ios realclean\n\n#å®šä¹‰å‡½æ•°\narch_make() {\n    make -f makefile.ios clean\n    make -f makefile.ios ARCH=$1 DEVICE=$2\n}\n\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºOSçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i &lt; ${ARCH_OS_COUNT}; i++))\ndo\n    arch_make ${ARCH_OS_LIST[i]} &quot;OS&quot;\ndone\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºSIMULATORçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i &lt; ${ARCH_SIM_COUNT}; i++))\ndo\n    arch_make ${ARCH_SIM_LIST[i]} &quot;Simulator&quot;\ndone\n\n#HEADER FILE å¤´æ–‡ä»¶æå–å‡ºæ¥\nmkdir ${HEADER_D}\ncp NETCA_*.h ${HEADER_D}/\n\n#LIPO åˆæˆä¸º&quot;Fat Library&quot;\ncd ${OUT_D}\nlipo -create ${LIB_OS_PATHS[@]} -output ${LIB_OS_NAME}\nlipo -create ${LIB_SIM_PATHS[@]} -output ${LIB_SIMULATOR_NAME}\n</code></pre>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ol>\n<li>æ„Ÿè§‰makefileè¿˜æ˜¯æœ‰å¿…è¦å­¦ä¼šï¼Œå› ä¸ºç¼–è¯‘å’Œé“¾æ¥å¯ä»¥ç”±è‡ªå·±æŒæ¡ã€‚</li>\n<li>æ­¤æ¬¡ç¼–å†™makefileçš„å·¥ä½œä¸æ˜¯å¾ˆéš¾ï¼Œå› ä¸ºè¿™åªæ˜¯è¦ç§»æ¤éƒ¨åˆ†é‡Œé¢æœ€ç®€å•æœ€å°çš„ä¸€ä¸ªåº“ã€‚</li>\n<li>makefileåœ¨iOSä¸Šçš„ä½¿ç”¨æ–¹é¢ï¼Œæœ€ä¸»è¦çš„å›°éš¾è¿˜æ˜¯å¦‚ä½•æŒ‡å®šSDKï¼Œæ¯•ç«Ÿç§»æ¤åˆ°iOSçš„æ—¶å€™ï¼ŒWinä¸Šæˆ–Linuxä¸Šçš„ä»£ç å¹¶ä¸æ˜¯éƒ½å¯ç”¨ï¼Œåƒè¿™æ¬¡å°±éœ€è¦ç”¨åˆ°iOSçš„SDKé‡ŒCoreFoundationçš„å†…å®¹å»æ›¿æ¢ä¸€äº›å·²æœ‰çš„å®ç°ã€‚</li>\n</ol>\n","excerpt":"<p>æœ€è¿‘å·¥ä½œä¸Šéœ€è¦å°†Winä¸Šçš„ä¸€ä¸ªCåº“ç§»æ¤åˆ°iOSä¸Šä»¥æ”¯æŒä¸šåŠ¡çš„å¼€å±•ï¼Œä¿®æ”¹ä»£ç åéœ€è¦ç¼–è¯‘æˆé™æ€åº“ä¾›iOSä½¿ç”¨ï¼Œä¸ºäº†ä½¿ç”¨Windowsæˆ–Linuxçš„åŒäº‹åœ¨ä¿®æ”¹å®Œä»£ç åä¹Ÿèƒ½ç¼–è¯‘å‡ºé™æ€åº“è€Œæ— éœ€å†æ¬åˆ°Macä¸Šæ“ä½œï¼Œå­¦ä¹ äº†ä¸€ä¸‹makefileã€‚    </p>","more":"<p>è¯´æ¥æƒ­æ„§ï¼Œè‡ªå·±çš„C/C++æ°´å¹³è¿˜æ²¡æœ‰åˆ°è¾¾å¾ˆé«˜çš„æ°´å¹³ï¼Œæœ€å¼€å§‹æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åˆ›å»º<code>Cocoa Touch Static Library</code>é¡¹ç›®ï¼Œç„¶åç›´æ¥å°†æ‰€éœ€è¦çš„ä»£ç æ–‡ä»¶æ— è„‘æ·»åŠ åˆ°é¡¹ç›®é‡Œé¢ï¼Œç¼–è¯‘ï¼Œåˆæˆã€‚    </p>\n<p>ä½†æ˜¯ä¸ºäº†è®©å…¶ä»–åŒäº‹æ›´å¿«æ·åœ°å®Œæˆå·¥ä½œï¼Œå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨makefileæ¥ç¼–è¯‘é™æ€åº“ã€‚</p>\n<p>æœ¬æ–‡åªæ˜¯çš®æ¯›ï¼Œä¸»è¦æ˜¯åœ¨æ­¤æ¬¡å·¥ä½œä¸­çš„ä¸€äº›å†ç¨‹ã€‚     </p>\n<h2 id=\"é™æ€åº“ç‰¹ç‚¹\"><a href=\"#é™æ€åº“ç‰¹ç‚¹\" class=\"headerlink\" title=\"é™æ€åº“ç‰¹ç‚¹\"></a>é™æ€åº“ç‰¹ç‚¹</h2><blockquote>\n<ul>\n<li>é™æ€åº“å¯¹å‡½æ•°åº“çš„é“¾æ¥æ˜¯æ”¾åœ¨ç¼–è¯‘æ—¶æœŸå®Œæˆçš„ã€‚</li>\n<li>ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸å‡½æ•°åº“å†æ— å…³ç³»ï¼Œç§»æ¤æ–¹ä¾¿ã€‚</li>\n<li>æµªè´¹ç©ºé—´å’Œèµ„æºï¼Œå› ä¸ºæ‰€æœ‰ç›¸å…³çš„ç›®æ ‡æ–‡ä»¶ä¸ç‰µæ¶‰åˆ°çš„å‡½æ•°åº“è¢«é“¾æ¥åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>\n<li>æ›´æ–°å›°éš¾ã€‚å½“ç¨‹åºæ‰€ä¾èµ–çš„é™æ€åº“æœ‰ä»»ä½•æ›´æ–°ï¼Œæ•´ä¸ªç¨‹åºå°±è¦é‡æ–°é“¾æ¥ã€‚</li>\n</ul>\n</blockquote>\n<p>ç•™ä¸‹ç–‘é—®ï¼šæ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šåªéœ€è¦å…¶ä»–åº“çš„å¤´æ–‡ä»¶ï¼Ÿ</p>\n<h2 id=\"makefile\"><a href=\"#makefile\" class=\"headerlink\" title=\"makefile\"></a>makefile</h2><p>makefileæœ¬èº«åªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥è¾…åŠ©makeå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå‘Šè¯‰makeå‘½ä»¤æ€ä¹ˆå»ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚    </p>\n<p>é‚£ç¼–è¯‘å’Œé“¾æ¥çš„è§„åˆ™æ˜¯ï¼š</p>\n<blockquote>\n<ul>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰Cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</li>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ªCæ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li>\n<li>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„Cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</li>\n</ul>\n</blockquote>\n<p>Googleå¯ä»¥æœç´¢åˆ°å¾ˆå¤šmakefileçš„å¥½æ–‡ç« ï¼Œè¿™é‡Œç®€ç•¥ä»‹ç»ä¸€ä¸‹ï¼š</p>\n<h3 id=\"åŸºæœ¬è¯­å¥\"><a href=\"#åŸºæœ¬è¯­å¥\" class=\"headerlink\" title=\"åŸºæœ¬è¯­å¥\"></a>åŸºæœ¬è¯­å¥</h3><pre><code>target : prerequisites\n    command\n</code></pre><ul>\n<li>target : ç¼–è¯‘æˆ–é“¾æ¥æœ€ç»ˆå¾—åˆ°çš„ç›®æ ‡æ–‡ä»¶ï¼Œä¾‹å¦‚.oç»“å°¾çš„ä¸­é—´æ–‡ä»¶ã€ç”±.oæ–‡ä»¶é“¾æ¥è€Œæˆçš„Winä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œ.oæ–‡ä»¶æ‰“åŒ…è€Œæˆçš„é™æ€åº“æ–‡ä»¶</li>\n<li>prerequisites : ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æˆ.oçš„.cã€.cppã€.må’Œ.hï¼Œé“¾æ¥æˆåŠ¨æ€åº“ã€é™æ€åº“ã€å¯æ‰§è¡Œæ–‡ä»¶çš„.o</li>\n<li>command : å‘½ä»¤ï¼Œå³å¦‚ä½•å°†ä¸Šè¿°çš„ä¾èµ–ç¼–è¯‘æˆ–é“¾æ¥æˆæˆ‘ä»¬è¦çš„targetï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcommandå‰å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ¶è¡¨ç¬¦(tab)ï¼Œä¸èƒ½æ˜¯ä¸€è¿ä¸²çš„ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½ç¼ºå¤±ã€‚</li>\n</ul>\n<h4 id=\"Phony-Target\"><a href=\"#Phony-Target\" class=\"headerlink\" title=\"Phony Target\"></a>Phony Target</h4><p>PHONY ç›®æ ‡å¹¶éå®é™…çš„æ–‡ä»¶åï¼šåªæ˜¯åœ¨æ˜¾å¼è¯·æ±‚æ—¶æ‰§è¡Œå‘½ä»¤çš„åå­—ã€‚    </p>\n<p>åƒå¹³å¸¸æˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œåœ¨æ‰§è¡Œå®Œé“¾æ¥åéœ€è¦æ¸…æ¥šäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶æˆ–å…¶ä»–é…ç½®ç­‰ï¼Œéœ€è¦æ‰§è¡Œ<code>make clean</code>ï¼Œè¿™é‡Œçš„cleanå°±æ˜¯makefileä¸­è¢«å®šä¹‰çš„Phony Targetã€‚ä¸‹é¢ä¾‹å­ä¼šè¯´åˆ°ã€‚    </p>\n<p>ä¸€ä¸ªmakefileåªèƒ½æœ‰ä¸€ä¸ªæ€»çš„Target(ç¼–è¯‘é“¾æ¥å¾—åˆ°æˆ‘ä»¬æœ€ç»ˆéœ€è¦çš„æ–‡ä»¶)ï¼Œå¦‚æœéœ€è¦å¤šä¸ªTargetï¼Œå¯ä»¥ä½¿ç”¨Phony Targetæ¥å®ç°ã€‚å½“ç„¶ï¼Œä¸Šè¿°è¯´åˆ°çš„é™¤ç¼–è¯‘é“¾æ¥ä¹‹å¤–çš„æ“ä½œç”¨Phony Targetä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</p>\n<h3 id=\"å˜é‡\"><a href=\"#å˜é‡\" class=\"headerlink\" title=\"å˜é‡\"></a>å˜é‡</h3><p>åƒå†™ç¨‹åºä¸€æ ·ç›´æ¥å®šä¹‰å˜é‡ï¼Œå˜é‡åœ¨å·¦ä¾§ï¼Œå€¼åœ¨å³ä¾§ï¼Œç­‰å·åˆ†å¼€ï¼Œç„¶åé€šè¿‡<code>${å˜é‡}</code>ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>\n<pre><code>DEVICE=OS\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\n</code></pre><h3 id=\"æ–‡ä»¶ååŠä½¿ç”¨\"><a href=\"#æ–‡ä»¶ååŠä½¿ç”¨\" class=\"headerlink\" title=\"æ–‡ä»¶ååŠä½¿ç”¨\"></a>æ–‡ä»¶ååŠä½¿ç”¨</h3><p>å½“ç„¶ï¼Œæ—¢ç„¶å«makefileï¼Œæ–‡ä»¶åæœ€å¥½å°±å«makefileå•¦ï¼ŒMakefileä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯åœ¨makefileä¸å­˜åœ¨çš„æ—¶å€™ï¼Œmakeå‘½ä»¤æ‰ä¼šå»ä½¿ç”¨ã€‚</p>\n<p>å¦‚æœå†ä¸å–œæ¬¢ï¼Œæ–‡ä»¶åå†™æˆ<code>chris</code>ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯makeçš„æ—¶å€™åŠ ä¸Š-få’Œæ–‡ä»¶åå°±å¥½äº†~</p>\n<p><code>make -f chris</code></p>\n<h2 id=\"æ —å­ğŸŒ°\"><a href=\"#æ —å­ğŸŒ°\" class=\"headerlink\" title=\"æ —å­ğŸŒ°\"></a>æ —å­ğŸŒ°</h2><p>å¥½å•¦ï¼Œè¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å®é™…æ“ä½œå´éœ€è¦äº›è®¸è€å¿ƒ~</p>\n<p>ä»¥ä¸‹æ˜¯æˆ‘å†™çš„ä¸€ä¸ªç®€å•çš„makefileï¼Œç”¨äºç¼–è¯‘èµ„æºæ–‡ä»¶å’Œæ‰“åŒ…æˆé™æ€åº“ï¼Œè¿˜æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œç»“åˆmakefileï¼Œæ‰“åŒ…armv7,armv7s,arm64,i386,x86_64è¿™äº”ä¸ªå¹³å°çš„é™æ€åº“ï¼Œå¹¶ä½¿ç”¨lipoåˆæˆä¸ºâ€Fat Libraryâ€ã€‚</p>\n<h3 id=\"makefile-1\"><a href=\"#makefile-1\" class=\"headerlink\" title=\"makefile\"></a>makefile</h3><pre><code class=\"cmake\">OUT_D=out\nARCH_D=${OUT_D}/${ARCH}\nOBJ_D=tmp\n# DEVICE å’Œ ARCH æ˜¯å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œç”¨äºåŒºåˆ†æ˜¯OSè¿˜æ˜¯SIMULATORï¼Œå¹³å°æ˜¯å“ªç§\n# ç”±äºCä»£ç ä¸­ä½¿ç”¨åˆ°äº†CoreFoundationå’Œè·¨å¹³å°ç¼–è¯‘ä½¿ç”¨åˆ°__APPLE__ã€TARGET_OS_IPHONEç­‰å®ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥iOSçš„SDK\nDEV_PATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhone${DEVICE}.platform/Developer\nSDK_PATH=${DEV_PATH}/SDKs/iPhone${DEVICE}10.3.sdk\n\nCPP=clang\nCC=clang\n\nINC_PATH_FLAG=-I. \n# iOSå¹³å°çš„ç¼–è¯‘é€‰é¡¹\nIOS_FLAG=-arch ${ARCH} -isysroot ${SDK_PATH} -miphoneos-version-min=8.0\nCFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\nCPPFLAG=-Wall -O2  ${INC_PATH_FLAG} ${IOS_FLAG}\n\nIOS_LINK_FLAG=-framework CoreFoundation \n\nRM=rm\nMKDIR=mkdir\n\n# OBJECTSå˜é‡ï¼Œåæ–‡ä¼šé€šè¿‡${OBJECTS}æ¥ä½¿ç”¨\nOBJECTS=${OBJ_D}/string.o \\\n    ${OBJ_D}/lock.o \\\n    ${OBJ_D}/time.o \\\n    ${OBJ_D}/NETCA_Alloc.o \\\n    ${OBJ_D}/NETCA_ArrayList.o \\\n    ${OBJ_D}/NETCA_BigInteger.o \\\n    ${OBJ_D}/NETCA_BitSet.o \\\n    ${OBJ_D}/NETCA_Error.o \\\n    ${OBJ_D}/NETCA_Stream.o \\\n    ${OBJ_D}/NETCA_Stream_Base64.o \\\n    ${OBJ_D}/NETCA_Stream_File.o \\\n    ${OBJ_D}/NETCA_Stream_Hex.o \\\n    ${OBJ_D}/NETCA_Stream_HMAC.o \\\n    ${OBJ_D}/NETCA_Stream_MD.o \\\n    ${OBJ_D}/NETCA_Stream_Mem.o \\\n    ${OBJ_D}/NETCA_Stream_Null.o \\\n    ${OBJ_D}/NETCA_Time.o \\\n    ${OBJ_D}/NETCA_UString.o \\\n    ${OBJ_D}/NETCA_Util.o \\\n    ${OBJ_D}/NETCA_JSON.o\n\n# æœ€ç»ˆtargetï¼Œmakeè§£æmakefileçš„æ—¶å€™ä¼šå°†ç¬¬ä¸€ä¸ªé‡åˆ°çš„targetä½œä¸ºæœ€ç»ˆtargetæ¥æ‰§è¡Œæœ¬æ¬¡æ“ä½œ\nall:${ARCH_D}/libnetca_util.2.5.1.a\n\n#ä¸‹é¢æ˜¯å¯¹èµ„æºæ–‡ä»¶çš„ç¼–è¯‘ï¼Œç”Ÿæˆ.oä¸­é—´æ–‡ä»¶        \n${OBJ_D}/string.o:unix/string.c\n    ${CC} ${CFLAG} -c unix/string.c -o ${OBJ_D}/string.o\n\n${OBJ_D}/time.o:unix/time.c\n    ${CC} ${CFLAG} -c unix/time.c -o ${OBJ_D}/time.o\n\n${OBJ_D}/lock.o:unix/lock.c\n    ${CC} -D_GNU_SOURCE ${CFLAG} -c unix/lock.c -o ${OBJ_D}/lock.o\n\n${OBJ_D}/NETCA_Alloc.o:NETCA_Alloc.c\n    ${CC} ${CFLAG} -c NETCA_Alloc.c -o ${OBJ_D}/NETCA_Alloc.o\n\n${OBJ_D}/NETCA_ArrayList.o:NETCA_ArrayList.c\n    ${CC} ${CFLAG} -c NETCA_ArrayList.c -o ${OBJ_D}/NETCA_ArrayList.o\n\n${OBJ_D}/NETCA_BigInteger.o:NETCA_BigInteger_Openssl.c\n    ${CC} ${CFLAG} -Wno-deprecated-declarations -c NETCA_BigInteger_Openssl.c -o ${OBJ_D}/NETCA_BigInteger.o\n\n${OBJ_D}/NETCA_BitSet.o:NETCA_BitSet.c\n    ${CC} ${CFLAG} -c NETCA_BitSet.c -o ${OBJ_D}/NETCA_BitSet.o\n\n${OBJ_D}/NETCA_Error.o:NETCA_Error.c\n    ${CC} ${CFLAG} -c NETCA_Error.c -o ${OBJ_D}/NETCA_Error.o\n\n${OBJ_D}/NETCA_Stream.o:NETCA_Stream.c\n    ${CC} ${CFLAG} -c NETCA_Stream.c -o ${OBJ_D}/NETCA_Stream.o\n\n${OBJ_D}/NETCA_Stream_Base64.o:NETCA_Stream_Base64.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Base64.c -o ${OBJ_D}/NETCA_Stream_Base64.o\n\n${OBJ_D}/NETCA_Stream_File.o:NETCA_Stream_File.c\n    ${CC} ${CFLAG} -c NETCA_Stream_File.c -o ${OBJ_D}/NETCA_Stream_File.o\n\n${OBJ_D}/NETCA_Stream_Hex.o:NETCA_Stream_Hex.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Hex.c -o ${OBJ_D}/NETCA_Stream_Hex.o\n\n${OBJ_D}/NETCA_Stream_HMAC.o:NETCA_Stream_HMAC.c\n    ${CC} ${CFLAG} -c NETCA_Stream_HMAC.c -o ${OBJ_D}/NETCA_Stream_HMAC.o\n\n${OBJ_D}/NETCA_Stream_MD.o:NETCA_Stream_MD.c\n    ${CC} ${CFLAG} -c NETCA_Stream_MD.c -o ${OBJ_D}/NETCA_Stream_MD.o\n\n${OBJ_D}/NETCA_Stream_Mem.o:NETCA_Stream_Mem.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Mem.c -o ${OBJ_D}/NETCA_Stream_Mem.o\n\n${OBJ_D}/NETCA_Stream_Null.o:NETCA_Stream_Null.c\n    ${CC} ${CFLAG} -c NETCA_Stream_Null.c -o ${OBJ_D}/NETCA_Stream_Null.o\n\n${OBJ_D}/NETCA_Time.o:NETCA_Time.c\n    ${CC} ${CFLAG} -std=c99 -c NETCA_Time.c -o ${OBJ_D}/NETCA_Time.o\n\n${OBJ_D}/NETCA_UString.o:NETCA_UString.c NETCA_UString_Unicode_Data.c\n    ${CC} ${CFLAG} -c NETCA_UString.c -o ${OBJ_D}/NETCA_UString.o\n\n\n${OBJ_D}/NETCA_Util.o:NETCA_Util.c\n    ${CC} ${CFLAG} -c NETCA_Util.c -o ${OBJ_D}/NETCA_Util.o\n\n${OBJ_D}/NETCA_JSON.o:NETCA_JSON.c\n    ${CC} ${CFLAG} -c NETCA_JSON.c -o ${OBJ_D}/NETCA_JSON.o\n\n\n$(OBJ_D):\n    ${MKDIR} ${OBJ_D}\n\n$(OUT_D):\n    ${MKDIR} ${OUT_D}\n\n$(ARCH_D):\n    ${MKDIR} ${ARCH_D}\n\n# å¯¹åº”äºä¸Šé¢çš„allï¼Œä¾èµ–é¡¹æ˜¯${OUT_D} ${ARCH_D} ${OBJ_D}å¯¹åº”çš„æ–‡ä»¶å¤¹çš„åˆ›å»ºå’Œ${OBJECTS} å¯¹åº”çš„èµ„æºæ–‡ä»¶çš„ç¼–è¯‘\n${ARCH_D}/libnetca_util.2.5.1.a: ${OUT_D} ${ARCH_D} ${OBJ_D} ${OBJECTS} \n    libtool -static ${IOS_LINK_FLAG} -o ${ARCH_D}/libnetca_util.2.5.1.a ${OBJECTS} #æ­¤å¤„å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨Linuxçš„ ar å‘½ä»¤\n\n# Phony Target: realclean ä¾èµ–äºcleançš„æ‰§è¡Œï¼Œè°ƒç”¨make realcleanä¼šå…ˆè°ƒç”¨make cleanæ¸…é™¤ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸­é—´æ–‡ä»¶ï¼Œå†æ¸…é™¤ç›®æ ‡æ–‡ä»¶(ä¸ºäº†å¤šå¹³å°)\nrealclean: clean\n    ${RM} -rf ${OUT_D}\n\nclean:\n    ${RM} -rf ${OBJ_D}\n</code></pre>\n<h3 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h3><pre><code class=\"shell\">LIB_NAME=libnetca_util.2.5.1.a\nLIB_OS_NAME=libnetca_util.2.5.1_os.a\nLIB_SIMULATOR_NAME=libnetca_util.2.5.1_simulator.a\n\nOUT_D=out\nHEADER_D=${OUT_D}/include\n\nARCH_OS_LIST=(&quot;armv7&quot; &quot;armv7s&quot; &quot;arm64&quot;)\n# å¾—åˆ°ARCH_OS_LISTçš„æ•°é‡\nARCH_OS_COUNT=${#ARCH_OS_LIST[@]}\n# ç»„åˆARCH_OS_LISTä¸­æ¯ä¸€ä¸ªå…ƒç´ å’ŒLIB_OS_NAMEï¼Œå¾—åˆ°æ•°ç»„(&quot;armv7/libnetca_util.2.5.1_os.a&quot;,...)\nLIB_OS_PATHS=(${ARCH_OS_LIST[@]/%//${LIB_NAME}})\n\nARCH_SIM_LIST=(&quot;i386&quot; &quot;x86_64&quot;)\nARCH_SIM_COUNT=${#ARCH_SIM_LIST[@]}\nLIB_SIM_PATHS=(${ARCH_SIM_LIST[@]/%//${LIB_NAME}})\n\n#Compile ä½¿ç”¨-fæŒ‡å®šmakefileï¼ŒPhony Target realcleanæ¸…é™¤æ‰€æœ‰ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶\nmake -f makefile.ios realclean\n\n#å®šä¹‰å‡½æ•°\narch_make() {\n    make -f makefile.ios clean\n    make -f makefile.ios ARCH=$1 DEVICE=$2\n}\n\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºOSçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i &lt; ${ARCH_OS_COUNT}; i++))\ndo\n    arch_make ${ARCH_OS_LIST[i]} &quot;OS&quot;\ndone\n#éå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸ºSIMULATORçš„æ¯ä¸ªæ¶æ„åˆ›å»º.aæ–‡ä»¶\nfor ((i=0; i &lt; ${ARCH_SIM_COUNT}; i++))\ndo\n    arch_make ${ARCH_SIM_LIST[i]} &quot;Simulator&quot;\ndone\n\n#HEADER FILE å¤´æ–‡ä»¶æå–å‡ºæ¥\nmkdir ${HEADER_D}\ncp NETCA_*.h ${HEADER_D}/\n\n#LIPO åˆæˆä¸º&quot;Fat Library&quot;\ncd ${OUT_D}\nlipo -create ${LIB_OS_PATHS[@]} -output ${LIB_OS_NAME}\nlipo -create ${LIB_SIM_PATHS[@]} -output ${LIB_SIMULATOR_NAME}\n</code></pre>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ol>\n<li>æ„Ÿè§‰makefileè¿˜æ˜¯æœ‰å¿…è¦å­¦ä¼šï¼Œå› ä¸ºç¼–è¯‘å’Œé“¾æ¥å¯ä»¥ç”±è‡ªå·±æŒæ¡ã€‚</li>\n<li>æ­¤æ¬¡ç¼–å†™makefileçš„å·¥ä½œä¸æ˜¯å¾ˆéš¾ï¼Œå› ä¸ºè¿™åªæ˜¯è¦ç§»æ¤éƒ¨åˆ†é‡Œé¢æœ€ç®€å•æœ€å°çš„ä¸€ä¸ªåº“ã€‚</li>\n<li>makefileåœ¨iOSä¸Šçš„ä½¿ç”¨æ–¹é¢ï¼Œæœ€ä¸»è¦çš„å›°éš¾è¿˜æ˜¯å¦‚ä½•æŒ‡å®šSDKï¼Œæ¯•ç«Ÿç§»æ¤åˆ°iOSçš„æ—¶å€™ï¼ŒWinä¸Šæˆ–Linuxä¸Šçš„ä»£ç å¹¶ä¸æ˜¯éƒ½å¯ç”¨ï¼Œåƒè¿™æ¬¡å°±éœ€è¦ç”¨åˆ°iOSçš„SDKé‡ŒCoreFoundationçš„å†…å®¹å»æ›¿æ¢ä¸€äº›å·²æœ‰çš„å®ç°ã€‚</li>\n</ol>"},{"title":"æˆ‘æœ‰çƒ¦æ¼ï¼Œä½ æœ‰ç­”æ¡ˆ","date":"2017-02-19T13:01:52.000Z","typora-copy-images-to":"ipic","_content":"\nè¢«å‹äººç§è‰ä¸œé‡åœ­å¾ï¼Œæ‹¾å–ç¢ç‰‡æ—¶é—´ï¼Œæ‹œè¯»äº†è¿™æœ¬ä¹¦ã€‚    \næ€ä¹ˆè¯´å‘¢ï¼Œã€Šè§£å¿§æ‚è´§åº—ã€‹é‚£ä¹ˆå¤šäººå®£æ‰¬è¿˜æ˜¯æœ‰å®ƒçš„é“ç†çš„ã€‚\n\n<!--more-->\n\n![jyzhd_bg](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/kk1if.png)\n\næ­£å¦‚è¯‘è€…æ‰€è¨€ï¼šä»–çš„ä½œå“å¹¶éåªæœ‰è°œå›¢ï¼Œåªæ˜¯å–å¼„è¯¡è®¡ã€‚ä¸€ä¸ªæ›´é‡è¦çš„å…ƒç´ ï¼Œå³ä»–è¿‡äººçš„è¯´æ•…äº‹èƒ½åŠ›ï¼Œä»¥åŠæœ‰æ¸©åº¦çš„æ–‡å­—ä¹¦å†™ã€‚\n\n> è¿™é‡Œä¸åªå–æ—¥å¸¸ç”Ÿæ´»ç”¨å“\n>\n> è¿˜æä¾›æ¶ˆçƒ¦è§£å¿§çš„è°˜è¯¢\n>\n> å›°æƒ‘ä¸å®‰çš„ä½ ï¼Œçº ç»“ä¸å®‰çš„ä½ \n>\n> æ¬¢è¿æ¥ä¿¡è®¨è®ºå¿ƒä¸­çš„é—®é¢˜\n\nå°è¯´ä»ä¸‰ä¸ªç›—çªƒçš„å°å·å¼€å§‹ï¼Œè®²è¿°ä»–ä»¬åœ¨ä¹æœˆåä¸‰æ—¥è¯¯å…¥è’åºŸçš„â€œæµªçŸ¢æ‚è´§åº—â€ï¼Œè¯¯æ‰“è¯¯æ’å¼€å§‹å¸®åŠ©ä¸‰åä¸‰å¹´å‰çš„è°˜è¯¢è€…è§£å†³é—®é¢˜ã€‚åˆ°æœ€åä»ç›—æ¥çš„çš®åŒ…ä¸­å‘ç°äº†è°˜è¯¢è€…å¯¹è‡ªå·±å¸®åŠ©çš„æ„Ÿè°¢ä¿¡ã€‚\n\nå°è¯´çš„äº”ç« è®²çš„æ˜¯äº”ä¸ªä¸åŒçš„æ•…äº‹ï¼Œä½†å´å½¼æ­¤æœ‰ç€è”ç³»ã€‚åœ¨â€œç…§é¡¾æ‚£ç—…ç”·å‹â€å’Œâ€œå®Œæˆä¸¤äººæ¢¦æƒ³â€ä¹‹é—´çŠ¹è±«çš„è¿åŠ¨å‘˜ï¼Œâ€œè¿½æ±‚éŸ³ä¹æ¢¦æƒ³â€å’Œâ€œç»§æ‰¿æ¸”æ¾å®¶ä¸šâ€ä¹‹é—´è¸Œèº‡çš„å¹´è½»äººï¼Œè¢«ç”·äººæŠ›å¼ƒè°˜è¯¢æ˜¯å¦ç”Ÿä¸‹å­©å­çš„å¥³äººï¼Œå–œæ¬¢æŠ«å¤´å››è€ƒè™‘æ˜¯å¦åº”è¯¥è·Ÿè´Ÿå€ºçš„çˆ¶æ¯è·‘è·¯çš„å°‘å¹´ï¼Œæƒ³èµšé’±æŠ¥ç­”äº²äººçš„é…’åº—å¥³éƒã€‚ä¸ç®¡æ˜¯åœ¨äººç‰©ä¹‹é—´è¿˜æ˜¯å¢ƒé‡çš„ä¸²è”ï¼Œç¯ç¯ç›¸æ‰£ï¼Œæå†™è®©äººåŠ¨å®¹ï¼Œå¹³æ·¡çš„è¯­è¨€ä¸­å†™çš„æ‰æ˜¯æœ€çœŸçš„æƒ…æ„Ÿã€‚çœ‹å®Œæ•´æœ¬å°è¯´ï¼Œèƒ½æ„Ÿå—åˆ°å…¶ä¸­çš„æ¸©æš–å’Œå¥‡å¦™ã€‚\n\nå°è¯´å›´ç»•â€œæµªçŸ¢æ‚è´§åº—â€å’Œâ€œä¸¸å…‰å›­â€ä¸¤ä¸ªç‰¹å®šçš„åœºæ‰€å±•å¼€ï¼Œåˆ°æ‚è´§åº—è°˜è¯¢çš„äººéƒ½è·Ÿå­¤å„¿é™¢ï¼Œå³ä¸¸å…‰å›­æœ‰ç€ä¸€ä¸ä¸€ç¼•çš„è”ç³»ã€‚å°è¯´çš„ä¸­é—´è®²åˆ°ä¸¸å…‰å›­æ—¶ï¼Œä½ å¹¶ä¸ä¼šçŸ¥é“è¿™ä¸¤å¤„åœ°æ–¹ä¼šæœ‰ä»€ä¹ˆè”ç³»ï¼Œä½†ä¸œé‡åœ¨æœ€åå‘Šè¯‰ä½ ï¼šä»–ä»¬çš„ä¸»äººæ›¾ç»æ˜¯ä¸€å¯¹æ‹äººï¼Œè™½ç„¶æœ€åæ²¡æœ‰ç§å¥”æˆåŠŸï¼Œä½†æ˜¯å½¼æ­¤æ·±çˆ±å¯¹æ–¹ï¼Œé»˜é»˜åœ¨ä»˜å‡ºã€‚\n\nå°è¯´ä»¥å€’å™çš„æ–¹å¼å¼€å§‹è®²è¿°ä¸œé‡åœ­å¾è„‘ä¸­å¤©é©¬è¡Œç©ºçš„æ•…äº‹ã€‚å‰ä¸€æ™šåœ¨æ‚è´§åº—æŠ•å…¥è°˜è¯¢çš„ä¿¡ä»¶ï¼Œç¬¬äºŒå¤©æ¸…æ™¨ä¼šåœ¨åº—åçš„ç‰›å¥¶ç®±é‡Œå¾—åˆ°çœŸè¯šçš„å›å¤ã€‚è€Œä¿¡ä»¶å´å¥‡å¦™åœ°åœ¨æ—¶ç©ºç©¿æ¢­ï¼Œä¸‰åä¸‰å¹´åçš„ä¹æœˆåä¸‰å·æ”¶åˆ°äº†ä¸‰åä¸‰å¹´å‰çš„ä¿¡ä»¶ï¼Œè€Œæ”¾åœ¨ç‰›å¥¶ç®±çš„å›ä¿¡ä¼šè¢«æŠ•é€’åˆ°ä¸‰åä¸‰å¹´å‰ã€‚ä¸‰åä¸‰å¹´åçš„æµªçŸ¢æ‚è´§åº—è·Ÿå¤–éƒ¨çš„æ—¶ç©ºæ˜¯é”™ä¹±çš„ï¼Œé‡Œé¢å‡ å¤©ï¼Œå¤–é¢å¯èƒ½åªè¿‡äº†å‡ ç§’ã€‚æ­£å› ä¸ºä¸€ç¬é—´çš„äº¤ä¼šï¼Œè·¨è¶Šä¸‰åå¹´æ—¶ç©ºï¼Œæ‰æ¼”å˜æˆä¸€ç”Ÿä¸€ä¸–çš„æ•‘èµã€‚\n\næ—¶ç©ºçš„è·³è½¬å’Œäººç‰©çš„å˜æ¢ï¼Œè®©ä½ ä¼šåŠªåŠ›åœ°å»å›å¿†æ•…äº‹çš„æƒ…èŠ‚å’Œäººç‰©è®¾å®šï¼ŒçœŸæ­£åœ°å»è¯»ä¹¦ï¼Œè€Œä¸æ˜¯ä¸€ç›®åƒè¡Œåœ°æµè§ˆã€‚ä¸œé‡èƒ½æŠ“ä½å¤§å¤šæ•°äººéƒ½æœ‰çƒ¦æ¼éƒ½æ¸´æœ›å¾—åˆ°å¸®åŠ©çš„å¿ƒç†ï¼Œå°†å„ç§äººç‰©çš„å¿ƒç†ç²¾å¦™åœ°è¡¨è¾¾ã€‚è€ŒæµªçŸ¢æ‚è´§åº—å¼€åœ¨æ— åå°é•‡çš„é™åƒ»çš„è¡—é“æ—ï¼Œæ—æ•²ä¾§å‡»åœ°æŒ‡å‡ºæœ‰çƒ¦æ¼çš„æƒ³å¯»æ±‚å¸®åŠ©çš„äººä¼šå°½é‡é¿å¼€åˆ«äººçš„çœ¼å…‰ï¼Œè¿™ä¸€ç‚¹ï¼Œä¹Ÿåœ¨å°è¯´ä¸­å¾—åˆ°æ­£é¢çš„è¯å®ã€‚\n\nåœ¨ç»ˆç¯‡è¿˜æ˜¯æ²¡æœ‰ç‚¹æ˜æ—¶ç©ºé”™ä¹±çš„åŸå› ï¼Œä½†æ˜¯è¿™å·²ç»ä¸é‡è¦äº†ã€‚\n\næœ€åä½ ä¼šå‘ç°ï¼šä½ çš„èµå¹ï¼Œä½ çš„æ„ŸåŠ¨ï¼Œéƒ½æ˜¯ä¸œé‡çš„æœ¬äº‹...\n\n\n\nä»¥ä¸Š\n\nå†™äºè¯»å®Œã€Šè§£å¿§æ‚è´§åº—ã€‹çš„13å°æ—¶åï¼Œå¹¿å·ï¼Œæ™´\n","source":"_posts/æˆ‘æœ‰çƒ¦æ¼ï¼Œä½ æœ‰ç­”æ¡ˆ.md","raw":"---\ntitle: æˆ‘æœ‰çƒ¦æ¼ï¼Œä½ æœ‰ç­”æ¡ˆ\ndate: 2017-02-19 21:01:52\ntags: \n- Mood\ntypora-copy-images-to: ipic\n---\n\nè¢«å‹äººç§è‰ä¸œé‡åœ­å¾ï¼Œæ‹¾å–ç¢ç‰‡æ—¶é—´ï¼Œæ‹œè¯»äº†è¿™æœ¬ä¹¦ã€‚    \næ€ä¹ˆè¯´å‘¢ï¼Œã€Šè§£å¿§æ‚è´§åº—ã€‹é‚£ä¹ˆå¤šäººå®£æ‰¬è¿˜æ˜¯æœ‰å®ƒçš„é“ç†çš„ã€‚\n\n<!--more-->\n\n![jyzhd_bg](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/kk1if.png)\n\næ­£å¦‚è¯‘è€…æ‰€è¨€ï¼šä»–çš„ä½œå“å¹¶éåªæœ‰è°œå›¢ï¼Œåªæ˜¯å–å¼„è¯¡è®¡ã€‚ä¸€ä¸ªæ›´é‡è¦çš„å…ƒç´ ï¼Œå³ä»–è¿‡äººçš„è¯´æ•…äº‹èƒ½åŠ›ï¼Œä»¥åŠæœ‰æ¸©åº¦çš„æ–‡å­—ä¹¦å†™ã€‚\n\n> è¿™é‡Œä¸åªå–æ—¥å¸¸ç”Ÿæ´»ç”¨å“\n>\n> è¿˜æä¾›æ¶ˆçƒ¦è§£å¿§çš„è°˜è¯¢\n>\n> å›°æƒ‘ä¸å®‰çš„ä½ ï¼Œçº ç»“ä¸å®‰çš„ä½ \n>\n> æ¬¢è¿æ¥ä¿¡è®¨è®ºå¿ƒä¸­çš„é—®é¢˜\n\nå°è¯´ä»ä¸‰ä¸ªç›—çªƒçš„å°å·å¼€å§‹ï¼Œè®²è¿°ä»–ä»¬åœ¨ä¹æœˆåä¸‰æ—¥è¯¯å…¥è’åºŸçš„â€œæµªçŸ¢æ‚è´§åº—â€ï¼Œè¯¯æ‰“è¯¯æ’å¼€å§‹å¸®åŠ©ä¸‰åä¸‰å¹´å‰çš„è°˜è¯¢è€…è§£å†³é—®é¢˜ã€‚åˆ°æœ€åä»ç›—æ¥çš„çš®åŒ…ä¸­å‘ç°äº†è°˜è¯¢è€…å¯¹è‡ªå·±å¸®åŠ©çš„æ„Ÿè°¢ä¿¡ã€‚\n\nå°è¯´çš„äº”ç« è®²çš„æ˜¯äº”ä¸ªä¸åŒçš„æ•…äº‹ï¼Œä½†å´å½¼æ­¤æœ‰ç€è”ç³»ã€‚åœ¨â€œç…§é¡¾æ‚£ç—…ç”·å‹â€å’Œâ€œå®Œæˆä¸¤äººæ¢¦æƒ³â€ä¹‹é—´çŠ¹è±«çš„è¿åŠ¨å‘˜ï¼Œâ€œè¿½æ±‚éŸ³ä¹æ¢¦æƒ³â€å’Œâ€œç»§æ‰¿æ¸”æ¾å®¶ä¸šâ€ä¹‹é—´è¸Œèº‡çš„å¹´è½»äººï¼Œè¢«ç”·äººæŠ›å¼ƒè°˜è¯¢æ˜¯å¦ç”Ÿä¸‹å­©å­çš„å¥³äººï¼Œå–œæ¬¢æŠ«å¤´å››è€ƒè™‘æ˜¯å¦åº”è¯¥è·Ÿè´Ÿå€ºçš„çˆ¶æ¯è·‘è·¯çš„å°‘å¹´ï¼Œæƒ³èµšé’±æŠ¥ç­”äº²äººçš„é…’åº—å¥³éƒã€‚ä¸ç®¡æ˜¯åœ¨äººç‰©ä¹‹é—´è¿˜æ˜¯å¢ƒé‡çš„ä¸²è”ï¼Œç¯ç¯ç›¸æ‰£ï¼Œæå†™è®©äººåŠ¨å®¹ï¼Œå¹³æ·¡çš„è¯­è¨€ä¸­å†™çš„æ‰æ˜¯æœ€çœŸçš„æƒ…æ„Ÿã€‚çœ‹å®Œæ•´æœ¬å°è¯´ï¼Œèƒ½æ„Ÿå—åˆ°å…¶ä¸­çš„æ¸©æš–å’Œå¥‡å¦™ã€‚\n\nå°è¯´å›´ç»•â€œæµªçŸ¢æ‚è´§åº—â€å’Œâ€œä¸¸å…‰å›­â€ä¸¤ä¸ªç‰¹å®šçš„åœºæ‰€å±•å¼€ï¼Œåˆ°æ‚è´§åº—è°˜è¯¢çš„äººéƒ½è·Ÿå­¤å„¿é™¢ï¼Œå³ä¸¸å…‰å›­æœ‰ç€ä¸€ä¸ä¸€ç¼•çš„è”ç³»ã€‚å°è¯´çš„ä¸­é—´è®²åˆ°ä¸¸å…‰å›­æ—¶ï¼Œä½ å¹¶ä¸ä¼šçŸ¥é“è¿™ä¸¤å¤„åœ°æ–¹ä¼šæœ‰ä»€ä¹ˆè”ç³»ï¼Œä½†ä¸œé‡åœ¨æœ€åå‘Šè¯‰ä½ ï¼šä»–ä»¬çš„ä¸»äººæ›¾ç»æ˜¯ä¸€å¯¹æ‹äººï¼Œè™½ç„¶æœ€åæ²¡æœ‰ç§å¥”æˆåŠŸï¼Œä½†æ˜¯å½¼æ­¤æ·±çˆ±å¯¹æ–¹ï¼Œé»˜é»˜åœ¨ä»˜å‡ºã€‚\n\nå°è¯´ä»¥å€’å™çš„æ–¹å¼å¼€å§‹è®²è¿°ä¸œé‡åœ­å¾è„‘ä¸­å¤©é©¬è¡Œç©ºçš„æ•…äº‹ã€‚å‰ä¸€æ™šåœ¨æ‚è´§åº—æŠ•å…¥è°˜è¯¢çš„ä¿¡ä»¶ï¼Œç¬¬äºŒå¤©æ¸…æ™¨ä¼šåœ¨åº—åçš„ç‰›å¥¶ç®±é‡Œå¾—åˆ°çœŸè¯šçš„å›å¤ã€‚è€Œä¿¡ä»¶å´å¥‡å¦™åœ°åœ¨æ—¶ç©ºç©¿æ¢­ï¼Œä¸‰åä¸‰å¹´åçš„ä¹æœˆåä¸‰å·æ”¶åˆ°äº†ä¸‰åä¸‰å¹´å‰çš„ä¿¡ä»¶ï¼Œè€Œæ”¾åœ¨ç‰›å¥¶ç®±çš„å›ä¿¡ä¼šè¢«æŠ•é€’åˆ°ä¸‰åä¸‰å¹´å‰ã€‚ä¸‰åä¸‰å¹´åçš„æµªçŸ¢æ‚è´§åº—è·Ÿå¤–éƒ¨çš„æ—¶ç©ºæ˜¯é”™ä¹±çš„ï¼Œé‡Œé¢å‡ å¤©ï¼Œå¤–é¢å¯èƒ½åªè¿‡äº†å‡ ç§’ã€‚æ­£å› ä¸ºä¸€ç¬é—´çš„äº¤ä¼šï¼Œè·¨è¶Šä¸‰åå¹´æ—¶ç©ºï¼Œæ‰æ¼”å˜æˆä¸€ç”Ÿä¸€ä¸–çš„æ•‘èµã€‚\n\næ—¶ç©ºçš„è·³è½¬å’Œäººç‰©çš„å˜æ¢ï¼Œè®©ä½ ä¼šåŠªåŠ›åœ°å»å›å¿†æ•…äº‹çš„æƒ…èŠ‚å’Œäººç‰©è®¾å®šï¼ŒçœŸæ­£åœ°å»è¯»ä¹¦ï¼Œè€Œä¸æ˜¯ä¸€ç›®åƒè¡Œåœ°æµè§ˆã€‚ä¸œé‡èƒ½æŠ“ä½å¤§å¤šæ•°äººéƒ½æœ‰çƒ¦æ¼éƒ½æ¸´æœ›å¾—åˆ°å¸®åŠ©çš„å¿ƒç†ï¼Œå°†å„ç§äººç‰©çš„å¿ƒç†ç²¾å¦™åœ°è¡¨è¾¾ã€‚è€ŒæµªçŸ¢æ‚è´§åº—å¼€åœ¨æ— åå°é•‡çš„é™åƒ»çš„è¡—é“æ—ï¼Œæ—æ•²ä¾§å‡»åœ°æŒ‡å‡ºæœ‰çƒ¦æ¼çš„æƒ³å¯»æ±‚å¸®åŠ©çš„äººä¼šå°½é‡é¿å¼€åˆ«äººçš„çœ¼å…‰ï¼Œè¿™ä¸€ç‚¹ï¼Œä¹Ÿåœ¨å°è¯´ä¸­å¾—åˆ°æ­£é¢çš„è¯å®ã€‚\n\nåœ¨ç»ˆç¯‡è¿˜æ˜¯æ²¡æœ‰ç‚¹æ˜æ—¶ç©ºé”™ä¹±çš„åŸå› ï¼Œä½†æ˜¯è¿™å·²ç»ä¸é‡è¦äº†ã€‚\n\næœ€åä½ ä¼šå‘ç°ï¼šä½ çš„èµå¹ï¼Œä½ çš„æ„ŸåŠ¨ï¼Œéƒ½æ˜¯ä¸œé‡çš„æœ¬äº‹...\n\n\n\nä»¥ä¸Š\n\nå†™äºè¯»å®Œã€Šè§£å¿§æ‚è´§åº—ã€‹çš„13å°æ—¶åï¼Œå¹¿å·ï¼Œæ™´\n","slug":"æˆ‘æœ‰çƒ¦æ¼ï¼Œä½ æœ‰ç­”æ¡ˆ","published":1,"updated":"2018-03-07T08:06:17.251Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12b6000acqy8svxuh4ib","content":"<p>è¢«å‹äººç§è‰ä¸œé‡åœ­å¾ï¼Œæ‹¾å–ç¢ç‰‡æ—¶é—´ï¼Œæ‹œè¯»äº†è¿™æœ¬ä¹¦ã€‚<br>æ€ä¹ˆè¯´å‘¢ï¼Œã€Šè§£å¿§æ‚è´§åº—ã€‹é‚£ä¹ˆå¤šäººå®£æ‰¬è¿˜æ˜¯æœ‰å®ƒçš„é“ç†çš„ã€‚</p>\n<a id=\"more\"></a>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/kk1if.png\" alt=\"jyzhd_bg\"></p>\n<p>æ­£å¦‚è¯‘è€…æ‰€è¨€ï¼šä»–çš„ä½œå“å¹¶éåªæœ‰è°œå›¢ï¼Œåªæ˜¯å–å¼„è¯¡è®¡ã€‚ä¸€ä¸ªæ›´é‡è¦çš„å…ƒç´ ï¼Œå³ä»–è¿‡äººçš„è¯´æ•…äº‹èƒ½åŠ›ï¼Œä»¥åŠæœ‰æ¸©åº¦çš„æ–‡å­—ä¹¦å†™ã€‚</p>\n<blockquote>\n<p>è¿™é‡Œä¸åªå–æ—¥å¸¸ç”Ÿæ´»ç”¨å“</p>\n<p>è¿˜æä¾›æ¶ˆçƒ¦è§£å¿§çš„è°˜è¯¢</p>\n<p>å›°æƒ‘ä¸å®‰çš„ä½ ï¼Œçº ç»“ä¸å®‰çš„ä½ </p>\n<p>æ¬¢è¿æ¥ä¿¡è®¨è®ºå¿ƒä¸­çš„é—®é¢˜</p>\n</blockquote>\n<p>å°è¯´ä»ä¸‰ä¸ªç›—çªƒçš„å°å·å¼€å§‹ï¼Œè®²è¿°ä»–ä»¬åœ¨ä¹æœˆåä¸‰æ—¥è¯¯å…¥è’åºŸçš„â€œæµªçŸ¢æ‚è´§åº—â€ï¼Œè¯¯æ‰“è¯¯æ’å¼€å§‹å¸®åŠ©ä¸‰åä¸‰å¹´å‰çš„è°˜è¯¢è€…è§£å†³é—®é¢˜ã€‚åˆ°æœ€åä»ç›—æ¥çš„çš®åŒ…ä¸­å‘ç°äº†è°˜è¯¢è€…å¯¹è‡ªå·±å¸®åŠ©çš„æ„Ÿè°¢ä¿¡ã€‚</p>\n<p>å°è¯´çš„äº”ç« è®²çš„æ˜¯äº”ä¸ªä¸åŒçš„æ•…äº‹ï¼Œä½†å´å½¼æ­¤æœ‰ç€è”ç³»ã€‚åœ¨â€œç…§é¡¾æ‚£ç—…ç”·å‹â€å’Œâ€œå®Œæˆä¸¤äººæ¢¦æƒ³â€ä¹‹é—´çŠ¹è±«çš„è¿åŠ¨å‘˜ï¼Œâ€œè¿½æ±‚éŸ³ä¹æ¢¦æƒ³â€å’Œâ€œç»§æ‰¿æ¸”æ¾å®¶ä¸šâ€ä¹‹é—´è¸Œèº‡çš„å¹´è½»äººï¼Œè¢«ç”·äººæŠ›å¼ƒè°˜è¯¢æ˜¯å¦ç”Ÿä¸‹å­©å­çš„å¥³äººï¼Œå–œæ¬¢æŠ«å¤´å››è€ƒè™‘æ˜¯å¦åº”è¯¥è·Ÿè´Ÿå€ºçš„çˆ¶æ¯è·‘è·¯çš„å°‘å¹´ï¼Œæƒ³èµšé’±æŠ¥ç­”äº²äººçš„é…’åº—å¥³éƒã€‚ä¸ç®¡æ˜¯åœ¨äººç‰©ä¹‹é—´è¿˜æ˜¯å¢ƒé‡çš„ä¸²è”ï¼Œç¯ç¯ç›¸æ‰£ï¼Œæå†™è®©äººåŠ¨å®¹ï¼Œå¹³æ·¡çš„è¯­è¨€ä¸­å†™çš„æ‰æ˜¯æœ€çœŸçš„æƒ…æ„Ÿã€‚çœ‹å®Œæ•´æœ¬å°è¯´ï¼Œèƒ½æ„Ÿå—åˆ°å…¶ä¸­çš„æ¸©æš–å’Œå¥‡å¦™ã€‚</p>\n<p>å°è¯´å›´ç»•â€œæµªçŸ¢æ‚è´§åº—â€å’Œâ€œä¸¸å…‰å›­â€ä¸¤ä¸ªç‰¹å®šçš„åœºæ‰€å±•å¼€ï¼Œåˆ°æ‚è´§åº—è°˜è¯¢çš„äººéƒ½è·Ÿå­¤å„¿é™¢ï¼Œå³ä¸¸å…‰å›­æœ‰ç€ä¸€ä¸ä¸€ç¼•çš„è”ç³»ã€‚å°è¯´çš„ä¸­é—´è®²åˆ°ä¸¸å…‰å›­æ—¶ï¼Œä½ å¹¶ä¸ä¼šçŸ¥é“è¿™ä¸¤å¤„åœ°æ–¹ä¼šæœ‰ä»€ä¹ˆè”ç³»ï¼Œä½†ä¸œé‡åœ¨æœ€åå‘Šè¯‰ä½ ï¼šä»–ä»¬çš„ä¸»äººæ›¾ç»æ˜¯ä¸€å¯¹æ‹äººï¼Œè™½ç„¶æœ€åæ²¡æœ‰ç§å¥”æˆåŠŸï¼Œä½†æ˜¯å½¼æ­¤æ·±çˆ±å¯¹æ–¹ï¼Œé»˜é»˜åœ¨ä»˜å‡ºã€‚</p>\n<p>å°è¯´ä»¥å€’å™çš„æ–¹å¼å¼€å§‹è®²è¿°ä¸œé‡åœ­å¾è„‘ä¸­å¤©é©¬è¡Œç©ºçš„æ•…äº‹ã€‚å‰ä¸€æ™šåœ¨æ‚è´§åº—æŠ•å…¥è°˜è¯¢çš„ä¿¡ä»¶ï¼Œç¬¬äºŒå¤©æ¸…æ™¨ä¼šåœ¨åº—åçš„ç‰›å¥¶ç®±é‡Œå¾—åˆ°çœŸè¯šçš„å›å¤ã€‚è€Œä¿¡ä»¶å´å¥‡å¦™åœ°åœ¨æ—¶ç©ºç©¿æ¢­ï¼Œä¸‰åä¸‰å¹´åçš„ä¹æœˆåä¸‰å·æ”¶åˆ°äº†ä¸‰åä¸‰å¹´å‰çš„ä¿¡ä»¶ï¼Œè€Œæ”¾åœ¨ç‰›å¥¶ç®±çš„å›ä¿¡ä¼šè¢«æŠ•é€’åˆ°ä¸‰åä¸‰å¹´å‰ã€‚ä¸‰åä¸‰å¹´åçš„æµªçŸ¢æ‚è´§åº—è·Ÿå¤–éƒ¨çš„æ—¶ç©ºæ˜¯é”™ä¹±çš„ï¼Œé‡Œé¢å‡ å¤©ï¼Œå¤–é¢å¯èƒ½åªè¿‡äº†å‡ ç§’ã€‚æ­£å› ä¸ºä¸€ç¬é—´çš„äº¤ä¼šï¼Œè·¨è¶Šä¸‰åå¹´æ—¶ç©ºï¼Œæ‰æ¼”å˜æˆä¸€ç”Ÿä¸€ä¸–çš„æ•‘èµã€‚</p>\n<p>æ—¶ç©ºçš„è·³è½¬å’Œäººç‰©çš„å˜æ¢ï¼Œè®©ä½ ä¼šåŠªåŠ›åœ°å»å›å¿†æ•…äº‹çš„æƒ…èŠ‚å’Œäººç‰©è®¾å®šï¼ŒçœŸæ­£åœ°å»è¯»ä¹¦ï¼Œè€Œä¸æ˜¯ä¸€ç›®åƒè¡Œåœ°æµè§ˆã€‚ä¸œé‡èƒ½æŠ“ä½å¤§å¤šæ•°äººéƒ½æœ‰çƒ¦æ¼éƒ½æ¸´æœ›å¾—åˆ°å¸®åŠ©çš„å¿ƒç†ï¼Œå°†å„ç§äººç‰©çš„å¿ƒç†ç²¾å¦™åœ°è¡¨è¾¾ã€‚è€ŒæµªçŸ¢æ‚è´§åº—å¼€åœ¨æ— åå°é•‡çš„é™åƒ»çš„è¡—é“æ—ï¼Œæ—æ•²ä¾§å‡»åœ°æŒ‡å‡ºæœ‰çƒ¦æ¼çš„æƒ³å¯»æ±‚å¸®åŠ©çš„äººä¼šå°½é‡é¿å¼€åˆ«äººçš„çœ¼å…‰ï¼Œè¿™ä¸€ç‚¹ï¼Œä¹Ÿåœ¨å°è¯´ä¸­å¾—åˆ°æ­£é¢çš„è¯å®ã€‚</p>\n<p>åœ¨ç»ˆç¯‡è¿˜æ˜¯æ²¡æœ‰ç‚¹æ˜æ—¶ç©ºé”™ä¹±çš„åŸå› ï¼Œä½†æ˜¯è¿™å·²ç»ä¸é‡è¦äº†ã€‚</p>\n<p>æœ€åä½ ä¼šå‘ç°ï¼šä½ çš„èµå¹ï¼Œä½ çš„æ„ŸåŠ¨ï¼Œéƒ½æ˜¯ä¸œé‡çš„æœ¬äº‹â€¦</p>\n<p>ä»¥ä¸Š</p>\n<p>å†™äºè¯»å®Œã€Šè§£å¿§æ‚è´§åº—ã€‹çš„13å°æ—¶åï¼Œå¹¿å·ï¼Œæ™´</p>\n","excerpt":"<p>è¢«å‹äººç§è‰ä¸œé‡åœ­å¾ï¼Œæ‹¾å–ç¢ç‰‡æ—¶é—´ï¼Œæ‹œè¯»äº†è¿™æœ¬ä¹¦ã€‚<br>æ€ä¹ˆè¯´å‘¢ï¼Œã€Šè§£å¿§æ‚è´§åº—ã€‹é‚£ä¹ˆå¤šäººå®£æ‰¬è¿˜æ˜¯æœ‰å®ƒçš„é“ç†çš„ã€‚</p>","more":"<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/kk1if.png\" alt=\"jyzhd_bg\"></p>\n<p>æ­£å¦‚è¯‘è€…æ‰€è¨€ï¼šä»–çš„ä½œå“å¹¶éåªæœ‰è°œå›¢ï¼Œåªæ˜¯å–å¼„è¯¡è®¡ã€‚ä¸€ä¸ªæ›´é‡è¦çš„å…ƒç´ ï¼Œå³ä»–è¿‡äººçš„è¯´æ•…äº‹èƒ½åŠ›ï¼Œä»¥åŠæœ‰æ¸©åº¦çš„æ–‡å­—ä¹¦å†™ã€‚</p>\n<blockquote>\n<p>è¿™é‡Œä¸åªå–æ—¥å¸¸ç”Ÿæ´»ç”¨å“</p>\n<p>è¿˜æä¾›æ¶ˆçƒ¦è§£å¿§çš„è°˜è¯¢</p>\n<p>å›°æƒ‘ä¸å®‰çš„ä½ ï¼Œçº ç»“ä¸å®‰çš„ä½ </p>\n<p>æ¬¢è¿æ¥ä¿¡è®¨è®ºå¿ƒä¸­çš„é—®é¢˜</p>\n</blockquote>\n<p>å°è¯´ä»ä¸‰ä¸ªç›—çªƒçš„å°å·å¼€å§‹ï¼Œè®²è¿°ä»–ä»¬åœ¨ä¹æœˆåä¸‰æ—¥è¯¯å…¥è’åºŸçš„â€œæµªçŸ¢æ‚è´§åº—â€ï¼Œè¯¯æ‰“è¯¯æ’å¼€å§‹å¸®åŠ©ä¸‰åä¸‰å¹´å‰çš„è°˜è¯¢è€…è§£å†³é—®é¢˜ã€‚åˆ°æœ€åä»ç›—æ¥çš„çš®åŒ…ä¸­å‘ç°äº†è°˜è¯¢è€…å¯¹è‡ªå·±å¸®åŠ©çš„æ„Ÿè°¢ä¿¡ã€‚</p>\n<p>å°è¯´çš„äº”ç« è®²çš„æ˜¯äº”ä¸ªä¸åŒçš„æ•…äº‹ï¼Œä½†å´å½¼æ­¤æœ‰ç€è”ç³»ã€‚åœ¨â€œç…§é¡¾æ‚£ç—…ç”·å‹â€å’Œâ€œå®Œæˆä¸¤äººæ¢¦æƒ³â€ä¹‹é—´çŠ¹è±«çš„è¿åŠ¨å‘˜ï¼Œâ€œè¿½æ±‚éŸ³ä¹æ¢¦æƒ³â€å’Œâ€œç»§æ‰¿æ¸”æ¾å®¶ä¸šâ€ä¹‹é—´è¸Œèº‡çš„å¹´è½»äººï¼Œè¢«ç”·äººæŠ›å¼ƒè°˜è¯¢æ˜¯å¦ç”Ÿä¸‹å­©å­çš„å¥³äººï¼Œå–œæ¬¢æŠ«å¤´å››è€ƒè™‘æ˜¯å¦åº”è¯¥è·Ÿè´Ÿå€ºçš„çˆ¶æ¯è·‘è·¯çš„å°‘å¹´ï¼Œæƒ³èµšé’±æŠ¥ç­”äº²äººçš„é…’åº—å¥³éƒã€‚ä¸ç®¡æ˜¯åœ¨äººç‰©ä¹‹é—´è¿˜æ˜¯å¢ƒé‡çš„ä¸²è”ï¼Œç¯ç¯ç›¸æ‰£ï¼Œæå†™è®©äººåŠ¨å®¹ï¼Œå¹³æ·¡çš„è¯­è¨€ä¸­å†™çš„æ‰æ˜¯æœ€çœŸçš„æƒ…æ„Ÿã€‚çœ‹å®Œæ•´æœ¬å°è¯´ï¼Œèƒ½æ„Ÿå—åˆ°å…¶ä¸­çš„æ¸©æš–å’Œå¥‡å¦™ã€‚</p>\n<p>å°è¯´å›´ç»•â€œæµªçŸ¢æ‚è´§åº—â€å’Œâ€œä¸¸å…‰å›­â€ä¸¤ä¸ªç‰¹å®šçš„åœºæ‰€å±•å¼€ï¼Œåˆ°æ‚è´§åº—è°˜è¯¢çš„äººéƒ½è·Ÿå­¤å„¿é™¢ï¼Œå³ä¸¸å…‰å›­æœ‰ç€ä¸€ä¸ä¸€ç¼•çš„è”ç³»ã€‚å°è¯´çš„ä¸­é—´è®²åˆ°ä¸¸å…‰å›­æ—¶ï¼Œä½ å¹¶ä¸ä¼šçŸ¥é“è¿™ä¸¤å¤„åœ°æ–¹ä¼šæœ‰ä»€ä¹ˆè”ç³»ï¼Œä½†ä¸œé‡åœ¨æœ€åå‘Šè¯‰ä½ ï¼šä»–ä»¬çš„ä¸»äººæ›¾ç»æ˜¯ä¸€å¯¹æ‹äººï¼Œè™½ç„¶æœ€åæ²¡æœ‰ç§å¥”æˆåŠŸï¼Œä½†æ˜¯å½¼æ­¤æ·±çˆ±å¯¹æ–¹ï¼Œé»˜é»˜åœ¨ä»˜å‡ºã€‚</p>\n<p>å°è¯´ä»¥å€’å™çš„æ–¹å¼å¼€å§‹è®²è¿°ä¸œé‡åœ­å¾è„‘ä¸­å¤©é©¬è¡Œç©ºçš„æ•…äº‹ã€‚å‰ä¸€æ™šåœ¨æ‚è´§åº—æŠ•å…¥è°˜è¯¢çš„ä¿¡ä»¶ï¼Œç¬¬äºŒå¤©æ¸…æ™¨ä¼šåœ¨åº—åçš„ç‰›å¥¶ç®±é‡Œå¾—åˆ°çœŸè¯šçš„å›å¤ã€‚è€Œä¿¡ä»¶å´å¥‡å¦™åœ°åœ¨æ—¶ç©ºç©¿æ¢­ï¼Œä¸‰åä¸‰å¹´åçš„ä¹æœˆåä¸‰å·æ”¶åˆ°äº†ä¸‰åä¸‰å¹´å‰çš„ä¿¡ä»¶ï¼Œè€Œæ”¾åœ¨ç‰›å¥¶ç®±çš„å›ä¿¡ä¼šè¢«æŠ•é€’åˆ°ä¸‰åä¸‰å¹´å‰ã€‚ä¸‰åä¸‰å¹´åçš„æµªçŸ¢æ‚è´§åº—è·Ÿå¤–éƒ¨çš„æ—¶ç©ºæ˜¯é”™ä¹±çš„ï¼Œé‡Œé¢å‡ å¤©ï¼Œå¤–é¢å¯èƒ½åªè¿‡äº†å‡ ç§’ã€‚æ­£å› ä¸ºä¸€ç¬é—´çš„äº¤ä¼šï¼Œè·¨è¶Šä¸‰åå¹´æ—¶ç©ºï¼Œæ‰æ¼”å˜æˆä¸€ç”Ÿä¸€ä¸–çš„æ•‘èµã€‚</p>\n<p>æ—¶ç©ºçš„è·³è½¬å’Œäººç‰©çš„å˜æ¢ï¼Œè®©ä½ ä¼šåŠªåŠ›åœ°å»å›å¿†æ•…äº‹çš„æƒ…èŠ‚å’Œäººç‰©è®¾å®šï¼ŒçœŸæ­£åœ°å»è¯»ä¹¦ï¼Œè€Œä¸æ˜¯ä¸€ç›®åƒè¡Œåœ°æµè§ˆã€‚ä¸œé‡èƒ½æŠ“ä½å¤§å¤šæ•°äººéƒ½æœ‰çƒ¦æ¼éƒ½æ¸´æœ›å¾—åˆ°å¸®åŠ©çš„å¿ƒç†ï¼Œå°†å„ç§äººç‰©çš„å¿ƒç†ç²¾å¦™åœ°è¡¨è¾¾ã€‚è€ŒæµªçŸ¢æ‚è´§åº—å¼€åœ¨æ— åå°é•‡çš„é™åƒ»çš„è¡—é“æ—ï¼Œæ—æ•²ä¾§å‡»åœ°æŒ‡å‡ºæœ‰çƒ¦æ¼çš„æƒ³å¯»æ±‚å¸®åŠ©çš„äººä¼šå°½é‡é¿å¼€åˆ«äººçš„çœ¼å…‰ï¼Œè¿™ä¸€ç‚¹ï¼Œä¹Ÿåœ¨å°è¯´ä¸­å¾—åˆ°æ­£é¢çš„è¯å®ã€‚</p>\n<p>åœ¨ç»ˆç¯‡è¿˜æ˜¯æ²¡æœ‰ç‚¹æ˜æ—¶ç©ºé”™ä¹±çš„åŸå› ï¼Œä½†æ˜¯è¿™å·²ç»ä¸é‡è¦äº†ã€‚</p>\n<p>æœ€åä½ ä¼šå‘ç°ï¼šä½ çš„èµå¹ï¼Œä½ çš„æ„ŸåŠ¨ï¼Œéƒ½æ˜¯ä¸œé‡çš„æœ¬äº‹â€¦</p>\n<p>ä»¥ä¸Š</p>\n<p>å†™äºè¯»å®Œã€Šè§£å¿§æ‚è´§åº—ã€‹çš„13å°æ—¶åï¼Œå¹¿å·ï¼Œæ™´</p>"},{"title":"å¯¹çº¿ç¨‹çš„ç®€å•ç†è§£","date":"2017-03-14T08:57:48.000Z","_content":"\nåœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéšç€ä¸€ä¸ªç¨‹åºè¢«æ‰“å¼€ï¼Œæ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨å’Œè°ƒåº¦çš„å¼€å§‹ã€‚å¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´ï¼Œç›¸å¯¹äºè¿›ç¨‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ç²’åº¦æ›´å°çš„çº¿ç¨‹ï¼Œå®ƒæ˜¯æˆ‘ä»¬éƒ½éœ€è¦ä¸ä¹‹æ‰“äº¤é“çš„ç”¨æ¥å®ç°å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„åˆ©å™¨ã€‚\n\n<!--more-->\n\n## ä»€ä¹ˆæ˜¯çº¿ç¨‹\n\nè€ç”Ÿå¸¸è°ˆï¼Œä½†è¿˜æ˜¯å…ˆè¯´ä¸€ä¸‹æ¦‚å¿µï¼š\n\n> *çº¿ç¨‹*ï¼Œåˆç§°è½»é‡çº§è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆç»„æˆã€‚é€šå¸¸æ„ä¹‰ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªåˆ°å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€å †ç­‰ï¼‰åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºã€‚  \n\næœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š\n\n1. çº¿ç¨‹æœ‰ç§æœ‰çš„æ•°æ®å•å…ƒï¼šä»…ä»…å¯ä»¥è®©å½“å‰çº¿ç¨‹è®¿é—®çš„å¯„å­˜å™¨å’Œæ ˆ\n2. å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ•°æ®æ®µæˆ–åŒæ—¶æ‰§è¡Œä¸€å—ä»£ç ï¼Œå°±ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å‡ºç°ã€‚\n\n\næ•°æ®æ˜¯å¦ç§æœ‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º\n\n|     çº¿ç¨‹ç§æœ‰     |              çº¿ç¨‹é—´å…±äº«              |\n| :----------: | :-----------------------------: |\n| å±€éƒ¨å˜é‡<br>å‡½æ•°å‚æ•° | å…¨å±€å˜é‡<br>å †ä¸Šçš„æ•°æ®<br>å‡½æ•°å†…çš„é™æ€å˜é‡<br>ä»£ç  |\n\n\n## çº¿ç¨‹è°ƒåº¦\n\nå¦‚æœçº¿ç¨‹æ•°é‡å°äºç­‰äºå¤„ç†å™¨æ•°é‡æ—¶ï¼Œçº¿ç¨‹æ˜¯çœŸæ­£æ„ä¹‰çš„å¹¶å‘ï¼Œä¸åŒçš„çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚è¿™å¾ˆç†æƒ³ã€‚\n\nä½†æ›´ç»å¸¸åœ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾ï¼š\n\n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\nä¸Šå›¾ä¸­å¹¶å‘çš„æƒ…å†µæ˜¯é’ˆå¯¹çº¿ç¨‹æ•°é‡å¤§äºå¤„ç†å™¨æ•°é‡ï¼ˆå¤šCPUæˆ–å¤šæ ¸æ—¶ä»£ï¼Œå¤„ç†å™¨æ•°é‡ä¸æ­¢ä¸€ä¸ªï¼‰çš„æƒ…å†µã€‚å­¦è¿‡è®¡ç®—æœºåŸç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿™ç§â€œå¹¶å‘â€æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‡ºæ¥çš„çŠ¶æ€ï¼Œå¿«é€Ÿçš„æ—¶é—´ç‰‡åˆ‡æ¢è®©ç”¨æˆ·è§‰å¾—åƒæ˜¯åŒæ—¶åœ¨æ‰§è¡Œã€‚è¿™ç§æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œç§°ä¸º*çº¿ç¨‹è°ƒåº¦*ã€‚\n\nåœ¨çº¿ç¨‹è°ƒåº¦ä¸­ï¼Œçº¿ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š\n\n- è¿è¡Œï¼šæ‹¥æœ‰æ—¶é—´ç‰‡ï¼Œå¯ä»¥æ‰§è¡Œä»£ç \n- å°±ç»ªï¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œéšæ—¶å¯ä»¥è¢«æ‰§è¡Œ\n- ç­‰å¾…ï¼šç­‰å¾…IOæˆ–è€…å› ä¸ºå…¶ä»–åŸå› è¢«é˜»å¡ï¼Œç­‰å¾…ç»“æŸåè¿›å…¥å°±ç»ªçŠ¶æ€\n\nä¸‰è€…çš„çŠ¶æ€åˆ‡æ¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/eltyq.jpg)\nçº¿ç¨‹æœ‰çŠ¶æ€äº†ï¼Œéœ€è¦ç­‰å¾…è°ƒåº¦çš„å‘ç”Ÿï¼Œè‡ªç„¶å°±æ¶‰åŠåˆ°è½®æ¢è°ƒåº¦å’Œä¼˜å…ˆçº§ã€‚\n\nè½®æ¢è°ƒåº¦è®©å„ä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œä¸€å°æ®µæ—¶é—´åè¿›å…¥å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€ï¼Œè€Œä¼˜å…ˆçº§åˆ™å†³å®šäº†CPUè®©å¤„äºå°±ç»ªçŠ¶æ€çš„å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œã€‚ä¼˜å…ˆçº§æ”¹å˜æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š\n\n- åœ¨æˆ‘ä»¬çš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¼˜å…ˆçº§ï¼Œæœ€å¸¸è§çš„ï¼Œå¦‚iOSä¸­GDCçš„`global queue`:\n\n\n```Objc\n// åˆ›å»ºä¸€ä¸ªä¼˜å…ˆçº§ä¸ºHIGHçš„å…¨å±€é˜Ÿåˆ—\ndispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);\n```\n- æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šæ ¹æ®åœºæ™¯æ¥é€‚å½“æé«˜çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¢‘ç¹ç­‰å¾…çš„çº¿ç¨‹ï¼ˆ**IOå¯†é›†å‹çº¿ç¨‹**ï¼‰é€šå¸¸åªå ç”¨å¾ˆå°‘çš„æ—¶é—´ï¼Œè¿™ç§çº¿ç¨‹æ¯”ç”¨å®Œæ—¶é—´ç‰‡çš„çº¿ç¨‹ï¼ˆ**CPUå¯†é›†å‹çº¿ç¨‹**ï¼‰æ›´å—æ¬¢è¿ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸­ä¼˜å…ˆçº§æ›´å®¹æ˜“è¢«æé«˜ã€‚\n- åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨*çº¿ç¨‹é¥¿æ­»(Starvation)* çš„ç°è±¡ï¼Œå°±æ˜¯ä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ä¸€ç›´å¾—ä¸åˆ°æ—¶é—´ç‰‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä¼šé€æ­¥æé«˜è¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚\n\n## çº¿ç¨‹å®‰å…¨\n\nQ : ä¸ºä»€ä¹ˆä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ\n\nA : å¦‚ä¸Šæ‰€è¿°ï¼Œçº¿ç¨‹é—´æœ‰å…±äº«çš„æ•°æ®ï¼šå…¨å±€å˜é‡ã€å †ä¸Šçš„æ•°æ®ã€å‡½æ•°å†…çš„é™æ€å˜é‡ã€ä»£ç ç­‰ã€‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¼šå¯¼è‡´ä¿®æ”¹åçš„ç»“æœä¸ç¡®å®šã€‚å¦‚ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡ `i` æ‰§è¡Œ `i++`ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½å„è‡ªæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¯¹`i++`è¿™ç§æ“ä½œï¼Œçº¿ç¨‹Aå…ˆå°†`i`çš„å€¼å­˜æ”¾åœ¨çº¿ç¨‹çš„å¯„å­˜å™¨ä¸­ï¼Œæ‰§è¡Œè®¡ç®—åå†èµ‹å€¼å›å»ç»™`i`è¿™ä¸ªå˜é‡ï¼Œä¸­é—´å¦‚æœçº¿ç¨‹Båœ¨Aèµ‹å€¼ä¹‹å‰å…ˆè·å–åˆ°`i`çš„å€¼ï¼Œé‚£ä¹ˆæœ€åèµ‹å€¼çš„ç»“æœè‚¯å®šä¸æ­£ç¡®ã€‚è¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨ã€‚\n\nQ : æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ\n\nA : ä¿è¯æ•°æ®æˆ–ä»£ç æ®µåœ¨ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ï¼Œæ–¹æ³•æœ‰ï¼šåŸå­æ“ä½œã€åŒæ­¥ã€‚\n\n- åŸå­æ“ä½œï¼ˆAtomicï¼‰\n  åŸå­æ“ä½œï¼Œç®€å•ç‚¹æ¥è¯´å°±æ˜¯å•æ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚ä½†ä»…é€‚ç”¨äºç‰¹å®šçš„åœºåˆï¼Œåœ¨å¤æ‚çš„åœºåˆä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„æ›´æ”¹çš„åŸå­æ€§ï¼ŒåŸå­æ“ä½œæŒ‡ä»¤å°±åŠ›ä¸ä»å¿ƒäº†ã€‚\n- åŒæ­¥ä¸é”\n  åŒæ­¥ä¹Ÿæ˜¯ä¸€ç§ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®æœªç»“æŸçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œè®¿é—®ã€‚åŒæ­¥å¸¸è§çš„æœ‰é”ã€ä¿¡å·é‡ã€ä¸´ç•ŒåŒºç­‰ã€‚\n\n### é”\n\nåŒæ­¥æœ€å¸¸è§çš„æ“ä½œå°±æ˜¯é”ï¼Œçº¿ç¨‹å†è®¿é—®æ•°æ®ä¹‹å‰è§†å›¾è·å–é”ï¼Œè®¿é—®ç»“æŸåé‡Šæ”¾é”ã€‚åœ¨è·å–é”æ—¶ï¼Œå¦‚æœé”è¢«å ç”¨äº†ï¼Œåˆ™çº¿ç¨‹ä¼šç­‰å¾…ï¼Œç›´åˆ°é”é‡æ–°å¯ç”¨ã€‚\n\næœ€ç®€å•çš„ï¼ˆå…³äºé”çš„è¯¦ç»†å†…å®¹ï¼Œä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼‰ï¼š\n\n```objc\nNSLock *theLock = [[NSLock alloc] init];\nif ([theLock lock]) {\n   // éœ€è¦åŒæ­¥çš„ä»£ç \n   [theLock unlock];\n}\n```\n\n### ä¿¡å·é‡\n\nä¿¡å·é‡ä¹Ÿå¯ä»¥ç”¨åœ¨åŒæ­¥æ–¹é¢ï¼Œä½†æ˜¯è¿™é‡Œæ‰€è¯´çš„æ˜¯äºŒå…ƒä¿¡å·é‡ï¼Œå³åªè¡¨ç¤ºå ç”¨ä¸éå ç”¨ã€‚ä¾‹å¦‚GCDä¸­ï¼š\n\n```objc\n// åˆ›å»ºä¸€ä¸ªäºŒå…ƒä¿¡å·é‡ï¼Œdispatch_semaphore_createçš„å…¥å‚ä¸º0\ndispatch_semaphore_t semaphore = dispatch_semaphore_create(0);\n// ä½¿ç”¨waitè®©semaphoreå‡1\ndispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n// ä½¿ç”¨signalè®©semaphoreåŠ 1\ndispatch_semaphore_signal(semaphore);\n```\n\nå½“ä¿¡å·é‡`semaphore`å°äº0æ—¶ï¼Œçº¿ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°`semaphore`é‡æ–°å˜æˆ0ã€‚\n\n### ä¸´ç•ŒåŒº\n\nä¸´ç•ŒåŒºæ›´å¤šçš„æ˜¯æŒ‡ä¸€ä¸ªè®¿é—®å…±ç”¨èµ„æºçš„ä»£ç å—ï¼Œè€Œè¿™äº›å…±ç”¨èµ„æºåˆæ— æ³•åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„ç‰¹æ€§ã€‚\n\nä¿¡å·é‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æœ¬çº¿ç¨‹åˆ›å»ºï¼Œå¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹è¢«è·å–åˆ°å¹¶è°ƒç”¨`signal`æˆ–`wait`æ¥æ“ä½œä¿¡å·é‡ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸´ç•ŒåŒºæ˜¾å¾—æ›´åŠ ä¸¥æ ¼ã€‚æœ¬çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œåªæœ‰å½“é€€å‡ºä¸´ç•ŒåŒºäº†ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½è®¿é—®ä¸´ç•ŒåŒºçš„ä»£ç å—ã€‚å¦‚ä¸‹ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼š\n\n```objc\n@synchronized(self) {\n\t// ä¸´ç•ŒåŒºä»£ç \n}\n```\n\n### å¯é‡å…¥(Reentrant)\n\nå¯é‡å…¥çš„æ¦‚å¿µï¼Œé€‚ç”¨äºå‡½æ•°ã€‚\n\né¦–å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯*å‡½æ•°è¢«é‡å…¥*ï¼šä¸€ä¸ªå‡½æ•°è¢«é‡å…¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œç”±äºå¤–éƒ¨å› ç´ ï¼ˆå¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼‰æˆ–å†…éƒ¨è°ƒç”¨ï¼ˆé€’å½’å‡½æ•°ï¼‰ï¼Œåˆä¸€æ¬¡è¿›å…¥äº†è¯¥å‡½æ•°ã€‚\n\nå¯é‡å…¥å‡½æ•°ä¹Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºè¯¥ç§å‡½æ•°è¢«é‡å…¥ä¹‹åä¸ä¼šäº§ç”Ÿä»»ä½•ä¸è‰¯çš„åæœï¼Œæ¯”å¦‚ï¼š\n\n```objc\n- (int)sqr:(int) x {\n\treturn x * x;\n}\n```\n\nä¿è¯å¯é‡å…¥ï¼Œéœ€è¦ä¿è¯ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\n- ä¸ä½¿ç”¨é™æ€æˆ–å…¨å±€éconstçš„å˜é‡\n- ä¸è¿”è¿˜é™æ€æˆ–å…¨å±€éconstå˜é‡çš„æŒ‡é’ˆ\n- ä»…ä¾èµ–å…¥å‚\n- ä¸è°ƒç”¨ä¸å¯é‡å…¥çš„å‡½æ•°\n\n## çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\n\nçº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»ï¼Œä¸€ç›´éƒ½çº ç¼ ä¸æ¸…ã€‚\n\nåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¸¤ç§é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼ŒäºŒè€…çš„åŒºåˆ«æ˜¯ï¼šä¸²è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯æœ‰åºè¢«æ‰§è¡Œçš„ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚\n\nä¸¾ä¸ªå¯èƒ½ä¸å¤ªæ°å½“çš„ä¾‹å­ï¼šçº¿ç¨‹æ˜¯æ¶ˆè´¹è€…ï¼Œé˜Ÿåˆ—æ˜¯ä¼ è¾“çº½å¸¦ï¼Œä»»åŠ¡æ˜¯é¢åŒ…ï¼Œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”ä½œå°†é¢åŒ…åƒæ‰ã€‚å¯¹äºé¢åŒ…å‘¢ï¼Œæˆ‘ï¼ˆå½“å‰çº¿ç¨‹ï¼‰å¯ä»¥è‡ªå·±äº«ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ è¾“å¸¦ç»™å…¶ä»–æ¶ˆè´¹è€…äº«ç”¨ï¼ˆä»»åŠ¡å¯ä»¥è‡ªå·±å®Œæˆï¼Œä¹Ÿå¯ä»¥äº¤ç”±å…¶ä»–çº¿ç¨‹å»å®Œæˆï¼‰ã€‚\n\nä¸²è¡Œé˜Ÿåˆ—ï¼šå®ƒæ˜¯æœ‰åºçš„ä¼ è¾“å¸¦ï¼Œç¼–å·æ˜¯SQï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ‰€ä»¥æˆ‘å¾€ä¸Šé¢æ”¾äº†ä¸€ä¸ªé¢åŒ…ï¼Œç»™å…¶ä»–äººäº«ç”¨ï¼Œæ­¤æ—¶æœ‰æ¶ˆè´¹è€…Aæ‹¿äº†ï¼Œå¹¶å¼€å§‹åƒã€‚åŒæ—¶æ¶ˆè´¹è€…Bä¹Ÿæƒ³åˆ†äº«ä»–çš„é¢åŒ…ï¼Œä»–ä¹ŸæŠŠé¢åŒ…æ”¾åˆ°SQä¸Šï¼Œé‚£å°±è¦ç­‰å¾…Aåƒå®Œé¢åŒ…äº†ï¼ŒBåˆ†äº«çš„é¢åŒ…æ‰ä¼šè¢«æ¶ˆè´¹ã€‚æ­¤æ—¶ä¼ è¾“å¸¦SQå°±è¢«æš‚åœäº†ã€‚\n\nå¹¶è¡Œé˜Ÿåˆ—ï¼šä»»åŠ¡çš„æ‰§è¡Œæ—¶æ— éœ€ç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç¼–å·æ˜¯CQï¼ŒåŒæ ·ï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ”¾åˆ°CQä¸Šï¼ŒAæ­£åœ¨äº«ç”¨ï¼Œæ­¤æ—¶Bä¹Ÿå°†é¢åŒ…æ”¾åœ¨CQä¸Šï¼Œä½†æ˜¯Aæ— æ³•äº«ç”¨ï¼ˆå› ä¸ºæ­£åœ¨äº«ç”¨æˆ‘çš„ï¼‰ï¼Œå› æ­¤CQå°±å‘å‡ºè­¦é¸£ï¼Œå«æ¥äº†æ¶ˆè´¹è€…Cæ¥å°†Bçš„é¢åŒ…åƒæ‰ï¼Œä»¥ç»´æŒCQçš„ç»§ç»­è¿è½¬ï¼Œå½“Aåƒå®Œåï¼Œè¿˜å¯ä»¥ç»§ç»­äº«ç”¨å…¶ä»–äººåˆ†äº«çš„é¢åŒ…ã€‚æ‰€ä»¥ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¹¶ä¸æ˜¯ä¸€å®šä¼šäº§ç”Ÿæ–°çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«ç»§ç»­å«æ¥æ‰§è¡Œä»»åŠ¡ï¼Œåªæ˜¯å¹³æ—¶çº¿ç¨‹æ‰§è¡Œå®Œå°±è¢«é”€æ¯ï¼Œæ‰€ä»¥é˜Ÿåˆ—åœ¨éœ€è¦æ‰§è¡Œæ–°ä»»åŠ¡çš„æ—¶å€™å°±ç»™æˆ‘ä»¬é€ æˆä¸€ä¸ªåˆ›å»ºæ–°çº¿ç¨‹çš„å‡è±¡ã€‚\n\n## æ­»é”\n\né¦–å…ˆï¼Œæ¦‚å¿µï¼š\n\n> *æ­»é”* æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ã€‚  \n\næ­»é”ä¸éœ€è¦å¤šè¯´ï¼Œç›¸ä¿¡å­¦è¿‡è®¡ç®—æœºç†è®ºçš„åŒå­¦éƒ½çŸ¥é“ã€‚å¤šçº¿ç¨‹æ”¹å–„äº†ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œæé«˜äº†ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œå¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ï¼Œæ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¿›ç¨‹å°±æ— æ³•ç»§ç»­æ¨è¿›ã€‚ç”¨æˆ·å¯¹ç¨‹åºå†…éƒ¨çš„è¿ä½œä¸çŸ¥æƒ…ï¼Œä½†çœ‹åˆ°ç•Œé¢æ¯«æ— å“åº”ï¼Œæ€ä¹ˆç‚¹å‡»éƒ½æ²¡ç”¨ï¼Œæ­¤æ—¶å°±ä¼šè´£æ€ªåº”ç”¨çš„ä¸å®Œå–„ã€‚\n\nä¸Šè¿°å…³äº*æ­»é”* çš„æ¦‚å¿µæ¥è‡ªç™¾ç§‘ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—è¦æ›´æ­£çš„æ˜¯ï¼Œæ­»é”ä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±å•ä¸€çº¿ç¨‹é€ æˆã€‚ä½œä¸ºä¸€ä¸ªiOSåº”ç”¨å¼€å‘è€…ï¼Œæˆ‘ä½¿ç”¨GCDæ¥è¯´æ˜ä¸€ä¸‹ï¼š\n\n```objc\n// ä¸»çº¿ç¨‹ä¸­è°ƒç”¨\ndispatch_sync(dispatch_get_main_queue(), ^{\n    // do something\n})\n```\n\nä¸Šè¿°ä»£ç å¿…å°†é€ æˆæ­»é”ï¼Œä½†æ˜¯æ­¤ä¾‹åªæ¶‰åŠä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£å°±æ˜¯iOS Appçš„ä¸»çº¿ç¨‹ï¼ˆäº¦ç§°UIçº¿ç¨‹ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOSä¸­ï¼Œ`main queue`æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œå…¶ä»»åŠ¡åªèƒ½ç”±ä¸»çº¿ç¨‹å»å®Œæˆã€‚è€Œ`dispatch_sync `ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå› æ­¤ï¼Œå½“ä¸Šè¿°ä»£ç ç”¨åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨æ—¶ï¼Œä¸»çº¿ç¨‹è¢«ä¼šé˜»å¡ï¼Œç„¶åå°†`block`æ”¾åœ¨`main queue`ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œ`block`ä¸­çš„ä»£ç åæ‰é‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œç„¶è€Œä¸»çº¿ç¨‹å·²è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œ`main queue`ä¸­çš„`block`ï¼Œæ‰€ä»¥é€ æˆæ­»é”ã€‚\n\n## æ€»ç»“\n\næœ¬æ–‡å¯¹çº¿ç¨‹åšäº†ä¸€ä¸ªç®€å•çš„æè¿°ï¼Œåœ¨æ¯ä¸ªAppéƒ½æ¶‰åŠå¤šçº¿ç¨‹å¼€å‘çš„ç°åœ¨ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œé€šè¿‡åŸå­æ“ä½œã€åŒæ­¥ç­‰æ–¹å¼å¯ä»¥ä¿è¯ã€‚è¿˜è®²è¿°äº†ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼Œæœ€åæµ…æµ…åœ°ç‚¹äº†ä¸€ä¸‹æ­»é”çš„æ¦‚å¿µï¼Œç®—æ˜¯ä¸€ç¯‡å†™ç»™çº¿ç¨‹å°ç™½çœ‹çš„å…¥é—¨çº§iOSæ–‡ç« ï¼Œå¦‚æœ‰å†™å¾—ä¸å¥½çš„åœ°æ–¹ï¼Œè¯·å„ä½æ–§æ­£ã€‚\n\n","source":"_posts/å¯¹çº¿ç¨‹çš„ç®€å•ç†è§£.md","raw":"---\ntitle: å¯¹çº¿ç¨‹çš„ç®€å•ç†è§£\ndate: 2017-03-14 16:57:48\ntags: \n- Thread\n---\n\nåœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéšç€ä¸€ä¸ªç¨‹åºè¢«æ‰“å¼€ï¼Œæ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨å’Œè°ƒåº¦çš„å¼€å§‹ã€‚å¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´ï¼Œç›¸å¯¹äºè¿›ç¨‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ç²’åº¦æ›´å°çš„çº¿ç¨‹ï¼Œå®ƒæ˜¯æˆ‘ä»¬éƒ½éœ€è¦ä¸ä¹‹æ‰“äº¤é“çš„ç”¨æ¥å®ç°å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„åˆ©å™¨ã€‚\n\n<!--more-->\n\n## ä»€ä¹ˆæ˜¯çº¿ç¨‹\n\nè€ç”Ÿå¸¸è°ˆï¼Œä½†è¿˜æ˜¯å…ˆè¯´ä¸€ä¸‹æ¦‚å¿µï¼š\n\n> *çº¿ç¨‹*ï¼Œåˆç§°è½»é‡çº§è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆç»„æˆã€‚é€šå¸¸æ„ä¹‰ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªåˆ°å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€å †ç­‰ï¼‰åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºã€‚  \n\næœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š\n\n1. çº¿ç¨‹æœ‰ç§æœ‰çš„æ•°æ®å•å…ƒï¼šä»…ä»…å¯ä»¥è®©å½“å‰çº¿ç¨‹è®¿é—®çš„å¯„å­˜å™¨å’Œæ ˆ\n2. å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ•°æ®æ®µæˆ–åŒæ—¶æ‰§è¡Œä¸€å—ä»£ç ï¼Œå°±ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å‡ºç°ã€‚\n\n\næ•°æ®æ˜¯å¦ç§æœ‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º\n\n|     çº¿ç¨‹ç§æœ‰     |              çº¿ç¨‹é—´å…±äº«              |\n| :----------: | :-----------------------------: |\n| å±€éƒ¨å˜é‡<br>å‡½æ•°å‚æ•° | å…¨å±€å˜é‡<br>å †ä¸Šçš„æ•°æ®<br>å‡½æ•°å†…çš„é™æ€å˜é‡<br>ä»£ç  |\n\n\n## çº¿ç¨‹è°ƒåº¦\n\nå¦‚æœçº¿ç¨‹æ•°é‡å°äºç­‰äºå¤„ç†å™¨æ•°é‡æ—¶ï¼Œçº¿ç¨‹æ˜¯çœŸæ­£æ„ä¹‰çš„å¹¶å‘ï¼Œä¸åŒçš„çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚è¿™å¾ˆç†æƒ³ã€‚\n\nä½†æ›´ç»å¸¸åœ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾ï¼š\n\n![Concurrency_vs_Parallelism](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png)\n\nä¸Šå›¾ä¸­å¹¶å‘çš„æƒ…å†µæ˜¯é’ˆå¯¹çº¿ç¨‹æ•°é‡å¤§äºå¤„ç†å™¨æ•°é‡ï¼ˆå¤šCPUæˆ–å¤šæ ¸æ—¶ä»£ï¼Œå¤„ç†å™¨æ•°é‡ä¸æ­¢ä¸€ä¸ªï¼‰çš„æƒ…å†µã€‚å­¦è¿‡è®¡ç®—æœºåŸç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿™ç§â€œå¹¶å‘â€æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‡ºæ¥çš„çŠ¶æ€ï¼Œå¿«é€Ÿçš„æ—¶é—´ç‰‡åˆ‡æ¢è®©ç”¨æˆ·è§‰å¾—åƒæ˜¯åŒæ—¶åœ¨æ‰§è¡Œã€‚è¿™ç§æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œç§°ä¸º*çº¿ç¨‹è°ƒåº¦*ã€‚\n\nåœ¨çº¿ç¨‹è°ƒåº¦ä¸­ï¼Œçº¿ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š\n\n- è¿è¡Œï¼šæ‹¥æœ‰æ—¶é—´ç‰‡ï¼Œå¯ä»¥æ‰§è¡Œä»£ç \n- å°±ç»ªï¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œéšæ—¶å¯ä»¥è¢«æ‰§è¡Œ\n- ç­‰å¾…ï¼šç­‰å¾…IOæˆ–è€…å› ä¸ºå…¶ä»–åŸå› è¢«é˜»å¡ï¼Œç­‰å¾…ç»“æŸåè¿›å…¥å°±ç»ªçŠ¶æ€\n\nä¸‰è€…çš„çŠ¶æ€åˆ‡æ¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/eltyq.jpg)\nçº¿ç¨‹æœ‰çŠ¶æ€äº†ï¼Œéœ€è¦ç­‰å¾…è°ƒåº¦çš„å‘ç”Ÿï¼Œè‡ªç„¶å°±æ¶‰åŠåˆ°è½®æ¢è°ƒåº¦å’Œä¼˜å…ˆçº§ã€‚\n\nè½®æ¢è°ƒåº¦è®©å„ä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œä¸€å°æ®µæ—¶é—´åè¿›å…¥å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€ï¼Œè€Œä¼˜å…ˆçº§åˆ™å†³å®šäº†CPUè®©å¤„äºå°±ç»ªçŠ¶æ€çš„å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œã€‚ä¼˜å…ˆçº§æ”¹å˜æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š\n\n- åœ¨æˆ‘ä»¬çš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¼˜å…ˆçº§ï¼Œæœ€å¸¸è§çš„ï¼Œå¦‚iOSä¸­GDCçš„`global queue`:\n\n\n```Objc\n// åˆ›å»ºä¸€ä¸ªä¼˜å…ˆçº§ä¸ºHIGHçš„å…¨å±€é˜Ÿåˆ—\ndispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);\n```\n- æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šæ ¹æ®åœºæ™¯æ¥é€‚å½“æé«˜çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¢‘ç¹ç­‰å¾…çš„çº¿ç¨‹ï¼ˆ**IOå¯†é›†å‹çº¿ç¨‹**ï¼‰é€šå¸¸åªå ç”¨å¾ˆå°‘çš„æ—¶é—´ï¼Œè¿™ç§çº¿ç¨‹æ¯”ç”¨å®Œæ—¶é—´ç‰‡çš„çº¿ç¨‹ï¼ˆ**CPUå¯†é›†å‹çº¿ç¨‹**ï¼‰æ›´å—æ¬¢è¿ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸­ä¼˜å…ˆçº§æ›´å®¹æ˜“è¢«æé«˜ã€‚\n- åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨*çº¿ç¨‹é¥¿æ­»(Starvation)* çš„ç°è±¡ï¼Œå°±æ˜¯ä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ä¸€ç›´å¾—ä¸åˆ°æ—¶é—´ç‰‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä¼šé€æ­¥æé«˜è¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚\n\n## çº¿ç¨‹å®‰å…¨\n\nQ : ä¸ºä»€ä¹ˆä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ\n\nA : å¦‚ä¸Šæ‰€è¿°ï¼Œçº¿ç¨‹é—´æœ‰å…±äº«çš„æ•°æ®ï¼šå…¨å±€å˜é‡ã€å †ä¸Šçš„æ•°æ®ã€å‡½æ•°å†…çš„é™æ€å˜é‡ã€ä»£ç ç­‰ã€‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¼šå¯¼è‡´ä¿®æ”¹åçš„ç»“æœä¸ç¡®å®šã€‚å¦‚ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡ `i` æ‰§è¡Œ `i++`ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½å„è‡ªæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¯¹`i++`è¿™ç§æ“ä½œï¼Œçº¿ç¨‹Aå…ˆå°†`i`çš„å€¼å­˜æ”¾åœ¨çº¿ç¨‹çš„å¯„å­˜å™¨ä¸­ï¼Œæ‰§è¡Œè®¡ç®—åå†èµ‹å€¼å›å»ç»™`i`è¿™ä¸ªå˜é‡ï¼Œä¸­é—´å¦‚æœçº¿ç¨‹Båœ¨Aèµ‹å€¼ä¹‹å‰å…ˆè·å–åˆ°`i`çš„å€¼ï¼Œé‚£ä¹ˆæœ€åèµ‹å€¼çš„ç»“æœè‚¯å®šä¸æ­£ç¡®ã€‚è¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨ã€‚\n\nQ : æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ\n\nA : ä¿è¯æ•°æ®æˆ–ä»£ç æ®µåœ¨ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ï¼Œæ–¹æ³•æœ‰ï¼šåŸå­æ“ä½œã€åŒæ­¥ã€‚\n\n- åŸå­æ“ä½œï¼ˆAtomicï¼‰\n  åŸå­æ“ä½œï¼Œç®€å•ç‚¹æ¥è¯´å°±æ˜¯å•æ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚ä½†ä»…é€‚ç”¨äºç‰¹å®šçš„åœºåˆï¼Œåœ¨å¤æ‚çš„åœºåˆä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„æ›´æ”¹çš„åŸå­æ€§ï¼ŒåŸå­æ“ä½œæŒ‡ä»¤å°±åŠ›ä¸ä»å¿ƒäº†ã€‚\n- åŒæ­¥ä¸é”\n  åŒæ­¥ä¹Ÿæ˜¯ä¸€ç§ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®æœªç»“æŸçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œè®¿é—®ã€‚åŒæ­¥å¸¸è§çš„æœ‰é”ã€ä¿¡å·é‡ã€ä¸´ç•ŒåŒºç­‰ã€‚\n\n### é”\n\nåŒæ­¥æœ€å¸¸è§çš„æ“ä½œå°±æ˜¯é”ï¼Œçº¿ç¨‹å†è®¿é—®æ•°æ®ä¹‹å‰è§†å›¾è·å–é”ï¼Œè®¿é—®ç»“æŸåé‡Šæ”¾é”ã€‚åœ¨è·å–é”æ—¶ï¼Œå¦‚æœé”è¢«å ç”¨äº†ï¼Œåˆ™çº¿ç¨‹ä¼šç­‰å¾…ï¼Œç›´åˆ°é”é‡æ–°å¯ç”¨ã€‚\n\næœ€ç®€å•çš„ï¼ˆå…³äºé”çš„è¯¦ç»†å†…å®¹ï¼Œä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼‰ï¼š\n\n```objc\nNSLock *theLock = [[NSLock alloc] init];\nif ([theLock lock]) {\n   // éœ€è¦åŒæ­¥çš„ä»£ç \n   [theLock unlock];\n}\n```\n\n### ä¿¡å·é‡\n\nä¿¡å·é‡ä¹Ÿå¯ä»¥ç”¨åœ¨åŒæ­¥æ–¹é¢ï¼Œä½†æ˜¯è¿™é‡Œæ‰€è¯´çš„æ˜¯äºŒå…ƒä¿¡å·é‡ï¼Œå³åªè¡¨ç¤ºå ç”¨ä¸éå ç”¨ã€‚ä¾‹å¦‚GCDä¸­ï¼š\n\n```objc\n// åˆ›å»ºä¸€ä¸ªäºŒå…ƒä¿¡å·é‡ï¼Œdispatch_semaphore_createçš„å…¥å‚ä¸º0\ndispatch_semaphore_t semaphore = dispatch_semaphore_create(0);\n// ä½¿ç”¨waitè®©semaphoreå‡1\ndispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n// ä½¿ç”¨signalè®©semaphoreåŠ 1\ndispatch_semaphore_signal(semaphore);\n```\n\nå½“ä¿¡å·é‡`semaphore`å°äº0æ—¶ï¼Œçº¿ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°`semaphore`é‡æ–°å˜æˆ0ã€‚\n\n### ä¸´ç•ŒåŒº\n\nä¸´ç•ŒåŒºæ›´å¤šçš„æ˜¯æŒ‡ä¸€ä¸ªè®¿é—®å…±ç”¨èµ„æºçš„ä»£ç å—ï¼Œè€Œè¿™äº›å…±ç”¨èµ„æºåˆæ— æ³•åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„ç‰¹æ€§ã€‚\n\nä¿¡å·é‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æœ¬çº¿ç¨‹åˆ›å»ºï¼Œå¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹è¢«è·å–åˆ°å¹¶è°ƒç”¨`signal`æˆ–`wait`æ¥æ“ä½œä¿¡å·é‡ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸´ç•ŒåŒºæ˜¾å¾—æ›´åŠ ä¸¥æ ¼ã€‚æœ¬çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œåªæœ‰å½“é€€å‡ºä¸´ç•ŒåŒºäº†ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½è®¿é—®ä¸´ç•ŒåŒºçš„ä»£ç å—ã€‚å¦‚ä¸‹ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼š\n\n```objc\n@synchronized(self) {\n\t// ä¸´ç•ŒåŒºä»£ç \n}\n```\n\n### å¯é‡å…¥(Reentrant)\n\nå¯é‡å…¥çš„æ¦‚å¿µï¼Œé€‚ç”¨äºå‡½æ•°ã€‚\n\né¦–å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯*å‡½æ•°è¢«é‡å…¥*ï¼šä¸€ä¸ªå‡½æ•°è¢«é‡å…¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œç”±äºå¤–éƒ¨å› ç´ ï¼ˆå¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼‰æˆ–å†…éƒ¨è°ƒç”¨ï¼ˆé€’å½’å‡½æ•°ï¼‰ï¼Œåˆä¸€æ¬¡è¿›å…¥äº†è¯¥å‡½æ•°ã€‚\n\nå¯é‡å…¥å‡½æ•°ä¹Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºè¯¥ç§å‡½æ•°è¢«é‡å…¥ä¹‹åä¸ä¼šäº§ç”Ÿä»»ä½•ä¸è‰¯çš„åæœï¼Œæ¯”å¦‚ï¼š\n\n```objc\n- (int)sqr:(int) x {\n\treturn x * x;\n}\n```\n\nä¿è¯å¯é‡å…¥ï¼Œéœ€è¦ä¿è¯ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\n- ä¸ä½¿ç”¨é™æ€æˆ–å…¨å±€éconstçš„å˜é‡\n- ä¸è¿”è¿˜é™æ€æˆ–å…¨å±€éconstå˜é‡çš„æŒ‡é’ˆ\n- ä»…ä¾èµ–å…¥å‚\n- ä¸è°ƒç”¨ä¸å¯é‡å…¥çš„å‡½æ•°\n\n## çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\n\nçº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»ï¼Œä¸€ç›´éƒ½çº ç¼ ä¸æ¸…ã€‚\n\nåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¸¤ç§é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼ŒäºŒè€…çš„åŒºåˆ«æ˜¯ï¼šä¸²è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯æœ‰åºè¢«æ‰§è¡Œçš„ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚\n\nä¸¾ä¸ªå¯èƒ½ä¸å¤ªæ°å½“çš„ä¾‹å­ï¼šçº¿ç¨‹æ˜¯æ¶ˆè´¹è€…ï¼Œé˜Ÿåˆ—æ˜¯ä¼ è¾“çº½å¸¦ï¼Œä»»åŠ¡æ˜¯é¢åŒ…ï¼Œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”ä½œå°†é¢åŒ…åƒæ‰ã€‚å¯¹äºé¢åŒ…å‘¢ï¼Œæˆ‘ï¼ˆå½“å‰çº¿ç¨‹ï¼‰å¯ä»¥è‡ªå·±äº«ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ è¾“å¸¦ç»™å…¶ä»–æ¶ˆè´¹è€…äº«ç”¨ï¼ˆä»»åŠ¡å¯ä»¥è‡ªå·±å®Œæˆï¼Œä¹Ÿå¯ä»¥äº¤ç”±å…¶ä»–çº¿ç¨‹å»å®Œæˆï¼‰ã€‚\n\nä¸²è¡Œé˜Ÿåˆ—ï¼šå®ƒæ˜¯æœ‰åºçš„ä¼ è¾“å¸¦ï¼Œç¼–å·æ˜¯SQï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ‰€ä»¥æˆ‘å¾€ä¸Šé¢æ”¾äº†ä¸€ä¸ªé¢åŒ…ï¼Œç»™å…¶ä»–äººäº«ç”¨ï¼Œæ­¤æ—¶æœ‰æ¶ˆè´¹è€…Aæ‹¿äº†ï¼Œå¹¶å¼€å§‹åƒã€‚åŒæ—¶æ¶ˆè´¹è€…Bä¹Ÿæƒ³åˆ†äº«ä»–çš„é¢åŒ…ï¼Œä»–ä¹ŸæŠŠé¢åŒ…æ”¾åˆ°SQä¸Šï¼Œé‚£å°±è¦ç­‰å¾…Aåƒå®Œé¢åŒ…äº†ï¼ŒBåˆ†äº«çš„é¢åŒ…æ‰ä¼šè¢«æ¶ˆè´¹ã€‚æ­¤æ—¶ä¼ è¾“å¸¦SQå°±è¢«æš‚åœäº†ã€‚\n\nå¹¶è¡Œé˜Ÿåˆ—ï¼šä»»åŠ¡çš„æ‰§è¡Œæ—¶æ— éœ€ç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç¼–å·æ˜¯CQï¼ŒåŒæ ·ï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ”¾åˆ°CQä¸Šï¼ŒAæ­£åœ¨äº«ç”¨ï¼Œæ­¤æ—¶Bä¹Ÿå°†é¢åŒ…æ”¾åœ¨CQä¸Šï¼Œä½†æ˜¯Aæ— æ³•äº«ç”¨ï¼ˆå› ä¸ºæ­£åœ¨äº«ç”¨æˆ‘çš„ï¼‰ï¼Œå› æ­¤CQå°±å‘å‡ºè­¦é¸£ï¼Œå«æ¥äº†æ¶ˆè´¹è€…Cæ¥å°†Bçš„é¢åŒ…åƒæ‰ï¼Œä»¥ç»´æŒCQçš„ç»§ç»­è¿è½¬ï¼Œå½“Aåƒå®Œåï¼Œè¿˜å¯ä»¥ç»§ç»­äº«ç”¨å…¶ä»–äººåˆ†äº«çš„é¢åŒ…ã€‚æ‰€ä»¥ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¹¶ä¸æ˜¯ä¸€å®šä¼šäº§ç”Ÿæ–°çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«ç»§ç»­å«æ¥æ‰§è¡Œä»»åŠ¡ï¼Œåªæ˜¯å¹³æ—¶çº¿ç¨‹æ‰§è¡Œå®Œå°±è¢«é”€æ¯ï¼Œæ‰€ä»¥é˜Ÿåˆ—åœ¨éœ€è¦æ‰§è¡Œæ–°ä»»åŠ¡çš„æ—¶å€™å°±ç»™æˆ‘ä»¬é€ æˆä¸€ä¸ªåˆ›å»ºæ–°çº¿ç¨‹çš„å‡è±¡ã€‚\n\n## æ­»é”\n\né¦–å…ˆï¼Œæ¦‚å¿µï¼š\n\n> *æ­»é”* æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ã€‚  \n\næ­»é”ä¸éœ€è¦å¤šè¯´ï¼Œç›¸ä¿¡å­¦è¿‡è®¡ç®—æœºç†è®ºçš„åŒå­¦éƒ½çŸ¥é“ã€‚å¤šçº¿ç¨‹æ”¹å–„äº†ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œæé«˜äº†ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œå¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ï¼Œæ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¿›ç¨‹å°±æ— æ³•ç»§ç»­æ¨è¿›ã€‚ç”¨æˆ·å¯¹ç¨‹åºå†…éƒ¨çš„è¿ä½œä¸çŸ¥æƒ…ï¼Œä½†çœ‹åˆ°ç•Œé¢æ¯«æ— å“åº”ï¼Œæ€ä¹ˆç‚¹å‡»éƒ½æ²¡ç”¨ï¼Œæ­¤æ—¶å°±ä¼šè´£æ€ªåº”ç”¨çš„ä¸å®Œå–„ã€‚\n\nä¸Šè¿°å…³äº*æ­»é”* çš„æ¦‚å¿µæ¥è‡ªç™¾ç§‘ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—è¦æ›´æ­£çš„æ˜¯ï¼Œæ­»é”ä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±å•ä¸€çº¿ç¨‹é€ æˆã€‚ä½œä¸ºä¸€ä¸ªiOSåº”ç”¨å¼€å‘è€…ï¼Œæˆ‘ä½¿ç”¨GCDæ¥è¯´æ˜ä¸€ä¸‹ï¼š\n\n```objc\n// ä¸»çº¿ç¨‹ä¸­è°ƒç”¨\ndispatch_sync(dispatch_get_main_queue(), ^{\n    // do something\n})\n```\n\nä¸Šè¿°ä»£ç å¿…å°†é€ æˆæ­»é”ï¼Œä½†æ˜¯æ­¤ä¾‹åªæ¶‰åŠä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£å°±æ˜¯iOS Appçš„ä¸»çº¿ç¨‹ï¼ˆäº¦ç§°UIçº¿ç¨‹ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOSä¸­ï¼Œ`main queue`æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œå…¶ä»»åŠ¡åªèƒ½ç”±ä¸»çº¿ç¨‹å»å®Œæˆã€‚è€Œ`dispatch_sync `ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå› æ­¤ï¼Œå½“ä¸Šè¿°ä»£ç ç”¨åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨æ—¶ï¼Œä¸»çº¿ç¨‹è¢«ä¼šé˜»å¡ï¼Œç„¶åå°†`block`æ”¾åœ¨`main queue`ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œ`block`ä¸­çš„ä»£ç åæ‰é‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œç„¶è€Œä¸»çº¿ç¨‹å·²è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œ`main queue`ä¸­çš„`block`ï¼Œæ‰€ä»¥é€ æˆæ­»é”ã€‚\n\n## æ€»ç»“\n\næœ¬æ–‡å¯¹çº¿ç¨‹åšäº†ä¸€ä¸ªç®€å•çš„æè¿°ï¼Œåœ¨æ¯ä¸ªAppéƒ½æ¶‰åŠå¤šçº¿ç¨‹å¼€å‘çš„ç°åœ¨ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œé€šè¿‡åŸå­æ“ä½œã€åŒæ­¥ç­‰æ–¹å¼å¯ä»¥ä¿è¯ã€‚è¿˜è®²è¿°äº†ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼Œæœ€åæµ…æµ…åœ°ç‚¹äº†ä¸€ä¸‹æ­»é”çš„æ¦‚å¿µï¼Œç®—æ˜¯ä¸€ç¯‡å†™ç»™çº¿ç¨‹å°ç™½çœ‹çš„å…¥é—¨çº§iOSæ–‡ç« ï¼Œå¦‚æœ‰å†™å¾—ä¸å¥½çš„åœ°æ–¹ï¼Œè¯·å„ä½æ–§æ­£ã€‚\n\n","slug":"å¯¹çº¿ç¨‹çš„ç®€å•ç†è§£","published":1,"updated":"2018-03-30T01:16:33.800Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12b8000ccqy8pvq6w5yb","content":"<p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéšç€ä¸€ä¸ªç¨‹åºè¢«æ‰“å¼€ï¼Œæ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨å’Œè°ƒåº¦çš„å¼€å§‹ã€‚å¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´ï¼Œç›¸å¯¹äºè¿›ç¨‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ç²’åº¦æ›´å°çš„çº¿ç¨‹ï¼Œå®ƒæ˜¯æˆ‘ä»¬éƒ½éœ€è¦ä¸ä¹‹æ‰“äº¤é“çš„ç”¨æ¥å®ç°å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„åˆ©å™¨ã€‚</p>\n<a id=\"more\"></a>\n<h2 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹</h2><p>è€ç”Ÿå¸¸è°ˆï¼Œä½†è¿˜æ˜¯å…ˆè¯´ä¸€ä¸‹æ¦‚å¿µï¼š</p>\n<blockquote>\n<p><em>çº¿ç¨‹</em>ï¼Œåˆç§°è½»é‡çº§è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆç»„æˆã€‚é€šå¸¸æ„ä¹‰ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªåˆ°å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€å †ç­‰ï¼‰åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºã€‚  </p>\n</blockquote>\n<p>æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p>\n<ol>\n<li>çº¿ç¨‹æœ‰ç§æœ‰çš„æ•°æ®å•å…ƒï¼šä»…ä»…å¯ä»¥è®©å½“å‰çº¿ç¨‹è®¿é—®çš„å¯„å­˜å™¨å’Œæ ˆ</li>\n<li>å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ•°æ®æ®µæˆ–åŒæ—¶æ‰§è¡Œä¸€å—ä»£ç ï¼Œå°±ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å‡ºç°ã€‚</li>\n</ol>\n<p>æ•°æ®æ˜¯å¦ç§æœ‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">çº¿ç¨‹ç§æœ‰</th>\n<th style=\"text-align:center\">çº¿ç¨‹é—´å…±äº«</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">å±€éƒ¨å˜é‡<br>å‡½æ•°å‚æ•°</td>\n<td style=\"text-align:center\">å…¨å±€å˜é‡<br>å †ä¸Šçš„æ•°æ®<br>å‡½æ•°å†…çš„é™æ€å˜é‡<br>ä»£ç </td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"çº¿ç¨‹è°ƒåº¦\"><a href=\"#çº¿ç¨‹è°ƒåº¦\" class=\"headerlink\" title=\"çº¿ç¨‹è°ƒåº¦\"></a>çº¿ç¨‹è°ƒåº¦</h2><p>å¦‚æœçº¿ç¨‹æ•°é‡å°äºç­‰äºå¤„ç†å™¨æ•°é‡æ—¶ï¼Œçº¿ç¨‹æ˜¯çœŸæ­£æ„ä¹‰çš„å¹¶å‘ï¼Œä¸åŒçš„çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚è¿™å¾ˆç†æƒ³ã€‚</p>\n<p>ä½†æ›´ç»å¸¸åœ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<p>ä¸Šå›¾ä¸­å¹¶å‘çš„æƒ…å†µæ˜¯é’ˆå¯¹çº¿ç¨‹æ•°é‡å¤§äºå¤„ç†å™¨æ•°é‡ï¼ˆå¤šCPUæˆ–å¤šæ ¸æ—¶ä»£ï¼Œå¤„ç†å™¨æ•°é‡ä¸æ­¢ä¸€ä¸ªï¼‰çš„æƒ…å†µã€‚å­¦è¿‡è®¡ç®—æœºåŸç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿™ç§â€œå¹¶å‘â€æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‡ºæ¥çš„çŠ¶æ€ï¼Œå¿«é€Ÿçš„æ—¶é—´ç‰‡åˆ‡æ¢è®©ç”¨æˆ·è§‰å¾—åƒæ˜¯åŒæ—¶åœ¨æ‰§è¡Œã€‚è¿™ç§æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œç§°ä¸º<em>çº¿ç¨‹è°ƒåº¦</em>ã€‚</p>\n<p>åœ¨çº¿ç¨‹è°ƒåº¦ä¸­ï¼Œçº¿ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p>\n<ul>\n<li>è¿è¡Œï¼šæ‹¥æœ‰æ—¶é—´ç‰‡ï¼Œå¯ä»¥æ‰§è¡Œä»£ç </li>\n<li>å°±ç»ªï¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œéšæ—¶å¯ä»¥è¢«æ‰§è¡Œ</li>\n<li>ç­‰å¾…ï¼šç­‰å¾…IOæˆ–è€…å› ä¸ºå…¶ä»–åŸå› è¢«é˜»å¡ï¼Œç­‰å¾…ç»“æŸåè¿›å…¥å°±ç»ªçŠ¶æ€</li>\n</ul>\n<p>ä¸‰è€…çš„çŠ¶æ€åˆ‡æ¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/eltyq.jpg\" alt=\"\"><br>çº¿ç¨‹æœ‰çŠ¶æ€äº†ï¼Œéœ€è¦ç­‰å¾…è°ƒåº¦çš„å‘ç”Ÿï¼Œè‡ªç„¶å°±æ¶‰åŠåˆ°è½®æ¢è°ƒåº¦å’Œä¼˜å…ˆçº§ã€‚</p>\n<p>è½®æ¢è°ƒåº¦è®©å„ä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œä¸€å°æ®µæ—¶é—´åè¿›å…¥å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€ï¼Œè€Œä¼˜å…ˆçº§åˆ™å†³å®šäº†CPUè®©å¤„äºå°±ç»ªçŠ¶æ€çš„å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œã€‚ä¼˜å…ˆçº§æ”¹å˜æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>åœ¨æˆ‘ä»¬çš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¼˜å…ˆçº§ï¼Œæœ€å¸¸è§çš„ï¼Œå¦‚iOSä¸­GDCçš„<code>global queue</code>:</li>\n</ul>\n<pre><code class=\"Objc\">// åˆ›å»ºä¸€ä¸ªä¼˜å…ˆçº§ä¸ºHIGHçš„å…¨å±€é˜Ÿåˆ—\ndispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);\n</code></pre>\n<ul>\n<li>æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šæ ¹æ®åœºæ™¯æ¥é€‚å½“æé«˜çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¢‘ç¹ç­‰å¾…çš„çº¿ç¨‹ï¼ˆ<strong>IOå¯†é›†å‹çº¿ç¨‹</strong>ï¼‰é€šå¸¸åªå ç”¨å¾ˆå°‘çš„æ—¶é—´ï¼Œè¿™ç§çº¿ç¨‹æ¯”ç”¨å®Œæ—¶é—´ç‰‡çš„çº¿ç¨‹ï¼ˆ<strong>CPUå¯†é›†å‹çº¿ç¨‹</strong>ï¼‰æ›´å—æ¬¢è¿ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸­ä¼˜å…ˆçº§æ›´å®¹æ˜“è¢«æé«˜ã€‚</li>\n<li>åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨<em>çº¿ç¨‹é¥¿æ­»(Starvation)</em> çš„ç°è±¡ï¼Œå°±æ˜¯ä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ä¸€ç›´å¾—ä¸åˆ°æ—¶é—´ç‰‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä¼šé€æ­¥æé«˜è¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>\n</ul>\n<h2 id=\"çº¿ç¨‹å®‰å…¨\"><a href=\"#çº¿ç¨‹å®‰å…¨\" class=\"headerlink\" title=\"çº¿ç¨‹å®‰å…¨\"></a>çº¿ç¨‹å®‰å…¨</h2><p>Q : ä¸ºä»€ä¹ˆä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p>\n<p>A : å¦‚ä¸Šæ‰€è¿°ï¼Œçº¿ç¨‹é—´æœ‰å…±äº«çš„æ•°æ®ï¼šå…¨å±€å˜é‡ã€å †ä¸Šçš„æ•°æ®ã€å‡½æ•°å†…çš„é™æ€å˜é‡ã€ä»£ç ç­‰ã€‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¼šå¯¼è‡´ä¿®æ”¹åçš„ç»“æœä¸ç¡®å®šã€‚å¦‚ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡ <code>i</code> æ‰§è¡Œ <code>i++</code>ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½å„è‡ªæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¯¹<code>i++</code>è¿™ç§æ“ä½œï¼Œçº¿ç¨‹Aå…ˆå°†<code>i</code>çš„å€¼å­˜æ”¾åœ¨çº¿ç¨‹çš„å¯„å­˜å™¨ä¸­ï¼Œæ‰§è¡Œè®¡ç®—åå†èµ‹å€¼å›å»ç»™<code>i</code>è¿™ä¸ªå˜é‡ï¼Œä¸­é—´å¦‚æœçº¿ç¨‹Båœ¨Aèµ‹å€¼ä¹‹å‰å…ˆè·å–åˆ°<code>i</code>çš„å€¼ï¼Œé‚£ä¹ˆæœ€åèµ‹å€¼çš„ç»“æœè‚¯å®šä¸æ­£ç¡®ã€‚è¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨ã€‚</p>\n<p>Q : æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ</p>\n<p>A : ä¿è¯æ•°æ®æˆ–ä»£ç æ®µåœ¨ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ï¼Œæ–¹æ³•æœ‰ï¼šåŸå­æ“ä½œã€åŒæ­¥ã€‚</p>\n<ul>\n<li>åŸå­æ“ä½œï¼ˆAtomicï¼‰<br>åŸå­æ“ä½œï¼Œç®€å•ç‚¹æ¥è¯´å°±æ˜¯å•æ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚ä½†ä»…é€‚ç”¨äºç‰¹å®šçš„åœºåˆï¼Œåœ¨å¤æ‚çš„åœºåˆä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„æ›´æ”¹çš„åŸå­æ€§ï¼ŒåŸå­æ“ä½œæŒ‡ä»¤å°±åŠ›ä¸ä»å¿ƒäº†ã€‚</li>\n<li>åŒæ­¥ä¸é”<br>åŒæ­¥ä¹Ÿæ˜¯ä¸€ç§ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®æœªç»“æŸçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œè®¿é—®ã€‚åŒæ­¥å¸¸è§çš„æœ‰é”ã€ä¿¡å·é‡ã€ä¸´ç•ŒåŒºç­‰ã€‚</li>\n</ul>\n<h3 id=\"é”\"><a href=\"#é”\" class=\"headerlink\" title=\"é”\"></a>é”</h3><p>åŒæ­¥æœ€å¸¸è§çš„æ“ä½œå°±æ˜¯é”ï¼Œçº¿ç¨‹å†è®¿é—®æ•°æ®ä¹‹å‰è§†å›¾è·å–é”ï¼Œè®¿é—®ç»“æŸåé‡Šæ”¾é”ã€‚åœ¨è·å–é”æ—¶ï¼Œå¦‚æœé”è¢«å ç”¨äº†ï¼Œåˆ™çº¿ç¨‹ä¼šç­‰å¾…ï¼Œç›´åˆ°é”é‡æ–°å¯ç”¨ã€‚</p>\n<p>æœ€ç®€å•çš„ï¼ˆå…³äºé”çš„è¯¦ç»†å†…å®¹ï¼Œä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼‰ï¼š</p>\n<pre><code class=\"objc\">NSLock *theLock = [[NSLock alloc] init];\nif ([theLock lock]) {\n   // éœ€è¦åŒæ­¥çš„ä»£ç \n   [theLock unlock];\n}\n</code></pre>\n<h3 id=\"ä¿¡å·é‡\"><a href=\"#ä¿¡å·é‡\" class=\"headerlink\" title=\"ä¿¡å·é‡\"></a>ä¿¡å·é‡</h3><p>ä¿¡å·é‡ä¹Ÿå¯ä»¥ç”¨åœ¨åŒæ­¥æ–¹é¢ï¼Œä½†æ˜¯è¿™é‡Œæ‰€è¯´çš„æ˜¯äºŒå…ƒä¿¡å·é‡ï¼Œå³åªè¡¨ç¤ºå ç”¨ä¸éå ç”¨ã€‚ä¾‹å¦‚GCDä¸­ï¼š</p>\n<pre><code class=\"objc\">// åˆ›å»ºä¸€ä¸ªäºŒå…ƒä¿¡å·é‡ï¼Œdispatch_semaphore_createçš„å…¥å‚ä¸º0\ndispatch_semaphore_t semaphore = dispatch_semaphore_create(0);\n// ä½¿ç”¨waitè®©semaphoreå‡1\ndispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n// ä½¿ç”¨signalè®©semaphoreåŠ 1\ndispatch_semaphore_signal(semaphore);\n</code></pre>\n<p>å½“ä¿¡å·é‡<code>semaphore</code>å°äº0æ—¶ï¼Œçº¿ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°<code>semaphore</code>é‡æ–°å˜æˆ0ã€‚</p>\n<h3 id=\"ä¸´ç•ŒåŒº\"><a href=\"#ä¸´ç•ŒåŒº\" class=\"headerlink\" title=\"ä¸´ç•ŒåŒº\"></a>ä¸´ç•ŒåŒº</h3><p>ä¸´ç•ŒåŒºæ›´å¤šçš„æ˜¯æŒ‡ä¸€ä¸ªè®¿é—®å…±ç”¨èµ„æºçš„ä»£ç å—ï¼Œè€Œè¿™äº›å…±ç”¨èµ„æºåˆæ— æ³•åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„ç‰¹æ€§ã€‚</p>\n<p>ä¿¡å·é‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æœ¬çº¿ç¨‹åˆ›å»ºï¼Œå¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹è¢«è·å–åˆ°å¹¶è°ƒç”¨<code>signal</code>æˆ–<code>wait</code>æ¥æ“ä½œä¿¡å·é‡ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸´ç•ŒåŒºæ˜¾å¾—æ›´åŠ ä¸¥æ ¼ã€‚æœ¬çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œåªæœ‰å½“é€€å‡ºä¸´ç•ŒåŒºäº†ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½è®¿é—®ä¸´ç•ŒåŒºçš„ä»£ç å—ã€‚å¦‚ä¸‹ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼š</p>\n<pre><code class=\"objc\">@synchronized(self) {\n    // ä¸´ç•ŒåŒºä»£ç \n}\n</code></pre>\n<h3 id=\"å¯é‡å…¥-Reentrant\"><a href=\"#å¯é‡å…¥-Reentrant\" class=\"headerlink\" title=\"å¯é‡å…¥(Reentrant)\"></a>å¯é‡å…¥(Reentrant)</h3><p>å¯é‡å…¥çš„æ¦‚å¿µï¼Œé€‚ç”¨äºå‡½æ•°ã€‚</p>\n<p>é¦–å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯<em>å‡½æ•°è¢«é‡å…¥</em>ï¼šä¸€ä¸ªå‡½æ•°è¢«é‡å…¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œç”±äºå¤–éƒ¨å› ç´ ï¼ˆå¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼‰æˆ–å†…éƒ¨è°ƒç”¨ï¼ˆé€’å½’å‡½æ•°ï¼‰ï¼Œåˆä¸€æ¬¡è¿›å…¥äº†è¯¥å‡½æ•°ã€‚</p>\n<p>å¯é‡å…¥å‡½æ•°ä¹Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºè¯¥ç§å‡½æ•°è¢«é‡å…¥ä¹‹åä¸ä¼šäº§ç”Ÿä»»ä½•ä¸è‰¯çš„åæœï¼Œæ¯”å¦‚ï¼š</p>\n<pre><code class=\"objc\">- (int)sqr:(int) x {\n    return x * x;\n}\n</code></pre>\n<p>ä¿è¯å¯é‡å…¥ï¼Œéœ€è¦ä¿è¯ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>\n<ul>\n<li>ä¸ä½¿ç”¨é™æ€æˆ–å…¨å±€éconstçš„å˜é‡</li>\n<li>ä¸è¿”è¿˜é™æ€æˆ–å…¨å±€éconstå˜é‡çš„æŒ‡é’ˆ</li>\n<li>ä»…ä¾èµ–å…¥å‚</li>\n<li>ä¸è°ƒç”¨ä¸å¯é‡å…¥çš„å‡½æ•°</li>\n</ul>\n<h2 id=\"çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\"><a href=\"#çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\" class=\"headerlink\" title=\"çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\"></a>çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»</h2><p>çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»ï¼Œä¸€ç›´éƒ½çº ç¼ ä¸æ¸…ã€‚</p>\n<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¸¤ç§é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼ŒäºŒè€…çš„åŒºåˆ«æ˜¯ï¼šä¸²è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯æœ‰åºè¢«æ‰§è¡Œçš„ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚</p>\n<p>ä¸¾ä¸ªå¯èƒ½ä¸å¤ªæ°å½“çš„ä¾‹å­ï¼šçº¿ç¨‹æ˜¯æ¶ˆè´¹è€…ï¼Œé˜Ÿåˆ—æ˜¯ä¼ è¾“çº½å¸¦ï¼Œä»»åŠ¡æ˜¯é¢åŒ…ï¼Œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”ä½œå°†é¢åŒ…åƒæ‰ã€‚å¯¹äºé¢åŒ…å‘¢ï¼Œæˆ‘ï¼ˆå½“å‰çº¿ç¨‹ï¼‰å¯ä»¥è‡ªå·±äº«ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ è¾“å¸¦ç»™å…¶ä»–æ¶ˆè´¹è€…äº«ç”¨ï¼ˆä»»åŠ¡å¯ä»¥è‡ªå·±å®Œæˆï¼Œä¹Ÿå¯ä»¥äº¤ç”±å…¶ä»–çº¿ç¨‹å»å®Œæˆï¼‰ã€‚</p>\n<p>ä¸²è¡Œé˜Ÿåˆ—ï¼šå®ƒæ˜¯æœ‰åºçš„ä¼ è¾“å¸¦ï¼Œç¼–å·æ˜¯SQï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ‰€ä»¥æˆ‘å¾€ä¸Šé¢æ”¾äº†ä¸€ä¸ªé¢åŒ…ï¼Œç»™å…¶ä»–äººäº«ç”¨ï¼Œæ­¤æ—¶æœ‰æ¶ˆè´¹è€…Aæ‹¿äº†ï¼Œå¹¶å¼€å§‹åƒã€‚åŒæ—¶æ¶ˆè´¹è€…Bä¹Ÿæƒ³åˆ†äº«ä»–çš„é¢åŒ…ï¼Œä»–ä¹ŸæŠŠé¢åŒ…æ”¾åˆ°SQä¸Šï¼Œé‚£å°±è¦ç­‰å¾…Aåƒå®Œé¢åŒ…äº†ï¼ŒBåˆ†äº«çš„é¢åŒ…æ‰ä¼šè¢«æ¶ˆè´¹ã€‚æ­¤æ—¶ä¼ è¾“å¸¦SQå°±è¢«æš‚åœäº†ã€‚</p>\n<p>å¹¶è¡Œé˜Ÿåˆ—ï¼šä»»åŠ¡çš„æ‰§è¡Œæ—¶æ— éœ€ç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç¼–å·æ˜¯CQï¼ŒåŒæ ·ï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ”¾åˆ°CQä¸Šï¼ŒAæ­£åœ¨äº«ç”¨ï¼Œæ­¤æ—¶Bä¹Ÿå°†é¢åŒ…æ”¾åœ¨CQä¸Šï¼Œä½†æ˜¯Aæ— æ³•äº«ç”¨ï¼ˆå› ä¸ºæ­£åœ¨äº«ç”¨æˆ‘çš„ï¼‰ï¼Œå› æ­¤CQå°±å‘å‡ºè­¦é¸£ï¼Œå«æ¥äº†æ¶ˆè´¹è€…Cæ¥å°†Bçš„é¢åŒ…åƒæ‰ï¼Œä»¥ç»´æŒCQçš„ç»§ç»­è¿è½¬ï¼Œå½“Aåƒå®Œåï¼Œè¿˜å¯ä»¥ç»§ç»­äº«ç”¨å…¶ä»–äººåˆ†äº«çš„é¢åŒ…ã€‚æ‰€ä»¥ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¹¶ä¸æ˜¯ä¸€å®šä¼šäº§ç”Ÿæ–°çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«ç»§ç»­å«æ¥æ‰§è¡Œä»»åŠ¡ï¼Œåªæ˜¯å¹³æ—¶çº¿ç¨‹æ‰§è¡Œå®Œå°±è¢«é”€æ¯ï¼Œæ‰€ä»¥é˜Ÿåˆ—åœ¨éœ€è¦æ‰§è¡Œæ–°ä»»åŠ¡çš„æ—¶å€™å°±ç»™æˆ‘ä»¬é€ æˆä¸€ä¸ªåˆ›å»ºæ–°çº¿ç¨‹çš„å‡è±¡ã€‚</p>\n<h2 id=\"æ­»é”\"><a href=\"#æ­»é”\" class=\"headerlink\" title=\"æ­»é”\"></a>æ­»é”</h2><p>é¦–å…ˆï¼Œæ¦‚å¿µï¼š</p>\n<blockquote>\n<p><em>æ­»é”</em> æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ã€‚  </p>\n</blockquote>\n<p>æ­»é”ä¸éœ€è¦å¤šè¯´ï¼Œç›¸ä¿¡å­¦è¿‡è®¡ç®—æœºç†è®ºçš„åŒå­¦éƒ½çŸ¥é“ã€‚å¤šçº¿ç¨‹æ”¹å–„äº†ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œæé«˜äº†ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œå¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ï¼Œæ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¿›ç¨‹å°±æ— æ³•ç»§ç»­æ¨è¿›ã€‚ç”¨æˆ·å¯¹ç¨‹åºå†…éƒ¨çš„è¿ä½œä¸çŸ¥æƒ…ï¼Œä½†çœ‹åˆ°ç•Œé¢æ¯«æ— å“åº”ï¼Œæ€ä¹ˆç‚¹å‡»éƒ½æ²¡ç”¨ï¼Œæ­¤æ—¶å°±ä¼šè´£æ€ªåº”ç”¨çš„ä¸å®Œå–„ã€‚</p>\n<p>ä¸Šè¿°å…³äº<em>æ­»é”</em> çš„æ¦‚å¿µæ¥è‡ªç™¾ç§‘ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—è¦æ›´æ­£çš„æ˜¯ï¼Œæ­»é”ä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±å•ä¸€çº¿ç¨‹é€ æˆã€‚ä½œä¸ºä¸€ä¸ªiOSåº”ç”¨å¼€å‘è€…ï¼Œæˆ‘ä½¿ç”¨GCDæ¥è¯´æ˜ä¸€ä¸‹ï¼š</p>\n<pre><code class=\"objc\">// ä¸»çº¿ç¨‹ä¸­è°ƒç”¨\ndispatch_sync(dispatch_get_main_queue(), ^{\n    // do something\n})\n</code></pre>\n<p>ä¸Šè¿°ä»£ç å¿…å°†é€ æˆæ­»é”ï¼Œä½†æ˜¯æ­¤ä¾‹åªæ¶‰åŠä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£å°±æ˜¯iOS Appçš„ä¸»çº¿ç¨‹ï¼ˆäº¦ç§°UIçº¿ç¨‹ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOSä¸­ï¼Œ<code>main queue</code>æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œå…¶ä»»åŠ¡åªèƒ½ç”±ä¸»çº¿ç¨‹å»å®Œæˆã€‚è€Œ<code>dispatch_sync</code>ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå› æ­¤ï¼Œå½“ä¸Šè¿°ä»£ç ç”¨åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨æ—¶ï¼Œä¸»çº¿ç¨‹è¢«ä¼šé˜»å¡ï¼Œç„¶åå°†<code>block</code>æ”¾åœ¨<code>main queue</code>ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œ<code>block</code>ä¸­çš„ä»£ç åæ‰é‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œç„¶è€Œä¸»çº¿ç¨‹å·²è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œ<code>main queue</code>ä¸­çš„<code>block</code>ï¼Œæ‰€ä»¥é€ æˆæ­»é”ã€‚</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>æœ¬æ–‡å¯¹çº¿ç¨‹åšäº†ä¸€ä¸ªç®€å•çš„æè¿°ï¼Œåœ¨æ¯ä¸ªAppéƒ½æ¶‰åŠå¤šçº¿ç¨‹å¼€å‘çš„ç°åœ¨ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œé€šè¿‡åŸå­æ“ä½œã€åŒæ­¥ç­‰æ–¹å¼å¯ä»¥ä¿è¯ã€‚è¿˜è®²è¿°äº†ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼Œæœ€åæµ…æµ…åœ°ç‚¹äº†ä¸€ä¸‹æ­»é”çš„æ¦‚å¿µï¼Œç®—æ˜¯ä¸€ç¯‡å†™ç»™çº¿ç¨‹å°ç™½çœ‹çš„å…¥é—¨çº§iOSæ–‡ç« ï¼Œå¦‚æœ‰å†™å¾—ä¸å¥½çš„åœ°æ–¹ï¼Œè¯·å„ä½æ–§æ­£ã€‚</p>\n","excerpt":"<p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéšç€ä¸€ä¸ªç¨‹åºè¢«æ‰“å¼€ï¼Œæ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨å’Œè°ƒåº¦çš„å¼€å§‹ã€‚å¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´ï¼Œç›¸å¯¹äºè¿›ç¨‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ç²’åº¦æ›´å°çš„çº¿ç¨‹ï¼Œå®ƒæ˜¯æˆ‘ä»¬éƒ½éœ€è¦ä¸ä¹‹æ‰“äº¤é“çš„ç”¨æ¥å®ç°å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„åˆ©å™¨ã€‚</p>","more":"<h2 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹</h2><p>è€ç”Ÿå¸¸è°ˆï¼Œä½†è¿˜æ˜¯å…ˆè¯´ä¸€ä¸‹æ¦‚å¿µï¼š</p>\n<blockquote>\n<p><em>çº¿ç¨‹</em>ï¼Œåˆç§°è½»é‡çº§è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆç»„æˆã€‚é€šå¸¸æ„ä¹‰ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªåˆ°å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€å †ç­‰ï¼‰åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºã€‚  </p>\n</blockquote>\n<p>æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p>\n<ol>\n<li>çº¿ç¨‹æœ‰ç§æœ‰çš„æ•°æ®å•å…ƒï¼šä»…ä»…å¯ä»¥è®©å½“å‰çº¿ç¨‹è®¿é—®çš„å¯„å­˜å™¨å’Œæ ˆ</li>\n<li>å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ•°æ®æ®µæˆ–åŒæ—¶æ‰§è¡Œä¸€å—ä»£ç ï¼Œå°±ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å‡ºç°ã€‚</li>\n</ol>\n<p>æ•°æ®æ˜¯å¦ç§æœ‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">çº¿ç¨‹ç§æœ‰</th>\n<th style=\"text-align:center\">çº¿ç¨‹é—´å…±äº«</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">å±€éƒ¨å˜é‡<br>å‡½æ•°å‚æ•°</td>\n<td style=\"text-align:center\">å…¨å±€å˜é‡<br>å †ä¸Šçš„æ•°æ®<br>å‡½æ•°å†…çš„é™æ€å˜é‡<br>ä»£ç </td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"çº¿ç¨‹è°ƒåº¦\"><a href=\"#çº¿ç¨‹è°ƒåº¦\" class=\"headerlink\" title=\"çº¿ç¨‹è°ƒåº¦\"></a>çº¿ç¨‹è°ƒåº¦</h2><p>å¦‚æœçº¿ç¨‹æ•°é‡å°äºç­‰äºå¤„ç†å™¨æ•°é‡æ—¶ï¼Œçº¿ç¨‹æ˜¯çœŸæ­£æ„ä¹‰çš„å¹¶å‘ï¼Œä¸åŒçš„çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚è¿™å¾ˆç†æƒ³ã€‚</p>\n<p>ä½†æ›´ç»å¸¸åœ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾ï¼š</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/cjuwz.png\" alt=\"Concurrency_vs_Parallelism\"></p>\n<p>ä¸Šå›¾ä¸­å¹¶å‘çš„æƒ…å†µæ˜¯é’ˆå¯¹çº¿ç¨‹æ•°é‡å¤§äºå¤„ç†å™¨æ•°é‡ï¼ˆå¤šCPUæˆ–å¤šæ ¸æ—¶ä»£ï¼Œå¤„ç†å™¨æ•°é‡ä¸æ­¢ä¸€ä¸ªï¼‰çš„æƒ…å†µã€‚å­¦è¿‡è®¡ç®—æœºåŸç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿™ç§â€œå¹¶å‘â€æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‡ºæ¥çš„çŠ¶æ€ï¼Œå¿«é€Ÿçš„æ—¶é—´ç‰‡åˆ‡æ¢è®©ç”¨æˆ·è§‰å¾—åƒæ˜¯åŒæ—¶åœ¨æ‰§è¡Œã€‚è¿™ç§æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œç§°ä¸º<em>çº¿ç¨‹è°ƒåº¦</em>ã€‚</p>\n<p>åœ¨çº¿ç¨‹è°ƒåº¦ä¸­ï¼Œçº¿ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p>\n<ul>\n<li>è¿è¡Œï¼šæ‹¥æœ‰æ—¶é—´ç‰‡ï¼Œå¯ä»¥æ‰§è¡Œä»£ç </li>\n<li>å°±ç»ªï¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œéšæ—¶å¯ä»¥è¢«æ‰§è¡Œ</li>\n<li>ç­‰å¾…ï¼šç­‰å¾…IOæˆ–è€…å› ä¸ºå…¶ä»–åŸå› è¢«é˜»å¡ï¼Œç­‰å¾…ç»“æŸåè¿›å…¥å°±ç»ªçŠ¶æ€</li>\n</ul>\n<p>ä¸‰è€…çš„çŠ¶æ€åˆ‡æ¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/eltyq.jpg\" alt=\"\"><br>çº¿ç¨‹æœ‰çŠ¶æ€äº†ï¼Œéœ€è¦ç­‰å¾…è°ƒåº¦çš„å‘ç”Ÿï¼Œè‡ªç„¶å°±æ¶‰åŠåˆ°è½®æ¢è°ƒåº¦å’Œä¼˜å…ˆçº§ã€‚</p>\n<p>è½®æ¢è°ƒåº¦è®©å„ä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œä¸€å°æ®µæ—¶é—´åè¿›å…¥å°±ç»ªçŠ¶æ€æˆ–ç­‰å¾…çŠ¶æ€ï¼Œè€Œä¼˜å…ˆçº§åˆ™å†³å®šäº†CPUè®©å¤„äºå°±ç»ªçŠ¶æ€çš„å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œã€‚ä¼˜å…ˆçº§æ”¹å˜æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>åœ¨æˆ‘ä»¬çš„ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¼˜å…ˆçº§ï¼Œæœ€å¸¸è§çš„ï¼Œå¦‚iOSä¸­GDCçš„<code>global queue</code>:</li>\n</ul>\n<pre><code class=\"Objc\">// åˆ›å»ºä¸€ä¸ªä¼˜å…ˆçº§ä¸ºHIGHçš„å…¨å±€é˜Ÿåˆ—\ndispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);\n</code></pre>\n<ul>\n<li>æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¼šæ ¹æ®åœºæ™¯æ¥é€‚å½“æé«˜çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¢‘ç¹ç­‰å¾…çš„çº¿ç¨‹ï¼ˆ<strong>IOå¯†é›†å‹çº¿ç¨‹</strong>ï¼‰é€šå¸¸åªå ç”¨å¾ˆå°‘çš„æ—¶é—´ï¼Œè¿™ç§çº¿ç¨‹æ¯”ç”¨å®Œæ—¶é—´ç‰‡çš„çº¿ç¨‹ï¼ˆ<strong>CPUå¯†é›†å‹çº¿ç¨‹</strong>ï¼‰æ›´å—æ¬¢è¿ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸­ä¼˜å…ˆçº§æ›´å®¹æ˜“è¢«æé«˜ã€‚</li>\n<li>åœ¨è°ƒåº¦è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨<em>çº¿ç¨‹é¥¿æ­»(Starvation)</em> çš„ç°è±¡ï¼Œå°±æ˜¯ä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ä¸€ç›´å¾—ä¸åˆ°æ—¶é—´ç‰‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿä¼šé€æ­¥æé«˜è¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>\n</ul>\n<h2 id=\"çº¿ç¨‹å®‰å…¨\"><a href=\"#çº¿ç¨‹å®‰å…¨\" class=\"headerlink\" title=\"çº¿ç¨‹å®‰å…¨\"></a>çº¿ç¨‹å®‰å…¨</h2><p>Q : ä¸ºä»€ä¹ˆä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p>\n<p>A : å¦‚ä¸Šæ‰€è¿°ï¼Œçº¿ç¨‹é—´æœ‰å…±äº«çš„æ•°æ®ï¼šå…¨å±€å˜é‡ã€å †ä¸Šçš„æ•°æ®ã€å‡½æ•°å†…çš„é™æ€å˜é‡ã€ä»£ç ç­‰ã€‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¼šå¯¼è‡´ä¿®æ”¹åçš„ç»“æœä¸ç¡®å®šã€‚å¦‚ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡ <code>i</code> æ‰§è¡Œ <code>i++</code>ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½å„è‡ªæ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¯¹<code>i++</code>è¿™ç§æ“ä½œï¼Œçº¿ç¨‹Aå…ˆå°†<code>i</code>çš„å€¼å­˜æ”¾åœ¨çº¿ç¨‹çš„å¯„å­˜å™¨ä¸­ï¼Œæ‰§è¡Œè®¡ç®—åå†èµ‹å€¼å›å»ç»™<code>i</code>è¿™ä¸ªå˜é‡ï¼Œä¸­é—´å¦‚æœçº¿ç¨‹Båœ¨Aèµ‹å€¼ä¹‹å‰å…ˆè·å–åˆ°<code>i</code>çš„å€¼ï¼Œé‚£ä¹ˆæœ€åèµ‹å€¼çš„ç»“æœè‚¯å®šä¸æ­£ç¡®ã€‚è¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨ã€‚</p>\n<p>Q : æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ</p>\n<p>A : ä¿è¯æ•°æ®æˆ–ä»£ç æ®µåœ¨ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ï¼Œæ–¹æ³•æœ‰ï¼šåŸå­æ“ä½œã€åŒæ­¥ã€‚</p>\n<ul>\n<li>åŸå­æ“ä½œï¼ˆAtomicï¼‰<br>åŸå­æ“ä½œï¼Œç®€å•ç‚¹æ¥è¯´å°±æ˜¯å•æ¡æŒ‡ä»¤çš„æ‰§è¡Œã€‚ä½†ä»…é€‚ç”¨äºç‰¹å®šçš„åœºåˆï¼Œåœ¨å¤æ‚çš„åœºåˆä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„æ›´æ”¹çš„åŸå­æ€§ï¼ŒåŸå­æ“ä½œæŒ‡ä»¤å°±åŠ›ä¸ä»å¿ƒäº†ã€‚</li>\n<li>åŒæ­¥ä¸é”<br>åŒæ­¥ä¹Ÿæ˜¯ä¸€ç§ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®æœªç»“æŸçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œè®¿é—®ã€‚åŒæ­¥å¸¸è§çš„æœ‰é”ã€ä¿¡å·é‡ã€ä¸´ç•ŒåŒºç­‰ã€‚</li>\n</ul>\n<h3 id=\"é”\"><a href=\"#é”\" class=\"headerlink\" title=\"é”\"></a>é”</h3><p>åŒæ­¥æœ€å¸¸è§çš„æ“ä½œå°±æ˜¯é”ï¼Œçº¿ç¨‹å†è®¿é—®æ•°æ®ä¹‹å‰è§†å›¾è·å–é”ï¼Œè®¿é—®ç»“æŸåé‡Šæ”¾é”ã€‚åœ¨è·å–é”æ—¶ï¼Œå¦‚æœé”è¢«å ç”¨äº†ï¼Œåˆ™çº¿ç¨‹ä¼šç­‰å¾…ï¼Œç›´åˆ°é”é‡æ–°å¯ç”¨ã€‚</p>\n<p>æœ€ç®€å•çš„ï¼ˆå…³äºé”çš„è¯¦ç»†å†…å®¹ï¼Œä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼‰ï¼š</p>\n<pre><code class=\"objc\">NSLock *theLock = [[NSLock alloc] init];\nif ([theLock lock]) {\n   // éœ€è¦åŒæ­¥çš„ä»£ç \n   [theLock unlock];\n}\n</code></pre>\n<h3 id=\"ä¿¡å·é‡\"><a href=\"#ä¿¡å·é‡\" class=\"headerlink\" title=\"ä¿¡å·é‡\"></a>ä¿¡å·é‡</h3><p>ä¿¡å·é‡ä¹Ÿå¯ä»¥ç”¨åœ¨åŒæ­¥æ–¹é¢ï¼Œä½†æ˜¯è¿™é‡Œæ‰€è¯´çš„æ˜¯äºŒå…ƒä¿¡å·é‡ï¼Œå³åªè¡¨ç¤ºå ç”¨ä¸éå ç”¨ã€‚ä¾‹å¦‚GCDä¸­ï¼š</p>\n<pre><code class=\"objc\">// åˆ›å»ºä¸€ä¸ªäºŒå…ƒä¿¡å·é‡ï¼Œdispatch_semaphore_createçš„å…¥å‚ä¸º0\ndispatch_semaphore_t semaphore = dispatch_semaphore_create(0);\n// ä½¿ç”¨waitè®©semaphoreå‡1\ndispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);\n// ä½¿ç”¨signalè®©semaphoreåŠ 1\ndispatch_semaphore_signal(semaphore);\n</code></pre>\n<p>å½“ä¿¡å·é‡<code>semaphore</code>å°äº0æ—¶ï¼Œçº¿ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°<code>semaphore</code>é‡æ–°å˜æˆ0ã€‚</p>\n<h3 id=\"ä¸´ç•ŒåŒº\"><a href=\"#ä¸´ç•ŒåŒº\" class=\"headerlink\" title=\"ä¸´ç•ŒåŒº\"></a>ä¸´ç•ŒåŒº</h3><p>ä¸´ç•ŒåŒºæ›´å¤šçš„æ˜¯æŒ‡ä¸€ä¸ªè®¿é—®å…±ç”¨èµ„æºçš„ä»£ç å—ï¼Œè€Œè¿™äº›å…±ç”¨èµ„æºåˆæ— æ³•åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„ç‰¹æ€§ã€‚</p>\n<p>ä¿¡å·é‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æœ¬çº¿ç¨‹åˆ›å»ºï¼Œå¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹è¢«è·å–åˆ°å¹¶è°ƒç”¨<code>signal</code>æˆ–<code>wait</code>æ¥æ“ä½œä¿¡å·é‡ã€‚ç›¸å¯¹æ¥è¯´ï¼Œä¸´ç•ŒåŒºæ˜¾å¾—æ›´åŠ ä¸¥æ ¼ã€‚æœ¬çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œåªæœ‰å½“é€€å‡ºä¸´ç•ŒåŒºäº†ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½è®¿é—®ä¸´ç•ŒåŒºçš„ä»£ç å—ã€‚å¦‚ä¸‹ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶è‚¯å®šä¸é™Œç”Ÿï¼š</p>\n<pre><code class=\"objc\">@synchronized(self) {\n    // ä¸´ç•ŒåŒºä»£ç \n}\n</code></pre>\n<h3 id=\"å¯é‡å…¥-Reentrant\"><a href=\"#å¯é‡å…¥-Reentrant\" class=\"headerlink\" title=\"å¯é‡å…¥(Reentrant)\"></a>å¯é‡å…¥(Reentrant)</h3><p>å¯é‡å…¥çš„æ¦‚å¿µï¼Œé€‚ç”¨äºå‡½æ•°ã€‚</p>\n<p>é¦–å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯<em>å‡½æ•°è¢«é‡å…¥</em>ï¼šä¸€ä¸ªå‡½æ•°è¢«é‡å…¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œç”±äºå¤–éƒ¨å› ç´ ï¼ˆå¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼‰æˆ–å†…éƒ¨è°ƒç”¨ï¼ˆé€’å½’å‡½æ•°ï¼‰ï¼Œåˆä¸€æ¬¡è¿›å…¥äº†è¯¥å‡½æ•°ã€‚</p>\n<p>å¯é‡å…¥å‡½æ•°ä¹Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºè¯¥ç§å‡½æ•°è¢«é‡å…¥ä¹‹åä¸ä¼šäº§ç”Ÿä»»ä½•ä¸è‰¯çš„åæœï¼Œæ¯”å¦‚ï¼š</p>\n<pre><code class=\"objc\">- (int)sqr:(int) x {\n    return x * x;\n}\n</code></pre>\n<p>ä¿è¯å¯é‡å…¥ï¼Œéœ€è¦ä¿è¯ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>\n<ul>\n<li>ä¸ä½¿ç”¨é™æ€æˆ–å…¨å±€éconstçš„å˜é‡</li>\n<li>ä¸è¿”è¿˜é™æ€æˆ–å…¨å±€éconstå˜é‡çš„æŒ‡é’ˆ</li>\n<li>ä»…ä¾èµ–å…¥å‚</li>\n<li>ä¸è°ƒç”¨ä¸å¯é‡å…¥çš„å‡½æ•°</li>\n</ul>\n<h2 id=\"çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\"><a href=\"#çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\" class=\"headerlink\" title=\"çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»\"></a>çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»</h2><p>çº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»ï¼Œä¸€ç›´éƒ½çº ç¼ ä¸æ¸…ã€‚</p>\n<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°ä¸¤ç§é˜Ÿåˆ—ï¼Œä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼ŒäºŒè€…çš„åŒºåˆ«æ˜¯ï¼šä¸²è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯æœ‰åºè¢«æ‰§è¡Œçš„ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚</p>\n<p>ä¸¾ä¸ªå¯èƒ½ä¸å¤ªæ°å½“çš„ä¾‹å­ï¼šçº¿ç¨‹æ˜¯æ¶ˆè´¹è€…ï¼Œé˜Ÿåˆ—æ˜¯ä¼ è¾“çº½å¸¦ï¼Œä»»åŠ¡æ˜¯é¢åŒ…ï¼Œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæ¯”ä½œå°†é¢åŒ…åƒæ‰ã€‚å¯¹äºé¢åŒ…å‘¢ï¼Œæˆ‘ï¼ˆå½“å‰çº¿ç¨‹ï¼‰å¯ä»¥è‡ªå·±äº«ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ è¾“å¸¦ç»™å…¶ä»–æ¶ˆè´¹è€…äº«ç”¨ï¼ˆä»»åŠ¡å¯ä»¥è‡ªå·±å®Œæˆï¼Œä¹Ÿå¯ä»¥äº¤ç”±å…¶ä»–çº¿ç¨‹å»å®Œæˆï¼‰ã€‚</p>\n<p>ä¸²è¡Œé˜Ÿåˆ—ï¼šå®ƒæ˜¯æœ‰åºçš„ä¼ è¾“å¸¦ï¼Œç¼–å·æ˜¯SQï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ‰€ä»¥æˆ‘å¾€ä¸Šé¢æ”¾äº†ä¸€ä¸ªé¢åŒ…ï¼Œç»™å…¶ä»–äººäº«ç”¨ï¼Œæ­¤æ—¶æœ‰æ¶ˆè´¹è€…Aæ‹¿äº†ï¼Œå¹¶å¼€å§‹åƒã€‚åŒæ—¶æ¶ˆè´¹è€…Bä¹Ÿæƒ³åˆ†äº«ä»–çš„é¢åŒ…ï¼Œä»–ä¹ŸæŠŠé¢åŒ…æ”¾åˆ°SQä¸Šï¼Œé‚£å°±è¦ç­‰å¾…Aåƒå®Œé¢åŒ…äº†ï¼ŒBåˆ†äº«çš„é¢åŒ…æ‰ä¼šè¢«æ¶ˆè´¹ã€‚æ­¤æ—¶ä¼ è¾“å¸¦SQå°±è¢«æš‚åœäº†ã€‚</p>\n<p>å¹¶è¡Œé˜Ÿåˆ—ï¼šä»»åŠ¡çš„æ‰§è¡Œæ—¶æ— éœ€ç­‰å¾…å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç¼–å·æ˜¯CQï¼ŒåŒæ ·ï¼Œæˆ‘çš„é¢åŒ…åƒä¸å®Œï¼Œæ”¾åˆ°CQä¸Šï¼ŒAæ­£åœ¨äº«ç”¨ï¼Œæ­¤æ—¶Bä¹Ÿå°†é¢åŒ…æ”¾åœ¨CQä¸Šï¼Œä½†æ˜¯Aæ— æ³•äº«ç”¨ï¼ˆå› ä¸ºæ­£åœ¨äº«ç”¨æˆ‘çš„ï¼‰ï¼Œå› æ­¤CQå°±å‘å‡ºè­¦é¸£ï¼Œå«æ¥äº†æ¶ˆè´¹è€…Cæ¥å°†Bçš„é¢åŒ…åƒæ‰ï¼Œä»¥ç»´æŒCQçš„ç»§ç»­è¿è½¬ï¼Œå½“Aåƒå®Œåï¼Œè¿˜å¯ä»¥ç»§ç»­äº«ç”¨å…¶ä»–äººåˆ†äº«çš„é¢åŒ…ã€‚æ‰€ä»¥ï¼Œå¹¶è¡Œé˜Ÿåˆ—å¹¶ä¸æ˜¯ä¸€å®šä¼šäº§ç”Ÿæ–°çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«ç»§ç»­å«æ¥æ‰§è¡Œä»»åŠ¡ï¼Œåªæ˜¯å¹³æ—¶çº¿ç¨‹æ‰§è¡Œå®Œå°±è¢«é”€æ¯ï¼Œæ‰€ä»¥é˜Ÿåˆ—åœ¨éœ€è¦æ‰§è¡Œæ–°ä»»åŠ¡çš„æ—¶å€™å°±ç»™æˆ‘ä»¬é€ æˆä¸€ä¸ªåˆ›å»ºæ–°çº¿ç¨‹çš„å‡è±¡ã€‚</p>\n<h2 id=\"æ­»é”\"><a href=\"#æ­»é”\" class=\"headerlink\" title=\"æ­»é”\"></a>æ­»é”</h2><p>é¦–å…ˆï¼Œæ¦‚å¿µï¼š</p>\n<blockquote>\n<p><em>æ­»é”</em> æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ã€‚  </p>\n</blockquote>\n<p>æ­»é”ä¸éœ€è¦å¤šè¯´ï¼Œç›¸ä¿¡å­¦è¿‡è®¡ç®—æœºç†è®ºçš„åŒå­¦éƒ½çŸ¥é“ã€‚å¤šçº¿ç¨‹æ”¹å–„äº†ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œæé«˜äº†ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œå¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ï¼Œæ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¿›ç¨‹å°±æ— æ³•ç»§ç»­æ¨è¿›ã€‚ç”¨æˆ·å¯¹ç¨‹åºå†…éƒ¨çš„è¿ä½œä¸çŸ¥æƒ…ï¼Œä½†çœ‹åˆ°ç•Œé¢æ¯«æ— å“åº”ï¼Œæ€ä¹ˆç‚¹å‡»éƒ½æ²¡ç”¨ï¼Œæ­¤æ—¶å°±ä¼šè´£æ€ªåº”ç”¨çš„ä¸å®Œå–„ã€‚</p>\n<p>ä¸Šè¿°å…³äº<em>æ­»é”</em> çš„æ¦‚å¿µæ¥è‡ªç™¾ç§‘ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—è¦æ›´æ­£çš„æ˜¯ï¼Œæ­»é”ä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±å•ä¸€çº¿ç¨‹é€ æˆã€‚ä½œä¸ºä¸€ä¸ªiOSåº”ç”¨å¼€å‘è€…ï¼Œæˆ‘ä½¿ç”¨GCDæ¥è¯´æ˜ä¸€ä¸‹ï¼š</p>\n<pre><code class=\"objc\">// ä¸»çº¿ç¨‹ä¸­è°ƒç”¨\ndispatch_sync(dispatch_get_main_queue(), ^{\n    // do something\n})\n</code></pre>\n<p>ä¸Šè¿°ä»£ç å¿…å°†é€ æˆæ­»é”ï¼Œä½†æ˜¯æ­¤ä¾‹åªæ¶‰åŠä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£å°±æ˜¯iOS Appçš„ä¸»çº¿ç¨‹ï¼ˆäº¦ç§°UIçº¿ç¨‹ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOSä¸­ï¼Œ<code>main queue</code>æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œå…¶ä»»åŠ¡åªèƒ½ç”±ä¸»çº¿ç¨‹å»å®Œæˆã€‚è€Œ<code>dispatch_sync</code>ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå› æ­¤ï¼Œå½“ä¸Šè¿°ä»£ç ç”¨åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨æ—¶ï¼Œä¸»çº¿ç¨‹è¢«ä¼šé˜»å¡ï¼Œç„¶åå°†<code>block</code>æ”¾åœ¨<code>main queue</code>ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œ<code>block</code>ä¸­çš„ä»£ç åæ‰é‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œç„¶è€Œä¸»çº¿ç¨‹å·²è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œ<code>main queue</code>ä¸­çš„<code>block</code>ï¼Œæ‰€ä»¥é€ æˆæ­»é”ã€‚</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>æœ¬æ–‡å¯¹çº¿ç¨‹åšäº†ä¸€ä¸ªç®€å•çš„æè¿°ï¼Œåœ¨æ¯ä¸ªAppéƒ½æ¶‰åŠå¤šçº¿ç¨‹å¼€å‘çš„ç°åœ¨ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œé€šè¿‡åŸå­æ“ä½œã€åŒæ­¥ç­‰æ–¹å¼å¯ä»¥ä¿è¯ã€‚è¿˜è®²è¿°äº†ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—ï¼Œæœ€åæµ…æµ…åœ°ç‚¹äº†ä¸€ä¸‹æ­»é”çš„æ¦‚å¿µï¼Œç®—æ˜¯ä¸€ç¯‡å†™ç»™çº¿ç¨‹å°ç™½çœ‹çš„å…¥é—¨çº§iOSæ–‡ç« ï¼Œå¦‚æœ‰å†™å¾—ä¸å¥½çš„åœ°æ–¹ï¼Œè¯·å„ä½æ–§æ­£ã€‚</p>"},{"title":"ç±»æ–¹æ³•çš„Blockä¸ä¼šå†…å­˜æ³„æ¼....å—ï¼Ÿï¼","date":"2016-07-17T11:57:39.000Z","typora-copy-images-to":"ipic","_content":"\nBlockåœ¨å¾ˆå¤šæ—¶å€™ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ï¼Œå·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ã€‚å¾ˆå¤šæ–‡ç« åœ¨è®²è¿°Blockçš„æ—¶å€™éƒ½ä¼šè°ˆåŠè¿™ä¸ªé—®é¢˜ï¼š    \nåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­æœ‰ç€å¯¹Blockçš„å¼ºå¼•ç”¨ï¼Œè€Œåœ¨è¯¥Blockä¸­åˆä¿ç•™ç€å¯¹è¯¥å¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å¾ªç¯å¼•ç”¨æ‰€å¸¦æ¥çš„åæœç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“ï¼Œæœ‰ä¸€ä¸ªç¯å­˜åœ¨ï¼Œå°±æ„å‘³ç€æ¯æ¬¡åˆ›å»ºè¯¥å¯¹è±¡ï¼Œå°±ä¼šå æ®ä¸€å®šçš„å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œç­‰åˆ°å†…å­˜ä¸è¶³ä»¥ç»§ç»­ç»´æŒè¯¥Appçš„å­˜åœ¨æ—¶ï¼Œå°±ä¼šCrashã€‚    \n\n<!--more-->\nã€€ã€€å¸¸è§çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨__weakæˆ–å°†æœ‰å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨çš„å¯¹è±¡ä½œä¸ºBlockçš„å‚æ•°ä¼ å…¥ã€‚    \nã€€ã€€å¾ªç¯å¼•ç”¨æˆ‘ä¸æ‰“ç®—åœ¨æ­¤å±•å¼€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¥½çš„æ–‡ç« å·²ç»è®²å¾—å¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯è‡ªè¡Œæ‰¾æ‰¾ã€‚    \nã€€ã€€\nã€€ã€€å¾ˆå¤šæ–‡ç« æåŠï¼šå¾ªç¯å¼•ç”¨æ‰€é’ˆå¯¹çš„æ˜¯å¯¹è±¡ï¼Œèƒ½å¤Ÿå½¢æˆç¯çš„æ˜¯â€œå¯¹è±¡â€”â€”Blockâ€”â€”å¯¹è±¡â€ã€‚æ¢ç§æ–¹å¼æ€è€ƒï¼Œç±»æ–¹æ³•å°±ä¸ä¼šé€ æˆç›¸ä¼¼çš„å†…å­˜æ³„æ¼ã€‚çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿï¼    \nã€€ã€€**ä¸æ˜¯ã€‚**    \nã€€ã€€**ä¸æ˜¯ã€‚**    \nã€€ã€€**ä¸æ˜¯ã€‚**    \n\n## ä¸¾ä¸ªæ —å­\n\nã€€ã€€å¹³å¸¸ä½¿ç”¨UIViewçš„Animationä¹‹æ—¶ï¼Œä¾‹å¦‚`[UIView animateWithDuration:animations:];`ä½¿ç”¨Blockå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å°†è®¾ç½®éœ€è¦å˜æ¢çš„å±æ€§ã€‚å¯¹äºç±»æ–¹æ³•å¯ä»¥æ”¾å¿ƒåœ°å†™selfè€Œä¸å¿…æ‹…å¿ƒå¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äº`[UIView animateWithDuration: animations: completion:];`é™¤äº†åœ¨åŠ¨ç”»ç»“æŸæ—¶åšä¸€äº›æ“ä½œå¤–ï¼Œå½“æˆ‘ä»¬éœ€è¦åŠ¨ç”»å¾ªç¯æ’­æ”¾çš„æ—¶å€™ï¼Œå¾ˆå¸¸ç”¨çš„æ–¹æ³•ç±»ä¼¼äºï¼š     \n\n\n``` objectivec\n- (void)startAnimation {\n    [UIView animateWithDuration:3.5 animations:^{\n        CGRect frame = self.initFrame;\n        frame.origin.y += 2 * self.initFrame.size.height;\n        self.frame = frame;\n    } completion:^(BOOL finished) {\n        self.frame = self.initFrame;\n        [self startAnimation];\t\t// é€’å½’è°ƒç”¨ï¼Œå†æ¬¡æ‰§è¡Œæ­¤å‡½æ•°\n    }];\n}\n```\n\nã€€ã€€åˆ«å‘Šè¯‰æˆ‘ä½ æ²¡è¿™æ ·ç”¨è¿‡ï¼Œç§‘ç§‘ã€‚    \n\nã€€ã€€å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™ä¹ˆå†™ï¼Œå¯èƒ½å·²ç»åŸ‹ä¸‹äº†æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„å±é™©ã€‚    \n\nã€€ã€€æˆ‘ä»¬é€šè¿‡Instrumentsæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„æœ‰å†…å­˜æ³„æ¼(ä¾‹å­ä¸­EZScanNetGridæ˜¯æˆ‘è‡ªå®šä¹‰çš„View,Viewä¸­æœ‰æ‰§è¡ŒåŠ¨ç”»çš„ä»£ç ï¼Œè§ä¸Šæ–¹ä»£ç å—ï¼ŒQRCodeScanneræ˜¯å¯¹åº”çš„Controller)ï¼š    \n\n1. å¤šæ¬¡åˆ›å»ºQRCodeScannerå¹¶é”€æ¯ï¼š\n   ![block_self](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/g3gqy.jpg)    \n   QRCodeScannerè¢«é”€æ¯åï¼š\n   ![block_self2](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/97ewo.jpg)     \n\n\n2. å°†ä¸Šè¿°ä»£ç çš„selfæ”¹æˆweakSelfï¼Œå†æ¥çœ‹çœ‹Instrumentsï¼š\n   ![block_weakSelf](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/jnbwl.jpg)     \n   QRCodeScannerè¢«é”€æ¯åï¼š\n   ![block_weakSelf2](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/p1pae.jpg)     \n\n\nã€€ã€€ç»“æœå¾ˆæ˜æ˜¾ï¼Œè‹¥æ˜¯ä½¿ç”¨selfï¼ŒEZScanNetGridè¿™ä¸ªViewä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå› ä¸ºUIView Animationå¯¹å…¶çš„å¼ºå¼•ç”¨ä½¿å…¶ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´è‡³Blocké‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚ä½†æ˜¯è¿™æ®µä»£ç é‡Œå¯ä»¥çœ‹åˆ°ï¼Œcompletionä¸­åˆç»§ç»­è°ƒç”¨äº†`[self startAnimation];`å› æ­¤ï¼Œç³»ç»Ÿä¼šç»§ç»­ä¿ç•™å¯¹EZScanNetGridçš„å¼•ç”¨ï¼Œä»è€Œå³ä½¿EZScanNetGridçš„SuperViewè¢«é”€æ¯äº†ï¼ŒEZScanNetGridè¿˜æ˜¯æ²¡æœ‰è¢«é”€æ¯ï¼Œæ— é™åœ°å¾ªç¯è°ƒç”¨ç€åŠ¨ç”»ï¼Œå æ®å†…å­˜çš„åŒæ—¶ä¹Ÿè€—è´¹ç€CPUã€‚:(\n\nã€€ã€€æ­¤æ–‡æœ‰ç‚¹æ™¦æ¶©ï¼Œé™„ä¸Š[DEMOåœ°å€](https://github.com/objchris/ChrisDerDemos/tree/master/ClassBlockDemo)\n\n\n## æ€»ç»“\n\n1. å…³äºBlockçš„å†…å­˜æ³„æ¼ä¸åªæ˜¯å¾ªç¯å¼•ç”¨ä¼šå¼•èµ·ã€‚\n2. ä¸ä»…ä»…æ˜¯UIViewï¼Œå…¶ä»–å°†Blockä½œä¸ºå‚æ•°çš„ç±»æ–¹æ³•ï¼Œå¦‚æœåœ¨ä¸€ä¸ªBlockä¸­é€’å½’è°ƒç”¨åˆ°æœ¬Blockï¼Œè®°å¾—å°†å¼•ç”¨çš„å¯¹è±¡åŠ ä¸Š\\_\\_weakã€‚ä½ è¯´ï¼Œåœ¨Blockè¢«è°ƒç”¨çš„æ—¶å€™selfè¢«é‡Šæ”¾äº†æ€ä¹ˆåŠï¼Ÿï¼å»çœ‹çœ‹\\_\\_strongçš„èµ„æ–™å§ã€‚\n3. ~~å¾ˆå¤šiOSçš„ç±»æ–¹æ³•ä¼ å…¥çš„Blockæ˜¯\\_NSConcreteStackBlockï¼Œå¯è§\\_NSConcreteStackBlockä¹Ÿä¼šå¯¹Blockä¸­çš„å¯¹è±¡ä¿æŒå¼ºå¼•ç”¨ã€‚(å¾…è€ƒç©¶)~~ç¡®å®ï¼Œæ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨çš„blockéƒ½æ˜¯StackBlockï¼Œè¡¨é¢çœ‹èµ·æ¥ç³»ç»ŸAPIä¼ å…¥çš„Blockéƒ½æ˜¯StackBlockï¼Œä½†æ˜¯ä»¥ä¸‹å››ç§æƒ…å†µï¼š\n   1.æ‰‹åŠ¨è°ƒç”¨copy    \n   2.Blockæ˜¯å‡½æ•°çš„è¿”å›å€¼    \n   3.Blockè¢«å¼ºå¼•ç”¨ï¼ŒBlockè¢«èµ‹å€¼ç»™__strongæˆ–è€…idç±»å‹    \n   4.è°ƒç”¨ç³»ç»ŸAPIå…¥å‚ä¸­å«æœ‰usingBlcokçš„æ–¹æ³•    \n   ç³»ç»Ÿéƒ½ä¼šé»˜è®¤è°ƒç”¨copyæ–¹æ³•æŠŠBlockå¤åˆ¶åˆ°å †ä¸­ï¼Œå˜æˆMallocBlockï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡ŒæŒæœ‰ã€‚\n4. å…³äºARCå’ŒMRCä¸‹çš„ä¸‰ç§Blockæ˜¯å¦èƒ½æ‰§è¡Œï¼Œè¯·åšåšè¿™å‡ é“æµ‹è¯•é¢˜[Objective-C Blocks Quiz](http://blog.parse.com/learn/engineering/objective-c-blocks-quiz/)\n\n","source":"_posts/ç±»æ–¹æ³•Blockå†…å­˜æ³„æ¼.md","raw":"---\ntitle: ç±»æ–¹æ³•çš„Blockä¸ä¼šå†…å­˜æ³„æ¼....å—ï¼Ÿï¼\ndate: 2016-7-17 19:57:39\ntags: \n- Block\ntypora-copy-images-to: ipic\n---\n\nBlockåœ¨å¾ˆå¤šæ—¶å€™ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ï¼Œå·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ã€‚å¾ˆå¤šæ–‡ç« åœ¨è®²è¿°Blockçš„æ—¶å€™éƒ½ä¼šè°ˆåŠè¿™ä¸ªé—®é¢˜ï¼š    \nåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­æœ‰ç€å¯¹Blockçš„å¼ºå¼•ç”¨ï¼Œè€Œåœ¨è¯¥Blockä¸­åˆä¿ç•™ç€å¯¹è¯¥å¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å¾ªç¯å¼•ç”¨æ‰€å¸¦æ¥çš„åæœç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“ï¼Œæœ‰ä¸€ä¸ªç¯å­˜åœ¨ï¼Œå°±æ„å‘³ç€æ¯æ¬¡åˆ›å»ºè¯¥å¯¹è±¡ï¼Œå°±ä¼šå æ®ä¸€å®šçš„å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œç­‰åˆ°å†…å­˜ä¸è¶³ä»¥ç»§ç»­ç»´æŒè¯¥Appçš„å­˜åœ¨æ—¶ï¼Œå°±ä¼šCrashã€‚    \n\n<!--more-->\nã€€ã€€å¸¸è§çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨__weakæˆ–å°†æœ‰å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨çš„å¯¹è±¡ä½œä¸ºBlockçš„å‚æ•°ä¼ å…¥ã€‚    \nã€€ã€€å¾ªç¯å¼•ç”¨æˆ‘ä¸æ‰“ç®—åœ¨æ­¤å±•å¼€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¥½çš„æ–‡ç« å·²ç»è®²å¾—å¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯è‡ªè¡Œæ‰¾æ‰¾ã€‚    \nã€€ã€€\nã€€ã€€å¾ˆå¤šæ–‡ç« æåŠï¼šå¾ªç¯å¼•ç”¨æ‰€é’ˆå¯¹çš„æ˜¯å¯¹è±¡ï¼Œèƒ½å¤Ÿå½¢æˆç¯çš„æ˜¯â€œå¯¹è±¡â€”â€”Blockâ€”â€”å¯¹è±¡â€ã€‚æ¢ç§æ–¹å¼æ€è€ƒï¼Œç±»æ–¹æ³•å°±ä¸ä¼šé€ æˆç›¸ä¼¼çš„å†…å­˜æ³„æ¼ã€‚çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿï¼    \nã€€ã€€**ä¸æ˜¯ã€‚**    \nã€€ã€€**ä¸æ˜¯ã€‚**    \nã€€ã€€**ä¸æ˜¯ã€‚**    \n\n## ä¸¾ä¸ªæ —å­\n\nã€€ã€€å¹³å¸¸ä½¿ç”¨UIViewçš„Animationä¹‹æ—¶ï¼Œä¾‹å¦‚`[UIView animateWithDuration:animations:];`ä½¿ç”¨Blockå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å°†è®¾ç½®éœ€è¦å˜æ¢çš„å±æ€§ã€‚å¯¹äºç±»æ–¹æ³•å¯ä»¥æ”¾å¿ƒåœ°å†™selfè€Œä¸å¿…æ‹…å¿ƒå¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äº`[UIView animateWithDuration: animations: completion:];`é™¤äº†åœ¨åŠ¨ç”»ç»“æŸæ—¶åšä¸€äº›æ“ä½œå¤–ï¼Œå½“æˆ‘ä»¬éœ€è¦åŠ¨ç”»å¾ªç¯æ’­æ”¾çš„æ—¶å€™ï¼Œå¾ˆå¸¸ç”¨çš„æ–¹æ³•ç±»ä¼¼äºï¼š     \n\n\n``` objectivec\n- (void)startAnimation {\n    [UIView animateWithDuration:3.5 animations:^{\n        CGRect frame = self.initFrame;\n        frame.origin.y += 2 * self.initFrame.size.height;\n        self.frame = frame;\n    } completion:^(BOOL finished) {\n        self.frame = self.initFrame;\n        [self startAnimation];\t\t// é€’å½’è°ƒç”¨ï¼Œå†æ¬¡æ‰§è¡Œæ­¤å‡½æ•°\n    }];\n}\n```\n\nã€€ã€€åˆ«å‘Šè¯‰æˆ‘ä½ æ²¡è¿™æ ·ç”¨è¿‡ï¼Œç§‘ç§‘ã€‚    \n\nã€€ã€€å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™ä¹ˆå†™ï¼Œå¯èƒ½å·²ç»åŸ‹ä¸‹äº†æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„å±é™©ã€‚    \n\nã€€ã€€æˆ‘ä»¬é€šè¿‡Instrumentsæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„æœ‰å†…å­˜æ³„æ¼(ä¾‹å­ä¸­EZScanNetGridæ˜¯æˆ‘è‡ªå®šä¹‰çš„View,Viewä¸­æœ‰æ‰§è¡ŒåŠ¨ç”»çš„ä»£ç ï¼Œè§ä¸Šæ–¹ä»£ç å—ï¼ŒQRCodeScanneræ˜¯å¯¹åº”çš„Controller)ï¼š    \n\n1. å¤šæ¬¡åˆ›å»ºQRCodeScannerå¹¶é”€æ¯ï¼š\n   ![block_self](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/g3gqy.jpg)    \n   QRCodeScannerè¢«é”€æ¯åï¼š\n   ![block_self2](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/97ewo.jpg)     \n\n\n2. å°†ä¸Šè¿°ä»£ç çš„selfæ”¹æˆweakSelfï¼Œå†æ¥çœ‹çœ‹Instrumentsï¼š\n   ![block_weakSelf](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/jnbwl.jpg)     \n   QRCodeScannerè¢«é”€æ¯åï¼š\n   ![block_weakSelf2](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/p1pae.jpg)     \n\n\nã€€ã€€ç»“æœå¾ˆæ˜æ˜¾ï¼Œè‹¥æ˜¯ä½¿ç”¨selfï¼ŒEZScanNetGridè¿™ä¸ªViewä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå› ä¸ºUIView Animationå¯¹å…¶çš„å¼ºå¼•ç”¨ä½¿å…¶ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´è‡³Blocké‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚ä½†æ˜¯è¿™æ®µä»£ç é‡Œå¯ä»¥çœ‹åˆ°ï¼Œcompletionä¸­åˆç»§ç»­è°ƒç”¨äº†`[self startAnimation];`å› æ­¤ï¼Œç³»ç»Ÿä¼šç»§ç»­ä¿ç•™å¯¹EZScanNetGridçš„å¼•ç”¨ï¼Œä»è€Œå³ä½¿EZScanNetGridçš„SuperViewè¢«é”€æ¯äº†ï¼ŒEZScanNetGridè¿˜æ˜¯æ²¡æœ‰è¢«é”€æ¯ï¼Œæ— é™åœ°å¾ªç¯è°ƒç”¨ç€åŠ¨ç”»ï¼Œå æ®å†…å­˜çš„åŒæ—¶ä¹Ÿè€—è´¹ç€CPUã€‚:(\n\nã€€ã€€æ­¤æ–‡æœ‰ç‚¹æ™¦æ¶©ï¼Œé™„ä¸Š[DEMOåœ°å€](https://github.com/objchris/ChrisDerDemos/tree/master/ClassBlockDemo)\n\n\n## æ€»ç»“\n\n1. å…³äºBlockçš„å†…å­˜æ³„æ¼ä¸åªæ˜¯å¾ªç¯å¼•ç”¨ä¼šå¼•èµ·ã€‚\n2. ä¸ä»…ä»…æ˜¯UIViewï¼Œå…¶ä»–å°†Blockä½œä¸ºå‚æ•°çš„ç±»æ–¹æ³•ï¼Œå¦‚æœåœ¨ä¸€ä¸ªBlockä¸­é€’å½’è°ƒç”¨åˆ°æœ¬Blockï¼Œè®°å¾—å°†å¼•ç”¨çš„å¯¹è±¡åŠ ä¸Š\\_\\_weakã€‚ä½ è¯´ï¼Œåœ¨Blockè¢«è°ƒç”¨çš„æ—¶å€™selfè¢«é‡Šæ”¾äº†æ€ä¹ˆåŠï¼Ÿï¼å»çœ‹çœ‹\\_\\_strongçš„èµ„æ–™å§ã€‚\n3. ~~å¾ˆå¤šiOSçš„ç±»æ–¹æ³•ä¼ å…¥çš„Blockæ˜¯\\_NSConcreteStackBlockï¼Œå¯è§\\_NSConcreteStackBlockä¹Ÿä¼šå¯¹Blockä¸­çš„å¯¹è±¡ä¿æŒå¼ºå¼•ç”¨ã€‚(å¾…è€ƒç©¶)~~ç¡®å®ï¼Œæ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨çš„blockéƒ½æ˜¯StackBlockï¼Œè¡¨é¢çœ‹èµ·æ¥ç³»ç»ŸAPIä¼ å…¥çš„Blockéƒ½æ˜¯StackBlockï¼Œä½†æ˜¯ä»¥ä¸‹å››ç§æƒ…å†µï¼š\n   1.æ‰‹åŠ¨è°ƒç”¨copy    \n   2.Blockæ˜¯å‡½æ•°çš„è¿”å›å€¼    \n   3.Blockè¢«å¼ºå¼•ç”¨ï¼ŒBlockè¢«èµ‹å€¼ç»™__strongæˆ–è€…idç±»å‹    \n   4.è°ƒç”¨ç³»ç»ŸAPIå…¥å‚ä¸­å«æœ‰usingBlcokçš„æ–¹æ³•    \n   ç³»ç»Ÿéƒ½ä¼šé»˜è®¤è°ƒç”¨copyæ–¹æ³•æŠŠBlockå¤åˆ¶åˆ°å †ä¸­ï¼Œå˜æˆMallocBlockï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡ŒæŒæœ‰ã€‚\n4. å…³äºARCå’ŒMRCä¸‹çš„ä¸‰ç§Blockæ˜¯å¦èƒ½æ‰§è¡Œï¼Œè¯·åšåšè¿™å‡ é“æµ‹è¯•é¢˜[Objective-C Blocks Quiz](http://blog.parse.com/learn/engineering/objective-c-blocks-quiz/)\n\n","slug":"ç±»æ–¹æ³•Blockå†…å­˜æ³„æ¼","published":1,"updated":"2018-03-07T08:05:25.209Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12b9000ecqy8asztft6a","content":"<p>Blockåœ¨å¾ˆå¤šæ—¶å€™ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ï¼Œå·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ã€‚å¾ˆå¤šæ–‡ç« åœ¨è®²è¿°Blockçš„æ—¶å€™éƒ½ä¼šè°ˆåŠè¿™ä¸ªé—®é¢˜ï¼š<br>åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­æœ‰ç€å¯¹Blockçš„å¼ºå¼•ç”¨ï¼Œè€Œåœ¨è¯¥Blockä¸­åˆä¿ç•™ç€å¯¹è¯¥å¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å¾ªç¯å¼•ç”¨æ‰€å¸¦æ¥çš„åæœç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“ï¼Œæœ‰ä¸€ä¸ªç¯å­˜åœ¨ï¼Œå°±æ„å‘³ç€æ¯æ¬¡åˆ›å»ºè¯¥å¯¹è±¡ï¼Œå°±ä¼šå æ®ä¸€å®šçš„å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œç­‰åˆ°å†…å­˜ä¸è¶³ä»¥ç»§ç»­ç»´æŒè¯¥Appçš„å­˜åœ¨æ—¶ï¼Œå°±ä¼šCrashã€‚    </p>\n<a id=\"more\"></a>\n<p>ã€€ã€€å¸¸è§çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨__weakæˆ–å°†æœ‰å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨çš„å¯¹è±¡ä½œä¸ºBlockçš„å‚æ•°ä¼ å…¥ã€‚<br>ã€€ã€€å¾ªç¯å¼•ç”¨æˆ‘ä¸æ‰“ç®—åœ¨æ­¤å±•å¼€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¥½çš„æ–‡ç« å·²ç»è®²å¾—å¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯è‡ªè¡Œæ‰¾æ‰¾ã€‚<br>ã€€ã€€<br>ã€€ã€€å¾ˆå¤šæ–‡ç« æåŠï¼šå¾ªç¯å¼•ç”¨æ‰€é’ˆå¯¹çš„æ˜¯å¯¹è±¡ï¼Œèƒ½å¤Ÿå½¢æˆç¯çš„æ˜¯â€œå¯¹è±¡â€”â€”Blockâ€”â€”å¯¹è±¡â€ã€‚æ¢ç§æ–¹å¼æ€è€ƒï¼Œç±»æ–¹æ³•å°±ä¸ä¼šé€ æˆç›¸ä¼¼çš„å†…å­˜æ³„æ¼ã€‚çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿï¼<br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong><br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong><br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong>    </p>\n<h2 id=\"ä¸¾ä¸ªæ —å­\"><a href=\"#ä¸¾ä¸ªæ —å­\" class=\"headerlink\" title=\"ä¸¾ä¸ªæ —å­\"></a>ä¸¾ä¸ªæ —å­</h2><p>ã€€ã€€å¹³å¸¸ä½¿ç”¨UIViewçš„Animationä¹‹æ—¶ï¼Œä¾‹å¦‚<code>[UIView animateWithDuration:animations:];</code>ä½¿ç”¨Blockå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å°†è®¾ç½®éœ€è¦å˜æ¢çš„å±æ€§ã€‚å¯¹äºç±»æ–¹æ³•å¯ä»¥æ”¾å¿ƒåœ°å†™selfè€Œä¸å¿…æ‹…å¿ƒå¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äº<code>[UIView animateWithDuration: animations: completion:];</code>é™¤äº†åœ¨åŠ¨ç”»ç»“æŸæ—¶åšä¸€äº›æ“ä½œå¤–ï¼Œå½“æˆ‘ä»¬éœ€è¦åŠ¨ç”»å¾ªç¯æ’­æ”¾çš„æ—¶å€™ï¼Œå¾ˆå¸¸ç”¨çš„æ–¹æ³•ç±»ä¼¼äºï¼š     </p>\n<pre><code class=\"objectivec\">- (void)startAnimation {\n    [UIView animateWithDuration:3.5 animations:^{\n        CGRect frame = self.initFrame;\n        frame.origin.y += 2 * self.initFrame.size.height;\n        self.frame = frame;\n    } completion:^(BOOL finished) {\n        self.frame = self.initFrame;\n        [self startAnimation];        // é€’å½’è°ƒç”¨ï¼Œå†æ¬¡æ‰§è¡Œæ­¤å‡½æ•°\n    }];\n}\n</code></pre>\n<p>ã€€ã€€åˆ«å‘Šè¯‰æˆ‘ä½ æ²¡è¿™æ ·ç”¨è¿‡ï¼Œç§‘ç§‘ã€‚    </p>\n<p>ã€€ã€€å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™ä¹ˆå†™ï¼Œå¯èƒ½å·²ç»åŸ‹ä¸‹äº†æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„å±é™©ã€‚    </p>\n<p>ã€€ã€€æˆ‘ä»¬é€šè¿‡Instrumentsæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„æœ‰å†…å­˜æ³„æ¼(ä¾‹å­ä¸­EZScanNetGridæ˜¯æˆ‘è‡ªå®šä¹‰çš„View,Viewä¸­æœ‰æ‰§è¡ŒåŠ¨ç”»çš„ä»£ç ï¼Œè§ä¸Šæ–¹ä»£ç å—ï¼ŒQRCodeScanneræ˜¯å¯¹åº”çš„Controller)ï¼š    </p>\n<ol>\n<li>å¤šæ¬¡åˆ›å»ºQRCodeScannerå¹¶é”€æ¯ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/g3gqy.jpg\" alt=\"block_self\"><br>QRCodeScannerè¢«é”€æ¯åï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/97ewo.jpg\" alt=\"block_self2\">     </li>\n</ol>\n<ol>\n<li>å°†ä¸Šè¿°ä»£ç çš„selfæ”¹æˆweakSelfï¼Œå†æ¥çœ‹çœ‹Instrumentsï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/jnbwl.jpg\" alt=\"block_weakSelf\"><br>QRCodeScannerè¢«é”€æ¯åï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/p1pae.jpg\" alt=\"block_weakSelf2\">     </li>\n</ol>\n<p>ã€€ã€€ç»“æœå¾ˆæ˜æ˜¾ï¼Œè‹¥æ˜¯ä½¿ç”¨selfï¼ŒEZScanNetGridè¿™ä¸ªViewä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå› ä¸ºUIView Animationå¯¹å…¶çš„å¼ºå¼•ç”¨ä½¿å…¶ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´è‡³Blocké‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚ä½†æ˜¯è¿™æ®µä»£ç é‡Œå¯ä»¥çœ‹åˆ°ï¼Œcompletionä¸­åˆç»§ç»­è°ƒç”¨äº†<code>[self startAnimation];</code>å› æ­¤ï¼Œç³»ç»Ÿä¼šç»§ç»­ä¿ç•™å¯¹EZScanNetGridçš„å¼•ç”¨ï¼Œä»è€Œå³ä½¿EZScanNetGridçš„SuperViewè¢«é”€æ¯äº†ï¼ŒEZScanNetGridè¿˜æ˜¯æ²¡æœ‰è¢«é”€æ¯ï¼Œæ— é™åœ°å¾ªç¯è°ƒç”¨ç€åŠ¨ç”»ï¼Œå æ®å†…å­˜çš„åŒæ—¶ä¹Ÿè€—è´¹ç€CPUã€‚:(</p>\n<p>ã€€ã€€æ­¤æ–‡æœ‰ç‚¹æ™¦æ¶©ï¼Œé™„ä¸Š<a href=\"https://github.com/objchris/ChrisDerDemos/tree/master/ClassBlockDemo\" target=\"_blank\" rel=\"external\">DEMOåœ°å€</a></p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ol>\n<li>å…³äºBlockçš„å†…å­˜æ³„æ¼ä¸åªæ˜¯å¾ªç¯å¼•ç”¨ä¼šå¼•èµ·ã€‚</li>\n<li>ä¸ä»…ä»…æ˜¯UIViewï¼Œå…¶ä»–å°†Blockä½œä¸ºå‚æ•°çš„ç±»æ–¹æ³•ï¼Œå¦‚æœåœ¨ä¸€ä¸ªBlockä¸­é€’å½’è°ƒç”¨åˆ°æœ¬Blockï¼Œè®°å¾—å°†å¼•ç”¨çš„å¯¹è±¡åŠ ä¸Š__weakã€‚ä½ è¯´ï¼Œåœ¨Blockè¢«è°ƒç”¨çš„æ—¶å€™selfè¢«é‡Šæ”¾äº†æ€ä¹ˆåŠï¼Ÿï¼å»çœ‹çœ‹__strongçš„èµ„æ–™å§ã€‚</li>\n<li><del>å¾ˆå¤šiOSçš„ç±»æ–¹æ³•ä¼ å…¥çš„Blockæ˜¯_NSConcreteStackBlockï¼Œå¯è§_NSConcreteStackBlockä¹Ÿä¼šå¯¹Blockä¸­çš„å¯¹è±¡ä¿æŒå¼ºå¼•ç”¨ã€‚(å¾…è€ƒç©¶)</del>ç¡®å®ï¼Œæ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨çš„blockéƒ½æ˜¯StackBlockï¼Œè¡¨é¢çœ‹èµ·æ¥ç³»ç»ŸAPIä¼ å…¥çš„Blockéƒ½æ˜¯StackBlockï¼Œä½†æ˜¯ä»¥ä¸‹å››ç§æƒ…å†µï¼š<br>1.æ‰‹åŠ¨è°ƒç”¨copy<br>2.Blockæ˜¯å‡½æ•°çš„è¿”å›å€¼<br>3.Blockè¢«å¼ºå¼•ç”¨ï¼ŒBlockè¢«èµ‹å€¼ç»™__strongæˆ–è€…idç±»å‹<br>4.è°ƒç”¨ç³»ç»ŸAPIå…¥å‚ä¸­å«æœ‰usingBlcokçš„æ–¹æ³•<br>ç³»ç»Ÿéƒ½ä¼šé»˜è®¤è°ƒç”¨copyæ–¹æ³•æŠŠBlockå¤åˆ¶åˆ°å †ä¸­ï¼Œå˜æˆMallocBlockï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡ŒæŒæœ‰ã€‚</li>\n<li>å…³äºARCå’ŒMRCä¸‹çš„ä¸‰ç§Blockæ˜¯å¦èƒ½æ‰§è¡Œï¼Œè¯·åšåšè¿™å‡ é“æµ‹è¯•é¢˜<a href=\"http://blog.parse.com/learn/engineering/objective-c-blocks-quiz/\" target=\"_blank\" rel=\"external\">Objective-C Blocks Quiz</a></li>\n</ol>\n","excerpt":"<p>Blockåœ¨å¾ˆå¤šæ—¶å€™ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ï¼Œå·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ã€‚å¾ˆå¤šæ–‡ç« åœ¨è®²è¿°Blockçš„æ—¶å€™éƒ½ä¼šè°ˆåŠè¿™ä¸ªé—®é¢˜ï¼š<br>åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­æœ‰ç€å¯¹Blockçš„å¼ºå¼•ç”¨ï¼Œè€Œåœ¨è¯¥Blockä¸­åˆä¿ç•™ç€å¯¹è¯¥å¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å¾ªç¯å¼•ç”¨æ‰€å¸¦æ¥çš„åæœç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“ï¼Œæœ‰ä¸€ä¸ªç¯å­˜åœ¨ï¼Œå°±æ„å‘³ç€æ¯æ¬¡åˆ›å»ºè¯¥å¯¹è±¡ï¼Œå°±ä¼šå æ®ä¸€å®šçš„å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œç­‰åˆ°å†…å­˜ä¸è¶³ä»¥ç»§ç»­ç»´æŒè¯¥Appçš„å­˜åœ¨æ—¶ï¼Œå°±ä¼šCrashã€‚    </p>","more":"<p>ã€€ã€€å¸¸è§çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨__weakæˆ–å°†æœ‰å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨çš„å¯¹è±¡ä½œä¸ºBlockçš„å‚æ•°ä¼ å…¥ã€‚<br>ã€€ã€€å¾ªç¯å¼•ç”¨æˆ‘ä¸æ‰“ç®—åœ¨æ­¤å±•å¼€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¥½çš„æ–‡ç« å·²ç»è®²å¾—å¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯è‡ªè¡Œæ‰¾æ‰¾ã€‚<br>ã€€ã€€<br>ã€€ã€€å¾ˆå¤šæ–‡ç« æåŠï¼šå¾ªç¯å¼•ç”¨æ‰€é’ˆå¯¹çš„æ˜¯å¯¹è±¡ï¼Œèƒ½å¤Ÿå½¢æˆç¯çš„æ˜¯â€œå¯¹è±¡â€”â€”Blockâ€”â€”å¯¹è±¡â€ã€‚æ¢ç§æ–¹å¼æ€è€ƒï¼Œç±»æ–¹æ³•å°±ä¸ä¼šé€ æˆç›¸ä¼¼çš„å†…å­˜æ³„æ¼ã€‚çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿï¼<br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong><br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong><br>ã€€ã€€<strong>ä¸æ˜¯ã€‚</strong>    </p>\n<h2 id=\"ä¸¾ä¸ªæ —å­\"><a href=\"#ä¸¾ä¸ªæ —å­\" class=\"headerlink\" title=\"ä¸¾ä¸ªæ —å­\"></a>ä¸¾ä¸ªæ —å­</h2><p>ã€€ã€€å¹³å¸¸ä½¿ç”¨UIViewçš„Animationä¹‹æ—¶ï¼Œä¾‹å¦‚<code>[UIView animateWithDuration:animations:];</code>ä½¿ç”¨Blockå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å°†è®¾ç½®éœ€è¦å˜æ¢çš„å±æ€§ã€‚å¯¹äºç±»æ–¹æ³•å¯ä»¥æ”¾å¿ƒåœ°å†™selfè€Œä¸å¿…æ‹…å¿ƒå¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¯¹äº<code>[UIView animateWithDuration: animations: completion:];</code>é™¤äº†åœ¨åŠ¨ç”»ç»“æŸæ—¶åšä¸€äº›æ“ä½œå¤–ï¼Œå½“æˆ‘ä»¬éœ€è¦åŠ¨ç”»å¾ªç¯æ’­æ”¾çš„æ—¶å€™ï¼Œå¾ˆå¸¸ç”¨çš„æ–¹æ³•ç±»ä¼¼äºï¼š     </p>\n<pre><code class=\"objectivec\">- (void)startAnimation {\n    [UIView animateWithDuration:3.5 animations:^{\n        CGRect frame = self.initFrame;\n        frame.origin.y += 2 * self.initFrame.size.height;\n        self.frame = frame;\n    } completion:^(BOOL finished) {\n        self.frame = self.initFrame;\n        [self startAnimation];        // é€’å½’è°ƒç”¨ï¼Œå†æ¬¡æ‰§è¡Œæ­¤å‡½æ•°\n    }];\n}\n</code></pre>\n<p>ã€€ã€€åˆ«å‘Šè¯‰æˆ‘ä½ æ²¡è¿™æ ·ç”¨è¿‡ï¼Œç§‘ç§‘ã€‚    </p>\n<p>ã€€ã€€å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™ä¹ˆå†™ï¼Œå¯èƒ½å·²ç»åŸ‹ä¸‹äº†æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„å±é™©ã€‚    </p>\n<p>ã€€ã€€æˆ‘ä»¬é€šè¿‡Instrumentsæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„æœ‰å†…å­˜æ³„æ¼(ä¾‹å­ä¸­EZScanNetGridæ˜¯æˆ‘è‡ªå®šä¹‰çš„View,Viewä¸­æœ‰æ‰§è¡ŒåŠ¨ç”»çš„ä»£ç ï¼Œè§ä¸Šæ–¹ä»£ç å—ï¼ŒQRCodeScanneræ˜¯å¯¹åº”çš„Controller)ï¼š    </p>\n<ol>\n<li>å¤šæ¬¡åˆ›å»ºQRCodeScannerå¹¶é”€æ¯ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/g3gqy.jpg\" alt=\"block_self\"><br>QRCodeScannerè¢«é”€æ¯åï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/97ewo.jpg\" alt=\"block_self2\">     </li>\n</ol>\n<ol>\n<li>å°†ä¸Šè¿°ä»£ç çš„selfæ”¹æˆweakSelfï¼Œå†æ¥çœ‹çœ‹Instrumentsï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/jnbwl.jpg\" alt=\"block_weakSelf\"><br>QRCodeScannerè¢«é”€æ¯åï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/p1pae.jpg\" alt=\"block_weakSelf2\">     </li>\n</ol>\n<p>ã€€ã€€ç»“æœå¾ˆæ˜æ˜¾ï¼Œè‹¥æ˜¯ä½¿ç”¨selfï¼ŒEZScanNetGridè¿™ä¸ªViewä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå› ä¸ºUIView Animationå¯¹å…¶çš„å¼ºå¼•ç”¨ä½¿å…¶ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´è‡³Blocké‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚ä½†æ˜¯è¿™æ®µä»£ç é‡Œå¯ä»¥çœ‹åˆ°ï¼Œcompletionä¸­åˆç»§ç»­è°ƒç”¨äº†<code>[self startAnimation];</code>å› æ­¤ï¼Œç³»ç»Ÿä¼šç»§ç»­ä¿ç•™å¯¹EZScanNetGridçš„å¼•ç”¨ï¼Œä»è€Œå³ä½¿EZScanNetGridçš„SuperViewè¢«é”€æ¯äº†ï¼ŒEZScanNetGridè¿˜æ˜¯æ²¡æœ‰è¢«é”€æ¯ï¼Œæ— é™åœ°å¾ªç¯è°ƒç”¨ç€åŠ¨ç”»ï¼Œå æ®å†…å­˜çš„åŒæ—¶ä¹Ÿè€—è´¹ç€CPUã€‚:(</p>\n<p>ã€€ã€€æ­¤æ–‡æœ‰ç‚¹æ™¦æ¶©ï¼Œé™„ä¸Š<a href=\"https://github.com/objchris/ChrisDerDemos/tree/master/ClassBlockDemo\">DEMOåœ°å€</a></p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ol>\n<li>å…³äºBlockçš„å†…å­˜æ³„æ¼ä¸åªæ˜¯å¾ªç¯å¼•ç”¨ä¼šå¼•èµ·ã€‚</li>\n<li>ä¸ä»…ä»…æ˜¯UIViewï¼Œå…¶ä»–å°†Blockä½œä¸ºå‚æ•°çš„ç±»æ–¹æ³•ï¼Œå¦‚æœåœ¨ä¸€ä¸ªBlockä¸­é€’å½’è°ƒç”¨åˆ°æœ¬Blockï¼Œè®°å¾—å°†å¼•ç”¨çš„å¯¹è±¡åŠ ä¸Š__weakã€‚ä½ è¯´ï¼Œåœ¨Blockè¢«è°ƒç”¨çš„æ—¶å€™selfè¢«é‡Šæ”¾äº†æ€ä¹ˆåŠï¼Ÿï¼å»çœ‹çœ‹__strongçš„èµ„æ–™å§ã€‚</li>\n<li><del>å¾ˆå¤šiOSçš„ç±»æ–¹æ³•ä¼ å…¥çš„Blockæ˜¯_NSConcreteStackBlockï¼Œå¯è§_NSConcreteStackBlockä¹Ÿä¼šå¯¹Blockä¸­çš„å¯¹è±¡ä¿æŒå¼ºå¼•ç”¨ã€‚(å¾…è€ƒç©¶)</del>ç¡®å®ï¼Œæ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨çš„blockéƒ½æ˜¯StackBlockï¼Œè¡¨é¢çœ‹èµ·æ¥ç³»ç»ŸAPIä¼ å…¥çš„Blockéƒ½æ˜¯StackBlockï¼Œä½†æ˜¯ä»¥ä¸‹å››ç§æƒ…å†µï¼š<br>1.æ‰‹åŠ¨è°ƒç”¨copy<br>2.Blockæ˜¯å‡½æ•°çš„è¿”å›å€¼<br>3.Blockè¢«å¼ºå¼•ç”¨ï¼ŒBlockè¢«èµ‹å€¼ç»™__strongæˆ–è€…idç±»å‹<br>4.è°ƒç”¨ç³»ç»ŸAPIå…¥å‚ä¸­å«æœ‰usingBlcokçš„æ–¹æ³•<br>ç³»ç»Ÿéƒ½ä¼šé»˜è®¤è°ƒç”¨copyæ–¹æ³•æŠŠBlockå¤åˆ¶åˆ°å †ä¸­ï¼Œå˜æˆMallocBlockï¼Œä¼šå¯¹å¯¹è±¡è¿›è¡ŒæŒæœ‰ã€‚</li>\n<li>å…³äºARCå’ŒMRCä¸‹çš„ä¸‰ç§Blockæ˜¯å¦èƒ½æ‰§è¡Œï¼Œè¯·åšåšè¿™å‡ é“æµ‹è¯•é¢˜<a href=\"http://blog.parse.com/learn/engineering/objective-c-blocks-quiz/\">Objective-C Blocks Quiz</a></li>\n</ol>"},{"title":"ç®€ç®€å•å•è¯´è¯´PKI On iOS","date":"2016-04-09T12:16:05.000Z","typora-copy-images-to":"ipic","_content":"\n\nHacker,é—®ä½ æƒŠæœªÎ£( Â° â–³ Â°|||)ï¸´\n\n<!--more-->\n\n![Crypto_Sherlock](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/sijuh.jpg) \n\n\nçœ‹äº†å¾ˆå¤šä¾¦æ¢ç‰‡ä¹‹åï¼Œé€æ¸å‘ç°åŠ è§£å¯†çš„ç¥å¥‡æ‰€åœ¨ã€‚èƒ½å¤Ÿåœ¨åˆ«äººæ— æ³•å¯Ÿè§‰çš„æƒ…å†µä¸‹ä¼ é€’ä¿¡æ¯ï¼ˆæˆ‘å¾ˆå–œæ¬¢çœ‹è¿™äº›ç‰‡å­ï¼Œå“ˆå“ˆå“ˆï¼‰ã€‚æ— è®ºæ˜¯Morse Codeè¿˜æ˜¯å¯¹ç€æŸæœ¬ä¹¦æ ¹æ®é¡µç è¡Œæ•°å­—æ•°æ¥ç¡®å®šè¡¨è¾¾ä¿¡æ¯ï¼Œéƒ½èƒ½è®©æˆ‘çœ‹åˆ°å‰äººçš„æ™ºæ…§ã€‚è¯´çœŸçš„ï¼Œæˆ‘ç‰¹åˆ«é’Ÿæ„ç¥æ¢å¤æ´›å…‹ï¼Œå°±ç®—è‹±æ–‡æ¸£æ¸£ä¹Ÿä¼šåœ¨æ›´æ–°çš„æ—¶å€™åˆ°Youtubeä¸Šçœ‹çœ‹ï¼Œç­‰ç¿»è¯‘å®Œå†ç¿»çœ‹ä¸€æ¬¡ã€‚è®°å¾—ä¸­å›½å‰§åœºé‚£ä¸€é›†æœ€åæ ¹æ®ä¼¦æ•¦åœ°å›¾ç ´è§£äº†è—åœ¨è‹å·ç å­é‡Œçš„æš—å·ï¼ŒSo Sexy~Â·Â·   \nâ€‹    \nä»Šå¤©æ¥èŠèŠé˜¿æ¾¤å›çš„æ•…äº‹ï¼Œé¡ºä¾¿è°ˆè°ˆ\n\n1. CommonCrytoä¸­å…³äºDESã€AESçš„éƒ¨åˆ†å†…å®¹\n2. iOSçš„Securityæ¡†æ¶é‡Œå…³äºRSAåŠ å¯†çš„éƒ¨åˆ†å†…å®¹....\n\né˜¿æ¾¤å›æ˜¯ä¸ªå¤§å››ğŸ¶ï¼Œæœ€è¿‘åœ¨çƒ¦æ¯•ä¸šè®ºæ–‡çš„äº‹æƒ…ã€‚è¾›è¾›è‹¦è‹¦æ’¸äº†äºŒåä¸ªå¹´(xiao)å¤´(shi)çš„è®ºæ–‡ï¼Œè‚¯å®šè¦ç¬¬ä¸€æ—¶é—´äº¤åˆ°è€å¸ˆæ‰‹é‡Œï¼Œè®©ä»–çœ‹çœ‹ï¼Œå¥½èˆ’ç¼“é˜¿æ¾¤å›éš¾äº§çš„å¿ƒæƒ…ã€‚é˜¿æ¾¤å›çŸ¥é“æœ‰ä¸ªHackerå›ä¸€ç›´åœ¨è§Šè§é˜¿æ¾¤å›çš„è®ºæ–‡ï¼Œæƒ³æ‹¿è¿‡æ¥ä¸€æŠ„äº†ä¹‹ã€‚è€Œä¸”Hackerå›æ˜¯ä¸€æµçš„ç½‘ç»œé»‘å®¢ï¼Œç›—çº¿å·å–åˆ«äººçš„ä¿¡æ¯æ˜¯æœ€åœ¨è¡Œçš„äº†ã€‚å› æ­¤æ€ä¹ˆå‘ç»™åƒé‡Œä¹‹å¤–çš„è€å¸ˆå¯éš¾ä¸ºé˜¿æ¾¤å›äº†ã€‚ã€‚ã€‚    \n\n![focusOnCom](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r6p4c.jpg)    \n\nå¾ˆå¿«ï¼Œé˜¿æ¾¤å›æƒ³åˆ°ç”¨åŠ å¯†çš„æ–¹æ³•ï¼Œåˆ©ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹æ³•ç»™è®ºæ–‡åŠ å¯†åå‘é€ç»™è€å¸ˆã€‚\n\n![bucuowo](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/i66ud.jpg)\n\n\n# å¯¹ç§°åŠ å¯†    \n\né‡‡ç”¨å•é’¥å¯†ç ç³»ç»Ÿçš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨ä½œä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ã€‚åŠ å¯†ç®—æ³•ä¸­æ•°DESã€3DESã€AES(å—ç®—æ³•)å’ŒRC4(æµç®—æ³•)æœ€ä¸ºå¸¸ç”¨äº†ã€‚\n\n## DES\nDES ä½¿ç”¨ä¸€ä¸ª 56 ä½çš„å¯†é’¥ä»¥åŠé™„åŠ çš„ 8 ä½å¥‡å¶æ ¡éªŒä½ï¼Œäº§ç”Ÿæœ€å¤§ 64 ä½çš„åˆ†ç»„å¤§å°ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„åˆ†ç»„å¯†ç ï¼Œä½¿ç”¨ç§°ä¸º Feistel çš„æŠ€æœ¯ï¼Œå…¶ä¸­å°†åŠ å¯†çš„æ–‡æœ¬å—åˆ†æˆä¸¤åŠã€‚ä½¿ç”¨å­å¯†é’¥å¯¹å…¶ä¸­ä¸€åŠåº”ç”¨å¾ªç¯åŠŸèƒ½ï¼Œç„¶åå°†è¾“å‡ºä¸å¦ä¸€åŠè¿›è¡Œâ€œå¼‚æˆ–â€è¿ç®—ï¼›æ¥ç€äº¤æ¢è¿™ä¸¤åŠï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šç»§ç»­ä¸‹å»ï¼Œä½†æœ€åä¸€ä¸ªå¾ªç¯ä¸äº¤æ¢ã€‚DES ä½¿ç”¨ 16 ä¸ªå¾ªç¯ï¼Œä½¿ç”¨å¼‚æˆ–ï¼Œç½®æ¢ï¼Œä»£æ¢ï¼Œç§»ä½æ“ä½œå››ç§åŸºæœ¬è¿ç®—ã€‚    \n\n![Crypto_DES](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/7o3yv.jpg)\n\n### 3DES\n\n3DESæ˜¯åœ¨DESçš„åŸºç¡€ä¸Šåšäº†ä¸¤æ¬¡åŠ å¯†å’Œä¸€æ¬¡è§£å¯†ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼šè®¾Ek()å’ŒDk()ä»£è¡¨DESç®—æ³•çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ï¼ŒKä»£è¡¨DESç®—æ³•ä½¿ç”¨çš„å¯†é’¥ï¼ŒPä»£è¡¨æ˜æ–‡ï¼ŒCä»£è¡¨å¯†æ–‡ï¼Œè¿™æ ·ï¼š  \n3DESåŠ å¯†è¿‡ç¨‹ä¸ºï¼šC=Ek3(Dk2(Ek1(P)))    \n3DESè§£å¯†è¿‡ç¨‹ä¸ºï¼šP=Dk1(EK2(Dk3(C)))    \nè‹¥**Ek1 == Ek2 == Ek3**ï¼Œå°±æ˜¯ç®€å•çš„DESäº†ã€‚\n\n## AES\n![Crypto_AES](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1lfh4.png)    \nå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œè‹¥æœ‰ä¾µçŠ¯åˆ°æƒåˆ©ä¹‹å¤„ï¼Œè¯·å‘ŠçŸ¥ï¼Œè°¢è°¢~    \n\nAESåŠ å¯†è¿‡ç¨‹æ¶‰åŠåˆ°4ç§æ“ä½œï¼šå­—èŠ‚æ›¿ä»£ï¼ˆSubBytesï¼‰ã€è¡Œç§»ä½ï¼ˆShiftRowsï¼‰ã€åˆ—æ··æ·†ï¼ˆMixColumnsï¼‰å’Œè½®å¯†é’¥åŠ ï¼ˆAddRoundKeyï¼‰ã€‚è§£å¯†è¿‡ç¨‹åˆ†åˆ«ä¸ºå¯¹åº”çš„é€†æ“ä½œã€‚ç”±äºæ¯ä¸€æ­¥æ“ä½œéƒ½æ˜¯å¯é€†çš„ï¼ŒæŒ‰ç…§ç›¸åçš„é¡ºåºè¿›è¡Œè§£å¯†å³å¯æ¢å¤æ˜æ–‡ã€‚åŠ è§£å¯†ä¸­æ¯è½®çš„å¯†é’¥åˆ†åˆ«ç”±åˆå§‹å¯†é’¥æ‰©å±•å¾—åˆ°ã€‚ç®—æ³•ä¸­16å­—èŠ‚çš„æ˜æ–‡ã€å¯†æ–‡å’Œè½®å¯†é’¥éƒ½ä»¥ä¸€ä¸ª4x4çš„çŸ©é˜µè¡¨ç¤ºã€‚    \nç®—æ³•è¯¦ç»†å·²ç»æœ‰å…¶ä»–äººå†™äº†ï¼Œæˆ‘å°±ä¸å†é€ è½®å­äº†ã€‚[å¯†ç ç®—æ³•è¯¦è§£â€”â€”AES](http://www.blogfshare.com/aes-rijndael.html)    \nè¿˜æœ‰ç®—æ³•åŠè§£å¯†ç®—æ³•çš„[æ¨¡å¼ä»‹ç»](http://blog.csdn.net/searchsun/article/details/2516191)ï¼Œå¯ä»¥äº†è§£äº†è§£~    \n\n## RC4\n\nä¸åŒäºå—ç®—æ³•çš„æ˜¯ï¼ŒRC4ç­‰æµç®—æ³•ä¸æ˜¯å¯¹æ˜æ–‡è¿›è¡Œåˆ†ç»„å¤„ç†ï¼Œè€Œæ˜¯å­—èŠ‚æµçš„æ–¹å¼ä¾æ¬¡åŠ å¯†æ˜æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œè§£å¯†çš„æ—¶å€™ä¹Ÿæ˜¯ä¾æ¬¡å¯¹å¯†æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œè§£å¯†ã€‚\n\n## CommonCrypto\n\nå¯¹äºèº«ä¸ºiOSæ”»åŸç‹®çš„é˜¿æ¾¤å›æ¥è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯è¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒé‡è¦ã€‚    \n\n### CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\n\n1. CCOperationï¼šå®šä¹‰æ“ä½œï¼šåŠ å¯†æˆ–è§£å¯†\n\n``` \nenum {\n    kCCEncrypt = 0, \n    kCCDecrypt,     \n};\ntypedef uint32_t CCOperation;\n```\n\n2. CCAlgorithmï¼šåŠ è§£å¯†ç®—æ³•ï¼Œå¾ˆæ˜æ˜¾å°±ä¸è¯¦ç»†è¯´æ˜äº†ã€‚\n\n``` objc\nenum {\n    kCCAlgorithmAES128 = 0,\n    kCCAlgorithmAES = 0,\n    kCCAlgorithmDES,\n    kCCAlgorithm3DES,       \n    kCCAlgorithmCAST,       \n    kCCAlgorithmRC4,\n    kCCAlgorithmRC2,   \n    kCCAlgorithmBlowfish    \n};\ntypedef uint32_t CCAlgorithm;\n```\n\n3. CCOptionsï¼šé€‰é¡¹ï¼šæŒ‰ç…§P7è¡¥è¶³å—ç®—æ³•çš„å—é•¿åº¦æˆ–è€…é€‰æ‹©ECBæ¨¡å¼ï¼Œå…³äºæ¨¡å¼è¯·çœ‹ä¸Šé¢AESä¸­ä»‹ç»çš„æ–‡ç« ã€‚å¯¹äºRC4ç­‰æµç®—æ³•ä¸é€‚ç”¨ã€‚æˆ–è€…è¯´ä¸éœ€è¦ä½¿ç”¨åˆ°\n\n``` objc\nenum {\n    kCCOptionPKCS7Padding   = 0x0001,\n    kCCOptionECBMode        = 0x0002\n};\n```\n\n4. KeySizeå’ŒBlockSizeï¼šè§„å®šåŠ è§£å¯†å¯†é’¥çš„é•¿åº¦å’Œæ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦\n\n``` objc\nenum {\n    kCCKeySizeAES128          = 16,\n    kCCKeySizeAES192          = 24,\n    kCCKeySizeAES256          = 32,\n    kCCKeySizeDES             = 8,\n    kCCKeySize3DES            = 24,\n    kCCKeySizeMinCAST         = 5,\n    kCCKeySizeMaxCAST         = 16,\n    kCCKeySizeMinRC4          = 1,\n    kCCKeySizeMaxRC4          = 512,\n    kCCKeySizeMinRC2          = 1,\n    kCCKeySizeMaxRC2          = 128,\n    kCCKeySizeMinBlowfish     = 8,\n    kCCKeySizeMaxBlowfish     = 56,\n};\nenum {\n    /* AES */\n    kCCBlockSizeAES128        = 16,\n    /* DES */\n    kCCBlockSizeDES           = 8,\n    /* 3DES */\n    kCCBlockSize3DES          = 8,\n    /* CAST */\n    kCCBlockSizeCAST          = 8,\n    kCCBlockSizeRC2           = 8,\n    kCCBlockSizeBlowfish      = 8,\n};\n```\n\n### é€šè¿‡ä»£ç å®ç°\n\n#### å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\n\n``` objc\n#import <CommonCrypto/CommonCrypto.h>\n```\n\n#### symCrypt\n\n``` objc\n/*!\n    @function   symCrypt\n    @abstract   å¯¹ç§°è§£å¯†\n    @param      operation       åŠ å¯†æˆ–è§£å¯†\n    @param      data            éœ€è¦åŠ è§£å¯†çš„æ•°æ®\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      key             åŠ è§£å¯†æ—¶æä¾›çš„å¯†é’¥\n    @param      iv              Initialization Vector(CBCæ¨¡å¼ä¸‹éœ€è¦)\n    @param      options         åŠ å¯†æ•°æ®å­—èŠ‚æ•°ä¸æ˜¯blockçš„æ•´æ•°å€æ—¶éœ€è¦åˆ¶å®špadding\n                                è¯¦æƒ…å‚è§CommonCryptorå¤´æ–‡ä»¶\n    @param      status          åŠ è§£å¯†æˆåŠŸä¸å¦æ‰€è¿”å›çš„çŠ¶æ€\n    @result     è§£å¯†åå¾—åˆ°çš„ç»“æœ\n */\n- (NSData *)symCrypt:(CCOperation)operation\n         processData:(NSData *)data\n      UsingAlgorithm:(CCAlgorithm)algorithm\n                 key:(NSData *)key\n initalizationVector:(NSData *)iv\n             options:(CCOptions)options\n              status:(CCCryptorStatus *)status\n{\n    NSData *result = nil;\n    NSMutableData *cKey = [key mutableCopy], *cIV = [iv mutableCopy];\n    [self fixKeyLengthsByAlgorithm:algorithm keyData:cKey ivData:cIV];//1\n    size_t bufferSize = [data length] + [self blockSizeByAlgorithm:algorithm]; // 2\n    void *buffer = malloc(bufferSize); //3\n    size_t encryptedSize = 0;\n    *status = CCCrypt(operation, algorithm, options, [cKey bytes], [cKey length], [cIV bytes], [data bytes], [data length], buffer, bufferSize, &encryptedSize); //4\n    if (*status == kCCSuccess) {\n        result = [NSData dataWithBytes:buffer length:encryptedSize];  //5\n    } else {\n        NSLog(@\"[ERROR] failed to encrypt|CCCryptoStatus: %d\", *status);\n    }\n    free(buffer);  //6\n    return result;  //7\n}\n```\n\n1. æ ¹æ®åŠ è§£å¯†ç®—æ³•æ£€æŸ¥Keyå’Œivçš„é•¿åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹é¢åˆ—å‡ºçš„å‡½æ•°fixKeyLength\n2. åŠ å¯†åçš„æ•°æ®æ€»å°äºç­‰äºæ•°æ®é•¿åº¦åŠ ä¸Šblockçš„å¤§å°\n3. ç”³è¯·bufferSizeçš„ç©ºé—´ä»¥ä¿å­˜åŠ å¯†æˆ–è§£å¯†åçš„æ•°æ®\n4. è°ƒç”¨CCCryptå‡½æ•°å®ç°åŠ è§£å¯†ã€‚\n``` objc\nCCCryptorStatus CCCrypt(\n    CCOperation op,         /* åŠ å¯†æˆ–è§£å¯†ï¼škCCEncrypt, etc. */\n    CCAlgorithm alg,        /* åŠ è§£å¯†é‡‡ç”¨çš„ç®—æ³•ï¼škCCAlgorithmAES128, etc. */\n    CCOptions options,      /* kCCOptionPKCS7Padding, etc. */\n    const void *key,        /* å¯†é’¥ */\n    size_t keyLength,       /* å¯†é’¥é•¿åº¦ */\n    const void *iv,         /* ivï¼Œä½¿ç”¨ä¸CBCæ¨¡å¼ä¸‹ï¼Œæ˜æ–‡å32ä½å’Œivå¼‚æˆ–ååšä¸ºä¸‹ä¸€é˜¶æ®µçš„å‰32ä½ */\n    const void *dataIn,     /* è¦åŠ å¯†æˆ–è§£å¯†çš„æ•°æ® */\n    size_t dataInLength,    /* æ•°æ®é•¿åº¦ */\n    void *dataOut,          /* æ³¨æ„ä¼ å…¥çš„æ˜¯æŒ‡é’ˆï¼ŒåŠ è§£å¯†åçš„æ•°æ®å°†ä»æ­¤å¤„è¿”å› */\n    size_t dataOutAvailable,/* ä¸ºdataOutç”³è¯·çš„å¯å†™é•¿åº¦ */\n    size_t *dataOutMoved    /* ç»“æœæ‰€å çš„é•¿åº¦ */\n    )    \n    __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);\n```\n5. è‹¥æˆåŠŸï¼Œåˆ™å°†(void *)ç±»å‹çš„æ•°æ®å°è£…åˆ°NSDataä¸­ã€‚\n6. é‡Šæ”¾ç”³è¯·çš„bufferå†…å­˜\n7. è¿”å›ã€‚\n\n#### fixKeyLength\n\n``` objc\n/*!\n    @function   fixKeyLength\n    @abstract   ä¿®æ”¹å¯†é’¥é•¿åº¦è‡³ä¸ç®—æ³•åŒ¹é…\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      keyData         å¯†é’¥\n    @param      ivData          Initialization Vector\n    @result     å°†å¯†é’¥é•¿åº¦å’Œivä¿®æ”¹è‡³ä¸ç®—æ³•åŒ¹é…çš„é•¿åº¦\n */\n- (void)fixKeyLengthsByAlgorithm:(CCAlgorithm)algorithm\n                         keyData:(NSMutableData *)keyData\n                          ivData:(NSMutableData *)ivData\n{\n    NSUInteger keyLength = [keyData length];\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n        {\n            if (keyLength < kCCKeySizeAES128) {\n                keyData.length = kCCKeySizeAES128;\n            } else if (keyLength < kCCKeySizeAES192) {\n                keyData.length = kCCKeySizeAES192;\n            } else {\n                keyData.length = kCCKeySizeAES256;\n            }\n            break;\n        }\n        case kCCAlgorithmDES:\n        {\n            keyData.length = kCCKeySizeDES;\n            break;\n        }\n        case kCCAlgorithm3DES:\n        {\n            keyData.length = kCCKeySize3DES;\n            break;\n        }\n        case kCCAlgorithmRC4:\n        {\n            keyData.length = kCCKeySizeMaxRC4;\n            break;\n        }\n        default:\n            break;\n    }\n    ivData.length = keyData.length;\n}\n```\n\n#### blockSizeByAlgorithm\n\n``` objc \n/*!\n    @function   blockSizeByAlgorithm\n    @abstract   æ ¹æ®ç®—æ³•è·å–æ¯ä¸ªblockçš„å¤§å°\n    @param      algorithm       åŠ å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @result     è¯¥ç®—æ³•å¯¹åº”çš„blockå¤§å°\n */\n- (size_t)blockSizeByAlgorithm:(CCAlgorithm)algorithm {\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n            return kCCBlockSizeAES128;\n        case kCCAlgorithmDES:\n        case kCCAlgorithm3DES:\n        case kCCAlgorithmRC4:\n            return kCCBlockSizeDES;\n        default:\n            return 0;\n    }\n}\n```\n\nä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†è§„èŒƒå¯†é’¥çš„é•¿åº¦å’Œè·å–æ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦ï¼Œå¾ˆå¥½ç†è§£å°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚è¿™æ ·è¿˜æ˜¯ä¸èƒ½å‚»ç“œå¼åœ°è°ƒç”¨ï¼Œå› æ­¤é˜¿æ¾¤å›åˆ›å»ºäº†DESCipherActorç»§æ‰¿äºSymCipherActorï¼Œè¿›ä¸€æ­¥è¿›è¡Œå°è£…ï¼š\nã€€ã€€DESCipherActor.h\nã€€ã€€``` objc\n    - (NSString *)encryptInCBC:(NSString *)plainText key:(NSString *)key iv:(NSData *)iv;\n    - (NSString *)decryptInCBC:(NSString *)cipherText key:(NSString *)key iv:(NSData *)iv;\n    - (NSString *)encryptInEBC:(NSString *)plainText key:(NSString *)key;\n    - (NSString *)decryptInEBC:(NSString *)cipherText key:(NSString *)key;\nã€€ã€€```\nã€€ã€€è¿˜æœ‰AESã€RC4çš„å®ç°å¤§è‡´ç›¸åŒï¼Œå…·ä½“å¯å‚è€ƒDemoï¼Œå·²ç»ä¸Šä¼ [Github](https://github.com/objchris/PKIDemo)\n\n\nã€€ã€€æœç„¶ï¼Œé‡‡ç”¨åŠ å¯†ç®—æ³•åŠ å¯†åçš„è®ºæ–‡é¡ºåˆ©å‘åˆ°è€å¸ˆé‚£é‡Œï¼Œé—®é¢˜æ˜¯è§£å¯†ç”¨å¯†é’¥è¿˜åœ¨é˜¿æ¾¤å›æ‰‹ä¸Šï¼Œè€å¸ˆè¿˜æ˜¯æ— æ³•çœ‹åˆ°è®ºæ–‡å†…å®¹ï¼Œå¯†é’¥ä¸èƒ½é€šè¿‡ç½‘ç»œä¼ è¾“ç»™è€å¸ˆï¼Œå› ä¸ºHackerå›è¿˜åœ¨ç›‘å¬ç€é˜¿æ¾¤å›å’Œè€å¸ˆçš„é€šè®¯ã€‚éš¾é“è¦é˜¿æ¾¤å›ä¸æƒ§åƒé‡Œï¼ˆå…¶å®ä¸æ˜¯å¾ˆè¿œï¼Œå“ˆå“ˆå“ˆã€‚æˆ‘å°±å¤¸å¼ é‚£ä¹ˆä¸€ç‚¹ç‚¹~ï¼‰å»åˆ°è€å¸ˆé‚£è¾¹ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥å°†è®ºæ–‡äº¤ç»™è€å¸ˆå‘¢ï¼Ÿï¼ï¼ï¼    \nã€€ã€€What the ****ï¼ï¼ï¼ğŸ’”ğŸ’”é˜¿æ¾¤å›æ­¤æ—¶å¿ƒé‡Œåƒä¸‡åªè‰æ³¥é©¬åœ¨å¥”è…¾ã€‚        \n\n![desk](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/9hwet.jpg)    \n\nã€€ã€€ä½†æ˜¯é˜¿æ¾¤å›ä¸ä¼šè¿™æ ·è½»æ˜“åœ°ç‹—å¸¦ï¼Œå› ä¸ºè¿˜å¯ä»¥é€šè¿‡éå¯¹ç§°åŠ å¯†æ¥è§£å†³...\n\n\n# éå¯¹ç§°åŠ å¯†\n\nå¯¹ç§°åŠ å¯†ç®—æ³•åœ¨åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ï¼›è€Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™ä¸¤ä¸ªç§˜é’¥æ˜¯å…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼Œç®€ç§°å…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivate keyï¼Œç®€ç§°ç§é’¥ï¼‰ã€‚\nå¦‚ç”²ä¹™åŒæ–¹éœ€è¦åŠ å¯†é€šä¿¡ï¼š\n\n1. ä¹™æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰å¹¶å°†å…¬é’¥å‘å…¶å®ƒæ–¹å…¬å¼€ã€‚\n2. å¾—åˆ°è¯¥å…¬é’¥çš„ç”²æ–¹ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åå†å‘é€ç»™ä¹™æ–¹ã€‚\n3. ä¹™æ–¹å†ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰å¯¹åŠ å¯†åçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚ä¹™æ–¹åªèƒ½ç”¨å…¶ä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰è§£å¯†ç”±å¯¹åº”çš„å…¬é’¥åŠ å¯†åçš„ä¿¡æ¯ã€‚\n\nã€€ã€€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå³ä½¿æ”»å‡»è€…æˆªè·äº†ä¼ è¾“çš„å¯†æ–‡ï¼Œå¹¶å¾—åˆ°äº†ä¹™çš„å…¬é’¥ï¼Œä¹Ÿæ— æ³•ç ´è§£å¯†æ–‡ï¼Œå› ä¸ºåªæœ‰ä¹™çš„ç§é’¥æ‰èƒ½è§£å¯†å¯†æ–‡ã€‚\nã€€ã€€åŒæ ·ï¼Œå¦‚æœä¹™è¦å›å¤åŠ å¯†ä¿¡æ¯ç»™ç”²ï¼Œé‚£ä¹ˆéœ€è¦ç”²å…ˆå…¬å¸ƒç”²çš„å…¬é’¥ç»™ä¹™ç”¨äºåŠ å¯†ï¼Œç”²è‡ªå·±ä¿å­˜ç”²çš„ç§é’¥ç”¨äºè§£å¯†ã€‚\nã€€ã€€è¯´åˆ°éå¯¹ç§°åŠ å¯†ï¼Œä¸å¾—ä¸è¯´RSAï¼ˆå…¶å®æ˜¯é˜¿æ¾¤å›åªæ¥è§¦è¿‡è¿™ä¸ªã€‚ã€‚ã€‚ï¼‰\n\n![yaoMing](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/6tgz2.png)\n\n## RSA\n\n### ç®—æ³•åŸç†\n\n1. é€‰å–ä¸¤ä¸ªè´¨æ•°på’Œq, è®¡ç®—`n = p * q` ã€‚på’Œqè¦å°½é‡å¤§\n2. æ ¹æ®è´¨æ•°`Ï†(p)=p-1`å’Œæ¬§æ‹‰æ–¹ç¨‹æ»¡è¶³ä¹˜æ³•ç»“åˆç‡çš„è§„å¾‹æ±‚å‡ºÏ†(n),å³`Ï†(n)=(p-1)(q-1)`\n3. é€‰å–è´¨æ•°eä½œä¸ºå…¬é’¥æŒ‡æ•°, eçš„èŒƒå›´`1<e<Ï†(n)`,ä¸” e ä¸ Ï†(n) äº’è´¨\n4. å‡ºeå¯¹Ï†(n)çš„æ¨¡åå…ƒç´ dï¼Œæ±‚è§£å…¬å¼ï¼š`ed â‰¡ 1 (mod Ï†(n))`å³å¯å¾—å‡º\n   è¿™æ ·è®¡ç®—å(n,e)æ˜¯å…¬é’¥ï¼Œ(n,d)æ˜¯ç§é’¥ã€‚\n>å…¬é’¥åŠ å¯†å…¬å¼    \n>m^e â‰¡ c (mod n) å³ c = m^e mod n     \n>ç§é’¥è§£å¯†å…¬å¼    \n>c^d â‰¡ m (mod n) å³ m = c^d mod n    \n\nRSAåŠ å¯†å¸¸ç”¨çš„å¡«å……æ–¹å¼æœ‰ä¸‹é¢3ç§ï¼š    \n\n1. RSA_PKCS1_PADDING å¡«å……æ¨¡å¼ï¼Œæœ€å¸¸ç”¨çš„æ¨¡å¼    \n   è¾“å…¥ï¼šå¿…é¡» æ¯”RSAé’¥æ¨¡é•¿(modulus)çŸ­è‡³å°‘11ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯RSA_size(rsa) â€“ 11ã€‚å¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n   æ ¹æ®è¿™ä¸ªè¦æ±‚ï¼Œå¯¹äº1024bitçš„å¯†é’¥ï¼Œblock length = 1024/8 â€“ 11 = 117 å­—èŠ‚     \n2. RSA_PKCS1_OAEP_PADDING    \n   è¾“å…¥ï¼šRSA_size(rsa) â€“ 41    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n3. for RSA_NO_PADDING ä¸å¡«å……    \n   è¾“å…¥ï¼šå¯ä»¥å’ŒRSAé’¥æ¨¡é•¿ä¸€æ ·é•¿ï¼Œå¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n\nç‰¹åˆ«æ¨èçš„æ˜¯é˜®ä¸€å³°çš„æ—¥å¿—ä¸¤ç¯‡æ—¥å¿—ï¼Œå†™å¾—éå¸¸å¥½ï¼Œæˆ‘ä¹Ÿæ˜¯å‚è€ƒè¿™ä¸ªå†™çš„ï¼š    \n[RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰](http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html)  \n[RSAç®—æ³•åŸç†ï¼ˆäºŒï¼‰](http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html)\n\n### iOS Security.framework\n\n#### encryptWithPublicKey\n\n``` objc\n- (NSString *)encrypt:(NSString *)stringToEncrypt withPublicKey:(SecKeyRef)publicKey{\n    OSStatus status = noErr;\n    size_t cipherBufferSize;\n    uint8_t *cipherBuffer;\n    uint8_t *dataToEncrypt = (uint8_t *)[stringToEncrypt cStringUsingEncoding:NSUTF8StringEncoding];\n    size_t dataLength = stringToEncrypt.length;\n    NSLog(@\"dataLength: %zu\", dataLength);\n    cipherBufferSize = SecKeyGetBlockSize(publicKey);       // 1\n    cipherBuffer = malloc(cipherBufferSize);\n    size_t totalBufferSize = 0;\n    NSMutableData *data = [[NSMutableData alloc] init];    // 2\n    //ä½¿ç”¨kSecPaddingPKCS1ä½œä¸ºåŠ å¯†çš„padding\n    if ((cipherBufferSize - 11) < dataLength) {            // 3\n        //è‹¥éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦åˆ†å—åŠ å¯†\n        size_t toEncryptDataLength = dataLength;\n        while ((cipherBufferSize - 11) < toEncryptDataLength) { // 4\n            status = SecKeyEncrypt(publicKey,\n                                   kSecPaddingPKCS1,\n                                   dataToEncrypt + (dataLength - toEncryptDataLength),\n                                   cipherBufferSize - 11,\n                                   cipherBuffer,\n                                   &cipherBufferSize);          // 5\n            toEncryptDataLength = toEncryptDataLength - (cipherBufferSize - 11);        //6\n            //CipherBufferæ˜¯é€šè¿‡mallocåˆ›å»ºï¼Œæ²¡æœ‰å¯¹å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ‰å¾ˆå¤šå…¶ä»–æ•°æ®\n            //è½¬å‚¨æˆNSDataï¼Œç¡®ä¿å¯¹æ­£ç¡®é•¿åº¦çš„cipherBufferçš„è·å–\n            [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];    //7\n            totalBufferSize += cipherBufferSize;    //8\n        }\n        //å¯¹å‰©ä½™çš„æ•°æ®è¿›è¡ŒåŠ å¯†\n        status = SecKeyEncrypt(publicKey,\n                               kSecPaddingPKCS1,\n                               dataToEncrypt + (dataLength - toEncryptDataLength),\n                               toEncryptDataLength,\n                               cipherBuffer,\n                               &cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];               \n        totalBufferSize += cipherBufferSize;\n    } else {\n        //éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦å°äºSecKeyGetBlockSize(publicKey)ï¼11ï¼Œç›´æ¥åŠ å¯†\n        status = SecKeyEncrypt(publicKey, kSecPaddingPKCS1, dataToEncrypt, dataLength, cipherBuffer, &cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];\n    }\n    if (publicKey) {\n        CFRelease(publicKey);\n    }\n    NSString *encryptedString = [GTMBase64 stringByEncodingData:[data copy]];            //9\n    free(cipherBuffer);            //10\n    return encryptedString;\n}\n```\n\n1. æ ¹æ®Keyåˆ¤æ–­åŠ è§£å¯†å—å¤§å°ï¼ˆè‹¥ä½¿ç”¨kSecPaddingPKCS1ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´å—å¤§å°å°äºè¿™ä¸ªè¿”å›å€¼ - 11ï¼‰\n2. åˆ›å»ºMutableDataç”¨ä»¥ä¸‹é¢æ“ä½œæ·»åŠ Data\n3. åˆ¤æ–­æ•°æ®æ€»å¤§å°æ˜¯å¦å¤§äºSecKeyGetBlockSize(publicKey) - 11ï¼Œæ˜¯åˆ™æ‹†åˆ†æˆå¤šä¸ªå—åŠ è§£å¯†ï¼Œå¦åˆ™ç›´æ¥åŠ è§£å¯†ã€‚\n4. whileå¾ªç¯å¤šæ¬¡æ“ä½œ\n5. ä½¿ç”¨SecKeyEncryptè¿›è¡ŒåŠ è§£å¯†\n``` objc\nOSStatus SecKeyEncrypt(\n    SecKeyRef           key,                //åŠ è§£å¯†ä½¿ç”¨çš„å¯†é’¥\n    SecPadding          padding,            //paddingï¼Œä¸€èˆ¬ä¸ºkSecPaddingPKCS1ï¼Œéœ€è¦æ³¨æ„æ•°æ®å—çš„å¤§å°é—®é¢˜\n    const uint8_t       *plainText,          //æ˜æ–‡\n    size_t              plainTextLen,        //æ˜æ–‡é•¿åº¦\n    uint8_t             *cipherText,        //è¿”å›çš„å¯†æ–‡\n    size_t              *cipherTextLen)     //è¿”å›çš„å¯†æ–‡é•¿åº¦\n    __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_2_0);\n```\n6. å°†å·²ç»åŠ è§£å¯†è¿‡çš„æ•°æ®å‰”é™¤\n7. å¾€MutableDataä¸­æ·»åŠ æ•°æ®\n8. è®¡ç®—æ€»çš„BufferSizeï¼Œè¿™é‡Œåªæ˜¯åšä¸ªç»Ÿè®¡\n9. å°†å¾—åˆ°çš„æ•°æ®è¿›è¡ŒBase64è½¬ç \n10. è®°å¾—é‡Šæ”¾cipherBuffer\n\n\n#### decryptWithPrivateKey\n\n``` objc \n- (NSString *)decrypt: (NSString *)stringToDecrypt withPrivateKey:(SecKeyRef)privateKey {\n    NSData *dataToDecrypt = [GTMBase64 decodeString:stringToDecrypt];\n    OSStatus status = noErr;\n    size_t cipherBufferSize = [dataToDecrypt length];\n    uint8_t *cipherBuffer = (uint8_t *)[dataToDecrypt bytes];\n    size_t plainBufferSize;\n    uint8_t *plainBuffer;\n    plainBufferSize = SecKeyGetBlockSize(privateKey);\n    plainBuffer = malloc(plainBufferSize);\n    NSMutableData *data = [[NSMutableData alloc] init];\n    size_t decryptLengthPer = SecKeyGetBlockSize(privateKey);\n    if (decryptLengthPer < cipherBufferSize) {\n        size_t toDecryptDataLength = cipherBufferSize;\n        size_t totalBufferSize = 0;\n        while (decryptLengthPer < toDecryptDataLength) {\n            status = SecKeyDecrypt(privateKey,\n                                   kSecPaddingPKCS1,\n                                   cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                                   decryptLengthPer,\n                                   plainBuffer,\n                                   &plainBufferSize);\n            toDecryptDataLength = toDecryptDataLength - decryptLengthPer;\n            if (status == noErr) {\n                [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n            }\n            totalBufferSize += plainBufferSize;\n        }\n        status = SecKeyDecrypt(privateKey,\n                               kSecPaddingPKCS1,\n                               cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                               decryptLengthPer,\n                               plainBuffer,\n                               &plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n        totalBufferSize += plainBufferSize;\n    } else {\n        status = SecKeyDecrypt(privateKey, kSecPaddingPKCS1, cipherBuffer, cipherBufferSize, plainBuffer, &plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n    }\n    if (privateKey) {\n        CFRelease(privateKey);\n    }\n    NSString *decryptedString = [[NSString alloc] initWithData:[data copy] encoding:NSUTF8StringEncoding];\n    free(plainBuffer);\n    return decryptedString;\n}\n```\n\nè§£å¯†å’ŒåŠ å¯†çš„æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œæ­¤å¤„ä¸å¤šåŠ èµ˜è¿°ã€‚\n[Demo](https://github.com/objchris/PKIDemo)\n\n\n**Hackerå›ï¼Œé—®ä½ æƒŠæœªï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚**    \néå¯¹ç§°åŠ å¯†å¯¹é˜¿æ¾¤å›æ¥è¯´å®Œå…¨è§£å†³äº†é—®é¢˜(ã¥ï¿£ 3ï¿£)ã¥ï¼Œä½¿ç”¨è€å¸ˆçš„å…¬é’¥åŠ å¯†è®ºæ–‡åå‘é€å›ç»™ä»–ã€‚Hackerå›å°±ç®—æˆªå–åˆ°ä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºHackerå›æ²¡æœ‰è€å¸ˆçš„ç§é’¥ï¼Œæ— æ³•è·å–åˆ°å…¶ä¸­çš„å†…å®¹ã€‚è€å¸ˆè·å–åˆ°é˜¿æ¾¤å›å‘é€çš„è®ºæ–‡åè‡ªç„¶å¯ä»¥è§£å¯†æŸ¥çœ‹ã€‚    \n\n![hahahahaha](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg)    \nä»ä¸­é˜¿æ¾¤å›ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶â¤ï¸ã€‚æ•…äº‹æœ‰(fei)ç‚¹(chang)å¼±æ™ºï¼Œå¸Œæœ›å¤§å®¶ä¸è¦åœ¨æ„ï¼Œå…³æ³¨åŠ è§£å¯†ç®—æ³•å°±å¥½äº†~\nã€€ã€€\n\né¢˜å¤–è¯ï¼šPKIåŸºç¡€æœ€è¿‘æ‰æ¥è§¦ï¼Œå­¦å¾—ä¸æ·±ï¼Œæœ‰äº›ä¸œè¥¿å†™é”™è¯·å¤§å®¶è§è°…ã€‚    \næ›´å¤šçš„ç®—æ³•ï¼Œegï¼šæ•°å­—æ‘˜è¦ã€æ•°å­—ç­¾åã€å£ä»¤è®¤è¯ç­‰ç­‰éƒ½åœ¨[Github](https://github.com/objchris/PKIDemo)ä¸Šäº†ï¼Œæœ‰å…´è¶£è¯·ç§»æ­¥ã€‚     \nå…³äºåŠ è§£å¯†ï¼Œè²Œä¼¼OpenSSLä¼šç»å¸¸ç”¨ï¼Œå…·ä½“é˜¿æ¾¤å›ä¹Ÿä¸æ¸…æ¥šï¼Œè¿˜éœ€è¦æ›´åŠ æ·±å…¥çš„å­¦ä¹ ï¼Œå…±å‹‰å§ï¼ï¼ï¼ï¼\n","source":"_posts/ç®€ç®€å•å•è¯´è¯´PKIOniOS.md","raw":"---\ntitle: ç®€ç®€å•å•è¯´è¯´PKI On iOS\ndate: 2016-04-09 20:16:05\ntags: \n- Security\ntypora-copy-images-to: ipic\n---\n\n\nHacker,é—®ä½ æƒŠæœªÎ£( Â° â–³ Â°|||)ï¸´\n\n<!--more-->\n\n![Crypto_Sherlock](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/sijuh.jpg) \n\n\nçœ‹äº†å¾ˆå¤šä¾¦æ¢ç‰‡ä¹‹åï¼Œé€æ¸å‘ç°åŠ è§£å¯†çš„ç¥å¥‡æ‰€åœ¨ã€‚èƒ½å¤Ÿåœ¨åˆ«äººæ— æ³•å¯Ÿè§‰çš„æƒ…å†µä¸‹ä¼ é€’ä¿¡æ¯ï¼ˆæˆ‘å¾ˆå–œæ¬¢çœ‹è¿™äº›ç‰‡å­ï¼Œå“ˆå“ˆå“ˆï¼‰ã€‚æ— è®ºæ˜¯Morse Codeè¿˜æ˜¯å¯¹ç€æŸæœ¬ä¹¦æ ¹æ®é¡µç è¡Œæ•°å­—æ•°æ¥ç¡®å®šè¡¨è¾¾ä¿¡æ¯ï¼Œéƒ½èƒ½è®©æˆ‘çœ‹åˆ°å‰äººçš„æ™ºæ…§ã€‚è¯´çœŸçš„ï¼Œæˆ‘ç‰¹åˆ«é’Ÿæ„ç¥æ¢å¤æ´›å…‹ï¼Œå°±ç®—è‹±æ–‡æ¸£æ¸£ä¹Ÿä¼šåœ¨æ›´æ–°çš„æ—¶å€™åˆ°Youtubeä¸Šçœ‹çœ‹ï¼Œç­‰ç¿»è¯‘å®Œå†ç¿»çœ‹ä¸€æ¬¡ã€‚è®°å¾—ä¸­å›½å‰§åœºé‚£ä¸€é›†æœ€åæ ¹æ®ä¼¦æ•¦åœ°å›¾ç ´è§£äº†è—åœ¨è‹å·ç å­é‡Œçš„æš—å·ï¼ŒSo Sexy~Â·Â·   \nâ€‹    \nä»Šå¤©æ¥èŠèŠé˜¿æ¾¤å›çš„æ•…äº‹ï¼Œé¡ºä¾¿è°ˆè°ˆ\n\n1. CommonCrytoä¸­å…³äºDESã€AESçš„éƒ¨åˆ†å†…å®¹\n2. iOSçš„Securityæ¡†æ¶é‡Œå…³äºRSAåŠ å¯†çš„éƒ¨åˆ†å†…å®¹....\n\né˜¿æ¾¤å›æ˜¯ä¸ªå¤§å››ğŸ¶ï¼Œæœ€è¿‘åœ¨çƒ¦æ¯•ä¸šè®ºæ–‡çš„äº‹æƒ…ã€‚è¾›è¾›è‹¦è‹¦æ’¸äº†äºŒåä¸ªå¹´(xiao)å¤´(shi)çš„è®ºæ–‡ï¼Œè‚¯å®šè¦ç¬¬ä¸€æ—¶é—´äº¤åˆ°è€å¸ˆæ‰‹é‡Œï¼Œè®©ä»–çœ‹çœ‹ï¼Œå¥½èˆ’ç¼“é˜¿æ¾¤å›éš¾äº§çš„å¿ƒæƒ…ã€‚é˜¿æ¾¤å›çŸ¥é“æœ‰ä¸ªHackerå›ä¸€ç›´åœ¨è§Šè§é˜¿æ¾¤å›çš„è®ºæ–‡ï¼Œæƒ³æ‹¿è¿‡æ¥ä¸€æŠ„äº†ä¹‹ã€‚è€Œä¸”Hackerå›æ˜¯ä¸€æµçš„ç½‘ç»œé»‘å®¢ï¼Œç›—çº¿å·å–åˆ«äººçš„ä¿¡æ¯æ˜¯æœ€åœ¨è¡Œçš„äº†ã€‚å› æ­¤æ€ä¹ˆå‘ç»™åƒé‡Œä¹‹å¤–çš„è€å¸ˆå¯éš¾ä¸ºé˜¿æ¾¤å›äº†ã€‚ã€‚ã€‚    \n\n![focusOnCom](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r6p4c.jpg)    \n\nå¾ˆå¿«ï¼Œé˜¿æ¾¤å›æƒ³åˆ°ç”¨åŠ å¯†çš„æ–¹æ³•ï¼Œåˆ©ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹æ³•ç»™è®ºæ–‡åŠ å¯†åå‘é€ç»™è€å¸ˆã€‚\n\n![bucuowo](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/i66ud.jpg)\n\n\n# å¯¹ç§°åŠ å¯†    \n\né‡‡ç”¨å•é’¥å¯†ç ç³»ç»Ÿçš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨ä½œä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ã€‚åŠ å¯†ç®—æ³•ä¸­æ•°DESã€3DESã€AES(å—ç®—æ³•)å’ŒRC4(æµç®—æ³•)æœ€ä¸ºå¸¸ç”¨äº†ã€‚\n\n## DES\nDES ä½¿ç”¨ä¸€ä¸ª 56 ä½çš„å¯†é’¥ä»¥åŠé™„åŠ çš„ 8 ä½å¥‡å¶æ ¡éªŒä½ï¼Œäº§ç”Ÿæœ€å¤§ 64 ä½çš„åˆ†ç»„å¤§å°ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„åˆ†ç»„å¯†ç ï¼Œä½¿ç”¨ç§°ä¸º Feistel çš„æŠ€æœ¯ï¼Œå…¶ä¸­å°†åŠ å¯†çš„æ–‡æœ¬å—åˆ†æˆä¸¤åŠã€‚ä½¿ç”¨å­å¯†é’¥å¯¹å…¶ä¸­ä¸€åŠåº”ç”¨å¾ªç¯åŠŸèƒ½ï¼Œç„¶åå°†è¾“å‡ºä¸å¦ä¸€åŠè¿›è¡Œâ€œå¼‚æˆ–â€è¿ç®—ï¼›æ¥ç€äº¤æ¢è¿™ä¸¤åŠï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šç»§ç»­ä¸‹å»ï¼Œä½†æœ€åä¸€ä¸ªå¾ªç¯ä¸äº¤æ¢ã€‚DES ä½¿ç”¨ 16 ä¸ªå¾ªç¯ï¼Œä½¿ç”¨å¼‚æˆ–ï¼Œç½®æ¢ï¼Œä»£æ¢ï¼Œç§»ä½æ“ä½œå››ç§åŸºæœ¬è¿ç®—ã€‚    \n\n![Crypto_DES](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/7o3yv.jpg)\n\n### 3DES\n\n3DESæ˜¯åœ¨DESçš„åŸºç¡€ä¸Šåšäº†ä¸¤æ¬¡åŠ å¯†å’Œä¸€æ¬¡è§£å¯†ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼šè®¾Ek()å’ŒDk()ä»£è¡¨DESç®—æ³•çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ï¼ŒKä»£è¡¨DESç®—æ³•ä½¿ç”¨çš„å¯†é’¥ï¼ŒPä»£è¡¨æ˜æ–‡ï¼ŒCä»£è¡¨å¯†æ–‡ï¼Œè¿™æ ·ï¼š  \n3DESåŠ å¯†è¿‡ç¨‹ä¸ºï¼šC=Ek3(Dk2(Ek1(P)))    \n3DESè§£å¯†è¿‡ç¨‹ä¸ºï¼šP=Dk1(EK2(Dk3(C)))    \nè‹¥**Ek1 == Ek2 == Ek3**ï¼Œå°±æ˜¯ç®€å•çš„DESäº†ã€‚\n\n## AES\n![Crypto_AES](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1lfh4.png)    \nå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œè‹¥æœ‰ä¾µçŠ¯åˆ°æƒåˆ©ä¹‹å¤„ï¼Œè¯·å‘ŠçŸ¥ï¼Œè°¢è°¢~    \n\nAESåŠ å¯†è¿‡ç¨‹æ¶‰åŠåˆ°4ç§æ“ä½œï¼šå­—èŠ‚æ›¿ä»£ï¼ˆSubBytesï¼‰ã€è¡Œç§»ä½ï¼ˆShiftRowsï¼‰ã€åˆ—æ··æ·†ï¼ˆMixColumnsï¼‰å’Œè½®å¯†é’¥åŠ ï¼ˆAddRoundKeyï¼‰ã€‚è§£å¯†è¿‡ç¨‹åˆ†åˆ«ä¸ºå¯¹åº”çš„é€†æ“ä½œã€‚ç”±äºæ¯ä¸€æ­¥æ“ä½œéƒ½æ˜¯å¯é€†çš„ï¼ŒæŒ‰ç…§ç›¸åçš„é¡ºåºè¿›è¡Œè§£å¯†å³å¯æ¢å¤æ˜æ–‡ã€‚åŠ è§£å¯†ä¸­æ¯è½®çš„å¯†é’¥åˆ†åˆ«ç”±åˆå§‹å¯†é’¥æ‰©å±•å¾—åˆ°ã€‚ç®—æ³•ä¸­16å­—èŠ‚çš„æ˜æ–‡ã€å¯†æ–‡å’Œè½®å¯†é’¥éƒ½ä»¥ä¸€ä¸ª4x4çš„çŸ©é˜µè¡¨ç¤ºã€‚    \nç®—æ³•è¯¦ç»†å·²ç»æœ‰å…¶ä»–äººå†™äº†ï¼Œæˆ‘å°±ä¸å†é€ è½®å­äº†ã€‚[å¯†ç ç®—æ³•è¯¦è§£â€”â€”AES](http://www.blogfshare.com/aes-rijndael.html)    \nè¿˜æœ‰ç®—æ³•åŠè§£å¯†ç®—æ³•çš„[æ¨¡å¼ä»‹ç»](http://blog.csdn.net/searchsun/article/details/2516191)ï¼Œå¯ä»¥äº†è§£äº†è§£~    \n\n## RC4\n\nä¸åŒäºå—ç®—æ³•çš„æ˜¯ï¼ŒRC4ç­‰æµç®—æ³•ä¸æ˜¯å¯¹æ˜æ–‡è¿›è¡Œåˆ†ç»„å¤„ç†ï¼Œè€Œæ˜¯å­—èŠ‚æµçš„æ–¹å¼ä¾æ¬¡åŠ å¯†æ˜æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œè§£å¯†çš„æ—¶å€™ä¹Ÿæ˜¯ä¾æ¬¡å¯¹å¯†æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œè§£å¯†ã€‚\n\n## CommonCrypto\n\nå¯¹äºèº«ä¸ºiOSæ”»åŸç‹®çš„é˜¿æ¾¤å›æ¥è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯è¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒé‡è¦ã€‚    \n\n### CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\n\n1. CCOperationï¼šå®šä¹‰æ“ä½œï¼šåŠ å¯†æˆ–è§£å¯†\n\n``` \nenum {\n    kCCEncrypt = 0, \n    kCCDecrypt,     \n};\ntypedef uint32_t CCOperation;\n```\n\n2. CCAlgorithmï¼šåŠ è§£å¯†ç®—æ³•ï¼Œå¾ˆæ˜æ˜¾å°±ä¸è¯¦ç»†è¯´æ˜äº†ã€‚\n\n``` objc\nenum {\n    kCCAlgorithmAES128 = 0,\n    kCCAlgorithmAES = 0,\n    kCCAlgorithmDES,\n    kCCAlgorithm3DES,       \n    kCCAlgorithmCAST,       \n    kCCAlgorithmRC4,\n    kCCAlgorithmRC2,   \n    kCCAlgorithmBlowfish    \n};\ntypedef uint32_t CCAlgorithm;\n```\n\n3. CCOptionsï¼šé€‰é¡¹ï¼šæŒ‰ç…§P7è¡¥è¶³å—ç®—æ³•çš„å—é•¿åº¦æˆ–è€…é€‰æ‹©ECBæ¨¡å¼ï¼Œå…³äºæ¨¡å¼è¯·çœ‹ä¸Šé¢AESä¸­ä»‹ç»çš„æ–‡ç« ã€‚å¯¹äºRC4ç­‰æµç®—æ³•ä¸é€‚ç”¨ã€‚æˆ–è€…è¯´ä¸éœ€è¦ä½¿ç”¨åˆ°\n\n``` objc\nenum {\n    kCCOptionPKCS7Padding   = 0x0001,\n    kCCOptionECBMode        = 0x0002\n};\n```\n\n4. KeySizeå’ŒBlockSizeï¼šè§„å®šåŠ è§£å¯†å¯†é’¥çš„é•¿åº¦å’Œæ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦\n\n``` objc\nenum {\n    kCCKeySizeAES128          = 16,\n    kCCKeySizeAES192          = 24,\n    kCCKeySizeAES256          = 32,\n    kCCKeySizeDES             = 8,\n    kCCKeySize3DES            = 24,\n    kCCKeySizeMinCAST         = 5,\n    kCCKeySizeMaxCAST         = 16,\n    kCCKeySizeMinRC4          = 1,\n    kCCKeySizeMaxRC4          = 512,\n    kCCKeySizeMinRC2          = 1,\n    kCCKeySizeMaxRC2          = 128,\n    kCCKeySizeMinBlowfish     = 8,\n    kCCKeySizeMaxBlowfish     = 56,\n};\nenum {\n    /* AES */\n    kCCBlockSizeAES128        = 16,\n    /* DES */\n    kCCBlockSizeDES           = 8,\n    /* 3DES */\n    kCCBlockSize3DES          = 8,\n    /* CAST */\n    kCCBlockSizeCAST          = 8,\n    kCCBlockSizeRC2           = 8,\n    kCCBlockSizeBlowfish      = 8,\n};\n```\n\n### é€šè¿‡ä»£ç å®ç°\n\n#### å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\n\n``` objc\n#import <CommonCrypto/CommonCrypto.h>\n```\n\n#### symCrypt\n\n``` objc\n/*!\n    @function   symCrypt\n    @abstract   å¯¹ç§°è§£å¯†\n    @param      operation       åŠ å¯†æˆ–è§£å¯†\n    @param      data            éœ€è¦åŠ è§£å¯†çš„æ•°æ®\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      key             åŠ è§£å¯†æ—¶æä¾›çš„å¯†é’¥\n    @param      iv              Initialization Vector(CBCæ¨¡å¼ä¸‹éœ€è¦)\n    @param      options         åŠ å¯†æ•°æ®å­—èŠ‚æ•°ä¸æ˜¯blockçš„æ•´æ•°å€æ—¶éœ€è¦åˆ¶å®špadding\n                                è¯¦æƒ…å‚è§CommonCryptorå¤´æ–‡ä»¶\n    @param      status          åŠ è§£å¯†æˆåŠŸä¸å¦æ‰€è¿”å›çš„çŠ¶æ€\n    @result     è§£å¯†åå¾—åˆ°çš„ç»“æœ\n */\n- (NSData *)symCrypt:(CCOperation)operation\n         processData:(NSData *)data\n      UsingAlgorithm:(CCAlgorithm)algorithm\n                 key:(NSData *)key\n initalizationVector:(NSData *)iv\n             options:(CCOptions)options\n              status:(CCCryptorStatus *)status\n{\n    NSData *result = nil;\n    NSMutableData *cKey = [key mutableCopy], *cIV = [iv mutableCopy];\n    [self fixKeyLengthsByAlgorithm:algorithm keyData:cKey ivData:cIV];//1\n    size_t bufferSize = [data length] + [self blockSizeByAlgorithm:algorithm]; // 2\n    void *buffer = malloc(bufferSize); //3\n    size_t encryptedSize = 0;\n    *status = CCCrypt(operation, algorithm, options, [cKey bytes], [cKey length], [cIV bytes], [data bytes], [data length], buffer, bufferSize, &encryptedSize); //4\n    if (*status == kCCSuccess) {\n        result = [NSData dataWithBytes:buffer length:encryptedSize];  //5\n    } else {\n        NSLog(@\"[ERROR] failed to encrypt|CCCryptoStatus: %d\", *status);\n    }\n    free(buffer);  //6\n    return result;  //7\n}\n```\n\n1. æ ¹æ®åŠ è§£å¯†ç®—æ³•æ£€æŸ¥Keyå’Œivçš„é•¿åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹é¢åˆ—å‡ºçš„å‡½æ•°fixKeyLength\n2. åŠ å¯†åçš„æ•°æ®æ€»å°äºç­‰äºæ•°æ®é•¿åº¦åŠ ä¸Šblockçš„å¤§å°\n3. ç”³è¯·bufferSizeçš„ç©ºé—´ä»¥ä¿å­˜åŠ å¯†æˆ–è§£å¯†åçš„æ•°æ®\n4. è°ƒç”¨CCCryptå‡½æ•°å®ç°åŠ è§£å¯†ã€‚\n``` objc\nCCCryptorStatus CCCrypt(\n    CCOperation op,         /* åŠ å¯†æˆ–è§£å¯†ï¼škCCEncrypt, etc. */\n    CCAlgorithm alg,        /* åŠ è§£å¯†é‡‡ç”¨çš„ç®—æ³•ï¼škCCAlgorithmAES128, etc. */\n    CCOptions options,      /* kCCOptionPKCS7Padding, etc. */\n    const void *key,        /* å¯†é’¥ */\n    size_t keyLength,       /* å¯†é’¥é•¿åº¦ */\n    const void *iv,         /* ivï¼Œä½¿ç”¨ä¸CBCæ¨¡å¼ä¸‹ï¼Œæ˜æ–‡å32ä½å’Œivå¼‚æˆ–ååšä¸ºä¸‹ä¸€é˜¶æ®µçš„å‰32ä½ */\n    const void *dataIn,     /* è¦åŠ å¯†æˆ–è§£å¯†çš„æ•°æ® */\n    size_t dataInLength,    /* æ•°æ®é•¿åº¦ */\n    void *dataOut,          /* æ³¨æ„ä¼ å…¥çš„æ˜¯æŒ‡é’ˆï¼ŒåŠ è§£å¯†åçš„æ•°æ®å°†ä»æ­¤å¤„è¿”å› */\n    size_t dataOutAvailable,/* ä¸ºdataOutç”³è¯·çš„å¯å†™é•¿åº¦ */\n    size_t *dataOutMoved    /* ç»“æœæ‰€å çš„é•¿åº¦ */\n    )    \n    __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);\n```\n5. è‹¥æˆåŠŸï¼Œåˆ™å°†(void *)ç±»å‹çš„æ•°æ®å°è£…åˆ°NSDataä¸­ã€‚\n6. é‡Šæ”¾ç”³è¯·çš„bufferå†…å­˜\n7. è¿”å›ã€‚\n\n#### fixKeyLength\n\n``` objc\n/*!\n    @function   fixKeyLength\n    @abstract   ä¿®æ”¹å¯†é’¥é•¿åº¦è‡³ä¸ç®—æ³•åŒ¹é…\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      keyData         å¯†é’¥\n    @param      ivData          Initialization Vector\n    @result     å°†å¯†é’¥é•¿åº¦å’Œivä¿®æ”¹è‡³ä¸ç®—æ³•åŒ¹é…çš„é•¿åº¦\n */\n- (void)fixKeyLengthsByAlgorithm:(CCAlgorithm)algorithm\n                         keyData:(NSMutableData *)keyData\n                          ivData:(NSMutableData *)ivData\n{\n    NSUInteger keyLength = [keyData length];\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n        {\n            if (keyLength < kCCKeySizeAES128) {\n                keyData.length = kCCKeySizeAES128;\n            } else if (keyLength < kCCKeySizeAES192) {\n                keyData.length = kCCKeySizeAES192;\n            } else {\n                keyData.length = kCCKeySizeAES256;\n            }\n            break;\n        }\n        case kCCAlgorithmDES:\n        {\n            keyData.length = kCCKeySizeDES;\n            break;\n        }\n        case kCCAlgorithm3DES:\n        {\n            keyData.length = kCCKeySize3DES;\n            break;\n        }\n        case kCCAlgorithmRC4:\n        {\n            keyData.length = kCCKeySizeMaxRC4;\n            break;\n        }\n        default:\n            break;\n    }\n    ivData.length = keyData.length;\n}\n```\n\n#### blockSizeByAlgorithm\n\n``` objc \n/*!\n    @function   blockSizeByAlgorithm\n    @abstract   æ ¹æ®ç®—æ³•è·å–æ¯ä¸ªblockçš„å¤§å°\n    @param      algorithm       åŠ å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @result     è¯¥ç®—æ³•å¯¹åº”çš„blockå¤§å°\n */\n- (size_t)blockSizeByAlgorithm:(CCAlgorithm)algorithm {\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n            return kCCBlockSizeAES128;\n        case kCCAlgorithmDES:\n        case kCCAlgorithm3DES:\n        case kCCAlgorithmRC4:\n            return kCCBlockSizeDES;\n        default:\n            return 0;\n    }\n}\n```\n\nä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†è§„èŒƒå¯†é’¥çš„é•¿åº¦å’Œè·å–æ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦ï¼Œå¾ˆå¥½ç†è§£å°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚è¿™æ ·è¿˜æ˜¯ä¸èƒ½å‚»ç“œå¼åœ°è°ƒç”¨ï¼Œå› æ­¤é˜¿æ¾¤å›åˆ›å»ºäº†DESCipherActorç»§æ‰¿äºSymCipherActorï¼Œè¿›ä¸€æ­¥è¿›è¡Œå°è£…ï¼š\nã€€ã€€DESCipherActor.h\nã€€ã€€``` objc\n    - (NSString *)encryptInCBC:(NSString *)plainText key:(NSString *)key iv:(NSData *)iv;\n    - (NSString *)decryptInCBC:(NSString *)cipherText key:(NSString *)key iv:(NSData *)iv;\n    - (NSString *)encryptInEBC:(NSString *)plainText key:(NSString *)key;\n    - (NSString *)decryptInEBC:(NSString *)cipherText key:(NSString *)key;\nã€€ã€€```\nã€€ã€€è¿˜æœ‰AESã€RC4çš„å®ç°å¤§è‡´ç›¸åŒï¼Œå…·ä½“å¯å‚è€ƒDemoï¼Œå·²ç»ä¸Šä¼ [Github](https://github.com/objchris/PKIDemo)\n\n\nã€€ã€€æœç„¶ï¼Œé‡‡ç”¨åŠ å¯†ç®—æ³•åŠ å¯†åçš„è®ºæ–‡é¡ºåˆ©å‘åˆ°è€å¸ˆé‚£é‡Œï¼Œé—®é¢˜æ˜¯è§£å¯†ç”¨å¯†é’¥è¿˜åœ¨é˜¿æ¾¤å›æ‰‹ä¸Šï¼Œè€å¸ˆè¿˜æ˜¯æ— æ³•çœ‹åˆ°è®ºæ–‡å†…å®¹ï¼Œå¯†é’¥ä¸èƒ½é€šè¿‡ç½‘ç»œä¼ è¾“ç»™è€å¸ˆï¼Œå› ä¸ºHackerå›è¿˜åœ¨ç›‘å¬ç€é˜¿æ¾¤å›å’Œè€å¸ˆçš„é€šè®¯ã€‚éš¾é“è¦é˜¿æ¾¤å›ä¸æƒ§åƒé‡Œï¼ˆå…¶å®ä¸æ˜¯å¾ˆè¿œï¼Œå“ˆå“ˆå“ˆã€‚æˆ‘å°±å¤¸å¼ é‚£ä¹ˆä¸€ç‚¹ç‚¹~ï¼‰å»åˆ°è€å¸ˆé‚£è¾¹ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥å°†è®ºæ–‡äº¤ç»™è€å¸ˆå‘¢ï¼Ÿï¼ï¼ï¼    \nã€€ã€€What the ****ï¼ï¼ï¼ğŸ’”ğŸ’”é˜¿æ¾¤å›æ­¤æ—¶å¿ƒé‡Œåƒä¸‡åªè‰æ³¥é©¬åœ¨å¥”è…¾ã€‚        \n\n![desk](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/9hwet.jpg)    \n\nã€€ã€€ä½†æ˜¯é˜¿æ¾¤å›ä¸ä¼šè¿™æ ·è½»æ˜“åœ°ç‹—å¸¦ï¼Œå› ä¸ºè¿˜å¯ä»¥é€šè¿‡éå¯¹ç§°åŠ å¯†æ¥è§£å†³...\n\n\n# éå¯¹ç§°åŠ å¯†\n\nå¯¹ç§°åŠ å¯†ç®—æ³•åœ¨åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ï¼›è€Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™ä¸¤ä¸ªç§˜é’¥æ˜¯å…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼Œç®€ç§°å…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivate keyï¼Œç®€ç§°ç§é’¥ï¼‰ã€‚\nå¦‚ç”²ä¹™åŒæ–¹éœ€è¦åŠ å¯†é€šä¿¡ï¼š\n\n1. ä¹™æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰å¹¶å°†å…¬é’¥å‘å…¶å®ƒæ–¹å…¬å¼€ã€‚\n2. å¾—åˆ°è¯¥å…¬é’¥çš„ç”²æ–¹ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åå†å‘é€ç»™ä¹™æ–¹ã€‚\n3. ä¹™æ–¹å†ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰å¯¹åŠ å¯†åçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚ä¹™æ–¹åªèƒ½ç”¨å…¶ä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰è§£å¯†ç”±å¯¹åº”çš„å…¬é’¥åŠ å¯†åçš„ä¿¡æ¯ã€‚\n\nã€€ã€€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå³ä½¿æ”»å‡»è€…æˆªè·äº†ä¼ è¾“çš„å¯†æ–‡ï¼Œå¹¶å¾—åˆ°äº†ä¹™çš„å…¬é’¥ï¼Œä¹Ÿæ— æ³•ç ´è§£å¯†æ–‡ï¼Œå› ä¸ºåªæœ‰ä¹™çš„ç§é’¥æ‰èƒ½è§£å¯†å¯†æ–‡ã€‚\nã€€ã€€åŒæ ·ï¼Œå¦‚æœä¹™è¦å›å¤åŠ å¯†ä¿¡æ¯ç»™ç”²ï¼Œé‚£ä¹ˆéœ€è¦ç”²å…ˆå…¬å¸ƒç”²çš„å…¬é’¥ç»™ä¹™ç”¨äºåŠ å¯†ï¼Œç”²è‡ªå·±ä¿å­˜ç”²çš„ç§é’¥ç”¨äºè§£å¯†ã€‚\nã€€ã€€è¯´åˆ°éå¯¹ç§°åŠ å¯†ï¼Œä¸å¾—ä¸è¯´RSAï¼ˆå…¶å®æ˜¯é˜¿æ¾¤å›åªæ¥è§¦è¿‡è¿™ä¸ªã€‚ã€‚ã€‚ï¼‰\n\n![yaoMing](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/6tgz2.png)\n\n## RSA\n\n### ç®—æ³•åŸç†\n\n1. é€‰å–ä¸¤ä¸ªè´¨æ•°på’Œq, è®¡ç®—`n = p * q` ã€‚på’Œqè¦å°½é‡å¤§\n2. æ ¹æ®è´¨æ•°`Ï†(p)=p-1`å’Œæ¬§æ‹‰æ–¹ç¨‹æ»¡è¶³ä¹˜æ³•ç»“åˆç‡çš„è§„å¾‹æ±‚å‡ºÏ†(n),å³`Ï†(n)=(p-1)(q-1)`\n3. é€‰å–è´¨æ•°eä½œä¸ºå…¬é’¥æŒ‡æ•°, eçš„èŒƒå›´`1<e<Ï†(n)`,ä¸” e ä¸ Ï†(n) äº’è´¨\n4. å‡ºeå¯¹Ï†(n)çš„æ¨¡åå…ƒç´ dï¼Œæ±‚è§£å…¬å¼ï¼š`ed â‰¡ 1 (mod Ï†(n))`å³å¯å¾—å‡º\n   è¿™æ ·è®¡ç®—å(n,e)æ˜¯å…¬é’¥ï¼Œ(n,d)æ˜¯ç§é’¥ã€‚\n>å…¬é’¥åŠ å¯†å…¬å¼    \n>m^e â‰¡ c (mod n) å³ c = m^e mod n     \n>ç§é’¥è§£å¯†å…¬å¼    \n>c^d â‰¡ m (mod n) å³ m = c^d mod n    \n\nRSAåŠ å¯†å¸¸ç”¨çš„å¡«å……æ–¹å¼æœ‰ä¸‹é¢3ç§ï¼š    \n\n1. RSA_PKCS1_PADDING å¡«å……æ¨¡å¼ï¼Œæœ€å¸¸ç”¨çš„æ¨¡å¼    \n   è¾“å…¥ï¼šå¿…é¡» æ¯”RSAé’¥æ¨¡é•¿(modulus)çŸ­è‡³å°‘11ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯RSA_size(rsa) â€“ 11ã€‚å¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n   æ ¹æ®è¿™ä¸ªè¦æ±‚ï¼Œå¯¹äº1024bitçš„å¯†é’¥ï¼Œblock length = 1024/8 â€“ 11 = 117 å­—èŠ‚     \n2. RSA_PKCS1_OAEP_PADDING    \n   è¾“å…¥ï¼šRSA_size(rsa) â€“ 41    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n3. for RSA_NO_PADDING ä¸å¡«å……    \n   è¾“å…¥ï¼šå¯ä»¥å’ŒRSAé’¥æ¨¡é•¿ä¸€æ ·é•¿ï¼Œå¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……    \n   è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    \n\nç‰¹åˆ«æ¨èçš„æ˜¯é˜®ä¸€å³°çš„æ—¥å¿—ä¸¤ç¯‡æ—¥å¿—ï¼Œå†™å¾—éå¸¸å¥½ï¼Œæˆ‘ä¹Ÿæ˜¯å‚è€ƒè¿™ä¸ªå†™çš„ï¼š    \n[RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰](http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html)  \n[RSAç®—æ³•åŸç†ï¼ˆäºŒï¼‰](http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html)\n\n### iOS Security.framework\n\n#### encryptWithPublicKey\n\n``` objc\n- (NSString *)encrypt:(NSString *)stringToEncrypt withPublicKey:(SecKeyRef)publicKey{\n    OSStatus status = noErr;\n    size_t cipherBufferSize;\n    uint8_t *cipherBuffer;\n    uint8_t *dataToEncrypt = (uint8_t *)[stringToEncrypt cStringUsingEncoding:NSUTF8StringEncoding];\n    size_t dataLength = stringToEncrypt.length;\n    NSLog(@\"dataLength: %zu\", dataLength);\n    cipherBufferSize = SecKeyGetBlockSize(publicKey);       // 1\n    cipherBuffer = malloc(cipherBufferSize);\n    size_t totalBufferSize = 0;\n    NSMutableData *data = [[NSMutableData alloc] init];    // 2\n    //ä½¿ç”¨kSecPaddingPKCS1ä½œä¸ºåŠ å¯†çš„padding\n    if ((cipherBufferSize - 11) < dataLength) {            // 3\n        //è‹¥éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦åˆ†å—åŠ å¯†\n        size_t toEncryptDataLength = dataLength;\n        while ((cipherBufferSize - 11) < toEncryptDataLength) { // 4\n            status = SecKeyEncrypt(publicKey,\n                                   kSecPaddingPKCS1,\n                                   dataToEncrypt + (dataLength - toEncryptDataLength),\n                                   cipherBufferSize - 11,\n                                   cipherBuffer,\n                                   &cipherBufferSize);          // 5\n            toEncryptDataLength = toEncryptDataLength - (cipherBufferSize - 11);        //6\n            //CipherBufferæ˜¯é€šè¿‡mallocåˆ›å»ºï¼Œæ²¡æœ‰å¯¹å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ‰å¾ˆå¤šå…¶ä»–æ•°æ®\n            //è½¬å‚¨æˆNSDataï¼Œç¡®ä¿å¯¹æ­£ç¡®é•¿åº¦çš„cipherBufferçš„è·å–\n            [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];    //7\n            totalBufferSize += cipherBufferSize;    //8\n        }\n        //å¯¹å‰©ä½™çš„æ•°æ®è¿›è¡ŒåŠ å¯†\n        status = SecKeyEncrypt(publicKey,\n                               kSecPaddingPKCS1,\n                               dataToEncrypt + (dataLength - toEncryptDataLength),\n                               toEncryptDataLength,\n                               cipherBuffer,\n                               &cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];               \n        totalBufferSize += cipherBufferSize;\n    } else {\n        //éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦å°äºSecKeyGetBlockSize(publicKey)ï¼11ï¼Œç›´æ¥åŠ å¯†\n        status = SecKeyEncrypt(publicKey, kSecPaddingPKCS1, dataToEncrypt, dataLength, cipherBuffer, &cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];\n    }\n    if (publicKey) {\n        CFRelease(publicKey);\n    }\n    NSString *encryptedString = [GTMBase64 stringByEncodingData:[data copy]];            //9\n    free(cipherBuffer);            //10\n    return encryptedString;\n}\n```\n\n1. æ ¹æ®Keyåˆ¤æ–­åŠ è§£å¯†å—å¤§å°ï¼ˆè‹¥ä½¿ç”¨kSecPaddingPKCS1ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´å—å¤§å°å°äºè¿™ä¸ªè¿”å›å€¼ - 11ï¼‰\n2. åˆ›å»ºMutableDataç”¨ä»¥ä¸‹é¢æ“ä½œæ·»åŠ Data\n3. åˆ¤æ–­æ•°æ®æ€»å¤§å°æ˜¯å¦å¤§äºSecKeyGetBlockSize(publicKey) - 11ï¼Œæ˜¯åˆ™æ‹†åˆ†æˆå¤šä¸ªå—åŠ è§£å¯†ï¼Œå¦åˆ™ç›´æ¥åŠ è§£å¯†ã€‚\n4. whileå¾ªç¯å¤šæ¬¡æ“ä½œ\n5. ä½¿ç”¨SecKeyEncryptè¿›è¡ŒåŠ è§£å¯†\n``` objc\nOSStatus SecKeyEncrypt(\n    SecKeyRef           key,                //åŠ è§£å¯†ä½¿ç”¨çš„å¯†é’¥\n    SecPadding          padding,            //paddingï¼Œä¸€èˆ¬ä¸ºkSecPaddingPKCS1ï¼Œéœ€è¦æ³¨æ„æ•°æ®å—çš„å¤§å°é—®é¢˜\n    const uint8_t       *plainText,          //æ˜æ–‡\n    size_t              plainTextLen,        //æ˜æ–‡é•¿åº¦\n    uint8_t             *cipherText,        //è¿”å›çš„å¯†æ–‡\n    size_t              *cipherTextLen)     //è¿”å›çš„å¯†æ–‡é•¿åº¦\n    __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_2_0);\n```\n6. å°†å·²ç»åŠ è§£å¯†è¿‡çš„æ•°æ®å‰”é™¤\n7. å¾€MutableDataä¸­æ·»åŠ æ•°æ®\n8. è®¡ç®—æ€»çš„BufferSizeï¼Œè¿™é‡Œåªæ˜¯åšä¸ªç»Ÿè®¡\n9. å°†å¾—åˆ°çš„æ•°æ®è¿›è¡ŒBase64è½¬ç \n10. è®°å¾—é‡Šæ”¾cipherBuffer\n\n\n#### decryptWithPrivateKey\n\n``` objc \n- (NSString *)decrypt: (NSString *)stringToDecrypt withPrivateKey:(SecKeyRef)privateKey {\n    NSData *dataToDecrypt = [GTMBase64 decodeString:stringToDecrypt];\n    OSStatus status = noErr;\n    size_t cipherBufferSize = [dataToDecrypt length];\n    uint8_t *cipherBuffer = (uint8_t *)[dataToDecrypt bytes];\n    size_t plainBufferSize;\n    uint8_t *plainBuffer;\n    plainBufferSize = SecKeyGetBlockSize(privateKey);\n    plainBuffer = malloc(plainBufferSize);\n    NSMutableData *data = [[NSMutableData alloc] init];\n    size_t decryptLengthPer = SecKeyGetBlockSize(privateKey);\n    if (decryptLengthPer < cipherBufferSize) {\n        size_t toDecryptDataLength = cipherBufferSize;\n        size_t totalBufferSize = 0;\n        while (decryptLengthPer < toDecryptDataLength) {\n            status = SecKeyDecrypt(privateKey,\n                                   kSecPaddingPKCS1,\n                                   cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                                   decryptLengthPer,\n                                   plainBuffer,\n                                   &plainBufferSize);\n            toDecryptDataLength = toDecryptDataLength - decryptLengthPer;\n            if (status == noErr) {\n                [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n            }\n            totalBufferSize += plainBufferSize;\n        }\n        status = SecKeyDecrypt(privateKey,\n                               kSecPaddingPKCS1,\n                               cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                               decryptLengthPer,\n                               plainBuffer,\n                               &plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n        totalBufferSize += plainBufferSize;\n    } else {\n        status = SecKeyDecrypt(privateKey, kSecPaddingPKCS1, cipherBuffer, cipherBufferSize, plainBuffer, &plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n    }\n    if (privateKey) {\n        CFRelease(privateKey);\n    }\n    NSString *decryptedString = [[NSString alloc] initWithData:[data copy] encoding:NSUTF8StringEncoding];\n    free(plainBuffer);\n    return decryptedString;\n}\n```\n\nè§£å¯†å’ŒåŠ å¯†çš„æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œæ­¤å¤„ä¸å¤šåŠ èµ˜è¿°ã€‚\n[Demo](https://github.com/objchris/PKIDemo)\n\n\n**Hackerå›ï¼Œé—®ä½ æƒŠæœªï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚**    \néå¯¹ç§°åŠ å¯†å¯¹é˜¿æ¾¤å›æ¥è¯´å®Œå…¨è§£å†³äº†é—®é¢˜(ã¥ï¿£ 3ï¿£)ã¥ï¼Œä½¿ç”¨è€å¸ˆçš„å…¬é’¥åŠ å¯†è®ºæ–‡åå‘é€å›ç»™ä»–ã€‚Hackerå›å°±ç®—æˆªå–åˆ°ä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºHackerå›æ²¡æœ‰è€å¸ˆçš„ç§é’¥ï¼Œæ— æ³•è·å–åˆ°å…¶ä¸­çš„å†…å®¹ã€‚è€å¸ˆè·å–åˆ°é˜¿æ¾¤å›å‘é€çš„è®ºæ–‡åè‡ªç„¶å¯ä»¥è§£å¯†æŸ¥çœ‹ã€‚    \n\n![hahahahaha](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg)    \nä»ä¸­é˜¿æ¾¤å›ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶â¤ï¸ã€‚æ•…äº‹æœ‰(fei)ç‚¹(chang)å¼±æ™ºï¼Œå¸Œæœ›å¤§å®¶ä¸è¦åœ¨æ„ï¼Œå…³æ³¨åŠ è§£å¯†ç®—æ³•å°±å¥½äº†~\nã€€ã€€\n\né¢˜å¤–è¯ï¼šPKIåŸºç¡€æœ€è¿‘æ‰æ¥è§¦ï¼Œå­¦å¾—ä¸æ·±ï¼Œæœ‰äº›ä¸œè¥¿å†™é”™è¯·å¤§å®¶è§è°…ã€‚    \næ›´å¤šçš„ç®—æ³•ï¼Œegï¼šæ•°å­—æ‘˜è¦ã€æ•°å­—ç­¾åã€å£ä»¤è®¤è¯ç­‰ç­‰éƒ½åœ¨[Github](https://github.com/objchris/PKIDemo)ä¸Šäº†ï¼Œæœ‰å…´è¶£è¯·ç§»æ­¥ã€‚     \nå…³äºåŠ è§£å¯†ï¼Œè²Œä¼¼OpenSSLä¼šç»å¸¸ç”¨ï¼Œå…·ä½“é˜¿æ¾¤å›ä¹Ÿä¸æ¸…æ¥šï¼Œè¿˜éœ€è¦æ›´åŠ æ·±å…¥çš„å­¦ä¹ ï¼Œå…±å‹‰å§ï¼ï¼ï¼ï¼\n","slug":"ç®€ç®€å•å•è¯´è¯´PKIOniOS","published":1,"updated":"2018-03-07T08:04:04.756Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12bb000hcqy8py5pun6i","content":"<p>Hacker,é—®ä½ æƒŠæœªÎ£( Â° â–³ Â°|||)ï¸´</p>\n<a id=\"more\"></a>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/sijuh.jpg\" alt=\"Crypto_Sherlock\"> </p>\n<p>çœ‹äº†å¾ˆå¤šä¾¦æ¢ç‰‡ä¹‹åï¼Œé€æ¸å‘ç°åŠ è§£å¯†çš„ç¥å¥‡æ‰€åœ¨ã€‚èƒ½å¤Ÿåœ¨åˆ«äººæ— æ³•å¯Ÿè§‰çš„æƒ…å†µä¸‹ä¼ é€’ä¿¡æ¯ï¼ˆæˆ‘å¾ˆå–œæ¬¢çœ‹è¿™äº›ç‰‡å­ï¼Œå“ˆå“ˆå“ˆï¼‰ã€‚æ— è®ºæ˜¯Morse Codeè¿˜æ˜¯å¯¹ç€æŸæœ¬ä¹¦æ ¹æ®é¡µç è¡Œæ•°å­—æ•°æ¥ç¡®å®šè¡¨è¾¾ä¿¡æ¯ï¼Œéƒ½èƒ½è®©æˆ‘çœ‹åˆ°å‰äººçš„æ™ºæ…§ã€‚è¯´çœŸçš„ï¼Œæˆ‘ç‰¹åˆ«é’Ÿæ„ç¥æ¢å¤æ´›å…‹ï¼Œå°±ç®—è‹±æ–‡æ¸£æ¸£ä¹Ÿä¼šåœ¨æ›´æ–°çš„æ—¶å€™åˆ°Youtubeä¸Šçœ‹çœ‹ï¼Œç­‰ç¿»è¯‘å®Œå†ç¿»çœ‹ä¸€æ¬¡ã€‚è®°å¾—ä¸­å›½å‰§åœºé‚£ä¸€é›†æœ€åæ ¹æ®ä¼¦æ•¦åœ°å›¾ç ´è§£äº†è—åœ¨è‹å·ç å­é‡Œçš„æš—å·ï¼ŒSo Sexy~Â·Â·<br>â€‹<br>ä»Šå¤©æ¥èŠèŠé˜¿æ¾¤å›çš„æ•…äº‹ï¼Œé¡ºä¾¿è°ˆè°ˆ</p>\n<ol>\n<li>CommonCrytoä¸­å…³äºDESã€AESçš„éƒ¨åˆ†å†…å®¹</li>\n<li>iOSçš„Securityæ¡†æ¶é‡Œå…³äºRSAåŠ å¯†çš„éƒ¨åˆ†å†…å®¹â€¦.</li>\n</ol>\n<p>é˜¿æ¾¤å›æ˜¯ä¸ªå¤§å››ğŸ¶ï¼Œæœ€è¿‘åœ¨çƒ¦æ¯•ä¸šè®ºæ–‡çš„äº‹æƒ…ã€‚è¾›è¾›è‹¦è‹¦æ’¸äº†äºŒåä¸ªå¹´(xiao)å¤´(shi)çš„è®ºæ–‡ï¼Œè‚¯å®šè¦ç¬¬ä¸€æ—¶é—´äº¤åˆ°è€å¸ˆæ‰‹é‡Œï¼Œè®©ä»–çœ‹çœ‹ï¼Œå¥½èˆ’ç¼“é˜¿æ¾¤å›éš¾äº§çš„å¿ƒæƒ…ã€‚é˜¿æ¾¤å›çŸ¥é“æœ‰ä¸ªHackerå›ä¸€ç›´åœ¨è§Šè§é˜¿æ¾¤å›çš„è®ºæ–‡ï¼Œæƒ³æ‹¿è¿‡æ¥ä¸€æŠ„äº†ä¹‹ã€‚è€Œä¸”Hackerå›æ˜¯ä¸€æµçš„ç½‘ç»œé»‘å®¢ï¼Œç›—çº¿å·å–åˆ«äººçš„ä¿¡æ¯æ˜¯æœ€åœ¨è¡Œçš„äº†ã€‚å› æ­¤æ€ä¹ˆå‘ç»™åƒé‡Œä¹‹å¤–çš„è€å¸ˆå¯éš¾ä¸ºé˜¿æ¾¤å›äº†ã€‚ã€‚ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r6p4c.jpg\" alt=\"focusOnCom\">    </p>\n<p>å¾ˆå¿«ï¼Œé˜¿æ¾¤å›æƒ³åˆ°ç”¨åŠ å¯†çš„æ–¹æ³•ï¼Œåˆ©ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹æ³•ç»™è®ºæ–‡åŠ å¯†åå‘é€ç»™è€å¸ˆã€‚</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/i66ud.jpg\" alt=\"bucuowo\"></p>\n<h1 id=\"å¯¹ç§°åŠ å¯†\"><a href=\"#å¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"å¯¹ç§°åŠ å¯†\"></a>å¯¹ç§°åŠ å¯†</h1><p>é‡‡ç”¨å•é’¥å¯†ç ç³»ç»Ÿçš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨ä½œä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ã€‚åŠ å¯†ç®—æ³•ä¸­æ•°DESã€3DESã€AES(å—ç®—æ³•)å’ŒRC4(æµç®—æ³•)æœ€ä¸ºå¸¸ç”¨äº†ã€‚</p>\n<h2 id=\"DES\"><a href=\"#DES\" class=\"headerlink\" title=\"DES\"></a>DES</h2><p>DES ä½¿ç”¨ä¸€ä¸ª 56 ä½çš„å¯†é’¥ä»¥åŠé™„åŠ çš„ 8 ä½å¥‡å¶æ ¡éªŒä½ï¼Œäº§ç”Ÿæœ€å¤§ 64 ä½çš„åˆ†ç»„å¤§å°ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„åˆ†ç»„å¯†ç ï¼Œä½¿ç”¨ç§°ä¸º Feistel çš„æŠ€æœ¯ï¼Œå…¶ä¸­å°†åŠ å¯†çš„æ–‡æœ¬å—åˆ†æˆä¸¤åŠã€‚ä½¿ç”¨å­å¯†é’¥å¯¹å…¶ä¸­ä¸€åŠåº”ç”¨å¾ªç¯åŠŸèƒ½ï¼Œç„¶åå°†è¾“å‡ºä¸å¦ä¸€åŠè¿›è¡Œâ€œå¼‚æˆ–â€è¿ç®—ï¼›æ¥ç€äº¤æ¢è¿™ä¸¤åŠï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šç»§ç»­ä¸‹å»ï¼Œä½†æœ€åä¸€ä¸ªå¾ªç¯ä¸äº¤æ¢ã€‚DES ä½¿ç”¨ 16 ä¸ªå¾ªç¯ï¼Œä½¿ç”¨å¼‚æˆ–ï¼Œç½®æ¢ï¼Œä»£æ¢ï¼Œç§»ä½æ“ä½œå››ç§åŸºæœ¬è¿ç®—ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/7o3yv.jpg\" alt=\"Crypto_DES\"></p>\n<h3 id=\"3DES\"><a href=\"#3DES\" class=\"headerlink\" title=\"3DES\"></a>3DES</h3><p>3DESæ˜¯åœ¨DESçš„åŸºç¡€ä¸Šåšäº†ä¸¤æ¬¡åŠ å¯†å’Œä¸€æ¬¡è§£å¯†ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼šè®¾Ek()å’ŒDk()ä»£è¡¨DESç®—æ³•çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ï¼ŒKä»£è¡¨DESç®—æ³•ä½¿ç”¨çš„å¯†é’¥ï¼ŒPä»£è¡¨æ˜æ–‡ï¼ŒCä»£è¡¨å¯†æ–‡ï¼Œè¿™æ ·ï¼š<br>3DESåŠ å¯†è¿‡ç¨‹ä¸ºï¼šC=Ek3(Dk2(Ek1(P)))<br>3DESè§£å¯†è¿‡ç¨‹ä¸ºï¼šP=Dk1(EK2(Dk3(C)))<br>è‹¥<strong>Ek1 == Ek2 == Ek3</strong>ï¼Œå°±æ˜¯ç®€å•çš„DESäº†ã€‚</p>\n<h2 id=\"AES\"><a href=\"#AES\" class=\"headerlink\" title=\"AES\"></a>AES</h2><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1lfh4.png\" alt=\"Crypto_AES\"><br>å›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œè‹¥æœ‰ä¾µçŠ¯åˆ°æƒåˆ©ä¹‹å¤„ï¼Œè¯·å‘ŠçŸ¥ï¼Œè°¢è°¢~    </p>\n<p>AESåŠ å¯†è¿‡ç¨‹æ¶‰åŠåˆ°4ç§æ“ä½œï¼šå­—èŠ‚æ›¿ä»£ï¼ˆSubBytesï¼‰ã€è¡Œç§»ä½ï¼ˆShiftRowsï¼‰ã€åˆ—æ··æ·†ï¼ˆMixColumnsï¼‰å’Œè½®å¯†é’¥åŠ ï¼ˆAddRoundKeyï¼‰ã€‚è§£å¯†è¿‡ç¨‹åˆ†åˆ«ä¸ºå¯¹åº”çš„é€†æ“ä½œã€‚ç”±äºæ¯ä¸€æ­¥æ“ä½œéƒ½æ˜¯å¯é€†çš„ï¼ŒæŒ‰ç…§ç›¸åçš„é¡ºåºè¿›è¡Œè§£å¯†å³å¯æ¢å¤æ˜æ–‡ã€‚åŠ è§£å¯†ä¸­æ¯è½®çš„å¯†é’¥åˆ†åˆ«ç”±åˆå§‹å¯†é’¥æ‰©å±•å¾—åˆ°ã€‚ç®—æ³•ä¸­16å­—èŠ‚çš„æ˜æ–‡ã€å¯†æ–‡å’Œè½®å¯†é’¥éƒ½ä»¥ä¸€ä¸ª4x4çš„çŸ©é˜µè¡¨ç¤ºã€‚<br>ç®—æ³•è¯¦ç»†å·²ç»æœ‰å…¶ä»–äººå†™äº†ï¼Œæˆ‘å°±ä¸å†é€ è½®å­äº†ã€‚<a href=\"http://www.blogfshare.com/aes-rijndael.html\" target=\"_blank\" rel=\"external\">å¯†ç ç®—æ³•è¯¦è§£â€”â€”AES</a><br>è¿˜æœ‰ç®—æ³•åŠè§£å¯†ç®—æ³•çš„<a href=\"http://blog.csdn.net/searchsun/article/details/2516191\" target=\"_blank\" rel=\"external\">æ¨¡å¼ä»‹ç»</a>ï¼Œå¯ä»¥äº†è§£äº†è§£~    </p>\n<h2 id=\"RC4\"><a href=\"#RC4\" class=\"headerlink\" title=\"RC4\"></a>RC4</h2><p>ä¸åŒäºå—ç®—æ³•çš„æ˜¯ï¼ŒRC4ç­‰æµç®—æ³•ä¸æ˜¯å¯¹æ˜æ–‡è¿›è¡Œåˆ†ç»„å¤„ç†ï¼Œè€Œæ˜¯å­—èŠ‚æµçš„æ–¹å¼ä¾æ¬¡åŠ å¯†æ˜æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œè§£å¯†çš„æ—¶å€™ä¹Ÿæ˜¯ä¾æ¬¡å¯¹å¯†æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œè§£å¯†ã€‚</p>\n<h2 id=\"CommonCrypto\"><a href=\"#CommonCrypto\" class=\"headerlink\" title=\"CommonCrypto\"></a>CommonCrypto</h2><p>å¯¹äºèº«ä¸ºiOSæ”»åŸç‹®çš„é˜¿æ¾¤å›æ¥è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯è¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒé‡è¦ã€‚    </p>\n<h3 id=\"CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\"><a href=\"#CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\" class=\"headerlink\" title=\"CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\"></a>CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“</h3><ol>\n<li>CCOperationï¼šå®šä¹‰æ“ä½œï¼šåŠ å¯†æˆ–è§£å¯†</li>\n</ol>\n<pre><code>enum {\n    kCCEncrypt = 0, \n    kCCDecrypt,     \n};\ntypedef uint32_t CCOperation;\n</code></pre><ol>\n<li>CCAlgorithmï¼šåŠ è§£å¯†ç®—æ³•ï¼Œå¾ˆæ˜æ˜¾å°±ä¸è¯¦ç»†è¯´æ˜äº†ã€‚</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCAlgorithmAES128 = 0,\n    kCCAlgorithmAES = 0,\n    kCCAlgorithmDES,\n    kCCAlgorithm3DES,       \n    kCCAlgorithmCAST,       \n    kCCAlgorithmRC4,\n    kCCAlgorithmRC2,   \n    kCCAlgorithmBlowfish    \n};\ntypedef uint32_t CCAlgorithm;\n</code></pre>\n<ol>\n<li>CCOptionsï¼šé€‰é¡¹ï¼šæŒ‰ç…§P7è¡¥è¶³å—ç®—æ³•çš„å—é•¿åº¦æˆ–è€…é€‰æ‹©ECBæ¨¡å¼ï¼Œå…³äºæ¨¡å¼è¯·çœ‹ä¸Šé¢AESä¸­ä»‹ç»çš„æ–‡ç« ã€‚å¯¹äºRC4ç­‰æµç®—æ³•ä¸é€‚ç”¨ã€‚æˆ–è€…è¯´ä¸éœ€è¦ä½¿ç”¨åˆ°</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCOptionPKCS7Padding   = 0x0001,\n    kCCOptionECBMode        = 0x0002\n};\n</code></pre>\n<ol>\n<li>KeySizeå’ŒBlockSizeï¼šè§„å®šåŠ è§£å¯†å¯†é’¥çš„é•¿åº¦å’Œæ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCKeySizeAES128          = 16,\n    kCCKeySizeAES192          = 24,\n    kCCKeySizeAES256          = 32,\n    kCCKeySizeDES             = 8,\n    kCCKeySize3DES            = 24,\n    kCCKeySizeMinCAST         = 5,\n    kCCKeySizeMaxCAST         = 16,\n    kCCKeySizeMinRC4          = 1,\n    kCCKeySizeMaxRC4          = 512,\n    kCCKeySizeMinRC2          = 1,\n    kCCKeySizeMaxRC2          = 128,\n    kCCKeySizeMinBlowfish     = 8,\n    kCCKeySizeMaxBlowfish     = 56,\n};\nenum {\n    /* AES */\n    kCCBlockSizeAES128        = 16,\n    /* DES */\n    kCCBlockSizeDES           = 8,\n    /* 3DES */\n    kCCBlockSize3DES          = 8,\n    /* CAST */\n    kCCBlockSizeCAST          = 8,\n    kCCBlockSizeRC2           = 8,\n    kCCBlockSizeBlowfish      = 8,\n};\n</code></pre>\n<h3 id=\"é€šè¿‡ä»£ç å®ç°\"><a href=\"#é€šè¿‡ä»£ç å®ç°\" class=\"headerlink\" title=\"é€šè¿‡ä»£ç å®ç°\"></a>é€šè¿‡ä»£ç å®ç°</h3><h4 id=\"å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\"><a href=\"#å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\" class=\"headerlink\" title=\"å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\"></a>å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚</h4><pre><code class=\"objc\">#import &lt;CommonCrypto/CommonCrypto.h&gt;\n</code></pre>\n<h4 id=\"symCrypt\"><a href=\"#symCrypt\" class=\"headerlink\" title=\"symCrypt\"></a>symCrypt</h4><pre><code class=\"objc\">/*!\n    @function   symCrypt\n    @abstract   å¯¹ç§°è§£å¯†\n    @param      operation       åŠ å¯†æˆ–è§£å¯†\n    @param      data            éœ€è¦åŠ è§£å¯†çš„æ•°æ®\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      key             åŠ è§£å¯†æ—¶æä¾›çš„å¯†é’¥\n    @param      iv              Initialization Vector(CBCæ¨¡å¼ä¸‹éœ€è¦)\n    @param      options         åŠ å¯†æ•°æ®å­—èŠ‚æ•°ä¸æ˜¯blockçš„æ•´æ•°å€æ—¶éœ€è¦åˆ¶å®špadding\n                                è¯¦æƒ…å‚è§CommonCryptorå¤´æ–‡ä»¶\n    @param      status          åŠ è§£å¯†æˆåŠŸä¸å¦æ‰€è¿”å›çš„çŠ¶æ€\n    @result     è§£å¯†åå¾—åˆ°çš„ç»“æœ\n */\n- (NSData *)symCrypt:(CCOperation)operation\n         processData:(NSData *)data\n      UsingAlgorithm:(CCAlgorithm)algorithm\n                 key:(NSData *)key\n initalizationVector:(NSData *)iv\n             options:(CCOptions)options\n              status:(CCCryptorStatus *)status\n{\n    NSData *result = nil;\n    NSMutableData *cKey = [key mutableCopy], *cIV = [iv mutableCopy];\n    [self fixKeyLengthsByAlgorithm:algorithm keyData:cKey ivData:cIV];//1\n    size_t bufferSize = [data length] + [self blockSizeByAlgorithm:algorithm]; // 2\n    void *buffer = malloc(bufferSize); //3\n    size_t encryptedSize = 0;\n    *status = CCCrypt(operation, algorithm, options, [cKey bytes], [cKey length], [cIV bytes], [data bytes], [data length], buffer, bufferSize, &amp;encryptedSize); //4\n    if (*status == kCCSuccess) {\n        result = [NSData dataWithBytes:buffer length:encryptedSize];  //5\n    } else {\n        NSLog(@&quot;[ERROR] failed to encrypt|CCCryptoStatus: %d&quot;, *status);\n    }\n    free(buffer);  //6\n    return result;  //7\n}\n</code></pre>\n<ol>\n<li>æ ¹æ®åŠ è§£å¯†ç®—æ³•æ£€æŸ¥Keyå’Œivçš„é•¿åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹é¢åˆ—å‡ºçš„å‡½æ•°fixKeyLength</li>\n<li>åŠ å¯†åçš„æ•°æ®æ€»å°äºç­‰äºæ•°æ®é•¿åº¦åŠ ä¸Šblockçš„å¤§å°</li>\n<li>ç”³è¯·bufferSizeçš„ç©ºé—´ä»¥ä¿å­˜åŠ å¯†æˆ–è§£å¯†åçš„æ•°æ®</li>\n<li>è°ƒç”¨CCCryptå‡½æ•°å®ç°åŠ è§£å¯†ã€‚<pre><code class=\"objc\">CCCryptorStatus CCCrypt(\n CCOperation op,         /* åŠ å¯†æˆ–è§£å¯†ï¼škCCEncrypt, etc. */\n CCAlgorithm alg,        /* åŠ è§£å¯†é‡‡ç”¨çš„ç®—æ³•ï¼škCCAlgorithmAES128, etc. */\n CCOptions options,      /* kCCOptionPKCS7Padding, etc. */\n const void *key,        /* å¯†é’¥ */\n size_t keyLength,       /* å¯†é’¥é•¿åº¦ */\n const void *iv,         /* ivï¼Œä½¿ç”¨ä¸CBCæ¨¡å¼ä¸‹ï¼Œæ˜æ–‡å32ä½å’Œivå¼‚æˆ–ååšä¸ºä¸‹ä¸€é˜¶æ®µçš„å‰32ä½ */\n const void *dataIn,     /* è¦åŠ å¯†æˆ–è§£å¯†çš„æ•°æ® */\n size_t dataInLength,    /* æ•°æ®é•¿åº¦ */\n void *dataOut,          /* æ³¨æ„ä¼ å…¥çš„æ˜¯æŒ‡é’ˆï¼ŒåŠ è§£å¯†åçš„æ•°æ®å°†ä»æ­¤å¤„è¿”å› */\n size_t dataOutAvailable,/* ä¸ºdataOutç”³è¯·çš„å¯å†™é•¿åº¦ */\n size_t *dataOutMoved    /* ç»“æœæ‰€å çš„é•¿åº¦ */\n )    \n __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);\n</code></pre>\n</li>\n<li>è‹¥æˆåŠŸï¼Œåˆ™å°†(void *)ç±»å‹çš„æ•°æ®å°è£…åˆ°NSDataä¸­ã€‚</li>\n<li>é‡Šæ”¾ç”³è¯·çš„bufferå†…å­˜</li>\n<li>è¿”å›ã€‚</li>\n</ol>\n<h4 id=\"fixKeyLength\"><a href=\"#fixKeyLength\" class=\"headerlink\" title=\"fixKeyLength\"></a>fixKeyLength</h4><pre><code class=\"objc\">/*!\n    @function   fixKeyLength\n    @abstract   ä¿®æ”¹å¯†é’¥é•¿åº¦è‡³ä¸ç®—æ³•åŒ¹é…\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      keyData         å¯†é’¥\n    @param      ivData          Initialization Vector\n    @result     å°†å¯†é’¥é•¿åº¦å’Œivä¿®æ”¹è‡³ä¸ç®—æ³•åŒ¹é…çš„é•¿åº¦\n */\n- (void)fixKeyLengthsByAlgorithm:(CCAlgorithm)algorithm\n                         keyData:(NSMutableData *)keyData\n                          ivData:(NSMutableData *)ivData\n{\n    NSUInteger keyLength = [keyData length];\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n        {\n            if (keyLength &lt; kCCKeySizeAES128) {\n                keyData.length = kCCKeySizeAES128;\n            } else if (keyLength &lt; kCCKeySizeAES192) {\n                keyData.length = kCCKeySizeAES192;\n            } else {\n                keyData.length = kCCKeySizeAES256;\n            }\n            break;\n        }\n        case kCCAlgorithmDES:\n        {\n            keyData.length = kCCKeySizeDES;\n            break;\n        }\n        case kCCAlgorithm3DES:\n        {\n            keyData.length = kCCKeySize3DES;\n            break;\n        }\n        case kCCAlgorithmRC4:\n        {\n            keyData.length = kCCKeySizeMaxRC4;\n            break;\n        }\n        default:\n            break;\n    }\n    ivData.length = keyData.length;\n}\n</code></pre>\n<h4 id=\"blockSizeByAlgorithm\"><a href=\"#blockSizeByAlgorithm\" class=\"headerlink\" title=\"blockSizeByAlgorithm\"></a>blockSizeByAlgorithm</h4><pre><code class=\"objc\">/*!\n    @function   blockSizeByAlgorithm\n    @abstract   æ ¹æ®ç®—æ³•è·å–æ¯ä¸ªblockçš„å¤§å°\n    @param      algorithm       åŠ å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @result     è¯¥ç®—æ³•å¯¹åº”çš„blockå¤§å°\n */\n- (size_t)blockSizeByAlgorithm:(CCAlgorithm)algorithm {\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n            return kCCBlockSizeAES128;\n        case kCCAlgorithmDES:\n        case kCCAlgorithm3DES:\n        case kCCAlgorithmRC4:\n            return kCCBlockSizeDES;\n        default:\n            return 0;\n    }\n}\n</code></pre>\n<p>ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†è§„èŒƒå¯†é’¥çš„é•¿åº¦å’Œè·å–æ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦ï¼Œå¾ˆå¥½ç†è§£å°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚è¿™æ ·è¿˜æ˜¯ä¸èƒ½å‚»ç“œå¼åœ°è°ƒç”¨ï¼Œå› æ­¤é˜¿æ¾¤å›åˆ›å»ºäº†DESCipherActorç»§æ‰¿äºSymCipherActorï¼Œè¿›ä¸€æ­¥è¿›è¡Œå°è£…ï¼š<br>ã€€ã€€DESCipherActor.h<br>ã€€ã€€``` objc</p>\n<pre><code>- (NSString *)encryptInCBC:(NSString *)plainText key:(NSString *)key iv:(NSData *)iv;\n- (NSString *)decryptInCBC:(NSString *)cipherText key:(NSString *)key iv:(NSData *)iv;\n- (NSString *)encryptInEBC:(NSString *)plainText key:(NSString *)key;\n- (NSString *)decryptInEBC:(NSString *)cipherText key:(NSString *)key;\n</code></pre><p>ã€€ã€€```<br>ã€€ã€€è¿˜æœ‰AESã€RC4çš„å®ç°å¤§è‡´ç›¸åŒï¼Œå…·ä½“å¯å‚è€ƒDemoï¼Œå·²ç»ä¸Šä¼ <a href=\"https://github.com/objchris/PKIDemo\" target=\"_blank\" rel=\"external\">Github</a></p>\n<p>ã€€ã€€æœç„¶ï¼Œé‡‡ç”¨åŠ å¯†ç®—æ³•åŠ å¯†åçš„è®ºæ–‡é¡ºåˆ©å‘åˆ°è€å¸ˆé‚£é‡Œï¼Œé—®é¢˜æ˜¯è§£å¯†ç”¨å¯†é’¥è¿˜åœ¨é˜¿æ¾¤å›æ‰‹ä¸Šï¼Œè€å¸ˆè¿˜æ˜¯æ— æ³•çœ‹åˆ°è®ºæ–‡å†…å®¹ï¼Œå¯†é’¥ä¸èƒ½é€šè¿‡ç½‘ç»œä¼ è¾“ç»™è€å¸ˆï¼Œå› ä¸ºHackerå›è¿˜åœ¨ç›‘å¬ç€é˜¿æ¾¤å›å’Œè€å¸ˆçš„é€šè®¯ã€‚éš¾é“è¦é˜¿æ¾¤å›ä¸æƒ§åƒé‡Œï¼ˆå…¶å®ä¸æ˜¯å¾ˆè¿œï¼Œå“ˆå“ˆå“ˆã€‚æˆ‘å°±å¤¸å¼ é‚£ä¹ˆä¸€ç‚¹ç‚¹~ï¼‰å»åˆ°è€å¸ˆé‚£è¾¹ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥å°†è®ºæ–‡äº¤ç»™è€å¸ˆå‘¢ï¼Ÿï¼ï¼ï¼<br>ã€€ã€€What the <em>**</em>ï¼ï¼ï¼ğŸ’”ğŸ’”é˜¿æ¾¤å›æ­¤æ—¶å¿ƒé‡Œåƒä¸‡åªè‰æ³¥é©¬åœ¨å¥”è…¾ã€‚        </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/9hwet.jpg\" alt=\"desk\">    </p>\n<p>ã€€ã€€ä½†æ˜¯é˜¿æ¾¤å›ä¸ä¼šè¿™æ ·è½»æ˜“åœ°ç‹—å¸¦ï¼Œå› ä¸ºè¿˜å¯ä»¥é€šè¿‡éå¯¹ç§°åŠ å¯†æ¥è§£å†³â€¦</p>\n<h1 id=\"éå¯¹ç§°åŠ å¯†\"><a href=\"#éå¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"éå¯¹ç§°åŠ å¯†\"></a>éå¯¹ç§°åŠ å¯†</h1><p>å¯¹ç§°åŠ å¯†ç®—æ³•åœ¨åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ï¼›è€Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™ä¸¤ä¸ªç§˜é’¥æ˜¯å…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼Œç®€ç§°å…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivate keyï¼Œç®€ç§°ç§é’¥ï¼‰ã€‚<br>å¦‚ç”²ä¹™åŒæ–¹éœ€è¦åŠ å¯†é€šä¿¡ï¼š</p>\n<ol>\n<li>ä¹™æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰å¹¶å°†å…¬é’¥å‘å…¶å®ƒæ–¹å…¬å¼€ã€‚</li>\n<li>å¾—åˆ°è¯¥å…¬é’¥çš„ç”²æ–¹ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åå†å‘é€ç»™ä¹™æ–¹ã€‚</li>\n<li>ä¹™æ–¹å†ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰å¯¹åŠ å¯†åçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚ä¹™æ–¹åªèƒ½ç”¨å…¶ä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰è§£å¯†ç”±å¯¹åº”çš„å…¬é’¥åŠ å¯†åçš„ä¿¡æ¯ã€‚</li>\n</ol>\n<p>ã€€ã€€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå³ä½¿æ”»å‡»è€…æˆªè·äº†ä¼ è¾“çš„å¯†æ–‡ï¼Œå¹¶å¾—åˆ°äº†ä¹™çš„å…¬é’¥ï¼Œä¹Ÿæ— æ³•ç ´è§£å¯†æ–‡ï¼Œå› ä¸ºåªæœ‰ä¹™çš„ç§é’¥æ‰èƒ½è§£å¯†å¯†æ–‡ã€‚<br>ã€€ã€€åŒæ ·ï¼Œå¦‚æœä¹™è¦å›å¤åŠ å¯†ä¿¡æ¯ç»™ç”²ï¼Œé‚£ä¹ˆéœ€è¦ç”²å…ˆå…¬å¸ƒç”²çš„å…¬é’¥ç»™ä¹™ç”¨äºåŠ å¯†ï¼Œç”²è‡ªå·±ä¿å­˜ç”²çš„ç§é’¥ç”¨äºè§£å¯†ã€‚<br>ã€€ã€€è¯´åˆ°éå¯¹ç§°åŠ å¯†ï¼Œä¸å¾—ä¸è¯´RSAï¼ˆå…¶å®æ˜¯é˜¿æ¾¤å›åªæ¥è§¦è¿‡è¿™ä¸ªã€‚ã€‚ã€‚ï¼‰</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/6tgz2.png\" alt=\"yaoMing\"></p>\n<h2 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h2><h3 id=\"ç®—æ³•åŸç†\"><a href=\"#ç®—æ³•åŸç†\" class=\"headerlink\" title=\"ç®—æ³•åŸç†\"></a>ç®—æ³•åŸç†</h3><ol>\n<li>é€‰å–ä¸¤ä¸ªè´¨æ•°på’Œq, è®¡ç®—<code>n = p * q</code> ã€‚på’Œqè¦å°½é‡å¤§</li>\n<li>æ ¹æ®è´¨æ•°<code>Ï†(p)=p-1</code>å’Œæ¬§æ‹‰æ–¹ç¨‹æ»¡è¶³ä¹˜æ³•ç»“åˆç‡çš„è§„å¾‹æ±‚å‡ºÏ†(n),å³<code>Ï†(n)=(p-1)(q-1)</code></li>\n<li>é€‰å–è´¨æ•°eä½œä¸ºå…¬é’¥æŒ‡æ•°, eçš„èŒƒå›´<code>1&lt;e&lt;Ï†(n)</code>,ä¸” e ä¸ Ï†(n) äº’è´¨</li>\n<li>å‡ºeå¯¹Ï†(n)çš„æ¨¡åå…ƒç´ dï¼Œæ±‚è§£å…¬å¼ï¼š<code>ed â‰¡ 1 (mod Ï†(n))</code>å³å¯å¾—å‡º<br>è¿™æ ·è®¡ç®—å(n,e)æ˜¯å…¬é’¥ï¼Œ(n,d)æ˜¯ç§é’¥ã€‚<blockquote>\n<p>å…¬é’¥åŠ å¯†å…¬å¼<br>m^e â‰¡ c (mod n) å³ c = m^e mod n<br>ç§é’¥è§£å¯†å…¬å¼<br>c^d â‰¡ m (mod n) å³ m = c^d mod n    </p>\n</blockquote>\n</li>\n</ol>\n<p>RSAåŠ å¯†å¸¸ç”¨çš„å¡«å……æ–¹å¼æœ‰ä¸‹é¢3ç§ï¼š    </p>\n<ol>\n<li>RSA_PKCS1_PADDING å¡«å……æ¨¡å¼ï¼Œæœ€å¸¸ç”¨çš„æ¨¡å¼<br>è¾“å…¥ï¼šå¿…é¡» æ¯”RSAé’¥æ¨¡é•¿(modulus)çŸ­è‡³å°‘11ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯RSA_size(rsa) â€“ 11ã€‚å¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿<br>æ ¹æ®è¿™ä¸ªè¦æ±‚ï¼Œå¯¹äº1024bitçš„å¯†é’¥ï¼Œblock length = 1024/8 â€“ 11 = 117 å­—èŠ‚     </li>\n<li>RSA_PKCS1_OAEP_PADDING<br>è¾“å…¥ï¼šRSA_size(rsa) â€“ 41<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    </li>\n<li>for RSA_NO_PADDING ä¸å¡«å……<br>è¾“å…¥ï¼šå¯ä»¥å’ŒRSAé’¥æ¨¡é•¿ä¸€æ ·é•¿ï¼Œå¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    </li>\n</ol>\n<p>ç‰¹åˆ«æ¨èçš„æ˜¯é˜®ä¸€å³°çš„æ—¥å¿—ä¸¤ç¯‡æ—¥å¿—ï¼Œå†™å¾—éå¸¸å¥½ï¼Œæˆ‘ä¹Ÿæ˜¯å‚è€ƒè¿™ä¸ªå†™çš„ï¼š<br><a href=\"http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html\" target=\"_blank\" rel=\"external\">RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰</a><br><a href=\"http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html\" target=\"_blank\" rel=\"external\">RSAç®—æ³•åŸç†ï¼ˆäºŒï¼‰</a></p>\n<h3 id=\"iOS-Security-framework\"><a href=\"#iOS-Security-framework\" class=\"headerlink\" title=\"iOS Security.framework\"></a>iOS Security.framework</h3><h4 id=\"encryptWithPublicKey\"><a href=\"#encryptWithPublicKey\" class=\"headerlink\" title=\"encryptWithPublicKey\"></a>encryptWithPublicKey</h4><pre><code class=\"objc\">- (NSString *)encrypt:(NSString *)stringToEncrypt withPublicKey:(SecKeyRef)publicKey{\n    OSStatus status = noErr;\n    size_t cipherBufferSize;\n    uint8_t *cipherBuffer;\n    uint8_t *dataToEncrypt = (uint8_t *)[stringToEncrypt cStringUsingEncoding:NSUTF8StringEncoding];\n    size_t dataLength = stringToEncrypt.length;\n    NSLog(@&quot;dataLength: %zu&quot;, dataLength);\n    cipherBufferSize = SecKeyGetBlockSize(publicKey);       // 1\n    cipherBuffer = malloc(cipherBufferSize);\n    size_t totalBufferSize = 0;\n    NSMutableData *data = [[NSMutableData alloc] init];    // 2\n    //ä½¿ç”¨kSecPaddingPKCS1ä½œä¸ºåŠ å¯†çš„padding\n    if ((cipherBufferSize - 11) &lt; dataLength) {            // 3\n        //è‹¥éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦åˆ†å—åŠ å¯†\n        size_t toEncryptDataLength = dataLength;\n        while ((cipherBufferSize - 11) &lt; toEncryptDataLength) { // 4\n            status = SecKeyEncrypt(publicKey,\n                                   kSecPaddingPKCS1,\n                                   dataToEncrypt + (dataLength - toEncryptDataLength),\n                                   cipherBufferSize - 11,\n                                   cipherBuffer,\n                                   &amp;cipherBufferSize);          // 5\n            toEncryptDataLength = toEncryptDataLength - (cipherBufferSize - 11);        //6\n            //CipherBufferæ˜¯é€šè¿‡mallocåˆ›å»ºï¼Œæ²¡æœ‰å¯¹å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ‰å¾ˆå¤šå…¶ä»–æ•°æ®\n            //è½¬å‚¨æˆNSDataï¼Œç¡®ä¿å¯¹æ­£ç¡®é•¿åº¦çš„cipherBufferçš„è·å–\n            [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];    //7\n            totalBufferSize += cipherBufferSize;    //8\n        }\n        //å¯¹å‰©ä½™çš„æ•°æ®è¿›è¡ŒåŠ å¯†\n        status = SecKeyEncrypt(publicKey,\n                               kSecPaddingPKCS1,\n                               dataToEncrypt + (dataLength - toEncryptDataLength),\n                               toEncryptDataLength,\n                               cipherBuffer,\n                               &amp;cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];               \n        totalBufferSize += cipherBufferSize;\n    } else {\n        //éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦å°äºSecKeyGetBlockSize(publicKey)ï¼11ï¼Œç›´æ¥åŠ å¯†\n        status = SecKeyEncrypt(publicKey, kSecPaddingPKCS1, dataToEncrypt, dataLength, cipherBuffer, &amp;cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];\n    }\n    if (publicKey) {\n        CFRelease(publicKey);\n    }\n    NSString *encryptedString = [GTMBase64 stringByEncodingData:[data copy]];            //9\n    free(cipherBuffer);            //10\n    return encryptedString;\n}\n</code></pre>\n<ol>\n<li>æ ¹æ®Keyåˆ¤æ–­åŠ è§£å¯†å—å¤§å°ï¼ˆè‹¥ä½¿ç”¨kSecPaddingPKCS1ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´å—å¤§å°å°äºè¿™ä¸ªè¿”å›å€¼ - 11ï¼‰</li>\n<li>åˆ›å»ºMutableDataç”¨ä»¥ä¸‹é¢æ“ä½œæ·»åŠ Data</li>\n<li>åˆ¤æ–­æ•°æ®æ€»å¤§å°æ˜¯å¦å¤§äºSecKeyGetBlockSize(publicKey) - 11ï¼Œæ˜¯åˆ™æ‹†åˆ†æˆå¤šä¸ªå—åŠ è§£å¯†ï¼Œå¦åˆ™ç›´æ¥åŠ è§£å¯†ã€‚</li>\n<li>whileå¾ªç¯å¤šæ¬¡æ“ä½œ</li>\n<li>ä½¿ç”¨SecKeyEncryptè¿›è¡ŒåŠ è§£å¯†<pre><code class=\"objc\">OSStatus SecKeyEncrypt(\n SecKeyRef           key,                //åŠ è§£å¯†ä½¿ç”¨çš„å¯†é’¥\n SecPadding          padding,            //paddingï¼Œä¸€èˆ¬ä¸ºkSecPaddingPKCS1ï¼Œéœ€è¦æ³¨æ„æ•°æ®å—çš„å¤§å°é—®é¢˜\n const uint8_t       *plainText,          //æ˜æ–‡\n size_t              plainTextLen,        //æ˜æ–‡é•¿åº¦\n uint8_t             *cipherText,        //è¿”å›çš„å¯†æ–‡\n size_t              *cipherTextLen)     //è¿”å›çš„å¯†æ–‡é•¿åº¦\n __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_2_0);\n</code></pre>\n</li>\n<li>å°†å·²ç»åŠ è§£å¯†è¿‡çš„æ•°æ®å‰”é™¤</li>\n<li>å¾€MutableDataä¸­æ·»åŠ æ•°æ®</li>\n<li>è®¡ç®—æ€»çš„BufferSizeï¼Œè¿™é‡Œåªæ˜¯åšä¸ªç»Ÿè®¡</li>\n<li>å°†å¾—åˆ°çš„æ•°æ®è¿›è¡ŒBase64è½¬ç </li>\n<li>è®°å¾—é‡Šæ”¾cipherBuffer</li>\n</ol>\n<h4 id=\"decryptWithPrivateKey\"><a href=\"#decryptWithPrivateKey\" class=\"headerlink\" title=\"decryptWithPrivateKey\"></a>decryptWithPrivateKey</h4><pre><code class=\"objc\">- (NSString *)decrypt: (NSString *)stringToDecrypt withPrivateKey:(SecKeyRef)privateKey {\n    NSData *dataToDecrypt = [GTMBase64 decodeString:stringToDecrypt];\n    OSStatus status = noErr;\n    size_t cipherBufferSize = [dataToDecrypt length];\n    uint8_t *cipherBuffer = (uint8_t *)[dataToDecrypt bytes];\n    size_t plainBufferSize;\n    uint8_t *plainBuffer;\n    plainBufferSize = SecKeyGetBlockSize(privateKey);\n    plainBuffer = malloc(plainBufferSize);\n    NSMutableData *data = [[NSMutableData alloc] init];\n    size_t decryptLengthPer = SecKeyGetBlockSize(privateKey);\n    if (decryptLengthPer &lt; cipherBufferSize) {\n        size_t toDecryptDataLength = cipherBufferSize;\n        size_t totalBufferSize = 0;\n        while (decryptLengthPer &lt; toDecryptDataLength) {\n            status = SecKeyDecrypt(privateKey,\n                                   kSecPaddingPKCS1,\n                                   cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                                   decryptLengthPer,\n                                   plainBuffer,\n                                   &amp;plainBufferSize);\n            toDecryptDataLength = toDecryptDataLength - decryptLengthPer;\n            if (status == noErr) {\n                [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n            }\n            totalBufferSize += plainBufferSize;\n        }\n        status = SecKeyDecrypt(privateKey,\n                               kSecPaddingPKCS1,\n                               cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                               decryptLengthPer,\n                               plainBuffer,\n                               &amp;plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n        totalBufferSize += plainBufferSize;\n    } else {\n        status = SecKeyDecrypt(privateKey, kSecPaddingPKCS1, cipherBuffer, cipherBufferSize, plainBuffer, &amp;plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n    }\n    if (privateKey) {\n        CFRelease(privateKey);\n    }\n    NSString *decryptedString = [[NSString alloc] initWithData:[data copy] encoding:NSUTF8StringEncoding];\n    free(plainBuffer);\n    return decryptedString;\n}\n</code></pre>\n<p>è§£å¯†å’ŒåŠ å¯†çš„æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œæ­¤å¤„ä¸å¤šåŠ èµ˜è¿°ã€‚<br><a href=\"https://github.com/objchris/PKIDemo\" target=\"_blank\" rel=\"external\">Demo</a></p>\n<p><strong>Hackerå›ï¼Œé—®ä½ æƒŠæœªï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚</strong><br>éå¯¹ç§°åŠ å¯†å¯¹é˜¿æ¾¤å›æ¥è¯´å®Œå…¨è§£å†³äº†é—®é¢˜(ã¥ï¿£ 3ï¿£)ã¥ï¼Œä½¿ç”¨è€å¸ˆçš„å…¬é’¥åŠ å¯†è®ºæ–‡åå‘é€å›ç»™ä»–ã€‚Hackerå›å°±ç®—æˆªå–åˆ°ä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºHackerå›æ²¡æœ‰è€å¸ˆçš„ç§é’¥ï¼Œæ— æ³•è·å–åˆ°å…¶ä¸­çš„å†…å®¹ã€‚è€å¸ˆè·å–åˆ°é˜¿æ¾¤å›å‘é€çš„è®ºæ–‡åè‡ªç„¶å¯ä»¥è§£å¯†æŸ¥çœ‹ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg\" alt=\"hahahahaha\"><br>ä»ä¸­é˜¿æ¾¤å›ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶â¤ï¸ã€‚æ•…äº‹æœ‰(fei)ç‚¹(chang)å¼±æ™ºï¼Œå¸Œæœ›å¤§å®¶ä¸è¦åœ¨æ„ï¼Œå…³æ³¨åŠ è§£å¯†ç®—æ³•å°±å¥½äº†~\nã€€ã€€</p>\n<p>é¢˜å¤–è¯ï¼šPKIåŸºç¡€æœ€è¿‘æ‰æ¥è§¦ï¼Œå­¦å¾—ä¸æ·±ï¼Œæœ‰äº›ä¸œè¥¿å†™é”™è¯·å¤§å®¶è§è°…ã€‚<br>æ›´å¤šçš„ç®—æ³•ï¼Œegï¼šæ•°å­—æ‘˜è¦ã€æ•°å­—ç­¾åã€å£ä»¤è®¤è¯ç­‰ç­‰éƒ½åœ¨<a href=\"https://github.com/objchris/PKIDemo\" target=\"_blank\" rel=\"external\">Github</a>ä¸Šäº†ï¼Œæœ‰å…´è¶£è¯·ç§»æ­¥ã€‚<br>å…³äºåŠ è§£å¯†ï¼Œè²Œä¼¼OpenSSLä¼šç»å¸¸ç”¨ï¼Œå…·ä½“é˜¿æ¾¤å›ä¹Ÿä¸æ¸…æ¥šï¼Œè¿˜éœ€è¦æ›´åŠ æ·±å…¥çš„å­¦ä¹ ï¼Œå…±å‹‰å§ï¼ï¼ï¼ï¼</p>\n","excerpt":"<p>Hacker,é—®ä½ æƒŠæœªÎ£( Â° â–³ Â°|||)ï¸´</p>","more":"<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/sijuh.jpg\" alt=\"Crypto_Sherlock\"> </p>\n<p>çœ‹äº†å¾ˆå¤šä¾¦æ¢ç‰‡ä¹‹åï¼Œé€æ¸å‘ç°åŠ è§£å¯†çš„ç¥å¥‡æ‰€åœ¨ã€‚èƒ½å¤Ÿåœ¨åˆ«äººæ— æ³•å¯Ÿè§‰çš„æƒ…å†µä¸‹ä¼ é€’ä¿¡æ¯ï¼ˆæˆ‘å¾ˆå–œæ¬¢çœ‹è¿™äº›ç‰‡å­ï¼Œå“ˆå“ˆå“ˆï¼‰ã€‚æ— è®ºæ˜¯Morse Codeè¿˜æ˜¯å¯¹ç€æŸæœ¬ä¹¦æ ¹æ®é¡µç è¡Œæ•°å­—æ•°æ¥ç¡®å®šè¡¨è¾¾ä¿¡æ¯ï¼Œéƒ½èƒ½è®©æˆ‘çœ‹åˆ°å‰äººçš„æ™ºæ…§ã€‚è¯´çœŸçš„ï¼Œæˆ‘ç‰¹åˆ«é’Ÿæ„ç¥æ¢å¤æ´›å…‹ï¼Œå°±ç®—è‹±æ–‡æ¸£æ¸£ä¹Ÿä¼šåœ¨æ›´æ–°çš„æ—¶å€™åˆ°Youtubeä¸Šçœ‹çœ‹ï¼Œç­‰ç¿»è¯‘å®Œå†ç¿»çœ‹ä¸€æ¬¡ã€‚è®°å¾—ä¸­å›½å‰§åœºé‚£ä¸€é›†æœ€åæ ¹æ®ä¼¦æ•¦åœ°å›¾ç ´è§£äº†è—åœ¨è‹å·ç å­é‡Œçš„æš—å·ï¼ŒSo Sexy~Â·Â·<br>â€‹<br>ä»Šå¤©æ¥èŠèŠé˜¿æ¾¤å›çš„æ•…äº‹ï¼Œé¡ºä¾¿è°ˆè°ˆ</p>\n<ol>\n<li>CommonCrytoä¸­å…³äºDESã€AESçš„éƒ¨åˆ†å†…å®¹</li>\n<li>iOSçš„Securityæ¡†æ¶é‡Œå…³äºRSAåŠ å¯†çš„éƒ¨åˆ†å†…å®¹â€¦.</li>\n</ol>\n<p>é˜¿æ¾¤å›æ˜¯ä¸ªå¤§å››ğŸ¶ï¼Œæœ€è¿‘åœ¨çƒ¦æ¯•ä¸šè®ºæ–‡çš„äº‹æƒ…ã€‚è¾›è¾›è‹¦è‹¦æ’¸äº†äºŒåä¸ªå¹´(xiao)å¤´(shi)çš„è®ºæ–‡ï¼Œè‚¯å®šè¦ç¬¬ä¸€æ—¶é—´äº¤åˆ°è€å¸ˆæ‰‹é‡Œï¼Œè®©ä»–çœ‹çœ‹ï¼Œå¥½èˆ’ç¼“é˜¿æ¾¤å›éš¾äº§çš„å¿ƒæƒ…ã€‚é˜¿æ¾¤å›çŸ¥é“æœ‰ä¸ªHackerå›ä¸€ç›´åœ¨è§Šè§é˜¿æ¾¤å›çš„è®ºæ–‡ï¼Œæƒ³æ‹¿è¿‡æ¥ä¸€æŠ„äº†ä¹‹ã€‚è€Œä¸”Hackerå›æ˜¯ä¸€æµçš„ç½‘ç»œé»‘å®¢ï¼Œç›—çº¿å·å–åˆ«äººçš„ä¿¡æ¯æ˜¯æœ€åœ¨è¡Œçš„äº†ã€‚å› æ­¤æ€ä¹ˆå‘ç»™åƒé‡Œä¹‹å¤–çš„è€å¸ˆå¯éš¾ä¸ºé˜¿æ¾¤å›äº†ã€‚ã€‚ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/r6p4c.jpg\" alt=\"focusOnCom\">    </p>\n<p>å¾ˆå¿«ï¼Œé˜¿æ¾¤å›æƒ³åˆ°ç”¨åŠ å¯†çš„æ–¹æ³•ï¼Œåˆ©ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹æ³•ç»™è®ºæ–‡åŠ å¯†åå‘é€ç»™è€å¸ˆã€‚</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/i66ud.jpg\" alt=\"bucuowo\"></p>\n<h1 id=\"å¯¹ç§°åŠ å¯†\"><a href=\"#å¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"å¯¹ç§°åŠ å¯†\"></a>å¯¹ç§°åŠ å¯†</h1><p>é‡‡ç”¨å•é’¥å¯†ç ç³»ç»Ÿçš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨ä½œä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ã€‚åŠ å¯†ç®—æ³•ä¸­æ•°DESã€3DESã€AES(å—ç®—æ³•)å’ŒRC4(æµç®—æ³•)æœ€ä¸ºå¸¸ç”¨äº†ã€‚</p>\n<h2 id=\"DES\"><a href=\"#DES\" class=\"headerlink\" title=\"DES\"></a>DES</h2><p>DES ä½¿ç”¨ä¸€ä¸ª 56 ä½çš„å¯†é’¥ä»¥åŠé™„åŠ çš„ 8 ä½å¥‡å¶æ ¡éªŒä½ï¼Œäº§ç”Ÿæœ€å¤§ 64 ä½çš„åˆ†ç»„å¤§å°ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„åˆ†ç»„å¯†ç ï¼Œä½¿ç”¨ç§°ä¸º Feistel çš„æŠ€æœ¯ï¼Œå…¶ä¸­å°†åŠ å¯†çš„æ–‡æœ¬å—åˆ†æˆä¸¤åŠã€‚ä½¿ç”¨å­å¯†é’¥å¯¹å…¶ä¸­ä¸€åŠåº”ç”¨å¾ªç¯åŠŸèƒ½ï¼Œç„¶åå°†è¾“å‡ºä¸å¦ä¸€åŠè¿›è¡Œâ€œå¼‚æˆ–â€è¿ç®—ï¼›æ¥ç€äº¤æ¢è¿™ä¸¤åŠï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šç»§ç»­ä¸‹å»ï¼Œä½†æœ€åä¸€ä¸ªå¾ªç¯ä¸äº¤æ¢ã€‚DES ä½¿ç”¨ 16 ä¸ªå¾ªç¯ï¼Œä½¿ç”¨å¼‚æˆ–ï¼Œç½®æ¢ï¼Œä»£æ¢ï¼Œç§»ä½æ“ä½œå››ç§åŸºæœ¬è¿ç®—ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/7o3yv.jpg\" alt=\"Crypto_DES\"></p>\n<h3 id=\"3DES\"><a href=\"#3DES\" class=\"headerlink\" title=\"3DES\"></a>3DES</h3><p>3DESæ˜¯åœ¨DESçš„åŸºç¡€ä¸Šåšäº†ä¸¤æ¬¡åŠ å¯†å’Œä¸€æ¬¡è§£å¯†ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼šè®¾Ek()å’ŒDk()ä»£è¡¨DESç®—æ³•çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ï¼ŒKä»£è¡¨DESç®—æ³•ä½¿ç”¨çš„å¯†é’¥ï¼ŒPä»£è¡¨æ˜æ–‡ï¼ŒCä»£è¡¨å¯†æ–‡ï¼Œè¿™æ ·ï¼š<br>3DESåŠ å¯†è¿‡ç¨‹ä¸ºï¼šC=Ek3(Dk2(Ek1(P)))<br>3DESè§£å¯†è¿‡ç¨‹ä¸ºï¼šP=Dk1(EK2(Dk3(C)))<br>è‹¥<strong>Ek1 == Ek2 == Ek3</strong>ï¼Œå°±æ˜¯ç®€å•çš„DESäº†ã€‚</p>\n<h2 id=\"AES\"><a href=\"#AES\" class=\"headerlink\" title=\"AES\"></a>AES</h2><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1lfh4.png\" alt=\"Crypto_AES\"><br>å›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œè‹¥æœ‰ä¾µçŠ¯åˆ°æƒåˆ©ä¹‹å¤„ï¼Œè¯·å‘ŠçŸ¥ï¼Œè°¢è°¢~    </p>\n<p>AESåŠ å¯†è¿‡ç¨‹æ¶‰åŠåˆ°4ç§æ“ä½œï¼šå­—èŠ‚æ›¿ä»£ï¼ˆSubBytesï¼‰ã€è¡Œç§»ä½ï¼ˆShiftRowsï¼‰ã€åˆ—æ··æ·†ï¼ˆMixColumnsï¼‰å’Œè½®å¯†é’¥åŠ ï¼ˆAddRoundKeyï¼‰ã€‚è§£å¯†è¿‡ç¨‹åˆ†åˆ«ä¸ºå¯¹åº”çš„é€†æ“ä½œã€‚ç”±äºæ¯ä¸€æ­¥æ“ä½œéƒ½æ˜¯å¯é€†çš„ï¼ŒæŒ‰ç…§ç›¸åçš„é¡ºåºè¿›è¡Œè§£å¯†å³å¯æ¢å¤æ˜æ–‡ã€‚åŠ è§£å¯†ä¸­æ¯è½®çš„å¯†é’¥åˆ†åˆ«ç”±åˆå§‹å¯†é’¥æ‰©å±•å¾—åˆ°ã€‚ç®—æ³•ä¸­16å­—èŠ‚çš„æ˜æ–‡ã€å¯†æ–‡å’Œè½®å¯†é’¥éƒ½ä»¥ä¸€ä¸ª4x4çš„çŸ©é˜µè¡¨ç¤ºã€‚<br>ç®—æ³•è¯¦ç»†å·²ç»æœ‰å…¶ä»–äººå†™äº†ï¼Œæˆ‘å°±ä¸å†é€ è½®å­äº†ã€‚<a href=\"http://www.blogfshare.com/aes-rijndael.html\">å¯†ç ç®—æ³•è¯¦è§£â€”â€”AES</a><br>è¿˜æœ‰ç®—æ³•åŠè§£å¯†ç®—æ³•çš„<a href=\"http://blog.csdn.net/searchsun/article/details/2516191\">æ¨¡å¼ä»‹ç»</a>ï¼Œå¯ä»¥äº†è§£äº†è§£~    </p>\n<h2 id=\"RC4\"><a href=\"#RC4\" class=\"headerlink\" title=\"RC4\"></a>RC4</h2><p>ä¸åŒäºå—ç®—æ³•çš„æ˜¯ï¼ŒRC4ç­‰æµç®—æ³•ä¸æ˜¯å¯¹æ˜æ–‡è¿›è¡Œåˆ†ç»„å¤„ç†ï¼Œè€Œæ˜¯å­—èŠ‚æµçš„æ–¹å¼ä¾æ¬¡åŠ å¯†æ˜æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œè§£å¯†çš„æ—¶å€™ä¹Ÿæ˜¯ä¾æ¬¡å¯¹å¯†æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œè§£å¯†ã€‚</p>\n<h2 id=\"CommonCrypto\"><a href=\"#CommonCrypto\" class=\"headerlink\" title=\"CommonCrypto\"></a>CommonCrypto</h2><p>å¯¹äºèº«ä¸ºiOSæ”»åŸç‹®çš„é˜¿æ¾¤å›æ¥è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯è¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒé‡è¦ã€‚    </p>\n<h3 id=\"CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\"><a href=\"#CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\" class=\"headerlink\" title=\"CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“\"></a>CommonCryptoçš„ä¸€äº›ä¸»è¦çš„ç»“æ„ä½“</h3><ol>\n<li>CCOperationï¼šå®šä¹‰æ“ä½œï¼šåŠ å¯†æˆ–è§£å¯†</li>\n</ol>\n<pre><code>enum {\n    kCCEncrypt = 0, \n    kCCDecrypt,     \n};\ntypedef uint32_t CCOperation;\n</code></pre><ol>\n<li>CCAlgorithmï¼šåŠ è§£å¯†ç®—æ³•ï¼Œå¾ˆæ˜æ˜¾å°±ä¸è¯¦ç»†è¯´æ˜äº†ã€‚</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCAlgorithmAES128 = 0,\n    kCCAlgorithmAES = 0,\n    kCCAlgorithmDES,\n    kCCAlgorithm3DES,       \n    kCCAlgorithmCAST,       \n    kCCAlgorithmRC4,\n    kCCAlgorithmRC2,   \n    kCCAlgorithmBlowfish    \n};\ntypedef uint32_t CCAlgorithm;\n</code></pre>\n<ol>\n<li>CCOptionsï¼šé€‰é¡¹ï¼šæŒ‰ç…§P7è¡¥è¶³å—ç®—æ³•çš„å—é•¿åº¦æˆ–è€…é€‰æ‹©ECBæ¨¡å¼ï¼Œå…³äºæ¨¡å¼è¯·çœ‹ä¸Šé¢AESä¸­ä»‹ç»çš„æ–‡ç« ã€‚å¯¹äºRC4ç­‰æµç®—æ³•ä¸é€‚ç”¨ã€‚æˆ–è€…è¯´ä¸éœ€è¦ä½¿ç”¨åˆ°</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCOptionPKCS7Padding   = 0x0001,\n    kCCOptionECBMode        = 0x0002\n};\n</code></pre>\n<ol>\n<li>KeySizeå’ŒBlockSizeï¼šè§„å®šåŠ è§£å¯†å¯†é’¥çš„é•¿åº¦å’Œæ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦</li>\n</ol>\n<pre><code class=\"objc\">enum {\n    kCCKeySizeAES128          = 16,\n    kCCKeySizeAES192          = 24,\n    kCCKeySizeAES256          = 32,\n    kCCKeySizeDES             = 8,\n    kCCKeySize3DES            = 24,\n    kCCKeySizeMinCAST         = 5,\n    kCCKeySizeMaxCAST         = 16,\n    kCCKeySizeMinRC4          = 1,\n    kCCKeySizeMaxRC4          = 512,\n    kCCKeySizeMinRC2          = 1,\n    kCCKeySizeMaxRC2          = 128,\n    kCCKeySizeMinBlowfish     = 8,\n    kCCKeySizeMaxBlowfish     = 56,\n};\nenum {\n    /* AES */\n    kCCBlockSizeAES128        = 16,\n    /* DES */\n    kCCBlockSizeDES           = 8,\n    /* 3DES */\n    kCCBlockSize3DES          = 8,\n    /* CAST */\n    kCCBlockSizeCAST          = 8,\n    kCCBlockSizeRC2           = 8,\n    kCCBlockSizeBlowfish      = 8,\n};\n</code></pre>\n<h3 id=\"é€šè¿‡ä»£ç å®ç°\"><a href=\"#é€šè¿‡ä»£ç å®ç°\" class=\"headerlink\" title=\"é€šè¿‡ä»£ç å®ç°\"></a>é€šè¿‡ä»£ç å®ç°</h3><h4 id=\"å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\"><a href=\"#å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\" class=\"headerlink\" title=\"å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚\"></a>å¯¼å…¥CommonCryptoçš„å¤´æ–‡ä»¶ã€‚</h4><pre><code class=\"objc\">#import &lt;CommonCrypto/CommonCrypto.h&gt;\n</code></pre>\n<h4 id=\"symCrypt\"><a href=\"#symCrypt\" class=\"headerlink\" title=\"symCrypt\"></a>symCrypt</h4><pre><code class=\"objc\">/*!\n    @function   symCrypt\n    @abstract   å¯¹ç§°è§£å¯†\n    @param      operation       åŠ å¯†æˆ–è§£å¯†\n    @param      data            éœ€è¦åŠ è§£å¯†çš„æ•°æ®\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      key             åŠ è§£å¯†æ—¶æä¾›çš„å¯†é’¥\n    @param      iv              Initialization Vector(CBCæ¨¡å¼ä¸‹éœ€è¦)\n    @param      options         åŠ å¯†æ•°æ®å­—èŠ‚æ•°ä¸æ˜¯blockçš„æ•´æ•°å€æ—¶éœ€è¦åˆ¶å®špadding\n                                è¯¦æƒ…å‚è§CommonCryptorå¤´æ–‡ä»¶\n    @param      status          åŠ è§£å¯†æˆåŠŸä¸å¦æ‰€è¿”å›çš„çŠ¶æ€\n    @result     è§£å¯†åå¾—åˆ°çš„ç»“æœ\n */\n- (NSData *)symCrypt:(CCOperation)operation\n         processData:(NSData *)data\n      UsingAlgorithm:(CCAlgorithm)algorithm\n                 key:(NSData *)key\n initalizationVector:(NSData *)iv\n             options:(CCOptions)options\n              status:(CCCryptorStatus *)status\n{\n    NSData *result = nil;\n    NSMutableData *cKey = [key mutableCopy], *cIV = [iv mutableCopy];\n    [self fixKeyLengthsByAlgorithm:algorithm keyData:cKey ivData:cIV];//1\n    size_t bufferSize = [data length] + [self blockSizeByAlgorithm:algorithm]; // 2\n    void *buffer = malloc(bufferSize); //3\n    size_t encryptedSize = 0;\n    *status = CCCrypt(operation, algorithm, options, [cKey bytes], [cKey length], [cIV bytes], [data bytes], [data length], buffer, bufferSize, &amp;encryptedSize); //4\n    if (*status == kCCSuccess) {\n        result = [NSData dataWithBytes:buffer length:encryptedSize];  //5\n    } else {\n        NSLog(@&quot;[ERROR] failed to encrypt|CCCryptoStatus: %d&quot;, *status);\n    }\n    free(buffer);  //6\n    return result;  //7\n}\n</code></pre>\n<ol>\n<li>æ ¹æ®åŠ è§£å¯†ç®—æ³•æ£€æŸ¥Keyå’Œivçš„é•¿åº¦æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹é¢åˆ—å‡ºçš„å‡½æ•°fixKeyLength</li>\n<li>åŠ å¯†åçš„æ•°æ®æ€»å°äºç­‰äºæ•°æ®é•¿åº¦åŠ ä¸Šblockçš„å¤§å°</li>\n<li>ç”³è¯·bufferSizeçš„ç©ºé—´ä»¥ä¿å­˜åŠ å¯†æˆ–è§£å¯†åçš„æ•°æ®</li>\n<li>è°ƒç”¨CCCryptå‡½æ•°å®ç°åŠ è§£å¯†ã€‚<pre><code class=\"objc\">CCCryptorStatus CCCrypt(\n CCOperation op,         /* åŠ å¯†æˆ–è§£å¯†ï¼škCCEncrypt, etc. */\n CCAlgorithm alg,        /* åŠ è§£å¯†é‡‡ç”¨çš„ç®—æ³•ï¼škCCAlgorithmAES128, etc. */\n CCOptions options,      /* kCCOptionPKCS7Padding, etc. */\n const void *key,        /* å¯†é’¥ */\n size_t keyLength,       /* å¯†é’¥é•¿åº¦ */\n const void *iv,         /* ivï¼Œä½¿ç”¨ä¸CBCæ¨¡å¼ä¸‹ï¼Œæ˜æ–‡å32ä½å’Œivå¼‚æˆ–ååšä¸ºä¸‹ä¸€é˜¶æ®µçš„å‰32ä½ */\n const void *dataIn,     /* è¦åŠ å¯†æˆ–è§£å¯†çš„æ•°æ® */\n size_t dataInLength,    /* æ•°æ®é•¿åº¦ */\n void *dataOut,          /* æ³¨æ„ä¼ å…¥çš„æ˜¯æŒ‡é’ˆï¼ŒåŠ è§£å¯†åçš„æ•°æ®å°†ä»æ­¤å¤„è¿”å› */\n size_t dataOutAvailable,/* ä¸ºdataOutç”³è¯·çš„å¯å†™é•¿åº¦ */\n size_t *dataOutMoved    /* ç»“æœæ‰€å çš„é•¿åº¦ */\n )    \n __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);\n</code></pre>\n</li>\n<li>è‹¥æˆåŠŸï¼Œåˆ™å°†(void *)ç±»å‹çš„æ•°æ®å°è£…åˆ°NSDataä¸­ã€‚</li>\n<li>é‡Šæ”¾ç”³è¯·çš„bufferå†…å­˜</li>\n<li>è¿”å›ã€‚</li>\n</ol>\n<h4 id=\"fixKeyLength\"><a href=\"#fixKeyLength\" class=\"headerlink\" title=\"fixKeyLength\"></a>fixKeyLength</h4><pre><code class=\"objc\">/*!\n    @function   fixKeyLength\n    @abstract   ä¿®æ”¹å¯†é’¥é•¿åº¦è‡³ä¸ç®—æ³•åŒ¹é…\n    @param      algorithm       åŠ è§£å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @param      keyData         å¯†é’¥\n    @param      ivData          Initialization Vector\n    @result     å°†å¯†é’¥é•¿åº¦å’Œivä¿®æ”¹è‡³ä¸ç®—æ³•åŒ¹é…çš„é•¿åº¦\n */\n- (void)fixKeyLengthsByAlgorithm:(CCAlgorithm)algorithm\n                         keyData:(NSMutableData *)keyData\n                          ivData:(NSMutableData *)ivData\n{\n    NSUInteger keyLength = [keyData length];\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n        {\n            if (keyLength &lt; kCCKeySizeAES128) {\n                keyData.length = kCCKeySizeAES128;\n            } else if (keyLength &lt; kCCKeySizeAES192) {\n                keyData.length = kCCKeySizeAES192;\n            } else {\n                keyData.length = kCCKeySizeAES256;\n            }\n            break;\n        }\n        case kCCAlgorithmDES:\n        {\n            keyData.length = kCCKeySizeDES;\n            break;\n        }\n        case kCCAlgorithm3DES:\n        {\n            keyData.length = kCCKeySize3DES;\n            break;\n        }\n        case kCCAlgorithmRC4:\n        {\n            keyData.length = kCCKeySizeMaxRC4;\n            break;\n        }\n        default:\n            break;\n    }\n    ivData.length = keyData.length;\n}\n</code></pre>\n<h4 id=\"blockSizeByAlgorithm\"><a href=\"#blockSizeByAlgorithm\" class=\"headerlink\" title=\"blockSizeByAlgorithm\"></a>blockSizeByAlgorithm</h4><pre><code class=\"objc\">/*!\n    @function   blockSizeByAlgorithm\n    @abstract   æ ¹æ®ç®—æ³•è·å–æ¯ä¸ªblockçš„å¤§å°\n    @param      algorithm       åŠ å¯†æ‰€é‡‡ç”¨çš„ç®—æ³•\n    @result     è¯¥ç®—æ³•å¯¹åº”çš„blockå¤§å°\n */\n- (size_t)blockSizeByAlgorithm:(CCAlgorithm)algorithm {\n    switch (algorithm) {\n        case kCCAlgorithmAES:\n            return kCCBlockSizeAES128;\n        case kCCAlgorithmDES:\n        case kCCAlgorithm3DES:\n        case kCCAlgorithmRC4:\n            return kCCBlockSizeDES;\n        default:\n            return 0;\n    }\n}\n</code></pre>\n<p>ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ä¸»è¦æ˜¯ä¸ºäº†è§„èŒƒå¯†é’¥çš„é•¿åº¦å’Œè·å–æ˜æ–‡å¯†æ–‡å—çš„é•¿åº¦ï¼Œå¾ˆå¥½ç†è§£å°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚è¿™æ ·è¿˜æ˜¯ä¸èƒ½å‚»ç“œå¼åœ°è°ƒç”¨ï¼Œå› æ­¤é˜¿æ¾¤å›åˆ›å»ºäº†DESCipherActorç»§æ‰¿äºSymCipherActorï¼Œè¿›ä¸€æ­¥è¿›è¡Œå°è£…ï¼š<br>ã€€ã€€DESCipherActor.h<br>ã€€ã€€``` objc</p>\n<pre><code>- (NSString *)encryptInCBC:(NSString *)plainText key:(NSString *)key iv:(NSData *)iv;\n- (NSString *)decryptInCBC:(NSString *)cipherText key:(NSString *)key iv:(NSData *)iv;\n- (NSString *)encryptInEBC:(NSString *)plainText key:(NSString *)key;\n- (NSString *)decryptInEBC:(NSString *)cipherText key:(NSString *)key;\n</code></pre><p>ã€€ã€€```<br>ã€€ã€€è¿˜æœ‰AESã€RC4çš„å®ç°å¤§è‡´ç›¸åŒï¼Œå…·ä½“å¯å‚è€ƒDemoï¼Œå·²ç»ä¸Šä¼ <a href=\"https://github.com/objchris/PKIDemo\">Github</a></p>\n<p>ã€€ã€€æœç„¶ï¼Œé‡‡ç”¨åŠ å¯†ç®—æ³•åŠ å¯†åçš„è®ºæ–‡é¡ºåˆ©å‘åˆ°è€å¸ˆé‚£é‡Œï¼Œé—®é¢˜æ˜¯è§£å¯†ç”¨å¯†é’¥è¿˜åœ¨é˜¿æ¾¤å›æ‰‹ä¸Šï¼Œè€å¸ˆè¿˜æ˜¯æ— æ³•çœ‹åˆ°è®ºæ–‡å†…å®¹ï¼Œå¯†é’¥ä¸èƒ½é€šè¿‡ç½‘ç»œä¼ è¾“ç»™è€å¸ˆï¼Œå› ä¸ºHackerå›è¿˜åœ¨ç›‘å¬ç€é˜¿æ¾¤å›å’Œè€å¸ˆçš„é€šè®¯ã€‚éš¾é“è¦é˜¿æ¾¤å›ä¸æƒ§åƒé‡Œï¼ˆå…¶å®ä¸æ˜¯å¾ˆè¿œï¼Œå“ˆå“ˆå“ˆã€‚æˆ‘å°±å¤¸å¼ é‚£ä¹ˆä¸€ç‚¹ç‚¹~ï¼‰å»åˆ°è€å¸ˆé‚£è¾¹ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥å°†è®ºæ–‡äº¤ç»™è€å¸ˆå‘¢ï¼Ÿï¼ï¼ï¼<br>ã€€ã€€What the <em>**</em>ï¼ï¼ï¼ğŸ’”ğŸ’”é˜¿æ¾¤å›æ­¤æ—¶å¿ƒé‡Œåƒä¸‡åªè‰æ³¥é©¬åœ¨å¥”è…¾ã€‚        </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/9hwet.jpg\" alt=\"desk\">    </p>\n<p>ã€€ã€€ä½†æ˜¯é˜¿æ¾¤å›ä¸ä¼šè¿™æ ·è½»æ˜“åœ°ç‹—å¸¦ï¼Œå› ä¸ºè¿˜å¯ä»¥é€šè¿‡éå¯¹ç§°åŠ å¯†æ¥è§£å†³â€¦</p>\n<h1 id=\"éå¯¹ç§°åŠ å¯†\"><a href=\"#éå¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"éå¯¹ç§°åŠ å¯†\"></a>éå¯¹ç§°åŠ å¯†</h1><p>å¯¹ç§°åŠ å¯†ç®—æ³•åœ¨åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ï¼›è€Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™ä¸¤ä¸ªç§˜é’¥æ˜¯å…¬å¼€å¯†é’¥ï¼ˆpublic keyï¼Œç®€ç§°å…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆprivate keyï¼Œç®€ç§°ç§é’¥ï¼‰ã€‚<br>å¦‚ç”²ä¹™åŒæ–¹éœ€è¦åŠ å¯†é€šä¿¡ï¼š</p>\n<ol>\n<li>ä¹™æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰å¹¶å°†å…¬é’¥å‘å…¶å®ƒæ–¹å…¬å¼€ã€‚</li>\n<li>å¾—åˆ°è¯¥å…¬é’¥çš„ç”²æ–¹ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åå†å‘é€ç»™ä¹™æ–¹ã€‚</li>\n<li>ä¹™æ–¹å†ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰å¯¹åŠ å¯†åçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚ä¹™æ–¹åªèƒ½ç”¨å…¶ä¸“ç”¨å¯†é’¥ï¼ˆç§é’¥ï¼‰è§£å¯†ç”±å¯¹åº”çš„å…¬é’¥åŠ å¯†åçš„ä¿¡æ¯ã€‚</li>\n</ol>\n<p>ã€€ã€€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå³ä½¿æ”»å‡»è€…æˆªè·äº†ä¼ è¾“çš„å¯†æ–‡ï¼Œå¹¶å¾—åˆ°äº†ä¹™çš„å…¬é’¥ï¼Œä¹Ÿæ— æ³•ç ´è§£å¯†æ–‡ï¼Œå› ä¸ºåªæœ‰ä¹™çš„ç§é’¥æ‰èƒ½è§£å¯†å¯†æ–‡ã€‚<br>ã€€ã€€åŒæ ·ï¼Œå¦‚æœä¹™è¦å›å¤åŠ å¯†ä¿¡æ¯ç»™ç”²ï¼Œé‚£ä¹ˆéœ€è¦ç”²å…ˆå…¬å¸ƒç”²çš„å…¬é’¥ç»™ä¹™ç”¨äºåŠ å¯†ï¼Œç”²è‡ªå·±ä¿å­˜ç”²çš„ç§é’¥ç”¨äºè§£å¯†ã€‚<br>ã€€ã€€è¯´åˆ°éå¯¹ç§°åŠ å¯†ï¼Œä¸å¾—ä¸è¯´RSAï¼ˆå…¶å®æ˜¯é˜¿æ¾¤å›åªæ¥è§¦è¿‡è¿™ä¸ªã€‚ã€‚ã€‚ï¼‰</p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/6tgz2.png\" alt=\"yaoMing\"></p>\n<h2 id=\"RSA\"><a href=\"#RSA\" class=\"headerlink\" title=\"RSA\"></a>RSA</h2><h3 id=\"ç®—æ³•åŸç†\"><a href=\"#ç®—æ³•åŸç†\" class=\"headerlink\" title=\"ç®—æ³•åŸç†\"></a>ç®—æ³•åŸç†</h3><ol>\n<li>é€‰å–ä¸¤ä¸ªè´¨æ•°på’Œq, è®¡ç®—<code>n = p * q</code> ã€‚på’Œqè¦å°½é‡å¤§</li>\n<li>æ ¹æ®è´¨æ•°<code>Ï†(p)=p-1</code>å’Œæ¬§æ‹‰æ–¹ç¨‹æ»¡è¶³ä¹˜æ³•ç»“åˆç‡çš„è§„å¾‹æ±‚å‡ºÏ†(n),å³<code>Ï†(n)=(p-1)(q-1)</code></li>\n<li>é€‰å–è´¨æ•°eä½œä¸ºå…¬é’¥æŒ‡æ•°, eçš„èŒƒå›´<code>1&lt;e&lt;Ï†(n)</code>,ä¸” e ä¸ Ï†(n) äº’è´¨</li>\n<li>å‡ºeå¯¹Ï†(n)çš„æ¨¡åå…ƒç´ dï¼Œæ±‚è§£å…¬å¼ï¼š<code>ed â‰¡ 1 (mod Ï†(n))</code>å³å¯å¾—å‡º<br>è¿™æ ·è®¡ç®—å(n,e)æ˜¯å…¬é’¥ï¼Œ(n,d)æ˜¯ç§é’¥ã€‚<blockquote>\n<p>å…¬é’¥åŠ å¯†å…¬å¼<br>m^e â‰¡ c (mod n) å³ c = m^e mod n<br>ç§é’¥è§£å¯†å…¬å¼<br>c^d â‰¡ m (mod n) å³ m = c^d mod n    </p>\n</blockquote>\n</li>\n</ol>\n<p>RSAåŠ å¯†å¸¸ç”¨çš„å¡«å……æ–¹å¼æœ‰ä¸‹é¢3ç§ï¼š    </p>\n<ol>\n<li>RSA_PKCS1_PADDING å¡«å……æ¨¡å¼ï¼Œæœ€å¸¸ç”¨çš„æ¨¡å¼<br>è¾“å…¥ï¼šå¿…é¡» æ¯”RSAé’¥æ¨¡é•¿(modulus)çŸ­è‡³å°‘11ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯RSA_size(rsa) â€“ 11ã€‚å¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿<br>æ ¹æ®è¿™ä¸ªè¦æ±‚ï¼Œå¯¹äº1024bitçš„å¯†é’¥ï¼Œblock length = 1024/8 â€“ 11 = 117 å­—èŠ‚     </li>\n<li>RSA_PKCS1_OAEP_PADDING<br>è¾“å…¥ï¼šRSA_size(rsa) â€“ 41<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    </li>\n<li>for RSA_NO_PADDING ä¸å¡«å……<br>è¾“å…¥ï¼šå¯ä»¥å’ŒRSAé’¥æ¨¡é•¿ä¸€æ ·é•¿ï¼Œå¦‚æœè¾“å…¥çš„æ˜æ–‡è¿‡é•¿ï¼Œå¿…é¡»åˆ‡å‰²ï¼Œç„¶åå¡«å……<br>è¾“å‡ºï¼šå’Œmodulusä¸€æ ·é•¿    </li>\n</ol>\n<p>ç‰¹åˆ«æ¨èçš„æ˜¯é˜®ä¸€å³°çš„æ—¥å¿—ä¸¤ç¯‡æ—¥å¿—ï¼Œå†™å¾—éå¸¸å¥½ï¼Œæˆ‘ä¹Ÿæ˜¯å‚è€ƒè¿™ä¸ªå†™çš„ï¼š<br><a href=\"http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html\">RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰</a><br><a href=\"http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html\">RSAç®—æ³•åŸç†ï¼ˆäºŒï¼‰</a></p>\n<h3 id=\"iOS-Security-framework\"><a href=\"#iOS-Security-framework\" class=\"headerlink\" title=\"iOS Security.framework\"></a>iOS Security.framework</h3><h4 id=\"encryptWithPublicKey\"><a href=\"#encryptWithPublicKey\" class=\"headerlink\" title=\"encryptWithPublicKey\"></a>encryptWithPublicKey</h4><pre><code class=\"objc\">- (NSString *)encrypt:(NSString *)stringToEncrypt withPublicKey:(SecKeyRef)publicKey{\n    OSStatus status = noErr;\n    size_t cipherBufferSize;\n    uint8_t *cipherBuffer;\n    uint8_t *dataToEncrypt = (uint8_t *)[stringToEncrypt cStringUsingEncoding:NSUTF8StringEncoding];\n    size_t dataLength = stringToEncrypt.length;\n    NSLog(@&quot;dataLength: %zu&quot;, dataLength);\n    cipherBufferSize = SecKeyGetBlockSize(publicKey);       // 1\n    cipherBuffer = malloc(cipherBufferSize);\n    size_t totalBufferSize = 0;\n    NSMutableData *data = [[NSMutableData alloc] init];    // 2\n    //ä½¿ç”¨kSecPaddingPKCS1ä½œä¸ºåŠ å¯†çš„padding\n    if ((cipherBufferSize - 11) &lt; dataLength) {            // 3\n        //è‹¥éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦è¿‡é•¿ï¼Œéœ€è¦åˆ†å—åŠ å¯†\n        size_t toEncryptDataLength = dataLength;\n        while ((cipherBufferSize - 11) &lt; toEncryptDataLength) { // 4\n            status = SecKeyEncrypt(publicKey,\n                                   kSecPaddingPKCS1,\n                                   dataToEncrypt + (dataLength - toEncryptDataLength),\n                                   cipherBufferSize - 11,\n                                   cipherBuffer,\n                                   &amp;cipherBufferSize);          // 5\n            toEncryptDataLength = toEncryptDataLength - (cipherBufferSize - 11);        //6\n            //CipherBufferæ˜¯é€šè¿‡mallocåˆ›å»ºï¼Œæ²¡æœ‰å¯¹å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ‰å¾ˆå¤šå…¶ä»–æ•°æ®\n            //è½¬å‚¨æˆNSDataï¼Œç¡®ä¿å¯¹æ­£ç¡®é•¿åº¦çš„cipherBufferçš„è·å–\n            [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];    //7\n            totalBufferSize += cipherBufferSize;    //8\n        }\n        //å¯¹å‰©ä½™çš„æ•°æ®è¿›è¡ŒåŠ å¯†\n        status = SecKeyEncrypt(publicKey,\n                               kSecPaddingPKCS1,\n                               dataToEncrypt + (dataLength - toEncryptDataLength),\n                               toEncryptDataLength,\n                               cipherBuffer,\n                               &amp;cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];               \n        totalBufferSize += cipherBufferSize;\n    } else {\n        //éœ€è¦åŠ å¯†çš„æ•°æ®é•¿åº¦å°äºSecKeyGetBlockSize(publicKey)ï¼11ï¼Œç›´æ¥åŠ å¯†\n        status = SecKeyEncrypt(publicKey, kSecPaddingPKCS1, dataToEncrypt, dataLength, cipherBuffer, &amp;cipherBufferSize);\n        [data appendData:[NSData dataWithBytes:cipherBuffer length:cipherBufferSize]];\n    }\n    if (publicKey) {\n        CFRelease(publicKey);\n    }\n    NSString *encryptedString = [GTMBase64 stringByEncodingData:[data copy]];            //9\n    free(cipherBuffer);            //10\n    return encryptedString;\n}\n</code></pre>\n<ol>\n<li>æ ¹æ®Keyåˆ¤æ–­åŠ è§£å¯†å—å¤§å°ï¼ˆè‹¥ä½¿ç”¨kSecPaddingPKCS1ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´å—å¤§å°å°äºè¿™ä¸ªè¿”å›å€¼ - 11ï¼‰</li>\n<li>åˆ›å»ºMutableDataç”¨ä»¥ä¸‹é¢æ“ä½œæ·»åŠ Data</li>\n<li>åˆ¤æ–­æ•°æ®æ€»å¤§å°æ˜¯å¦å¤§äºSecKeyGetBlockSize(publicKey) - 11ï¼Œæ˜¯åˆ™æ‹†åˆ†æˆå¤šä¸ªå—åŠ è§£å¯†ï¼Œå¦åˆ™ç›´æ¥åŠ è§£å¯†ã€‚</li>\n<li>whileå¾ªç¯å¤šæ¬¡æ“ä½œ</li>\n<li>ä½¿ç”¨SecKeyEncryptè¿›è¡ŒåŠ è§£å¯†<pre><code class=\"objc\">OSStatus SecKeyEncrypt(\n SecKeyRef           key,                //åŠ è§£å¯†ä½¿ç”¨çš„å¯†é’¥\n SecPadding          padding,            //paddingï¼Œä¸€èˆ¬ä¸ºkSecPaddingPKCS1ï¼Œéœ€è¦æ³¨æ„æ•°æ®å—çš„å¤§å°é—®é¢˜\n const uint8_t       *plainText,          //æ˜æ–‡\n size_t              plainTextLen,        //æ˜æ–‡é•¿åº¦\n uint8_t             *cipherText,        //è¿”å›çš„å¯†æ–‡\n size_t              *cipherTextLen)     //è¿”å›çš„å¯†æ–‡é•¿åº¦\n __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_2_0);\n</code></pre>\n</li>\n<li>å°†å·²ç»åŠ è§£å¯†è¿‡çš„æ•°æ®å‰”é™¤</li>\n<li>å¾€MutableDataä¸­æ·»åŠ æ•°æ®</li>\n<li>è®¡ç®—æ€»çš„BufferSizeï¼Œè¿™é‡Œåªæ˜¯åšä¸ªç»Ÿè®¡</li>\n<li>å°†å¾—åˆ°çš„æ•°æ®è¿›è¡ŒBase64è½¬ç </li>\n<li>è®°å¾—é‡Šæ”¾cipherBuffer</li>\n</ol>\n<h4 id=\"decryptWithPrivateKey\"><a href=\"#decryptWithPrivateKey\" class=\"headerlink\" title=\"decryptWithPrivateKey\"></a>decryptWithPrivateKey</h4><pre><code class=\"objc\">- (NSString *)decrypt: (NSString *)stringToDecrypt withPrivateKey:(SecKeyRef)privateKey {\n    NSData *dataToDecrypt = [GTMBase64 decodeString:stringToDecrypt];\n    OSStatus status = noErr;\n    size_t cipherBufferSize = [dataToDecrypt length];\n    uint8_t *cipherBuffer = (uint8_t *)[dataToDecrypt bytes];\n    size_t plainBufferSize;\n    uint8_t *plainBuffer;\n    plainBufferSize = SecKeyGetBlockSize(privateKey);\n    plainBuffer = malloc(plainBufferSize);\n    NSMutableData *data = [[NSMutableData alloc] init];\n    size_t decryptLengthPer = SecKeyGetBlockSize(privateKey);\n    if (decryptLengthPer &lt; cipherBufferSize) {\n        size_t toDecryptDataLength = cipherBufferSize;\n        size_t totalBufferSize = 0;\n        while (decryptLengthPer &lt; toDecryptDataLength) {\n            status = SecKeyDecrypt(privateKey,\n                                   kSecPaddingPKCS1,\n                                   cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                                   decryptLengthPer,\n                                   plainBuffer,\n                                   &amp;plainBufferSize);\n            toDecryptDataLength = toDecryptDataLength - decryptLengthPer;\n            if (status == noErr) {\n                [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n            }\n            totalBufferSize += plainBufferSize;\n        }\n        status = SecKeyDecrypt(privateKey,\n                               kSecPaddingPKCS1,\n                               cipherBuffer + (cipherBufferSize - toDecryptDataLength),\n                               decryptLengthPer,\n                               plainBuffer,\n                               &amp;plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n        totalBufferSize += plainBufferSize;\n    } else {\n        status = SecKeyDecrypt(privateKey, kSecPaddingPKCS1, cipherBuffer, cipherBufferSize, plainBuffer, &amp;plainBufferSize);\n        if (status == noErr) {\n            [data appendData:[NSData dataWithBytes:plainBuffer length:plainBufferSize]];\n        }\n    }\n    if (privateKey) {\n        CFRelease(privateKey);\n    }\n    NSString *decryptedString = [[NSString alloc] initWithData:[data copy] encoding:NSUTF8StringEncoding];\n    free(plainBuffer);\n    return decryptedString;\n}\n</code></pre>\n<p>è§£å¯†å’ŒåŠ å¯†çš„æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œæ­¤å¤„ä¸å¤šåŠ èµ˜è¿°ã€‚<br><a href=\"https://github.com/objchris/PKIDemo\">Demo</a></p>\n<p><strong>Hackerå›ï¼Œé—®ä½ æƒŠæœªï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚</strong><br>éå¯¹ç§°åŠ å¯†å¯¹é˜¿æ¾¤å›æ¥è¯´å®Œå…¨è§£å†³äº†é—®é¢˜(ã¥ï¿£ 3ï¿£)ã¥ï¼Œä½¿ç”¨è€å¸ˆçš„å…¬é’¥åŠ å¯†è®ºæ–‡åå‘é€å›ç»™ä»–ã€‚Hackerå›å°±ç®—æˆªå–åˆ°ä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºHackerå›æ²¡æœ‰è€å¸ˆçš„ç§é’¥ï¼Œæ— æ³•è·å–åˆ°å…¶ä¸­çš„å†…å®¹ã€‚è€å¸ˆè·å–åˆ°é˜¿æ¾¤å›å‘é€çš„è®ºæ–‡åè‡ªç„¶å¯ä»¥è§£å¯†æŸ¥çœ‹ã€‚    </p>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pivxc.jpg\" alt=\"hahahahaha\"><br>ä»ä¸­é˜¿æ¾¤å›ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶â¤ï¸ã€‚æ•…äº‹æœ‰(fei)ç‚¹(chang)å¼±æ™ºï¼Œå¸Œæœ›å¤§å®¶ä¸è¦åœ¨æ„ï¼Œå…³æ³¨åŠ è§£å¯†ç®—æ³•å°±å¥½äº†~\nã€€ã€€</p>\n<p>é¢˜å¤–è¯ï¼šPKIåŸºç¡€æœ€è¿‘æ‰æ¥è§¦ï¼Œå­¦å¾—ä¸æ·±ï¼Œæœ‰äº›ä¸œè¥¿å†™é”™è¯·å¤§å®¶è§è°…ã€‚<br>æ›´å¤šçš„ç®—æ³•ï¼Œegï¼šæ•°å­—æ‘˜è¦ã€æ•°å­—ç­¾åã€å£ä»¤è®¤è¯ç­‰ç­‰éƒ½åœ¨<a href=\"https://github.com/objchris/PKIDemo\">Github</a>ä¸Šäº†ï¼Œæœ‰å…´è¶£è¯·ç§»æ­¥ã€‚<br>å…³äºåŠ è§£å¯†ï¼Œè²Œä¼¼OpenSSLä¼šç»å¸¸ç”¨ï¼Œå…·ä½“é˜¿æ¾¤å›ä¹Ÿä¸æ¸…æ¥šï¼Œè¿˜éœ€è¦æ›´åŠ æ·±å…¥çš„å­¦ä¹ ï¼Œå…±å‹‰å§ï¼ï¼ï¼ï¼</p>"},{"title":"é˜¿æ¾¤å›çš„ç‹¬ç™½","date":"2016-04-02T03:37:39.000Z","typora-copy-images-to":"ipic","_content":"\næ¥è¿‘ä¸¤ä¸ªæ˜ŸæœŸæ²¡æœ‰å‘åšå®¢äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ€è¿‘æ¯•ä¸šå­£å¿™äºä¸œè·‘è¥¿è·‘æ‰¾å·¥ä½œï¼ŒåŠ ä¸Šæ¯•ä¸šè®¾è®¡ã€è®ºæ–‡ç­‰ä¸œè¥¿çš„çƒ¦æ‰°ã€‚æ²¡ä»€ä¹ˆè‡ªå·±å¯ä»¥æ”¯é…çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç¯‡åšæ–‡åªæ˜¯éšä¾¿æ‰¯æ‰¯ï¼Œå‘å‘ç‰¢éªšï¼Œå¹¶æ²¡æœ‰å¹²è´§~~\n\n<!--more-->\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/l44uf.jpg)\nã€€ã€€å¯¹äºä¸€ä¸ªå­¦iOSåªæœ‰åŠå¹´å·¦å³çš„äººæ¥è¯´ï¼Œæˆ‘ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯è®¤çœŸåœ°åœ¨å­¦ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å¯¹iOSæ˜¯çƒ­æ•çš„ã€‚ã€‚ã€‚    \nã€€ã€€å››å¹´å‰ï¼Œå¤§å­¦æ˜¯å¤šä¹ˆæ†§æ†¬çš„åœ°æ–¹ï¼Œæˆ‘å‡­ç€ä¸å¥½ä¸åçš„æˆç»©é¡ºåˆ©è¢«åå—å¸ˆèŒƒå¤§å­¦å½•å–ï¼Œç®—æ˜¯å¹¿ä¸œä¸é”™çš„ä¸€æœ¬é™¢æ ¡äº†ã€‚å½“å…¶æ—¶å› ä¸ºçˆ¸çˆ¸å¦ˆå¦ˆéƒ½å¸Œæœ›æˆ‘èƒ½å°±è¯»ç»æµä¸“ä¸šï¼Œä»¥åä»äº‹ç»æµæ–¹é¢çš„å·¥ä½œï¼Œè€Œæˆ‘è‡ªå·±ä»å°å°±å–œæ¬¢ç©ç”µè„‘ï¼Œæ¯”è¾ƒå€¾å‘äºé€‰æ‹©è®¡ç®—æœºç±»çš„å§ã€‚ä½†æ˜¯çˆ¸çˆ¸å¦ˆå¦ˆçš„è¦æ±‚é‚£ä¹ˆåšå®šï¼Œæ‰€ä»¥æˆ‘æœ€åè¿˜æ˜¯è¿·è¿·ç³Šç³Šåœ°å°†ç»æµå­¦æ‘†åœ¨å¿—æ„¿ç¬¬ä¸€é¡¹ã€‚è‹¥æœä½ ä»¥ä¸ºæˆ‘æ˜¯ç»æµå­¦çš„å­¦ç”Ÿï¼Œé‚£ä½ å°±é”™äº†ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚å¿—æ„¿ç¬¬ä¸€é¡¹æ²¡æœ‰è¢«å½•å–ï¼Œæˆ‘è¢«è°ƒå‰‚åˆ°è½¯ä»¶å·¥ç¨‹ã€‚å®¶é‡Œäººä¹Ÿæ²¡åŠæ³•ï¼Œåªèƒ½ä»»ç”±æˆ‘äº†ã€‚ã€‚    \nã€€ã€€è¿›å…¥å¤§å­¦ï¼Œæ„Ÿè§‰ä»€ä¹ˆéƒ½æ˜¯æ–°çš„ã€‚ä¸åŒçš„ä¸Šè¯¾æ¨¡å¼è®©æˆ‘ä½“ä¼šåˆ°æ–°é²œæ„Ÿï¼Œä¸€å¼€å§‹æ˜¯å¾ˆå°‘é€ƒè¯¾çš„ï¼ˆæˆ‘æ˜¯ä¸ªå¥½å­©å­ğŸ˜„ğŸ˜„ï¼‰ã€‚çˆ¸çˆ¸å¦ˆå¦ˆå¸Œæœ›æˆ‘ä»äº‹ç»æµæ–¹é¢å·¥ä½œçš„æƒ³æ³•è¿˜æ²¡æœ‰æ‰“æ¶ˆï¼Œä»–ä»¬å¸Œæœ›æˆ‘è¯»å¤šä¸ªå­¦ä½ï¼Œåˆ©ç”¨å‘¨æœ«æ—¶é—´è¾…ä¿®ï¼Œè¿›ä¸€æ­¥åŠ å¼ºè‡ªå·±ã€‚æˆ‘æ²¡æœ‰æ‹’ç»ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿæœ‰ç‚¹è¯•è¯•çœ‹çš„æƒ³æ³•ã€‚æ‰€ä»¥åœ¨å¤§ä¸€ç¬¬ä¸€å­¦æœŸå³å°†ç»“æŸçš„æ—¶å€™é€’ä¸Šäº†ç»æµå­¦çš„è¾…ä¿®ç”³è¯·è¡¨ã€‚    \nã€€ã€€è‡ªä»è¾…ä¿®äº†ç»æµå­¦ï¼Œæ—¶é—´ä¼¼ä¹è¿½èµ¶å¾—æ›´å¿«äº†ã€‚æˆ‘èŠ±è´¹åœ¨æœ¬ä¸“ä¸šä¸Šçš„æ—¶é—´ä¹Ÿè¢«å æ®äº†ç›¸å½“ä¸€éƒ¨åˆ†ã€‚è¾…ä¿®å¬å›æ¥çš„ä¸œè¥¿æœ‰ä¸€äº›è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†è®©æˆ‘è¿™ä¸ªç†ç§‘ç”Ÿæ„Ÿè§‰æ¯ç‡¥ã€‚å¾ˆå¤šç§‘ç›®éƒ½æ˜¯è€ƒè¯•å‰ä¸€ä¸¤å‘¨ç–¯ç‹‚å¤ä¹ ã€‚é‚£äº›æ—¶å€™å¿ƒé‡Œæ€»ä¼šæŠ±æ€¨ï¼Œè§‰å¾—ç‰¹åˆ«è¾›è‹¦ã€‚å››å¹´è¯´é•¿ä¸é•¿ï¼Œè¯´çŸ­ä¸çŸ­ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åšæŒäº†ä¸‹æ¥ã€‚ç›´åˆ°æœ€è¿‘èµ¶å®Œè¾…ä¿®è®ºæ–‡ï¼Œç®—æ˜¯ç»“æŸäº†è¾…ä¿®ç”Ÿæ¶¯ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ä½ ä»¬è¯´æˆ‘æ€ä¹ˆæ‰æ„è¯†åˆ°ã€‚ã€‚ã€‚    \nã€€ã€€ä¸ºä»€ä¹ˆè¦è¯´è¾…ä¿®ï¼Œæˆ‘åªæ˜¯æƒ³è¯´æœ€åä¸€å¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰æ„è¯†åˆ°<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font>    \nã€€ã€€æˆ‘æƒ³æˆä¸ºiOSå¼€å‘è€…ï¼Œå­¦ä¹ iOSæ—¶é—´ä¸é•¿ã€‚å…¶å®ä¸€å¼€å§‹æ¥è§¦çš„æ˜¯Cã€Cppã€‚å¯èƒ½è¿™æ˜¯å¤§éƒ¨åˆ†ç”šè‡³æ˜¯å…¨éƒ¨è®¡ç®—æœºä¸“ä¸šåŒå­¦éƒ½ä¼šå­¦åˆ°çš„ã€‚å› ä¸ºæ¥è§¦çš„éƒ½æ˜¯Consoleï¼Œä¸å…è®©äººè§‰å¾—æ— èŠå§ã€‚å¤§ä¸€å¹´å°‘æ— çŸ¥ï¼Œä¸çŸ¥é“åŸæ¥Cã€Cppä¹Ÿæ˜¯å¾ˆç‰›é€¼çš„è¯­è¨€ã€‚å½“æ—¶å¯¹ä¸“ä¸šæ–¹å‘ä¹Ÿæ²¡å¤šå¤§æƒ³æ³•ï¼Œå¤„äºè¿·èŒ«æœŸå§å¯èƒ½ï¼Œè°çš„é’æ˜¥ä¸è¿·èŒ«å‘¢ï¼Ÿï¼    \nã€€ã€€åæ¥åˆä¸€æ®µæ—¶é—´ï¼Œèº«è¾¹æœ‰å‡ ä¸ªåŒå­¦åœ¨å­¦iOSå¼€å‘ï¼Œä½†æ˜¯ç”µè„‘éæœæœºã€‚æŠ˜è…¾å®‰è£…ä¸ªé»‘è‹¹æœéƒ½è¦ä¸¤ä¸ªæ˜ŸæœŸï¼ŒåŸå› å¤§å®¶éƒ½çŸ¥é“ï¼Œé©±åŠ¨éš¾æ±‚ã€å„ç§äº”å›½ã€‚ã€‚ã€‚æˆ‘ä¹Ÿæƒ³å»å°è¯•ï¼Œå› ä¸ºiPhoneçš„ç•Œé¢ã€UIç­‰ç­‰ç¡®å®çœ‹èµ·æ¥å¥½çœ‹ä¸”ç”¨æˆ·ä½“éªŒä¹Ÿä¸é”™ã€‚æˆ‘çš„iPhone4sé™ªæˆ‘èµ°åˆ°ç°åœ¨æ•´æ•´å››å¹´ï¼Œè¿˜æ²¡æ¢ï¼ˆæ²¡é’±ğŸ’” + æœ‰æ„Ÿæƒ…â¤ï¸ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹ŸåŠ å…¥äº†å®‰è£…é»‘è‹¹æœçš„è¡Œåˆ—ï¼Œæˆ‘çš„ç”µè„‘æ˜¯Acerï¼Œå½“æ—¶é»˜è®¤æ˜¯å¾ˆå¥½è£…é»‘è‹¹æœçš„æœºå™¨ï¼Œä½†æ˜¯æ¥æ¥å»å»æŠ˜è…¾äº†å¾ˆä¹…ï¼ˆå…·ä½“å¿˜äº†å¤šä¹…ï¼‰éƒ½æ²¡æœ‰è£…æˆåŠŸã€‚é‚£æ—¶å€™å°±æ°”é¦äº†ã€‚ã€‚ç°åœ¨æƒ³èµ·æ¥çœŸæƒ³æ‰‡è‡ªå·±å·´æŒï¼Œè·³æ‰“å†é£è¸¢ã€‚ã€‚    \nã€€ã€€æˆ‘è§‰å¾—è‡ªå·±å¾ˆå®¹æ˜“æ‘‡æ‘†ï¼Œå¾ˆå®¹æ˜“å°±è·Ÿç€åˆ«äººçš„è„šæ­¥èµ°ã€‚æ‰€ä»¥åœ¨æ¥è§¦åˆ°Javaçš„æ—¶å€™å°±æœæ–­æ”¾å¼ƒäº†å‰è€…ã€‚Javaæ˜¯å¤§äºŒçš„ä¸€é—¨è¯¾ç¨‹ï¼Œå®éªŒè¯¾ä¹Ÿè›®å¤šï¼Œæ‰€ä»¥å­¦èµ·æ¥æ¯”è¾ƒçœå¿ƒã€‚åæ¥ä¹ŸèŒç”Ÿäº†åšåå°çš„æƒ³æ³•ã€‚å¤§äºŒä¸‹å­¦æœŸå’Œå¤§ä¸‰ä¸Šå­¦æœŸéƒ½åœ¨çœ‹å…³äºJ2EEçš„çŸ¥è¯†ã€‚å¤§ä¸‰ä¸‹ä¹Ÿå‡ºå»å®ä¹ è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¾—è¾—è½¬è½¬å‘ç°è‡ªå·±çœŸå¿ƒä¸å–œæ¬¢ï¼Œè¯´å®åœ¨çš„ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼ŒçœŸçš„å¤§ã€‚ã€‚è€Œä¸”å¾ˆå¤šæ—¶å€™å‡ºé”™ä¿¡æ¯ååˆ†å†—é•¿ï¼Œå¾ˆéš¾çœ‹å¾—ä¸‹å»ã€‚ã€‚    \nã€€ã€€æ‰€ä»¥ï¼Œæˆ‘åˆä½œæ­»åœ°æƒ³å›åˆ°iOSè¡Œåˆ—ï¼Œå› ä¸ºæˆ‘å¾ˆå–œæ¬¢çœ‹èµ·æ¥æ¼‚äº®çš„äº‹ç‰©ã€‚èº«ä¸ºå¤§å››ç‹—ï¼Œè½¬æ–¹å‘æ˜¯éå¸¸å±é™©ä¸”ä¸ç†æ™ºçš„è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ã€‚è¿™æ¬¡èŠ±äº†ä¸¤å‘¨æ—¶é—´æˆåŠŸè£…ä¸Šäº†é»‘è‹¹æœï¼Œä¹Ÿæ„è¯†åˆ°å¿«æ¯•ä¸šäº†ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½ä¸æ˜¯è‡ªå·±æƒ³å¾—é‚£ä¹ˆç®€å•ã€‚æ—¶é—´åœ¨èƒŒåè¿½å¾—å¾ˆç´§ï¼Œæœ‰æ—¶å€™å‘å‘å‘†ä¸€å¤©å°±TMåœ°è¿‡å»äº†ã€‚ç»å¸¸åæ‚”ä¹‹å‰æ²¡æœ‰åšæŒå¼„å®Œé»‘è‹¹æœå¼€å§‹å­¦ä¹ iOSï¼Œå¯¼è‡´ç°åœ¨è¿™ä¹ˆè¢«åŠ¨ã€‚ã€‚ã€‚    \næ›¾ç»è¿˜å‘è¿‡æœ‹å‹åœˆå®£æ³„è´Ÿèƒ½é‡\n![Dubai_piaoquan](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pkram.jpg)\nã€€ã€€é”™è¿‡äº†ç§‹æ‹›ï¼Œæˆ‘æŠŠå¸Œæœ›éƒ½æ”¾åœ¨äº†æ˜¥æ‹›äº†ï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½è¿™ä¹ˆé¡ºåˆ©ï¼Œç„¶è€Œè¿™åªæ˜¯æˆ‘çš„å¹»æƒ³ã€‚é¢è¯•äº†ç¬¬ä¸€å®¶å…¬å¸æ„Ÿè§‰è¿˜è¡Œï¼Œå¯èƒ½æ˜¯æ€¥éœ€äººï¼Œæ‰€ä»¥é—®é¢˜éƒ½å¾ˆç®€å•ã€‚å·¥èµ„ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤§çš„æƒ³æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‹’ç»äº†ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–å…¬å¸çš„é¢è¯•è®©æˆ‘è§‰å¾—ç®€ç›´å°±æ˜¯åœ°ç‹±ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘è¿™æ®µæ—¶é—´çš„äº‹ï¼Œæ¯æ¬¡æŒ«è´¥æ„Ÿéƒ½è¶…çº§å¼ºï¼Œå‹å¾—æˆ‘å–˜ä¸è¿‡æ°”æ¥ã€‚    \nã€€ã€€**æœ€è¿‘ç»å†çš„è·Œå®•èµ·ä¼ç¡®å®æ˜¯äººç”Ÿä¸€æ®µä¼šç»å¸¸æƒ³èµ·æ¥çš„ç»å†ï¼Œé­ç¬è‡ªå·±å˜å¾—æ›´å¥½ï¼Œæˆ‘æ€»è¿™æ ·å®‰æ…°è‡ªå·±ã€‚**ä½†æ˜¯è¦æ„Ÿè°¢ä½•å›(ã¥ï¿£ 3ï¿£)ã¥ï¼ˆçœŸåæˆ‘æ‰ä¸è¯´å‘¢ï¼‰ç»™æˆ‘çš„é¼“åŠ±ï¼š\n![Dubai_douzhi](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/8ooyk.jpg)\nã€€ã€€å¾ˆå¤šæ—¶å€™éƒ½æƒ³æ”¾å¼ƒï¼Œä½†æ˜¯è‡ªå·±æ·±æ·±çŸ¥é“ä¸èƒ½ã€‚ã€‚ã€‚æ‰€ä»¥æœ€è¿‘é¢è¯•çš„è¿™çŸ­çŸ­ä¸¤å‘¨æ—¶é—´å­¦åˆ°çš„ä¸œè¥¿æ¯”è¿‡å»ä¸¤ä¸ªæœˆè¿˜å¤šï¼ŒçœŸçš„å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ç°åœ¨ä¹Ÿæ‰¾åˆ°äº†æ¯•ä¸šåæ –èº«çš„å…¬å¸ï¼Œç»§ç»­å‘å±•æˆ‘çš„iOSå¼€å‘äº‹ä¸šã€‚ç°åœ¨æˆ‘æœ‰äº†æ›´å¥½çš„å¿ƒæ€ï¼Œä¸ä¼šå¥½é«˜éª›è¿œï¼Œè¿˜æ˜¯è„šè¸å®åœ°å§ã€‚\n![Dubai_gongsi](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e8so3.jpg)\nã€€ã€€æœ€è¿‘åœ¨å¬äº”æœˆå¤©çš„ã€Šå‹‡æ•¢ã€‹ï¼Œä¸ºäº†é‚£ä¸ªå°†æ¥ï¼Œè¦è‡ªå·±ï¼Œå‹‡æ•¢å†å‹‡æ•¢ã€‚    \nã€€ã€€æœ€åï¼Œæˆ‘æƒ³è¯´ï¼š<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font>","source":"_posts/é˜¿æ¾¤å›çš„ç‹¬ç™½.md","raw":"---\ntitle: é˜¿æ¾¤å›çš„ç‹¬ç™½\ndate: 2016-04-02 11:37:39\ntags: \n- Mood\ntypora-copy-images-to: ipic\n---\n\næ¥è¿‘ä¸¤ä¸ªæ˜ŸæœŸæ²¡æœ‰å‘åšå®¢äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ€è¿‘æ¯•ä¸šå­£å¿™äºä¸œè·‘è¥¿è·‘æ‰¾å·¥ä½œï¼ŒåŠ ä¸Šæ¯•ä¸šè®¾è®¡ã€è®ºæ–‡ç­‰ä¸œè¥¿çš„çƒ¦æ‰°ã€‚æ²¡ä»€ä¹ˆè‡ªå·±å¯ä»¥æ”¯é…çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç¯‡åšæ–‡åªæ˜¯éšä¾¿æ‰¯æ‰¯ï¼Œå‘å‘ç‰¢éªšï¼Œå¹¶æ²¡æœ‰å¹²è´§~~\n\n<!--more-->\n![](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/l44uf.jpg)\nã€€ã€€å¯¹äºä¸€ä¸ªå­¦iOSåªæœ‰åŠå¹´å·¦å³çš„äººæ¥è¯´ï¼Œæˆ‘ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯è®¤çœŸåœ°åœ¨å­¦ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å¯¹iOSæ˜¯çƒ­æ•çš„ã€‚ã€‚ã€‚    \nã€€ã€€å››å¹´å‰ï¼Œå¤§å­¦æ˜¯å¤šä¹ˆæ†§æ†¬çš„åœ°æ–¹ï¼Œæˆ‘å‡­ç€ä¸å¥½ä¸åçš„æˆç»©é¡ºåˆ©è¢«åå—å¸ˆèŒƒå¤§å­¦å½•å–ï¼Œç®—æ˜¯å¹¿ä¸œä¸é”™çš„ä¸€æœ¬é™¢æ ¡äº†ã€‚å½“å…¶æ—¶å› ä¸ºçˆ¸çˆ¸å¦ˆå¦ˆéƒ½å¸Œæœ›æˆ‘èƒ½å°±è¯»ç»æµä¸“ä¸šï¼Œä»¥åä»äº‹ç»æµæ–¹é¢çš„å·¥ä½œï¼Œè€Œæˆ‘è‡ªå·±ä»å°å°±å–œæ¬¢ç©ç”µè„‘ï¼Œæ¯”è¾ƒå€¾å‘äºé€‰æ‹©è®¡ç®—æœºç±»çš„å§ã€‚ä½†æ˜¯çˆ¸çˆ¸å¦ˆå¦ˆçš„è¦æ±‚é‚£ä¹ˆåšå®šï¼Œæ‰€ä»¥æˆ‘æœ€åè¿˜æ˜¯è¿·è¿·ç³Šç³Šåœ°å°†ç»æµå­¦æ‘†åœ¨å¿—æ„¿ç¬¬ä¸€é¡¹ã€‚è‹¥æœä½ ä»¥ä¸ºæˆ‘æ˜¯ç»æµå­¦çš„å­¦ç”Ÿï¼Œé‚£ä½ å°±é”™äº†ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚å¿—æ„¿ç¬¬ä¸€é¡¹æ²¡æœ‰è¢«å½•å–ï¼Œæˆ‘è¢«è°ƒå‰‚åˆ°è½¯ä»¶å·¥ç¨‹ã€‚å®¶é‡Œäººä¹Ÿæ²¡åŠæ³•ï¼Œåªèƒ½ä»»ç”±æˆ‘äº†ã€‚ã€‚    \nã€€ã€€è¿›å…¥å¤§å­¦ï¼Œæ„Ÿè§‰ä»€ä¹ˆéƒ½æ˜¯æ–°çš„ã€‚ä¸åŒçš„ä¸Šè¯¾æ¨¡å¼è®©æˆ‘ä½“ä¼šåˆ°æ–°é²œæ„Ÿï¼Œä¸€å¼€å§‹æ˜¯å¾ˆå°‘é€ƒè¯¾çš„ï¼ˆæˆ‘æ˜¯ä¸ªå¥½å­©å­ğŸ˜„ğŸ˜„ï¼‰ã€‚çˆ¸çˆ¸å¦ˆå¦ˆå¸Œæœ›æˆ‘ä»äº‹ç»æµæ–¹é¢å·¥ä½œçš„æƒ³æ³•è¿˜æ²¡æœ‰æ‰“æ¶ˆï¼Œä»–ä»¬å¸Œæœ›æˆ‘è¯»å¤šä¸ªå­¦ä½ï¼Œåˆ©ç”¨å‘¨æœ«æ—¶é—´è¾…ä¿®ï¼Œè¿›ä¸€æ­¥åŠ å¼ºè‡ªå·±ã€‚æˆ‘æ²¡æœ‰æ‹’ç»ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿæœ‰ç‚¹è¯•è¯•çœ‹çš„æƒ³æ³•ã€‚æ‰€ä»¥åœ¨å¤§ä¸€ç¬¬ä¸€å­¦æœŸå³å°†ç»“æŸçš„æ—¶å€™é€’ä¸Šäº†ç»æµå­¦çš„è¾…ä¿®ç”³è¯·è¡¨ã€‚    \nã€€ã€€è‡ªä»è¾…ä¿®äº†ç»æµå­¦ï¼Œæ—¶é—´ä¼¼ä¹è¿½èµ¶å¾—æ›´å¿«äº†ã€‚æˆ‘èŠ±è´¹åœ¨æœ¬ä¸“ä¸šä¸Šçš„æ—¶é—´ä¹Ÿè¢«å æ®äº†ç›¸å½“ä¸€éƒ¨åˆ†ã€‚è¾…ä¿®å¬å›æ¥çš„ä¸œè¥¿æœ‰ä¸€äº›è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†è®©æˆ‘è¿™ä¸ªç†ç§‘ç”Ÿæ„Ÿè§‰æ¯ç‡¥ã€‚å¾ˆå¤šç§‘ç›®éƒ½æ˜¯è€ƒè¯•å‰ä¸€ä¸¤å‘¨ç–¯ç‹‚å¤ä¹ ã€‚é‚£äº›æ—¶å€™å¿ƒé‡Œæ€»ä¼šæŠ±æ€¨ï¼Œè§‰å¾—ç‰¹åˆ«è¾›è‹¦ã€‚å››å¹´è¯´é•¿ä¸é•¿ï¼Œè¯´çŸ­ä¸çŸ­ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åšæŒäº†ä¸‹æ¥ã€‚ç›´åˆ°æœ€è¿‘èµ¶å®Œè¾…ä¿®è®ºæ–‡ï¼Œç®—æ˜¯ç»“æŸäº†è¾…ä¿®ç”Ÿæ¶¯ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ä½ ä»¬è¯´æˆ‘æ€ä¹ˆæ‰æ„è¯†åˆ°ã€‚ã€‚ã€‚    \nã€€ã€€ä¸ºä»€ä¹ˆè¦è¯´è¾…ä¿®ï¼Œæˆ‘åªæ˜¯æƒ³è¯´æœ€åä¸€å¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰æ„è¯†åˆ°<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font>    \nã€€ã€€æˆ‘æƒ³æˆä¸ºiOSå¼€å‘è€…ï¼Œå­¦ä¹ iOSæ—¶é—´ä¸é•¿ã€‚å…¶å®ä¸€å¼€å§‹æ¥è§¦çš„æ˜¯Cã€Cppã€‚å¯èƒ½è¿™æ˜¯å¤§éƒ¨åˆ†ç”šè‡³æ˜¯å…¨éƒ¨è®¡ç®—æœºä¸“ä¸šåŒå­¦éƒ½ä¼šå­¦åˆ°çš„ã€‚å› ä¸ºæ¥è§¦çš„éƒ½æ˜¯Consoleï¼Œä¸å…è®©äººè§‰å¾—æ— èŠå§ã€‚å¤§ä¸€å¹´å°‘æ— çŸ¥ï¼Œä¸çŸ¥é“åŸæ¥Cã€Cppä¹Ÿæ˜¯å¾ˆç‰›é€¼çš„è¯­è¨€ã€‚å½“æ—¶å¯¹ä¸“ä¸šæ–¹å‘ä¹Ÿæ²¡å¤šå¤§æƒ³æ³•ï¼Œå¤„äºè¿·èŒ«æœŸå§å¯èƒ½ï¼Œè°çš„é’æ˜¥ä¸è¿·èŒ«å‘¢ï¼Ÿï¼    \nã€€ã€€åæ¥åˆä¸€æ®µæ—¶é—´ï¼Œèº«è¾¹æœ‰å‡ ä¸ªåŒå­¦åœ¨å­¦iOSå¼€å‘ï¼Œä½†æ˜¯ç”µè„‘éæœæœºã€‚æŠ˜è…¾å®‰è£…ä¸ªé»‘è‹¹æœéƒ½è¦ä¸¤ä¸ªæ˜ŸæœŸï¼ŒåŸå› å¤§å®¶éƒ½çŸ¥é“ï¼Œé©±åŠ¨éš¾æ±‚ã€å„ç§äº”å›½ã€‚ã€‚ã€‚æˆ‘ä¹Ÿæƒ³å»å°è¯•ï¼Œå› ä¸ºiPhoneçš„ç•Œé¢ã€UIç­‰ç­‰ç¡®å®çœ‹èµ·æ¥å¥½çœ‹ä¸”ç”¨æˆ·ä½“éªŒä¹Ÿä¸é”™ã€‚æˆ‘çš„iPhone4sé™ªæˆ‘èµ°åˆ°ç°åœ¨æ•´æ•´å››å¹´ï¼Œè¿˜æ²¡æ¢ï¼ˆæ²¡é’±ğŸ’” + æœ‰æ„Ÿæƒ…â¤ï¸ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹ŸåŠ å…¥äº†å®‰è£…é»‘è‹¹æœçš„è¡Œåˆ—ï¼Œæˆ‘çš„ç”µè„‘æ˜¯Acerï¼Œå½“æ—¶é»˜è®¤æ˜¯å¾ˆå¥½è£…é»‘è‹¹æœçš„æœºå™¨ï¼Œä½†æ˜¯æ¥æ¥å»å»æŠ˜è…¾äº†å¾ˆä¹…ï¼ˆå…·ä½“å¿˜äº†å¤šä¹…ï¼‰éƒ½æ²¡æœ‰è£…æˆåŠŸã€‚é‚£æ—¶å€™å°±æ°”é¦äº†ã€‚ã€‚ç°åœ¨æƒ³èµ·æ¥çœŸæƒ³æ‰‡è‡ªå·±å·´æŒï¼Œè·³æ‰“å†é£è¸¢ã€‚ã€‚    \nã€€ã€€æˆ‘è§‰å¾—è‡ªå·±å¾ˆå®¹æ˜“æ‘‡æ‘†ï¼Œå¾ˆå®¹æ˜“å°±è·Ÿç€åˆ«äººçš„è„šæ­¥èµ°ã€‚æ‰€ä»¥åœ¨æ¥è§¦åˆ°Javaçš„æ—¶å€™å°±æœæ–­æ”¾å¼ƒäº†å‰è€…ã€‚Javaæ˜¯å¤§äºŒçš„ä¸€é—¨è¯¾ç¨‹ï¼Œå®éªŒè¯¾ä¹Ÿè›®å¤šï¼Œæ‰€ä»¥å­¦èµ·æ¥æ¯”è¾ƒçœå¿ƒã€‚åæ¥ä¹ŸèŒç”Ÿäº†åšåå°çš„æƒ³æ³•ã€‚å¤§äºŒä¸‹å­¦æœŸå’Œå¤§ä¸‰ä¸Šå­¦æœŸéƒ½åœ¨çœ‹å…³äºJ2EEçš„çŸ¥è¯†ã€‚å¤§ä¸‰ä¸‹ä¹Ÿå‡ºå»å®ä¹ è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¾—è¾—è½¬è½¬å‘ç°è‡ªå·±çœŸå¿ƒä¸å–œæ¬¢ï¼Œè¯´å®åœ¨çš„ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼ŒçœŸçš„å¤§ã€‚ã€‚è€Œä¸”å¾ˆå¤šæ—¶å€™å‡ºé”™ä¿¡æ¯ååˆ†å†—é•¿ï¼Œå¾ˆéš¾çœ‹å¾—ä¸‹å»ã€‚ã€‚    \nã€€ã€€æ‰€ä»¥ï¼Œæˆ‘åˆä½œæ­»åœ°æƒ³å›åˆ°iOSè¡Œåˆ—ï¼Œå› ä¸ºæˆ‘å¾ˆå–œæ¬¢çœ‹èµ·æ¥æ¼‚äº®çš„äº‹ç‰©ã€‚èº«ä¸ºå¤§å››ç‹—ï¼Œè½¬æ–¹å‘æ˜¯éå¸¸å±é™©ä¸”ä¸ç†æ™ºçš„è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ã€‚è¿™æ¬¡èŠ±äº†ä¸¤å‘¨æ—¶é—´æˆåŠŸè£…ä¸Šäº†é»‘è‹¹æœï¼Œä¹Ÿæ„è¯†åˆ°å¿«æ¯•ä¸šäº†ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½ä¸æ˜¯è‡ªå·±æƒ³å¾—é‚£ä¹ˆç®€å•ã€‚æ—¶é—´åœ¨èƒŒåè¿½å¾—å¾ˆç´§ï¼Œæœ‰æ—¶å€™å‘å‘å‘†ä¸€å¤©å°±TMåœ°è¿‡å»äº†ã€‚ç»å¸¸åæ‚”ä¹‹å‰æ²¡æœ‰åšæŒå¼„å®Œé»‘è‹¹æœå¼€å§‹å­¦ä¹ iOSï¼Œå¯¼è‡´ç°åœ¨è¿™ä¹ˆè¢«åŠ¨ã€‚ã€‚ã€‚    \næ›¾ç»è¿˜å‘è¿‡æœ‹å‹åœˆå®£æ³„è´Ÿèƒ½é‡\n![Dubai_piaoquan](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pkram.jpg)\nã€€ã€€é”™è¿‡äº†ç§‹æ‹›ï¼Œæˆ‘æŠŠå¸Œæœ›éƒ½æ”¾åœ¨äº†æ˜¥æ‹›äº†ï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½è¿™ä¹ˆé¡ºåˆ©ï¼Œç„¶è€Œè¿™åªæ˜¯æˆ‘çš„å¹»æƒ³ã€‚é¢è¯•äº†ç¬¬ä¸€å®¶å…¬å¸æ„Ÿè§‰è¿˜è¡Œï¼Œå¯èƒ½æ˜¯æ€¥éœ€äººï¼Œæ‰€ä»¥é—®é¢˜éƒ½å¾ˆç®€å•ã€‚å·¥èµ„ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤§çš„æƒ³æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‹’ç»äº†ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–å…¬å¸çš„é¢è¯•è®©æˆ‘è§‰å¾—ç®€ç›´å°±æ˜¯åœ°ç‹±ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘è¿™æ®µæ—¶é—´çš„äº‹ï¼Œæ¯æ¬¡æŒ«è´¥æ„Ÿéƒ½è¶…çº§å¼ºï¼Œå‹å¾—æˆ‘å–˜ä¸è¿‡æ°”æ¥ã€‚    \nã€€ã€€**æœ€è¿‘ç»å†çš„è·Œå®•èµ·ä¼ç¡®å®æ˜¯äººç”Ÿä¸€æ®µä¼šç»å¸¸æƒ³èµ·æ¥çš„ç»å†ï¼Œé­ç¬è‡ªå·±å˜å¾—æ›´å¥½ï¼Œæˆ‘æ€»è¿™æ ·å®‰æ…°è‡ªå·±ã€‚**ä½†æ˜¯è¦æ„Ÿè°¢ä½•å›(ã¥ï¿£ 3ï¿£)ã¥ï¼ˆçœŸåæˆ‘æ‰ä¸è¯´å‘¢ï¼‰ç»™æˆ‘çš„é¼“åŠ±ï¼š\n![Dubai_douzhi](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/8ooyk.jpg)\nã€€ã€€å¾ˆå¤šæ—¶å€™éƒ½æƒ³æ”¾å¼ƒï¼Œä½†æ˜¯è‡ªå·±æ·±æ·±çŸ¥é“ä¸èƒ½ã€‚ã€‚ã€‚æ‰€ä»¥æœ€è¿‘é¢è¯•çš„è¿™çŸ­çŸ­ä¸¤å‘¨æ—¶é—´å­¦åˆ°çš„ä¸œè¥¿æ¯”è¿‡å»ä¸¤ä¸ªæœˆè¿˜å¤šï¼ŒçœŸçš„å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ç°åœ¨ä¹Ÿæ‰¾åˆ°äº†æ¯•ä¸šåæ –èº«çš„å…¬å¸ï¼Œç»§ç»­å‘å±•æˆ‘çš„iOSå¼€å‘äº‹ä¸šã€‚ç°åœ¨æˆ‘æœ‰äº†æ›´å¥½çš„å¿ƒæ€ï¼Œä¸ä¼šå¥½é«˜éª›è¿œï¼Œè¿˜æ˜¯è„šè¸å®åœ°å§ã€‚\n![Dubai_gongsi](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e8so3.jpg)\nã€€ã€€æœ€è¿‘åœ¨å¬äº”æœˆå¤©çš„ã€Šå‹‡æ•¢ã€‹ï¼Œä¸ºäº†é‚£ä¸ªå°†æ¥ï¼Œè¦è‡ªå·±ï¼Œå‹‡æ•¢å†å‹‡æ•¢ã€‚    \nã€€ã€€æœ€åï¼Œæˆ‘æƒ³è¯´ï¼š<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font>","slug":"é˜¿æ¾¤å›çš„ç‹¬ç™½","published":1,"updated":"2018-03-07T07:52:20.607Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12bd000jcqy84k015rkx","content":"<p>æ¥è¿‘ä¸¤ä¸ªæ˜ŸæœŸæ²¡æœ‰å‘åšå®¢äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ€è¿‘æ¯•ä¸šå­£å¿™äºä¸œè·‘è¥¿è·‘æ‰¾å·¥ä½œï¼ŒåŠ ä¸Šæ¯•ä¸šè®¾è®¡ã€è®ºæ–‡ç­‰ä¸œè¥¿çš„çƒ¦æ‰°ã€‚æ²¡ä»€ä¹ˆè‡ªå·±å¯ä»¥æ”¯é…çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç¯‡åšæ–‡åªæ˜¯éšä¾¿æ‰¯æ‰¯ï¼Œå‘å‘ç‰¢éªšï¼Œå¹¶æ²¡æœ‰å¹²è´§~~</p>\n<a id=\"more\"></a>\n<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/l44uf.jpg\" alt=\"\"><br>ã€€ã€€å¯¹äºä¸€ä¸ªå­¦iOSåªæœ‰åŠå¹´å·¦å³çš„äººæ¥è¯´ï¼Œæˆ‘ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯è®¤çœŸåœ°åœ¨å­¦ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å¯¹iOSæ˜¯çƒ­æ•çš„ã€‚ã€‚ã€‚<br>ã€€ã€€å››å¹´å‰ï¼Œå¤§å­¦æ˜¯å¤šä¹ˆæ†§æ†¬çš„åœ°æ–¹ï¼Œæˆ‘å‡­ç€ä¸å¥½ä¸åçš„æˆç»©é¡ºåˆ©è¢«åå—å¸ˆèŒƒå¤§å­¦å½•å–ï¼Œç®—æ˜¯å¹¿ä¸œä¸é”™çš„ä¸€æœ¬é™¢æ ¡äº†ã€‚å½“å…¶æ—¶å› ä¸ºçˆ¸çˆ¸å¦ˆå¦ˆéƒ½å¸Œæœ›æˆ‘èƒ½å°±è¯»ç»æµä¸“ä¸šï¼Œä»¥åä»äº‹ç»æµæ–¹é¢çš„å·¥ä½œï¼Œè€Œæˆ‘è‡ªå·±ä»å°å°±å–œæ¬¢ç©ç”µè„‘ï¼Œæ¯”è¾ƒå€¾å‘äºé€‰æ‹©è®¡ç®—æœºç±»çš„å§ã€‚ä½†æ˜¯çˆ¸çˆ¸å¦ˆå¦ˆçš„è¦æ±‚é‚£ä¹ˆåšå®šï¼Œæ‰€ä»¥æˆ‘æœ€åè¿˜æ˜¯è¿·è¿·ç³Šç³Šåœ°å°†ç»æµå­¦æ‘†åœ¨å¿—æ„¿ç¬¬ä¸€é¡¹ã€‚è‹¥æœä½ ä»¥ä¸ºæˆ‘æ˜¯ç»æµå­¦çš„å­¦ç”Ÿï¼Œé‚£ä½ å°±é”™äº†ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚å¿—æ„¿ç¬¬ä¸€é¡¹æ²¡æœ‰è¢«å½•å–ï¼Œæˆ‘è¢«è°ƒå‰‚åˆ°è½¯ä»¶å·¥ç¨‹ã€‚å®¶é‡Œäººä¹Ÿæ²¡åŠæ³•ï¼Œåªèƒ½ä»»ç”±æˆ‘äº†ã€‚ã€‚<br>ã€€ã€€è¿›å…¥å¤§å­¦ï¼Œæ„Ÿè§‰ä»€ä¹ˆéƒ½æ˜¯æ–°çš„ã€‚ä¸åŒçš„ä¸Šè¯¾æ¨¡å¼è®©æˆ‘ä½“ä¼šåˆ°æ–°é²œæ„Ÿï¼Œä¸€å¼€å§‹æ˜¯å¾ˆå°‘é€ƒè¯¾çš„ï¼ˆæˆ‘æ˜¯ä¸ªå¥½å­©å­ğŸ˜„ğŸ˜„ï¼‰ã€‚çˆ¸çˆ¸å¦ˆå¦ˆå¸Œæœ›æˆ‘ä»äº‹ç»æµæ–¹é¢å·¥ä½œçš„æƒ³æ³•è¿˜æ²¡æœ‰æ‰“æ¶ˆï¼Œä»–ä»¬å¸Œæœ›æˆ‘è¯»å¤šä¸ªå­¦ä½ï¼Œåˆ©ç”¨å‘¨æœ«æ—¶é—´è¾…ä¿®ï¼Œè¿›ä¸€æ­¥åŠ å¼ºè‡ªå·±ã€‚æˆ‘æ²¡æœ‰æ‹’ç»ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿæœ‰ç‚¹è¯•è¯•çœ‹çš„æƒ³æ³•ã€‚æ‰€ä»¥åœ¨å¤§ä¸€ç¬¬ä¸€å­¦æœŸå³å°†ç»“æŸçš„æ—¶å€™é€’ä¸Šäº†ç»æµå­¦çš„è¾…ä¿®ç”³è¯·è¡¨ã€‚<br>ã€€ã€€è‡ªä»è¾…ä¿®äº†ç»æµå­¦ï¼Œæ—¶é—´ä¼¼ä¹è¿½èµ¶å¾—æ›´å¿«äº†ã€‚æˆ‘èŠ±è´¹åœ¨æœ¬ä¸“ä¸šä¸Šçš„æ—¶é—´ä¹Ÿè¢«å æ®äº†ç›¸å½“ä¸€éƒ¨åˆ†ã€‚è¾…ä¿®å¬å›æ¥çš„ä¸œè¥¿æœ‰ä¸€äº›è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†è®©æˆ‘è¿™ä¸ªç†ç§‘ç”Ÿæ„Ÿè§‰æ¯ç‡¥ã€‚å¾ˆå¤šç§‘ç›®éƒ½æ˜¯è€ƒè¯•å‰ä¸€ä¸¤å‘¨ç–¯ç‹‚å¤ä¹ ã€‚é‚£äº›æ—¶å€™å¿ƒé‡Œæ€»ä¼šæŠ±æ€¨ï¼Œè§‰å¾—ç‰¹åˆ«è¾›è‹¦ã€‚å››å¹´è¯´é•¿ä¸é•¿ï¼Œè¯´çŸ­ä¸çŸ­ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åšæŒäº†ä¸‹æ¥ã€‚ç›´åˆ°æœ€è¿‘èµ¶å®Œè¾…ä¿®è®ºæ–‡ï¼Œç®—æ˜¯ç»“æŸäº†è¾…ä¿®ç”Ÿæ¶¯ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ä½ ä»¬è¯´æˆ‘æ€ä¹ˆæ‰æ„è¯†åˆ°ã€‚ã€‚ã€‚<br>ã€€ã€€ä¸ºä»€ä¹ˆè¦è¯´è¾…ä¿®ï¼Œæˆ‘åªæ˜¯æƒ³è¯´æœ€åä¸€å¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰æ„è¯†åˆ°<font color=\"#ff7073\" size=\"3\" face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font><br>ã€€ã€€æˆ‘æƒ³æˆä¸ºiOSå¼€å‘è€…ï¼Œå­¦ä¹ iOSæ—¶é—´ä¸é•¿ã€‚å…¶å®ä¸€å¼€å§‹æ¥è§¦çš„æ˜¯Cã€Cppã€‚å¯èƒ½è¿™æ˜¯å¤§éƒ¨åˆ†ç”šè‡³æ˜¯å…¨éƒ¨è®¡ç®—æœºä¸“ä¸šåŒå­¦éƒ½ä¼šå­¦åˆ°çš„ã€‚å› ä¸ºæ¥è§¦çš„éƒ½æ˜¯Consoleï¼Œä¸å…è®©äººè§‰å¾—æ— èŠå§ã€‚å¤§ä¸€å¹´å°‘æ— çŸ¥ï¼Œä¸çŸ¥é“åŸæ¥Cã€Cppä¹Ÿæ˜¯å¾ˆç‰›é€¼çš„è¯­è¨€ã€‚å½“æ—¶å¯¹ä¸“ä¸šæ–¹å‘ä¹Ÿæ²¡å¤šå¤§æƒ³æ³•ï¼Œå¤„äºè¿·èŒ«æœŸå§å¯èƒ½ï¼Œè°çš„é’æ˜¥ä¸è¿·èŒ«å‘¢ï¼Ÿï¼<br>ã€€ã€€åæ¥åˆä¸€æ®µæ—¶é—´ï¼Œèº«è¾¹æœ‰å‡ ä¸ªåŒå­¦åœ¨å­¦iOSå¼€å‘ï¼Œä½†æ˜¯ç”µè„‘éæœæœºã€‚æŠ˜è…¾å®‰è£…ä¸ªé»‘è‹¹æœéƒ½è¦ä¸¤ä¸ªæ˜ŸæœŸï¼ŒåŸå› å¤§å®¶éƒ½çŸ¥é“ï¼Œé©±åŠ¨éš¾æ±‚ã€å„ç§äº”å›½ã€‚ã€‚ã€‚æˆ‘ä¹Ÿæƒ³å»å°è¯•ï¼Œå› ä¸ºiPhoneçš„ç•Œé¢ã€UIç­‰ç­‰ç¡®å®çœ‹èµ·æ¥å¥½çœ‹ä¸”ç”¨æˆ·ä½“éªŒä¹Ÿä¸é”™ã€‚æˆ‘çš„iPhone4sé™ªæˆ‘èµ°åˆ°ç°åœ¨æ•´æ•´å››å¹´ï¼Œè¿˜æ²¡æ¢ï¼ˆæ²¡é’±ğŸ’” + æœ‰æ„Ÿæƒ…â¤ï¸ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹ŸåŠ å…¥äº†å®‰è£…é»‘è‹¹æœçš„è¡Œåˆ—ï¼Œæˆ‘çš„ç”µè„‘æ˜¯Acerï¼Œå½“æ—¶é»˜è®¤æ˜¯å¾ˆå¥½è£…é»‘è‹¹æœçš„æœºå™¨ï¼Œä½†æ˜¯æ¥æ¥å»å»æŠ˜è…¾äº†å¾ˆä¹…ï¼ˆå…·ä½“å¿˜äº†å¤šä¹…ï¼‰éƒ½æ²¡æœ‰è£…æˆåŠŸã€‚é‚£æ—¶å€™å°±æ°”é¦äº†ã€‚ã€‚ç°åœ¨æƒ³èµ·æ¥çœŸæƒ³æ‰‡è‡ªå·±å·´æŒï¼Œè·³æ‰“å†é£è¸¢ã€‚ã€‚<br>ã€€ã€€æˆ‘è§‰å¾—è‡ªå·±å¾ˆå®¹æ˜“æ‘‡æ‘†ï¼Œå¾ˆå®¹æ˜“å°±è·Ÿç€åˆ«äººçš„è„šæ­¥èµ°ã€‚æ‰€ä»¥åœ¨æ¥è§¦åˆ°Javaçš„æ—¶å€™å°±æœæ–­æ”¾å¼ƒäº†å‰è€…ã€‚Javaæ˜¯å¤§äºŒçš„ä¸€é—¨è¯¾ç¨‹ï¼Œå®éªŒè¯¾ä¹Ÿè›®å¤šï¼Œæ‰€ä»¥å­¦èµ·æ¥æ¯”è¾ƒçœå¿ƒã€‚åæ¥ä¹ŸèŒç”Ÿäº†åšåå°çš„æƒ³æ³•ã€‚å¤§äºŒä¸‹å­¦æœŸå’Œå¤§ä¸‰ä¸Šå­¦æœŸéƒ½åœ¨çœ‹å…³äºJ2EEçš„çŸ¥è¯†ã€‚å¤§ä¸‰ä¸‹ä¹Ÿå‡ºå»å®ä¹ è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¾—è¾—è½¬è½¬å‘ç°è‡ªå·±çœŸå¿ƒä¸å–œæ¬¢ï¼Œè¯´å®åœ¨çš„ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼ŒçœŸçš„å¤§ã€‚ã€‚è€Œä¸”å¾ˆå¤šæ—¶å€™å‡ºé”™ä¿¡æ¯ååˆ†å†—é•¿ï¼Œå¾ˆéš¾çœ‹å¾—ä¸‹å»ã€‚ã€‚<br>ã€€ã€€æ‰€ä»¥ï¼Œæˆ‘åˆä½œæ­»åœ°æƒ³å›åˆ°iOSè¡Œåˆ—ï¼Œå› ä¸ºæˆ‘å¾ˆå–œæ¬¢çœ‹èµ·æ¥æ¼‚äº®çš„äº‹ç‰©ã€‚èº«ä¸ºå¤§å››ç‹—ï¼Œè½¬æ–¹å‘æ˜¯éå¸¸å±é™©ä¸”ä¸ç†æ™ºçš„è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ã€‚è¿™æ¬¡èŠ±äº†ä¸¤å‘¨æ—¶é—´æˆåŠŸè£…ä¸Šäº†é»‘è‹¹æœï¼Œä¹Ÿæ„è¯†åˆ°å¿«æ¯•ä¸šäº†ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½ä¸æ˜¯è‡ªå·±æƒ³å¾—é‚£ä¹ˆç®€å•ã€‚æ—¶é—´åœ¨èƒŒåè¿½å¾—å¾ˆç´§ï¼Œæœ‰æ—¶å€™å‘å‘å‘†ä¸€å¤©å°±TMåœ°è¿‡å»äº†ã€‚ç»å¸¸åæ‚”ä¹‹å‰æ²¡æœ‰åšæŒå¼„å®Œé»‘è‹¹æœå¼€å§‹å­¦ä¹ iOSï¼Œå¯¼è‡´ç°åœ¨è¿™ä¹ˆè¢«åŠ¨ã€‚ã€‚ã€‚<br>æ›¾ç»è¿˜å‘è¿‡æœ‹å‹åœˆå®£æ³„è´Ÿèƒ½é‡<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pkram.jpg\" alt=\"Dubai_piaoquan\"><br>ã€€ã€€é”™è¿‡äº†ç§‹æ‹›ï¼Œæˆ‘æŠŠå¸Œæœ›éƒ½æ”¾åœ¨äº†æ˜¥æ‹›äº†ï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½è¿™ä¹ˆé¡ºåˆ©ï¼Œç„¶è€Œè¿™åªæ˜¯æˆ‘çš„å¹»æƒ³ã€‚é¢è¯•äº†ç¬¬ä¸€å®¶å…¬å¸æ„Ÿè§‰è¿˜è¡Œï¼Œå¯èƒ½æ˜¯æ€¥éœ€äººï¼Œæ‰€ä»¥é—®é¢˜éƒ½å¾ˆç®€å•ã€‚å·¥èµ„ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤§çš„æƒ³æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‹’ç»äº†ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–å…¬å¸çš„é¢è¯•è®©æˆ‘è§‰å¾—ç®€ç›´å°±æ˜¯åœ°ç‹±ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘è¿™æ®µæ—¶é—´çš„äº‹ï¼Œæ¯æ¬¡æŒ«è´¥æ„Ÿéƒ½è¶…çº§å¼ºï¼Œå‹å¾—æˆ‘å–˜ä¸è¿‡æ°”æ¥ã€‚<br>ã€€ã€€<strong>æœ€è¿‘ç»å†çš„è·Œå®•èµ·ä¼ç¡®å®æ˜¯äººç”Ÿä¸€æ®µä¼šç»å¸¸æƒ³èµ·æ¥çš„ç»å†ï¼Œé­ç¬è‡ªå·±å˜å¾—æ›´å¥½ï¼Œæˆ‘æ€»è¿™æ ·å®‰æ…°è‡ªå·±ã€‚</strong>ä½†æ˜¯è¦æ„Ÿè°¢ä½•å›(ã¥ï¿£ 3ï¿£)ã¥ï¼ˆçœŸåæˆ‘æ‰ä¸è¯´å‘¢ï¼‰ç»™æˆ‘çš„é¼“åŠ±ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/8ooyk.jpg\" alt=\"Dubai_douzhi\"><br>ã€€ã€€å¾ˆå¤šæ—¶å€™éƒ½æƒ³æ”¾å¼ƒï¼Œä½†æ˜¯è‡ªå·±æ·±æ·±çŸ¥é“ä¸èƒ½ã€‚ã€‚ã€‚æ‰€ä»¥æœ€è¿‘é¢è¯•çš„è¿™çŸ­çŸ­ä¸¤å‘¨æ—¶é—´å­¦åˆ°çš„ä¸œè¥¿æ¯”è¿‡å»ä¸¤ä¸ªæœˆè¿˜å¤šï¼ŒçœŸçš„å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ç°åœ¨ä¹Ÿæ‰¾åˆ°äº†æ¯•ä¸šåæ –èº«çš„å…¬å¸ï¼Œç»§ç»­å‘å±•æˆ‘çš„iOSå¼€å‘äº‹ä¸šã€‚ç°åœ¨æˆ‘æœ‰äº†æ›´å¥½çš„å¿ƒæ€ï¼Œä¸ä¼šå¥½é«˜éª›è¿œï¼Œè¿˜æ˜¯è„šè¸å®åœ°å§ã€‚<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e8so3.jpg\" alt=\"Dubai_gongsi\"><br>ã€€ã€€æœ€è¿‘åœ¨å¬äº”æœˆå¤©çš„ã€Šå‹‡æ•¢ã€‹ï¼Œä¸ºäº†é‚£ä¸ªå°†æ¥ï¼Œè¦è‡ªå·±ï¼Œå‹‡æ•¢å†å‹‡æ•¢ã€‚<br>ã€€ã€€æœ€åï¼Œæˆ‘æƒ³è¯´ï¼š<font color=\"#ff7073\" size=\"3\" face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font></p>\n","excerpt":"<p>æ¥è¿‘ä¸¤ä¸ªæ˜ŸæœŸæ²¡æœ‰å‘åšå®¢äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ€è¿‘æ¯•ä¸šå­£å¿™äºä¸œè·‘è¥¿è·‘æ‰¾å·¥ä½œï¼ŒåŠ ä¸Šæ¯•ä¸šè®¾è®¡ã€è®ºæ–‡ç­‰ä¸œè¥¿çš„çƒ¦æ‰°ã€‚æ²¡ä»€ä¹ˆè‡ªå·±å¯ä»¥æ”¯é…çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç¯‡åšæ–‡åªæ˜¯éšä¾¿æ‰¯æ‰¯ï¼Œå‘å‘ç‰¢éªšï¼Œå¹¶æ²¡æœ‰å¹²è´§~~</p>","more":"<p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/l44uf.jpg\" alt=\"\"><br>ã€€ã€€å¯¹äºä¸€ä¸ªå­¦iOSåªæœ‰åŠå¹´å·¦å³çš„äººæ¥è¯´ï¼Œæˆ‘ä¸çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯è®¤çœŸåœ°åœ¨å­¦ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è‡ªå·±å¯¹iOSæ˜¯çƒ­æ•çš„ã€‚ã€‚ã€‚<br>ã€€ã€€å››å¹´å‰ï¼Œå¤§å­¦æ˜¯å¤šä¹ˆæ†§æ†¬çš„åœ°æ–¹ï¼Œæˆ‘å‡­ç€ä¸å¥½ä¸åçš„æˆç»©é¡ºåˆ©è¢«åå—å¸ˆèŒƒå¤§å­¦å½•å–ï¼Œç®—æ˜¯å¹¿ä¸œä¸é”™çš„ä¸€æœ¬é™¢æ ¡äº†ã€‚å½“å…¶æ—¶å› ä¸ºçˆ¸çˆ¸å¦ˆå¦ˆéƒ½å¸Œæœ›æˆ‘èƒ½å°±è¯»ç»æµä¸“ä¸šï¼Œä»¥åä»äº‹ç»æµæ–¹é¢çš„å·¥ä½œï¼Œè€Œæˆ‘è‡ªå·±ä»å°å°±å–œæ¬¢ç©ç”µè„‘ï¼Œæ¯”è¾ƒå€¾å‘äºé€‰æ‹©è®¡ç®—æœºç±»çš„å§ã€‚ä½†æ˜¯çˆ¸çˆ¸å¦ˆå¦ˆçš„è¦æ±‚é‚£ä¹ˆåšå®šï¼Œæ‰€ä»¥æˆ‘æœ€åè¿˜æ˜¯è¿·è¿·ç³Šç³Šåœ°å°†ç»æµå­¦æ‘†åœ¨å¿—æ„¿ç¬¬ä¸€é¡¹ã€‚è‹¥æœä½ ä»¥ä¸ºæˆ‘æ˜¯ç»æµå­¦çš„å­¦ç”Ÿï¼Œé‚£ä½ å°±é”™äº†ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚å¿—æ„¿ç¬¬ä¸€é¡¹æ²¡æœ‰è¢«å½•å–ï¼Œæˆ‘è¢«è°ƒå‰‚åˆ°è½¯ä»¶å·¥ç¨‹ã€‚å®¶é‡Œäººä¹Ÿæ²¡åŠæ³•ï¼Œåªèƒ½ä»»ç”±æˆ‘äº†ã€‚ã€‚<br>ã€€ã€€è¿›å…¥å¤§å­¦ï¼Œæ„Ÿè§‰ä»€ä¹ˆéƒ½æ˜¯æ–°çš„ã€‚ä¸åŒçš„ä¸Šè¯¾æ¨¡å¼è®©æˆ‘ä½“ä¼šåˆ°æ–°é²œæ„Ÿï¼Œä¸€å¼€å§‹æ˜¯å¾ˆå°‘é€ƒè¯¾çš„ï¼ˆæˆ‘æ˜¯ä¸ªå¥½å­©å­ğŸ˜„ğŸ˜„ï¼‰ã€‚çˆ¸çˆ¸å¦ˆå¦ˆå¸Œæœ›æˆ‘ä»äº‹ç»æµæ–¹é¢å·¥ä½œçš„æƒ³æ³•è¿˜æ²¡æœ‰æ‰“æ¶ˆï¼Œä»–ä»¬å¸Œæœ›æˆ‘è¯»å¤šä¸ªå­¦ä½ï¼Œåˆ©ç”¨å‘¨æœ«æ—¶é—´è¾…ä¿®ï¼Œè¿›ä¸€æ­¥åŠ å¼ºè‡ªå·±ã€‚æˆ‘æ²¡æœ‰æ‹’ç»ï¼Œå› ä¸ºæˆ‘è‡ªå·±ä¹Ÿæœ‰ç‚¹è¯•è¯•çœ‹çš„æƒ³æ³•ã€‚æ‰€ä»¥åœ¨å¤§ä¸€ç¬¬ä¸€å­¦æœŸå³å°†ç»“æŸçš„æ—¶å€™é€’ä¸Šäº†ç»æµå­¦çš„è¾…ä¿®ç”³è¯·è¡¨ã€‚<br>ã€€ã€€è‡ªä»è¾…ä¿®äº†ç»æµå­¦ï¼Œæ—¶é—´ä¼¼ä¹è¿½èµ¶å¾—æ›´å¿«äº†ã€‚æˆ‘èŠ±è´¹åœ¨æœ¬ä¸“ä¸šä¸Šçš„æ—¶é—´ä¹Ÿè¢«å æ®äº†ç›¸å½“ä¸€éƒ¨åˆ†ã€‚è¾…ä¿®å¬å›æ¥çš„ä¸œè¥¿æœ‰ä¸€äº›è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†è®©æˆ‘è¿™ä¸ªç†ç§‘ç”Ÿæ„Ÿè§‰æ¯ç‡¥ã€‚å¾ˆå¤šç§‘ç›®éƒ½æ˜¯è€ƒè¯•å‰ä¸€ä¸¤å‘¨ç–¯ç‹‚å¤ä¹ ã€‚é‚£äº›æ—¶å€™å¿ƒé‡Œæ€»ä¼šæŠ±æ€¨ï¼Œè§‰å¾—ç‰¹åˆ«è¾›è‹¦ã€‚å››å¹´è¯´é•¿ä¸é•¿ï¼Œè¯´çŸ­ä¸çŸ­ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åšæŒäº†ä¸‹æ¥ã€‚ç›´åˆ°æœ€è¿‘èµ¶å®Œè¾…ä¿®è®ºæ–‡ï¼Œç®—æ˜¯ç»“æŸäº†è¾…ä¿®ç”Ÿæ¶¯ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼ŒåŸæ¥å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ä½ ä»¬è¯´æˆ‘æ€ä¹ˆæ‰æ„è¯†åˆ°ã€‚ã€‚ã€‚<br>ã€€ã€€ä¸ºä»€ä¹ˆè¦è¯´è¾…ä¿®ï¼Œæˆ‘åªæ˜¯æƒ³è¯´æœ€åä¸€å¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰æ„è¯†åˆ°<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font><br>ã€€ã€€æˆ‘æƒ³æˆä¸ºiOSå¼€å‘è€…ï¼Œå­¦ä¹ iOSæ—¶é—´ä¸é•¿ã€‚å…¶å®ä¸€å¼€å§‹æ¥è§¦çš„æ˜¯Cã€Cppã€‚å¯èƒ½è¿™æ˜¯å¤§éƒ¨åˆ†ç”šè‡³æ˜¯å…¨éƒ¨è®¡ç®—æœºä¸“ä¸šåŒå­¦éƒ½ä¼šå­¦åˆ°çš„ã€‚å› ä¸ºæ¥è§¦çš„éƒ½æ˜¯Consoleï¼Œä¸å…è®©äººè§‰å¾—æ— èŠå§ã€‚å¤§ä¸€å¹´å°‘æ— çŸ¥ï¼Œä¸çŸ¥é“åŸæ¥Cã€Cppä¹Ÿæ˜¯å¾ˆç‰›é€¼çš„è¯­è¨€ã€‚å½“æ—¶å¯¹ä¸“ä¸šæ–¹å‘ä¹Ÿæ²¡å¤šå¤§æƒ³æ³•ï¼Œå¤„äºè¿·èŒ«æœŸå§å¯èƒ½ï¼Œè°çš„é’æ˜¥ä¸è¿·èŒ«å‘¢ï¼Ÿï¼<br>ã€€ã€€åæ¥åˆä¸€æ®µæ—¶é—´ï¼Œèº«è¾¹æœ‰å‡ ä¸ªåŒå­¦åœ¨å­¦iOSå¼€å‘ï¼Œä½†æ˜¯ç”µè„‘éæœæœºã€‚æŠ˜è…¾å®‰è£…ä¸ªé»‘è‹¹æœéƒ½è¦ä¸¤ä¸ªæ˜ŸæœŸï¼ŒåŸå› å¤§å®¶éƒ½çŸ¥é“ï¼Œé©±åŠ¨éš¾æ±‚ã€å„ç§äº”å›½ã€‚ã€‚ã€‚æˆ‘ä¹Ÿæƒ³å»å°è¯•ï¼Œå› ä¸ºiPhoneçš„ç•Œé¢ã€UIç­‰ç­‰ç¡®å®çœ‹èµ·æ¥å¥½çœ‹ä¸”ç”¨æˆ·ä½“éªŒä¹Ÿä¸é”™ã€‚æˆ‘çš„iPhone4sé™ªæˆ‘èµ°åˆ°ç°åœ¨æ•´æ•´å››å¹´ï¼Œè¿˜æ²¡æ¢ï¼ˆæ²¡é’±ğŸ’” + æœ‰æ„Ÿæƒ…â¤ï¸ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹ŸåŠ å…¥äº†å®‰è£…é»‘è‹¹æœçš„è¡Œåˆ—ï¼Œæˆ‘çš„ç”µè„‘æ˜¯Acerï¼Œå½“æ—¶é»˜è®¤æ˜¯å¾ˆå¥½è£…é»‘è‹¹æœçš„æœºå™¨ï¼Œä½†æ˜¯æ¥æ¥å»å»æŠ˜è…¾äº†å¾ˆä¹…ï¼ˆå…·ä½“å¿˜äº†å¤šä¹…ï¼‰éƒ½æ²¡æœ‰è£…æˆåŠŸã€‚é‚£æ—¶å€™å°±æ°”é¦äº†ã€‚ã€‚ç°åœ¨æƒ³èµ·æ¥çœŸæƒ³æ‰‡è‡ªå·±å·´æŒï¼Œè·³æ‰“å†é£è¸¢ã€‚ã€‚<br>ã€€ã€€æˆ‘è§‰å¾—è‡ªå·±å¾ˆå®¹æ˜“æ‘‡æ‘†ï¼Œå¾ˆå®¹æ˜“å°±è·Ÿç€åˆ«äººçš„è„šæ­¥èµ°ã€‚æ‰€ä»¥åœ¨æ¥è§¦åˆ°Javaçš„æ—¶å€™å°±æœæ–­æ”¾å¼ƒäº†å‰è€…ã€‚Javaæ˜¯å¤§äºŒçš„ä¸€é—¨è¯¾ç¨‹ï¼Œå®éªŒè¯¾ä¹Ÿè›®å¤šï¼Œæ‰€ä»¥å­¦èµ·æ¥æ¯”è¾ƒçœå¿ƒã€‚åæ¥ä¹ŸèŒç”Ÿäº†åšåå°çš„æƒ³æ³•ã€‚å¤§äºŒä¸‹å­¦æœŸå’Œå¤§ä¸‰ä¸Šå­¦æœŸéƒ½åœ¨çœ‹å…³äºJ2EEçš„çŸ¥è¯†ã€‚å¤§ä¸‰ä¸‹ä¹Ÿå‡ºå»å®ä¹ è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¾—è¾—è½¬è½¬å‘ç°è‡ªå·±çœŸå¿ƒä¸å–œæ¬¢ï¼Œè¯´å®åœ¨çš„ï¼Œå­¦ä¹ æˆæœ¬å¤§ï¼ŒçœŸçš„å¤§ã€‚ã€‚è€Œä¸”å¾ˆå¤šæ—¶å€™å‡ºé”™ä¿¡æ¯ååˆ†å†—é•¿ï¼Œå¾ˆéš¾çœ‹å¾—ä¸‹å»ã€‚ã€‚<br>ã€€ã€€æ‰€ä»¥ï¼Œæˆ‘åˆä½œæ­»åœ°æƒ³å›åˆ°iOSè¡Œåˆ—ï¼Œå› ä¸ºæˆ‘å¾ˆå–œæ¬¢çœ‹èµ·æ¥æ¼‚äº®çš„äº‹ç‰©ã€‚èº«ä¸ºå¤§å››ç‹—ï¼Œè½¬æ–¹å‘æ˜¯éå¸¸å±é™©ä¸”ä¸ç†æ™ºçš„è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¿™æ ·åšäº†ã€‚è¿™æ¬¡èŠ±äº†ä¸¤å‘¨æ—¶é—´æˆåŠŸè£…ä¸Šäº†é»‘è‹¹æœï¼Œä¹Ÿæ„è¯†åˆ°å¿«æ¯•ä¸šäº†ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½ä¸æ˜¯è‡ªå·±æƒ³å¾—é‚£ä¹ˆç®€å•ã€‚æ—¶é—´åœ¨èƒŒåè¿½å¾—å¾ˆç´§ï¼Œæœ‰æ—¶å€™å‘å‘å‘†ä¸€å¤©å°±TMåœ°è¿‡å»äº†ã€‚ç»å¸¸åæ‚”ä¹‹å‰æ²¡æœ‰åšæŒå¼„å®Œé»‘è‹¹æœå¼€å§‹å­¦ä¹ iOSï¼Œå¯¼è‡´ç°åœ¨è¿™ä¹ˆè¢«åŠ¨ã€‚ã€‚ã€‚<br>æ›¾ç»è¿˜å‘è¿‡æœ‹å‹åœˆå®£æ³„è´Ÿèƒ½é‡<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/pkram.jpg\" alt=\"Dubai_piaoquan\"><br>ã€€ã€€é”™è¿‡äº†ç§‹æ‹›ï¼Œæˆ‘æŠŠå¸Œæœ›éƒ½æ”¾åœ¨äº†æ˜¥æ‹›äº†ï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½è¿™ä¹ˆé¡ºåˆ©ï¼Œç„¶è€Œè¿™åªæ˜¯æˆ‘çš„å¹»æƒ³ã€‚é¢è¯•äº†ç¬¬ä¸€å®¶å…¬å¸æ„Ÿè§‰è¿˜è¡Œï¼Œå¯èƒ½æ˜¯æ€¥éœ€äººï¼Œæ‰€ä»¥é—®é¢˜éƒ½å¾ˆç®€å•ã€‚å·¥èµ„ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤§çš„æƒ³æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯æ‹’ç»äº†ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–å…¬å¸çš„é¢è¯•è®©æˆ‘è§‰å¾—ç®€ç›´å°±æ˜¯åœ°ç‹±ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘è¿™æ®µæ—¶é—´çš„äº‹ï¼Œæ¯æ¬¡æŒ«è´¥æ„Ÿéƒ½è¶…çº§å¼ºï¼Œå‹å¾—æˆ‘å–˜ä¸è¿‡æ°”æ¥ã€‚<br>ã€€ã€€<strong>æœ€è¿‘ç»å†çš„è·Œå®•èµ·ä¼ç¡®å®æ˜¯äººç”Ÿä¸€æ®µä¼šç»å¸¸æƒ³èµ·æ¥çš„ç»å†ï¼Œé­ç¬è‡ªå·±å˜å¾—æ›´å¥½ï¼Œæˆ‘æ€»è¿™æ ·å®‰æ…°è‡ªå·±ã€‚</strong>ä½†æ˜¯è¦æ„Ÿè°¢ä½•å›(ã¥ï¿£ 3ï¿£)ã¥ï¼ˆçœŸåæˆ‘æ‰ä¸è¯´å‘¢ï¼‰ç»™æˆ‘çš„é¼“åŠ±ï¼š<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/8ooyk.jpg\" alt=\"Dubai_douzhi\"><br>ã€€ã€€å¾ˆå¤šæ—¶å€™éƒ½æƒ³æ”¾å¼ƒï¼Œä½†æ˜¯è‡ªå·±æ·±æ·±çŸ¥é“ä¸èƒ½ã€‚ã€‚ã€‚æ‰€ä»¥æœ€è¿‘é¢è¯•çš„è¿™çŸ­çŸ­ä¸¤å‘¨æ—¶é—´å­¦åˆ°çš„ä¸œè¥¿æ¯”è¿‡å»ä¸¤ä¸ªæœˆè¿˜å¤šï¼ŒçœŸçš„å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ã€‚ç°åœ¨ä¹Ÿæ‰¾åˆ°äº†æ¯•ä¸šåæ –èº«çš„å…¬å¸ï¼Œç»§ç»­å‘å±•æˆ‘çš„iOSå¼€å‘äº‹ä¸šã€‚ç°åœ¨æˆ‘æœ‰äº†æ›´å¥½çš„å¿ƒæ€ï¼Œä¸ä¼šå¥½é«˜éª›è¿œï¼Œè¿˜æ˜¯è„šè¸å®åœ°å§ã€‚<br><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/e8so3.jpg\" alt=\"Dubai_gongsi\"><br>ã€€ã€€æœ€è¿‘åœ¨å¬äº”æœˆå¤©çš„ã€Šå‹‡æ•¢ã€‹ï¼Œä¸ºäº†é‚£ä¸ªå°†æ¥ï¼Œè¦è‡ªå·±ï¼Œå‹‡æ•¢å†å‹‡æ•¢ã€‚<br>ã€€ã€€æœ€åï¼Œæˆ‘æƒ³è¯´ï¼š<font color=#ff7073 size=3 face=\"é»‘ä½“\">å¾ˆå¤šäº‹æƒ…åªè¦å’¬å’¬ç‰™å°±è¿‡æ¥äº†ï¼ï¼ï¼</font></p>"},{"title":"ã€ŠBeautyã€‹é¡¹ç›®å°æ€»ç»“","date":"2017-07-17T12:48:15.000Z","id":"FCDAE83256354451","typora-copy-images-to":"ipic","_content":"\nä¸‰æœˆåº•å¼€å§‹äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªå¤–åŒ…é¡¹ç›®â€œBeautyâ€ï¼ŒAppçš„åå­—æ˜¯â€œCHARMERâ€ï¼Œæ˜¯ä¸€ä¸ªä¿ƒè¿›ç¾å®¹æŠ€å¸ˆå’Œå®¢æˆ·ä¹‹é—´è¾¾æˆæœåŠ¡åè®®çš„Appï¼Œæ­å»ºä¾›æ±‚åŒæ–¹æ²Ÿé€šå’Œäº¤æ˜“çš„æ¡¥æ¢å’Œå¹³å°ã€‚åœ¨åšå®Œç¬¬ä¸€ç‰ˆä¹‹åï¼Œå‡ ä¹æ¯æ™šéƒ½éœ€è¦ä¿®æ”¹åŠŸèƒ½ä¿®å¤Bugï¼Œç°åœ¨çªç„¶é—´ä¸€æ®µæ—¶é—´æ²¡æœ‰äº†æ¶ˆæ¯ï¼Œåº”è¯¥ç®—æ˜¯å®Œç»“äº†ã€‚    \n\n<!--more-->\n\n2017-10-12 æ›´: é¡¹ç›®è¿è¥çƒ‚å°¾ï¼Œæœ€åå¥½åƒæ²¡æœ‰ä¸Šæ¶ï¼Œéš¾è¿‡ingâ€¦ :(\n\n## æ‰€åšçš„äº‹æƒ…\n\næ€»çš„æ¥è¯´ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªåŠŸèƒ½ï¼š\n\n- ç”¨æˆ·ç«¯ï¼š\n\n  1. é€šè¿‡Googleåœ°å›¾æŸ¥çœ‹å½“å‰é™„è¿‘ä¸”åœ¨çº¿çš„æŠ€å¸ˆ\n\n  2. æ·»åŠ ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨Paypalæ”¯ä»˜\n\n  3. æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯\n\n  4. å‘å¸ƒå…¬å…±è®¢å•ç»™æ¯ä¸ªç¾å®¹æŠ€å¸ˆï¼ŒæŠ€å¸ˆå¯ä»¥é€šè¿‡ç«æ ‡å¾—åˆ°è®¢å•\n\n  5. æŸ¥çœ‹æŠ€å¸ˆä¿¡æ¯ï¼Œæ”¶è—å–œçˆ±çš„æŠ€å¸ˆ\n\n  6. å‘å¸ƒç§æœ‰è®¢å•ç»™ç‰¹å®šæŠ€å¸ˆ\n\n  7. è®¢å•ç»“æŸè¯„ä»·ï¼Œæ‰“åˆ†ç­‰\n\n  8. æä¾›å…¶ä»–ç”¨æˆ·å’ŒæŠ€å¸ˆçš„ç”µè¯è”ç³»æ–¹å¼\n\n- æŠ€å¸ˆç«¯ï¼š\n\n  1. ç«æ ‡ç”¨æˆ·çš„å…¬å…±è®¢å•    \n\n  2. æ¥å—æˆ–æ‹’ç»ç”¨æˆ·çš„ç§æœ‰è®¢å•\n\n  3. æ·»åŠ é“¶è¡Œå¡ï¼Œå¾—åˆ°è®¢å•æŠ¥é…¬\n\n  4. æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼ŒæŸ¥çœ‹æ”¶å…¥æ•°æ®ï¼Œ\n\n  5. æäº¤å°é¢å›¾ç‰‡ï¼Œä½œå“å›¾ç‰‡\n\n  6. å¢åˆ æ”¹æŸ¥æœåŠ¡ä¿¡æ¯ã€ä»·æ ¼\n\n     â€‹\n\n## ä¸€äº›å…·ä½“å®ç°\n\nã€€ã€€åŸºæœ¬å®ç°ä¸‹æ¥éƒ½ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œæ‰€ä»¥æŒ‘ä¸€äº›å€¼å¾—è®°å½•çš„å†™ä¸‹æ¥ï¼š\n\n### é¡¹ç›®æ–‡ä»¶ç»“æ„\n\n![Beauty_é¡¹ç›®å¤§è‡´ç»“æ„](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/yjc6f.png)\n\nã€€ã€€å› ä¸ºAppæ˜¯ç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸ªModuleï¼Œéƒ½åˆ†æˆCharmerå’ŒUseråˆ†åˆ«å¯¹åº”æŠ€å¸ˆå’Œç”¨æˆ·ï¼Œå†åœ¨å…¶ä¸‹åˆ†ä¸ºModelã€Viewã€Controllerï¼Œå¾ˆå¸¸è§çš„MVCæ¶æ„ã€‚    \n\nã€€ã€€è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œåˆ†ç±»æ¸…æ¥šï¼Œä¸€ä¸‹å­å°±èƒ½æ‰¾åˆ°éœ€è¦çš„æ–‡ä»¶ï¼ˆè™½ç„¶æœç´¢æ‰æ˜¯æœ€å¿«çš„>w<ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±å‡ºç°äº†ï¼Œå‰é¢æœ‰æåˆ°è¯´ï¼šç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œé‚£å°±ä¸å…æœ‰ç•Œé¢ç›¸åŒçš„æƒ…å†µå‡ºç°ï¼Œè¿™æ¬¡å¼€å‘ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯å¤ç”¨æ‰€æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œè¿™ä¸ªé”™è¯¯çš„å†³å®šè®©åæœŸç»´æŠ¤çš„æˆ‘ä¸€ç›´æƒ³ç‹ æ‰‡è‡ªå·±å˜´å·´ã€‚æ¯•ç«Ÿé¢å‘ä¸åŒçš„ä½¿ç”¨å›¢ä½“ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦å®šåˆ¶ï¼Œæ‰€ä»¥åæœŸåŠ æ–°éœ€æ±‚çš„æ—¶å€™åªèƒ½ä¸€ç›´if-elseï¼Œif-elseï¼Œif-elseã€‚æƒ¨ç»äººå¯°ï½      \n\nã€€ã€€è§‰å¾—ï¼Œä»¥åå†æœ‰è¿™æ ·çš„æƒ…å†µå‡ºç°ï¼Œè§†ç±»çš„å¤æ‚ç¨‹åº¦å’Œæ–‡ä»¶çš„å¤§å°è€Œå®šï¼Œ å¯èƒ½ä¼šé‡å†™ä¸€ä¸ªåŒæ ·å®ç°çš„ç±»æ–‡ä»¶ï¼Œæ„Ÿè§‰è¿™æ¡çº¿å¾ˆéš¾ç•Œå®šï¼Œåªèƒ½é ä»¥åçš„å¼€å‘ç»éªŒå»æ…¢æ…¢å­¦ã€‚     \n\n\n\n### åœ°å›¾\n\n![Beauty_Googleåœ°å›¾_å°](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m8ev4.jpg)\n\nã€€ã€€å› ä¸ºAppå³å°†åœ¨é¦™æ¸¯ä¸Šçº¿ï¼Œè‡ªç„¶åœ°ä½¿ç”¨Googleåœ°å›¾ã€‚ç¬¬ä¸€æ¬¡ç”¨Googleåœ°å›¾åšå¼€å‘ï¼Œæ„Ÿè§‰è·Ÿç™¾åº¦ã€é«˜å¾·æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œ æœ‰ä¸€ç‚¹å°±æ˜¯ï¼šæ–‡æ¡£åŸºæœ¬åªæœ‰å®˜æ–¹æ–‡æ¡£ï¼Œé‡åˆ°é—®é¢˜è¦Googleï¼ŒåŸºæœ¬éƒ½æ˜¯è®²ç™¾åº¦æˆ–é«˜å¾·ã€‚å…³äºGoogleåœ°å›¾ï¼Œåé¢å†é‡æ–°å†™ç¯‡æ–‡ç« ä»‹ç»ï¼ŒåŒ…æ‹¬ä½¿ç”¨ï¼Œè‡ªå®šä¹‰Markerï¼ˆåœ°å›¾ä¸Šç´«è‰²çš„æ ‡å¿—ï¼‰ï¼ŒPopViewï¼ˆç‚¹å‡»Markerå¼¹å‡ºçš„Viewï¼‰     \n\n\n\n### å·¦ä¾§æ»‘åŠ¨èœå•\n\n![Beauty_å·¦è¾¹æ ](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1h42p.jpg)\n\nã€€ã€€å›¾ç‰‡å¥½åƒå‹ç¼©å¾—æœ‰ç‚¹è¿‡åˆ†äº†....\n\nã€€ã€€ä¸€å¼€å§‹å·¦ä¾§æ»‘åŠ¨èœå•æ˜¯ä¸»ç•Œé¢Controllerçš„ä¸€ä¸ªViewï¼Œæ‰€ä»¥æ»‘åŠ¨çš„æ—¶å€™ä¼šè¢«ä¸Šæ–¹çš„Navigation Controllerï¼ˆNavigation Barï¼‰é®æŒ¡ä½ï¼Œå¯ä»¥æƒ³è±¡æ˜¯å¤šä¹ˆåƒè—•ã€‚åæ¥åœ¨æ»‘åŠ¨çš„æ—¶å€™åŠ¨æ€éšè—å’Œæ˜¾ç¤ºNavigation Barï¼Œå°±å‡ºç°äº†è¯¡å¼‚çš„ä¸Šé¢ä¸€æ•´æ¡é«˜åº¦ä¸º64pxçš„ç©ºç™½åŒºåŸŸï¼Œå‘ç°æ›´åƒè—•äº†...\n\nã€€ã€€æ‰€ä»¥åœ¨AlertControllerçš„å¯å‘ä¸‹ï¼Œå†³å®šç”¨UIWindowæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£å¦‚å·§ç¥[ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹](https://book.douban.com/subject/26287173/)ä¸€ä¹¦çš„ç¬¬åäºŒç« æåŠï¼Œä½¿ç”¨UIWindowåœ¨æ‰€æœ‰Viewï¼ˆå½“ç„¶åŒ…æ‹¬å½“å‰Windowçš„Navigation Barï¼‰å‰å±•ç¤ºè‡ªå·±æƒ³è¦çš„å†…å®¹ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š\n\n```objective-c\n- (void)viewDidLoad {\n\t_window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n\t_window.windowLevel = UIWindowLevelNormal;\n\t_window.backgroundColor = [UIColor clearColor];\n\t_window.hidden = YES;\n\tBECDrawerView *view = [BECDrawerView new];\n\t//çœç•¥å¯¹viewçš„ä¸€äº›åˆå§‹åŒ–ä»£ç \n\t_leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n\t_leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n\t_leftView = view;\n\t//ä¸€å¼€å§‹å…ˆæŠŠleftViewéšè—\n\t_leftHidden = YES;\n\t_leftView.hidden = _leftHidden;\n\t[_window addSubview:_leftView];\n    \n\tUIScreenEdgePanGestureRecognizer *edgeGesture = [[UIScreenEdgePanGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightPanGesture:)];\n\tedgeGesture.delegate = self;\n\tedgeGesture.edges = UIRectEdgeLeft;\n\t[self.view addGestureRecognizer:edgeGesture];\n}\n\n// æ‰‹åŠ¿äº‹ä»¶\n- (void)handleRightPanGesture:(UIPanGestureRecognizer *)panGesture\n{\n    CGPoint translation = [panGesture translationInView:_window];\n    if (translation.x > 0 && panGesture.state == UIGestureRecognizerStateEnded) {\n        [self popLeft];\n    }\n}\n\n// æ­¤å‡½æ•°ç”¨äºå¼¹å‡ºå·¦ä¾§æ»‘åŠ¨èœå•\n- (void)popLeft\n{\n    [self addLeftGestures];\t//æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè¿™é‡Œä»£ç å°±ä¸è´´å‡ºäº†\n    [_window makeKeyWindow];\n    _window.hidden = NO;\n    [_window bringSubviewToFront:_leftView];\n    \n    _leftHidden = !_leftHidden;\n    \n    if (_leftHidden == YES) {\n        [self removeLeftGestures];\n        [_popview removeFromSuperview];\n        NSLog(@\"removed\");\n        self.navigationController.navigationBar.hidden = NO;\n    }\n    \n    else {\n        if (!_popview) {\n            self.popview = [UIView new];\n            _popview.backgroundColor = [UIColor clearColor];\n            _popview.frame = _window.frame;\n            [_window addSubview:_popview];\n            [_window insertSubview:_popview belowSubview:_leftView];\n        }\n        _popview.hidden = NO;\n        [_window addSubview:_popview];\n        [_window insertSubview:_popview belowSubview:_leftView];\n    }\n    \n    CATransition *animation = [CATransition animation];\n    if (_leftHidden == NO) {\n        _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n        animation.type = kCATransitionMoveIn; // åŠ¨ç”»è¿‡æ¸¡ç±»å‹\n        animation.subtype = kCATransitionFromLeft; // åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = NO;\n    }else{\n        _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n        animation.type = kCATransitionPush;\n        animation.subtype = kCATransitionFromRight; //åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = YES;\n        NSLog(@\"%@\",self.navigationController.navigationBar);\n    }\n    animation.duration = 0.3; // åŠ¨ç”»æŒç»­0.3s\n    // ä»£ç†ï¼ŒåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä¼šè°ƒç”¨delegateçš„animationDidStop:finished:\n    animation.delegate = self;\n    [_leftView.layer addAnimation:animation forKey:nil];\n    \n}\n```\n\n\n\n### CHARMER PROFILE\n\n![Beauty_CollectionView](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/f7cwa.jpg)\n\nã€€ã€€æŠ€å¸ˆProfileé¡µé¢ï¼Œä¸ºä»€ä¹ˆä¼šæ‹¿å‡ºæ¥å†™ï¼Ÿï¼æ˜¯å› ä¸ºConllection Viewzåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸éå¸¸éå¸¸å¸¸è§ã€‚åŸºæœ¬æ¯ä¸ªAppéƒ½ä¼šç”¨åˆ°ï¼ˆTableViewæ˜¯ç‰¹æ®Šçš„Conllection Viewï¼‰ã€‚è¿™ä¸ªCollection Viewåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š\n\n1. æœ€ä¸Šæ–¹çš„HeaderViewæ˜¯ä¸€ä¸ªè·‘é©¬ç¯ï¼Œä½¿ç”¨äº†ä¹‹å‰å†™è¿‡çš„ä¸€ä¸ªå°ç»„ä»¶[EZRecycleImageView](https://github.com/objchris/EZRecycleImageView)ï¼Œåœ¨å¼€å‘ä¸­è¾¹ä½¿ç”¨è¾¹æ”¹è¿›æ˜¯æœ€å¥½ä¸è¿‡çš„äº‹æƒ…äº†ã€‚\n2. ç¬¬äºŒä¸ªHeaderæ˜¯æŠ€å¸ˆä¿¡æ¯å’Œä¸‰ä¸ªæŒ‰é’®\n3. æœ€åæ˜¯æœ€ä¸‹é¢çš„Viewï¼Œä¸‰ä¸ªæŒ‰é’®åˆ†åˆ«å¯¹åº”ä¸åŒçš„å†…å®¹ï¼Œç¬¬ä¸€äºŒä¸ªä½¿ç”¨çš„æ˜¯CollectionViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewï¼›æœ€åä¸€ä¸ªæ˜¯TableViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewã€‚\n\nã€€ã€€Viewé‡Œé¢åµŒå…¥Viewçš„å¤æ‚ç»“æ„ä¹Ÿæ˜¯å¾ˆå€¼å¾—æŒæ¡çš„æ‰‹æ³•~\n\n\n\nã€€ã€€è¿˜æœ‰å¾ˆå¤šå¼€å‘è¿‡ç¨‹ä¸­çš„ä»£ç å’Œè§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæ˜¯åˆ«äººçš„é¡¹ç›®ï¼Œéå¼€æºï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºå•¦~ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¿¡ä»°Open Sourcede der~~     \n\nã€€ã€€æœ€åé™„ä¸Šä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼š\n\n```\nplatform :ios, \"8.0\"\ntarget :Beauty do\npod 'SVProgressHUD', '~> 2.0.3'\npod 'Masonry', '~> 1.0.2'\npod 'AFNetworking', '~> 3.0'\npod 'SDWebImage', '~>3.8'\npod 'YYModel'\npod 'IQKeyboardManager'\npod 'GoogleMaps'\npod 'MJRefresh'\npod \"MWPhotoBrowser\"\npod 'JPush'\npod 'PayPal-iOS-SDK'\n\nend\n```\n\n\n\n\n\n## æ€»ç»“ä¸åæ€\n\n- å¥½çš„æ–¹é¢ï¼š\n\n  1. ä¸€ä½å¥½Partnerï¼Œä¸€ä½ä¸€èµ·å¥‹æ–—çš„å¥½æœ‹å‹ã€‚\n\n  2. å¾ˆå¤šUIæ§ä»¶å’Œåº•å±‚å®ç°éƒ½æ¥è§¦åˆ°äº†ï¼ŒåŠ æ·±äº†å°è±¡ã€‚\n\n  3. çœŸæ­£æ¥è§¦å¹¶ä½¿ç”¨åˆ°ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥ååœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°é€‚ç”¨çš„æƒ…å†µå°±ä¸ä¼šå› ä¸ºæ— çŸ¥è€Œé‡å¤é€ è½®å­ï¼ˆå¯èƒ½è¿˜é€ ä¸å¥½â€¦.ï¼‰ã€‚\n\n  4. ç§¯ç´¯äº†ç»éªŒï¼Œè¿™ä¸ªAppç®—æ˜¯è‡ªå·±ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´å¼€å‘çš„Appã€‚æ•´ä¸ªå¼€å‘æµç¨‹è™½ç„¶æ²¡æœ‰å…¬å¸é¡¹ç›®é‚£ä¹ˆæ­£è§„ï¼Œä½†æ˜¯ä¸€äº›ç›¸å…³çš„æ–‡æ¡£ã€è¯´æ˜è¿˜æ˜¯ä¸ç¼ºçš„ã€‚\n\n- ä¸å¥½çš„æ–¹é¢ï¼š\n\n  1. é¦–å…ˆåœ¨æ¶æ„ä¸Šæ²¡æœ‰è€ƒè™‘å¥½ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿä¸æ˜¯å¯æ§çš„ã€‚ä¸€å¼€å§‹æ‹¿åˆ°çš„é¡¹ç›®ç»“æ„å·²ç»å®šå¥½ï¼Œæ²¡åŠæ³•æ›´æ”¹ï¼Œä¸”æ—¶é—´ä¹Ÿç´§ï¼Œæ— æ³•æ¨ç¿»ä¹‹å‰å†™è¿‡çš„ä»£ç é‡æ–°æ€è€ƒå’Œé‡å»ºã€‚\n\n  2. å…¶æ¬¡ï¼Œåœ¨å’ŒPartnerä¹‹é—´çš„æ²Ÿé€šè‡ªæˆ‘è§‰å¾—ä¸è¶³ï¼Œæˆ‘çš„è¢«åŠ¨æ˜¯æˆ‘è¿™æ¬¡å¼€å‘ä½“éªŒä¸€èˆ¬çš„é‡å¤§å¼•å­ã€‚æ„Ÿè§‰è‡ªå·±åšå¾—ä¸å¥½ï¼Œæœ‰ç‚¹å¯¹ä¸èµ·è‡ªå·±çš„Partnerã€‚\n\n  3. å®¢æˆ·çš„æœ‰äº›éœ€æ±‚å¼‚å¸¸åäººç±»ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘çš„æ„è§ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„åé¦ˆå’Œè§£å†³ã€‚éœ€æ±‚ç»å¸¸æ”¹åŠ¨ï¼Œä¸”æˆ‘çš„Partneræ‰æ˜¯å’Œå®¢æˆ·æ²Ÿé€šçš„ä¸­é—´è€…ï¼Œä¸èƒ½ç›´é¢å®¢æˆ·æˆ‘å¾ˆè‹¦æ¼ã€‚\n\n\n","source":"_posts/é¡¹ç›®Beautyæ€»ç»“.md","raw":"---\ntitle: ã€ŠBeautyã€‹é¡¹ç›®å°æ€»ç»“\ndate: 2017-07-17 20:48:15\nid: FCDAE83256354451\ntags: \n- Summary\ntypora-copy-images-to: ipic\n---\n\nä¸‰æœˆåº•å¼€å§‹äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªå¤–åŒ…é¡¹ç›®â€œBeautyâ€ï¼ŒAppçš„åå­—æ˜¯â€œCHARMERâ€ï¼Œæ˜¯ä¸€ä¸ªä¿ƒè¿›ç¾å®¹æŠ€å¸ˆå’Œå®¢æˆ·ä¹‹é—´è¾¾æˆæœåŠ¡åè®®çš„Appï¼Œæ­å»ºä¾›æ±‚åŒæ–¹æ²Ÿé€šå’Œäº¤æ˜“çš„æ¡¥æ¢å’Œå¹³å°ã€‚åœ¨åšå®Œç¬¬ä¸€ç‰ˆä¹‹åï¼Œå‡ ä¹æ¯æ™šéƒ½éœ€è¦ä¿®æ”¹åŠŸèƒ½ä¿®å¤Bugï¼Œç°åœ¨çªç„¶é—´ä¸€æ®µæ—¶é—´æ²¡æœ‰äº†æ¶ˆæ¯ï¼Œåº”è¯¥ç®—æ˜¯å®Œç»“äº†ã€‚    \n\n<!--more-->\n\n2017-10-12 æ›´: é¡¹ç›®è¿è¥çƒ‚å°¾ï¼Œæœ€åå¥½åƒæ²¡æœ‰ä¸Šæ¶ï¼Œéš¾è¿‡ingâ€¦ :(\n\n## æ‰€åšçš„äº‹æƒ…\n\næ€»çš„æ¥è¯´ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªåŠŸèƒ½ï¼š\n\n- ç”¨æˆ·ç«¯ï¼š\n\n  1. é€šè¿‡Googleåœ°å›¾æŸ¥çœ‹å½“å‰é™„è¿‘ä¸”åœ¨çº¿çš„æŠ€å¸ˆ\n\n  2. æ·»åŠ ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨Paypalæ”¯ä»˜\n\n  3. æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯\n\n  4. å‘å¸ƒå…¬å…±è®¢å•ç»™æ¯ä¸ªç¾å®¹æŠ€å¸ˆï¼ŒæŠ€å¸ˆå¯ä»¥é€šè¿‡ç«æ ‡å¾—åˆ°è®¢å•\n\n  5. æŸ¥çœ‹æŠ€å¸ˆä¿¡æ¯ï¼Œæ”¶è—å–œçˆ±çš„æŠ€å¸ˆ\n\n  6. å‘å¸ƒç§æœ‰è®¢å•ç»™ç‰¹å®šæŠ€å¸ˆ\n\n  7. è®¢å•ç»“æŸè¯„ä»·ï¼Œæ‰“åˆ†ç­‰\n\n  8. æä¾›å…¶ä»–ç”¨æˆ·å’ŒæŠ€å¸ˆçš„ç”µè¯è”ç³»æ–¹å¼\n\n- æŠ€å¸ˆç«¯ï¼š\n\n  1. ç«æ ‡ç”¨æˆ·çš„å…¬å…±è®¢å•    \n\n  2. æ¥å—æˆ–æ‹’ç»ç”¨æˆ·çš„ç§æœ‰è®¢å•\n\n  3. æ·»åŠ é“¶è¡Œå¡ï¼Œå¾—åˆ°è®¢å•æŠ¥é…¬\n\n  4. æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼ŒæŸ¥çœ‹æ”¶å…¥æ•°æ®ï¼Œ\n\n  5. æäº¤å°é¢å›¾ç‰‡ï¼Œä½œå“å›¾ç‰‡\n\n  6. å¢åˆ æ”¹æŸ¥æœåŠ¡ä¿¡æ¯ã€ä»·æ ¼\n\n     â€‹\n\n## ä¸€äº›å…·ä½“å®ç°\n\nã€€ã€€åŸºæœ¬å®ç°ä¸‹æ¥éƒ½ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œæ‰€ä»¥æŒ‘ä¸€äº›å€¼å¾—è®°å½•çš„å†™ä¸‹æ¥ï¼š\n\n### é¡¹ç›®æ–‡ä»¶ç»“æ„\n\n![Beauty_é¡¹ç›®å¤§è‡´ç»“æ„](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/yjc6f.png)\n\nã€€ã€€å› ä¸ºAppæ˜¯ç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸ªModuleï¼Œéƒ½åˆ†æˆCharmerå’ŒUseråˆ†åˆ«å¯¹åº”æŠ€å¸ˆå’Œç”¨æˆ·ï¼Œå†åœ¨å…¶ä¸‹åˆ†ä¸ºModelã€Viewã€Controllerï¼Œå¾ˆå¸¸è§çš„MVCæ¶æ„ã€‚    \n\nã€€ã€€è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œåˆ†ç±»æ¸…æ¥šï¼Œä¸€ä¸‹å­å°±èƒ½æ‰¾åˆ°éœ€è¦çš„æ–‡ä»¶ï¼ˆè™½ç„¶æœç´¢æ‰æ˜¯æœ€å¿«çš„>w<ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±å‡ºç°äº†ï¼Œå‰é¢æœ‰æåˆ°è¯´ï¼šç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œé‚£å°±ä¸å…æœ‰ç•Œé¢ç›¸åŒçš„æƒ…å†µå‡ºç°ï¼Œè¿™æ¬¡å¼€å‘ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯å¤ç”¨æ‰€æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œè¿™ä¸ªé”™è¯¯çš„å†³å®šè®©åæœŸç»´æŠ¤çš„æˆ‘ä¸€ç›´æƒ³ç‹ æ‰‡è‡ªå·±å˜´å·´ã€‚æ¯•ç«Ÿé¢å‘ä¸åŒçš„ä½¿ç”¨å›¢ä½“ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦å®šåˆ¶ï¼Œæ‰€ä»¥åæœŸåŠ æ–°éœ€æ±‚çš„æ—¶å€™åªèƒ½ä¸€ç›´if-elseï¼Œif-elseï¼Œif-elseã€‚æƒ¨ç»äººå¯°ï½      \n\nã€€ã€€è§‰å¾—ï¼Œä»¥åå†æœ‰è¿™æ ·çš„æƒ…å†µå‡ºç°ï¼Œè§†ç±»çš„å¤æ‚ç¨‹åº¦å’Œæ–‡ä»¶çš„å¤§å°è€Œå®šï¼Œ å¯èƒ½ä¼šé‡å†™ä¸€ä¸ªåŒæ ·å®ç°çš„ç±»æ–‡ä»¶ï¼Œæ„Ÿè§‰è¿™æ¡çº¿å¾ˆéš¾ç•Œå®šï¼Œåªèƒ½é ä»¥åçš„å¼€å‘ç»éªŒå»æ…¢æ…¢å­¦ã€‚     \n\n\n\n### åœ°å›¾\n\n![Beauty_Googleåœ°å›¾_å°](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m8ev4.jpg)\n\nã€€ã€€å› ä¸ºAppå³å°†åœ¨é¦™æ¸¯ä¸Šçº¿ï¼Œè‡ªç„¶åœ°ä½¿ç”¨Googleåœ°å›¾ã€‚ç¬¬ä¸€æ¬¡ç”¨Googleåœ°å›¾åšå¼€å‘ï¼Œæ„Ÿè§‰è·Ÿç™¾åº¦ã€é«˜å¾·æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œ æœ‰ä¸€ç‚¹å°±æ˜¯ï¼šæ–‡æ¡£åŸºæœ¬åªæœ‰å®˜æ–¹æ–‡æ¡£ï¼Œé‡åˆ°é—®é¢˜è¦Googleï¼ŒåŸºæœ¬éƒ½æ˜¯è®²ç™¾åº¦æˆ–é«˜å¾·ã€‚å…³äºGoogleåœ°å›¾ï¼Œåé¢å†é‡æ–°å†™ç¯‡æ–‡ç« ä»‹ç»ï¼ŒåŒ…æ‹¬ä½¿ç”¨ï¼Œè‡ªå®šä¹‰Markerï¼ˆåœ°å›¾ä¸Šç´«è‰²çš„æ ‡å¿—ï¼‰ï¼ŒPopViewï¼ˆç‚¹å‡»Markerå¼¹å‡ºçš„Viewï¼‰     \n\n\n\n### å·¦ä¾§æ»‘åŠ¨èœå•\n\n![Beauty_å·¦è¾¹æ ](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1h42p.jpg)\n\nã€€ã€€å›¾ç‰‡å¥½åƒå‹ç¼©å¾—æœ‰ç‚¹è¿‡åˆ†äº†....\n\nã€€ã€€ä¸€å¼€å§‹å·¦ä¾§æ»‘åŠ¨èœå•æ˜¯ä¸»ç•Œé¢Controllerçš„ä¸€ä¸ªViewï¼Œæ‰€ä»¥æ»‘åŠ¨çš„æ—¶å€™ä¼šè¢«ä¸Šæ–¹çš„Navigation Controllerï¼ˆNavigation Barï¼‰é®æŒ¡ä½ï¼Œå¯ä»¥æƒ³è±¡æ˜¯å¤šä¹ˆåƒè—•ã€‚åæ¥åœ¨æ»‘åŠ¨çš„æ—¶å€™åŠ¨æ€éšè—å’Œæ˜¾ç¤ºNavigation Barï¼Œå°±å‡ºç°äº†è¯¡å¼‚çš„ä¸Šé¢ä¸€æ•´æ¡é«˜åº¦ä¸º64pxçš„ç©ºç™½åŒºåŸŸï¼Œå‘ç°æ›´åƒè—•äº†...\n\nã€€ã€€æ‰€ä»¥åœ¨AlertControllerçš„å¯å‘ä¸‹ï¼Œå†³å®šç”¨UIWindowæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£å¦‚å·§ç¥[ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹](https://book.douban.com/subject/26287173/)ä¸€ä¹¦çš„ç¬¬åäºŒç« æåŠï¼Œä½¿ç”¨UIWindowåœ¨æ‰€æœ‰Viewï¼ˆå½“ç„¶åŒ…æ‹¬å½“å‰Windowçš„Navigation Barï¼‰å‰å±•ç¤ºè‡ªå·±æƒ³è¦çš„å†…å®¹ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š\n\n```objective-c\n- (void)viewDidLoad {\n\t_window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n\t_window.windowLevel = UIWindowLevelNormal;\n\t_window.backgroundColor = [UIColor clearColor];\n\t_window.hidden = YES;\n\tBECDrawerView *view = [BECDrawerView new];\n\t//çœç•¥å¯¹viewçš„ä¸€äº›åˆå§‹åŒ–ä»£ç \n\t_leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n\t_leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n\t_leftView = view;\n\t//ä¸€å¼€å§‹å…ˆæŠŠleftViewéšè—\n\t_leftHidden = YES;\n\t_leftView.hidden = _leftHidden;\n\t[_window addSubview:_leftView];\n    \n\tUIScreenEdgePanGestureRecognizer *edgeGesture = [[UIScreenEdgePanGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightPanGesture:)];\n\tedgeGesture.delegate = self;\n\tedgeGesture.edges = UIRectEdgeLeft;\n\t[self.view addGestureRecognizer:edgeGesture];\n}\n\n// æ‰‹åŠ¿äº‹ä»¶\n- (void)handleRightPanGesture:(UIPanGestureRecognizer *)panGesture\n{\n    CGPoint translation = [panGesture translationInView:_window];\n    if (translation.x > 0 && panGesture.state == UIGestureRecognizerStateEnded) {\n        [self popLeft];\n    }\n}\n\n// æ­¤å‡½æ•°ç”¨äºå¼¹å‡ºå·¦ä¾§æ»‘åŠ¨èœå•\n- (void)popLeft\n{\n    [self addLeftGestures];\t//æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè¿™é‡Œä»£ç å°±ä¸è´´å‡ºäº†\n    [_window makeKeyWindow];\n    _window.hidden = NO;\n    [_window bringSubviewToFront:_leftView];\n    \n    _leftHidden = !_leftHidden;\n    \n    if (_leftHidden == YES) {\n        [self removeLeftGestures];\n        [_popview removeFromSuperview];\n        NSLog(@\"removed\");\n        self.navigationController.navigationBar.hidden = NO;\n    }\n    \n    else {\n        if (!_popview) {\n            self.popview = [UIView new];\n            _popview.backgroundColor = [UIColor clearColor];\n            _popview.frame = _window.frame;\n            [_window addSubview:_popview];\n            [_window insertSubview:_popview belowSubview:_leftView];\n        }\n        _popview.hidden = NO;\n        [_window addSubview:_popview];\n        [_window insertSubview:_popview belowSubview:_leftView];\n    }\n    \n    CATransition *animation = [CATransition animation];\n    if (_leftHidden == NO) {\n        _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n        animation.type = kCATransitionMoveIn; // åŠ¨ç”»è¿‡æ¸¡ç±»å‹\n        animation.subtype = kCATransitionFromLeft; // åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = NO;\n    }else{\n        _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n        animation.type = kCATransitionPush;\n        animation.subtype = kCATransitionFromRight; //åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = YES;\n        NSLog(@\"%@\",self.navigationController.navigationBar);\n    }\n    animation.duration = 0.3; // åŠ¨ç”»æŒç»­0.3s\n    // ä»£ç†ï¼ŒåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä¼šè°ƒç”¨delegateçš„animationDidStop:finished:\n    animation.delegate = self;\n    [_leftView.layer addAnimation:animation forKey:nil];\n    \n}\n```\n\n\n\n### CHARMER PROFILE\n\n![Beauty_CollectionView](https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/f7cwa.jpg)\n\nã€€ã€€æŠ€å¸ˆProfileé¡µé¢ï¼Œä¸ºä»€ä¹ˆä¼šæ‹¿å‡ºæ¥å†™ï¼Ÿï¼æ˜¯å› ä¸ºConllection Viewzåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸éå¸¸éå¸¸å¸¸è§ã€‚åŸºæœ¬æ¯ä¸ªAppéƒ½ä¼šç”¨åˆ°ï¼ˆTableViewæ˜¯ç‰¹æ®Šçš„Conllection Viewï¼‰ã€‚è¿™ä¸ªCollection Viewåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š\n\n1. æœ€ä¸Šæ–¹çš„HeaderViewæ˜¯ä¸€ä¸ªè·‘é©¬ç¯ï¼Œä½¿ç”¨äº†ä¹‹å‰å†™è¿‡çš„ä¸€ä¸ªå°ç»„ä»¶[EZRecycleImageView](https://github.com/objchris/EZRecycleImageView)ï¼Œåœ¨å¼€å‘ä¸­è¾¹ä½¿ç”¨è¾¹æ”¹è¿›æ˜¯æœ€å¥½ä¸è¿‡çš„äº‹æƒ…äº†ã€‚\n2. ç¬¬äºŒä¸ªHeaderæ˜¯æŠ€å¸ˆä¿¡æ¯å’Œä¸‰ä¸ªæŒ‰é’®\n3. æœ€åæ˜¯æœ€ä¸‹é¢çš„Viewï¼Œä¸‰ä¸ªæŒ‰é’®åˆ†åˆ«å¯¹åº”ä¸åŒçš„å†…å®¹ï¼Œç¬¬ä¸€äºŒä¸ªä½¿ç”¨çš„æ˜¯CollectionViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewï¼›æœ€åä¸€ä¸ªæ˜¯TableViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewã€‚\n\nã€€ã€€Viewé‡Œé¢åµŒå…¥Viewçš„å¤æ‚ç»“æ„ä¹Ÿæ˜¯å¾ˆå€¼å¾—æŒæ¡çš„æ‰‹æ³•~\n\n\n\nã€€ã€€è¿˜æœ‰å¾ˆå¤šå¼€å‘è¿‡ç¨‹ä¸­çš„ä»£ç å’Œè§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæ˜¯åˆ«äººçš„é¡¹ç›®ï¼Œéå¼€æºï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºå•¦~ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¿¡ä»°Open Sourcede der~~     \n\nã€€ã€€æœ€åé™„ä¸Šä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼š\n\n```\nplatform :ios, \"8.0\"\ntarget :Beauty do\npod 'SVProgressHUD', '~> 2.0.3'\npod 'Masonry', '~> 1.0.2'\npod 'AFNetworking', '~> 3.0'\npod 'SDWebImage', '~>3.8'\npod 'YYModel'\npod 'IQKeyboardManager'\npod 'GoogleMaps'\npod 'MJRefresh'\npod \"MWPhotoBrowser\"\npod 'JPush'\npod 'PayPal-iOS-SDK'\n\nend\n```\n\n\n\n\n\n## æ€»ç»“ä¸åæ€\n\n- å¥½çš„æ–¹é¢ï¼š\n\n  1. ä¸€ä½å¥½Partnerï¼Œä¸€ä½ä¸€èµ·å¥‹æ–—çš„å¥½æœ‹å‹ã€‚\n\n  2. å¾ˆå¤šUIæ§ä»¶å’Œåº•å±‚å®ç°éƒ½æ¥è§¦åˆ°äº†ï¼ŒåŠ æ·±äº†å°è±¡ã€‚\n\n  3. çœŸæ­£æ¥è§¦å¹¶ä½¿ç”¨åˆ°ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥ååœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°é€‚ç”¨çš„æƒ…å†µå°±ä¸ä¼šå› ä¸ºæ— çŸ¥è€Œé‡å¤é€ è½®å­ï¼ˆå¯èƒ½è¿˜é€ ä¸å¥½â€¦.ï¼‰ã€‚\n\n  4. ç§¯ç´¯äº†ç»éªŒï¼Œè¿™ä¸ªAppç®—æ˜¯è‡ªå·±ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´å¼€å‘çš„Appã€‚æ•´ä¸ªå¼€å‘æµç¨‹è™½ç„¶æ²¡æœ‰å…¬å¸é¡¹ç›®é‚£ä¹ˆæ­£è§„ï¼Œä½†æ˜¯ä¸€äº›ç›¸å…³çš„æ–‡æ¡£ã€è¯´æ˜è¿˜æ˜¯ä¸ç¼ºçš„ã€‚\n\n- ä¸å¥½çš„æ–¹é¢ï¼š\n\n  1. é¦–å…ˆåœ¨æ¶æ„ä¸Šæ²¡æœ‰è€ƒè™‘å¥½ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿä¸æ˜¯å¯æ§çš„ã€‚ä¸€å¼€å§‹æ‹¿åˆ°çš„é¡¹ç›®ç»“æ„å·²ç»å®šå¥½ï¼Œæ²¡åŠæ³•æ›´æ”¹ï¼Œä¸”æ—¶é—´ä¹Ÿç´§ï¼Œæ— æ³•æ¨ç¿»ä¹‹å‰å†™è¿‡çš„ä»£ç é‡æ–°æ€è€ƒå’Œé‡å»ºã€‚\n\n  2. å…¶æ¬¡ï¼Œåœ¨å’ŒPartnerä¹‹é—´çš„æ²Ÿé€šè‡ªæˆ‘è§‰å¾—ä¸è¶³ï¼Œæˆ‘çš„è¢«åŠ¨æ˜¯æˆ‘è¿™æ¬¡å¼€å‘ä½“éªŒä¸€èˆ¬çš„é‡å¤§å¼•å­ã€‚æ„Ÿè§‰è‡ªå·±åšå¾—ä¸å¥½ï¼Œæœ‰ç‚¹å¯¹ä¸èµ·è‡ªå·±çš„Partnerã€‚\n\n  3. å®¢æˆ·çš„æœ‰äº›éœ€æ±‚å¼‚å¸¸åäººç±»ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘çš„æ„è§ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„åé¦ˆå’Œè§£å†³ã€‚éœ€æ±‚ç»å¸¸æ”¹åŠ¨ï¼Œä¸”æˆ‘çš„Partneræ‰æ˜¯å’Œå®¢æˆ·æ²Ÿé€šçš„ä¸­é—´è€…ï¼Œä¸èƒ½ç›´é¢å®¢æˆ·æˆ‘å¾ˆè‹¦æ¼ã€‚\n\n\n","slug":"é¡¹ç›®Beautyæ€»ç»“","published":1,"updated":"2018-03-15T01:32:27.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjfki12be000lcqy8atzoa1au","content":"<p>ä¸‰æœˆåº•å¼€å§‹äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªå¤–åŒ…é¡¹ç›®â€œBeautyâ€ï¼ŒAppçš„åå­—æ˜¯â€œCHARMERâ€ï¼Œæ˜¯ä¸€ä¸ªä¿ƒè¿›ç¾å®¹æŠ€å¸ˆå’Œå®¢æˆ·ä¹‹é—´è¾¾æˆæœåŠ¡åè®®çš„Appï¼Œæ­å»ºä¾›æ±‚åŒæ–¹æ²Ÿé€šå’Œäº¤æ˜“çš„æ¡¥æ¢å’Œå¹³å°ã€‚åœ¨åšå®Œç¬¬ä¸€ç‰ˆä¹‹åï¼Œå‡ ä¹æ¯æ™šéƒ½éœ€è¦ä¿®æ”¹åŠŸèƒ½ä¿®å¤Bugï¼Œç°åœ¨çªç„¶é—´ä¸€æ®µæ—¶é—´æ²¡æœ‰äº†æ¶ˆæ¯ï¼Œåº”è¯¥ç®—æ˜¯å®Œç»“äº†ã€‚    </p>\n<a id=\"more\"></a>\n<p>2017-10-12 æ›´: é¡¹ç›®è¿è¥çƒ‚å°¾ï¼Œæœ€åå¥½åƒæ²¡æœ‰ä¸Šæ¶ï¼Œéš¾è¿‡ingâ€¦ :(</p>\n<h2 id=\"æ‰€åšçš„äº‹æƒ…\"><a href=\"#æ‰€åšçš„äº‹æƒ…\" class=\"headerlink\" title=\"æ‰€åšçš„äº‹æƒ…\"></a>æ‰€åšçš„äº‹æƒ…</h2><p>æ€»çš„æ¥è¯´ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªåŠŸèƒ½ï¼š</p>\n<ul>\n<li><p>ç”¨æˆ·ç«¯ï¼š</p>\n<ol>\n<li><p>é€šè¿‡Googleåœ°å›¾æŸ¥çœ‹å½“å‰é™„è¿‘ä¸”åœ¨çº¿çš„æŠ€å¸ˆ</p>\n</li>\n<li><p>æ·»åŠ ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨Paypalæ”¯ä»˜</p>\n</li>\n<li><p>æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯</p>\n</li>\n<li><p>å‘å¸ƒå…¬å…±è®¢å•ç»™æ¯ä¸ªç¾å®¹æŠ€å¸ˆï¼ŒæŠ€å¸ˆå¯ä»¥é€šè¿‡ç«æ ‡å¾—åˆ°è®¢å•</p>\n</li>\n<li><p>æŸ¥çœ‹æŠ€å¸ˆä¿¡æ¯ï¼Œæ”¶è—å–œçˆ±çš„æŠ€å¸ˆ</p>\n</li>\n<li><p>å‘å¸ƒç§æœ‰è®¢å•ç»™ç‰¹å®šæŠ€å¸ˆ</p>\n</li>\n<li><p>è®¢å•ç»“æŸè¯„ä»·ï¼Œæ‰“åˆ†ç­‰</p>\n</li>\n<li><p>æä¾›å…¶ä»–ç”¨æˆ·å’ŒæŠ€å¸ˆçš„ç”µè¯è”ç³»æ–¹å¼</p>\n</li>\n</ol>\n</li>\n<li><p>æŠ€å¸ˆç«¯ï¼š</p>\n<ol>\n<li><p>ç«æ ‡ç”¨æˆ·çš„å…¬å…±è®¢å•    </p>\n</li>\n<li><p>æ¥å—æˆ–æ‹’ç»ç”¨æˆ·çš„ç§æœ‰è®¢å•</p>\n</li>\n<li><p>æ·»åŠ é“¶è¡Œå¡ï¼Œå¾—åˆ°è®¢å•æŠ¥é…¬</p>\n</li>\n<li><p>æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼ŒæŸ¥çœ‹æ”¶å…¥æ•°æ®ï¼Œ</p>\n</li>\n<li><p>æäº¤å°é¢å›¾ç‰‡ï¼Œä½œå“å›¾ç‰‡</p>\n</li>\n<li><p>å¢åˆ æ”¹æŸ¥æœåŠ¡ä¿¡æ¯ã€ä»·æ ¼</p>\n<p>â€‹</p>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"ä¸€äº›å…·ä½“å®ç°\"><a href=\"#ä¸€äº›å…·ä½“å®ç°\" class=\"headerlink\" title=\"ä¸€äº›å…·ä½“å®ç°\"></a>ä¸€äº›å…·ä½“å®ç°</h2><p>ã€€ã€€åŸºæœ¬å®ç°ä¸‹æ¥éƒ½ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œæ‰€ä»¥æŒ‘ä¸€äº›å€¼å¾—è®°å½•çš„å†™ä¸‹æ¥ï¼š</p>\n<h3 id=\"é¡¹ç›®æ–‡ä»¶ç»“æ„\"><a href=\"#é¡¹ç›®æ–‡ä»¶ç»“æ„\" class=\"headerlink\" title=\"é¡¹ç›®æ–‡ä»¶ç»“æ„\"></a>é¡¹ç›®æ–‡ä»¶ç»“æ„</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/yjc6f.png\" alt=\"Beauty_é¡¹ç›®å¤§è‡´ç»“æ„\"></p>\n<p>ã€€ã€€å› ä¸ºAppæ˜¯ç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸ªModuleï¼Œéƒ½åˆ†æˆCharmerå’ŒUseråˆ†åˆ«å¯¹åº”æŠ€å¸ˆå’Œç”¨æˆ·ï¼Œå†åœ¨å…¶ä¸‹åˆ†ä¸ºModelã€Viewã€Controllerï¼Œå¾ˆå¸¸è§çš„MVCæ¶æ„ã€‚    </p>\n<p>ã€€ã€€è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œåˆ†ç±»æ¸…æ¥šï¼Œä¸€ä¸‹å­å°±èƒ½æ‰¾åˆ°éœ€è¦çš„æ–‡ä»¶ï¼ˆè™½ç„¶æœç´¢æ‰æ˜¯æœ€å¿«çš„&gt;w&lt;ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±å‡ºç°äº†ï¼Œå‰é¢æœ‰æåˆ°è¯´ï¼šç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œé‚£å°±ä¸å…æœ‰ç•Œé¢ç›¸åŒçš„æƒ…å†µå‡ºç°ï¼Œè¿™æ¬¡å¼€å‘ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯å¤ç”¨æ‰€æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œè¿™ä¸ªé”™è¯¯çš„å†³å®šè®©åæœŸç»´æŠ¤çš„æˆ‘ä¸€ç›´æƒ³ç‹ æ‰‡è‡ªå·±å˜´å·´ã€‚æ¯•ç«Ÿé¢å‘ä¸åŒçš„ä½¿ç”¨å›¢ä½“ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦å®šåˆ¶ï¼Œæ‰€ä»¥åæœŸåŠ æ–°éœ€æ±‚çš„æ—¶å€™åªèƒ½ä¸€ç›´if-elseï¼Œif-elseï¼Œif-elseã€‚æƒ¨ç»äººå¯°ï½      </p>\n<p>ã€€ã€€è§‰å¾—ï¼Œä»¥åå†æœ‰è¿™æ ·çš„æƒ…å†µå‡ºç°ï¼Œè§†ç±»çš„å¤æ‚ç¨‹åº¦å’Œæ–‡ä»¶çš„å¤§å°è€Œå®šï¼Œ å¯èƒ½ä¼šé‡å†™ä¸€ä¸ªåŒæ ·å®ç°çš„ç±»æ–‡ä»¶ï¼Œæ„Ÿè§‰è¿™æ¡çº¿å¾ˆéš¾ç•Œå®šï¼Œåªèƒ½é ä»¥åçš„å¼€å‘ç»éªŒå»æ…¢æ…¢å­¦ã€‚     </p>\n<h3 id=\"åœ°å›¾\"><a href=\"#åœ°å›¾\" class=\"headerlink\" title=\"åœ°å›¾\"></a>åœ°å›¾</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m8ev4.jpg\" alt=\"Beauty_Googleåœ°å›¾_å°\"></p>\n<p>ã€€ã€€å› ä¸ºAppå³å°†åœ¨é¦™æ¸¯ä¸Šçº¿ï¼Œè‡ªç„¶åœ°ä½¿ç”¨Googleåœ°å›¾ã€‚ç¬¬ä¸€æ¬¡ç”¨Googleåœ°å›¾åšå¼€å‘ï¼Œæ„Ÿè§‰è·Ÿç™¾åº¦ã€é«˜å¾·æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œ æœ‰ä¸€ç‚¹å°±æ˜¯ï¼šæ–‡æ¡£åŸºæœ¬åªæœ‰å®˜æ–¹æ–‡æ¡£ï¼Œé‡åˆ°é—®é¢˜è¦Googleï¼ŒåŸºæœ¬éƒ½æ˜¯è®²ç™¾åº¦æˆ–é«˜å¾·ã€‚å…³äºGoogleåœ°å›¾ï¼Œåé¢å†é‡æ–°å†™ç¯‡æ–‡ç« ä»‹ç»ï¼ŒåŒ…æ‹¬ä½¿ç”¨ï¼Œè‡ªå®šä¹‰Markerï¼ˆåœ°å›¾ä¸Šç´«è‰²çš„æ ‡å¿—ï¼‰ï¼ŒPopViewï¼ˆç‚¹å‡»Markerå¼¹å‡ºçš„Viewï¼‰     </p>\n<h3 id=\"å·¦ä¾§æ»‘åŠ¨èœå•\"><a href=\"#å·¦ä¾§æ»‘åŠ¨èœå•\" class=\"headerlink\" title=\"å·¦ä¾§æ»‘åŠ¨èœå•\"></a>å·¦ä¾§æ»‘åŠ¨èœå•</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1h42p.jpg\" alt=\"Beauty_å·¦è¾¹æ \"></p>\n<p>ã€€ã€€å›¾ç‰‡å¥½åƒå‹ç¼©å¾—æœ‰ç‚¹è¿‡åˆ†äº†â€¦.</p>\n<p>ã€€ã€€ä¸€å¼€å§‹å·¦ä¾§æ»‘åŠ¨èœå•æ˜¯ä¸»ç•Œé¢Controllerçš„ä¸€ä¸ªViewï¼Œæ‰€ä»¥æ»‘åŠ¨çš„æ—¶å€™ä¼šè¢«ä¸Šæ–¹çš„Navigation Controllerï¼ˆNavigation Barï¼‰é®æŒ¡ä½ï¼Œå¯ä»¥æƒ³è±¡æ˜¯å¤šä¹ˆåƒè—•ã€‚åæ¥åœ¨æ»‘åŠ¨çš„æ—¶å€™åŠ¨æ€éšè—å’Œæ˜¾ç¤ºNavigation Barï¼Œå°±å‡ºç°äº†è¯¡å¼‚çš„ä¸Šé¢ä¸€æ•´æ¡é«˜åº¦ä¸º64pxçš„ç©ºç™½åŒºåŸŸï¼Œå‘ç°æ›´åƒè—•äº†â€¦</p>\n<p>ã€€ã€€æ‰€ä»¥åœ¨AlertControllerçš„å¯å‘ä¸‹ï¼Œå†³å®šç”¨UIWindowæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£å¦‚å·§ç¥<a href=\"https://book.douban.com/subject/26287173/\" target=\"_blank\" rel=\"external\">ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹</a>ä¸€ä¹¦çš„ç¬¬åäºŒç« æåŠï¼Œä½¿ç”¨UIWindowåœ¨æ‰€æœ‰Viewï¼ˆå½“ç„¶åŒ…æ‹¬å½“å‰Windowçš„Navigation Barï¼‰å‰å±•ç¤ºè‡ªå·±æƒ³è¦çš„å†…å®¹ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre><code class=\"objective-c\">- (void)viewDidLoad {\n    _window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n    _window.windowLevel = UIWindowLevelNormal;\n    _window.backgroundColor = [UIColor clearColor];\n    _window.hidden = YES;\n    BECDrawerView *view = [BECDrawerView new];\n    //çœç•¥å¯¹viewçš„ä¸€äº›åˆå§‹åŒ–ä»£ç \n    _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n    _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n    _leftView = view;\n    //ä¸€å¼€å§‹å…ˆæŠŠleftViewéšè—\n    _leftHidden = YES;\n    _leftView.hidden = _leftHidden;\n    [_window addSubview:_leftView];\n\n    UIScreenEdgePanGestureRecognizer *edgeGesture = [[UIScreenEdgePanGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightPanGesture:)];\n    edgeGesture.delegate = self;\n    edgeGesture.edges = UIRectEdgeLeft;\n    [self.view addGestureRecognizer:edgeGesture];\n}\n\n// æ‰‹åŠ¿äº‹ä»¶\n- (void)handleRightPanGesture:(UIPanGestureRecognizer *)panGesture\n{\n    CGPoint translation = [panGesture translationInView:_window];\n    if (translation.x &gt; 0 &amp;&amp; panGesture.state == UIGestureRecognizerStateEnded) {\n        [self popLeft];\n    }\n}\n\n// æ­¤å‡½æ•°ç”¨äºå¼¹å‡ºå·¦ä¾§æ»‘åŠ¨èœå•\n- (void)popLeft\n{\n    [self addLeftGestures];    //æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè¿™é‡Œä»£ç å°±ä¸è´´å‡ºäº†\n    [_window makeKeyWindow];\n    _window.hidden = NO;\n    [_window bringSubviewToFront:_leftView];\n\n    _leftHidden = !_leftHidden;\n\n    if (_leftHidden == YES) {\n        [self removeLeftGestures];\n        [_popview removeFromSuperview];\n        NSLog(@&quot;removed&quot;);\n        self.navigationController.navigationBar.hidden = NO;\n    }\n\n    else {\n        if (!_popview) {\n            self.popview = [UIView new];\n            _popview.backgroundColor = [UIColor clearColor];\n            _popview.frame = _window.frame;\n            [_window addSubview:_popview];\n            [_window insertSubview:_popview belowSubview:_leftView];\n        }\n        _popview.hidden = NO;\n        [_window addSubview:_popview];\n        [_window insertSubview:_popview belowSubview:_leftView];\n    }\n\n    CATransition *animation = [CATransition animation];\n    if (_leftHidden == NO) {\n        _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n        animation.type = kCATransitionMoveIn; // åŠ¨ç”»è¿‡æ¸¡ç±»å‹\n        animation.subtype = kCATransitionFromLeft; // åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = NO;\n    }else{\n        _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n        animation.type = kCATransitionPush;\n        animation.subtype = kCATransitionFromRight; //åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = YES;\n        NSLog(@&quot;%@&quot;,self.navigationController.navigationBar);\n    }\n    animation.duration = 0.3; // åŠ¨ç”»æŒç»­0.3s\n    // ä»£ç†ï¼ŒåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä¼šè°ƒç”¨delegateçš„animationDidStop:finished:\n    animation.delegate = self;\n    [_leftView.layer addAnimation:animation forKey:nil];\n\n}\n</code></pre>\n<h3 id=\"CHARMER-PROFILE\"><a href=\"#CHARMER-PROFILE\" class=\"headerlink\" title=\"CHARMER PROFILE\"></a>CHARMER PROFILE</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/f7cwa.jpg\" alt=\"Beauty_CollectionView\"></p>\n<p>ã€€ã€€æŠ€å¸ˆProfileé¡µé¢ï¼Œä¸ºä»€ä¹ˆä¼šæ‹¿å‡ºæ¥å†™ï¼Ÿï¼æ˜¯å› ä¸ºConllection Viewzåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸éå¸¸éå¸¸å¸¸è§ã€‚åŸºæœ¬æ¯ä¸ªAppéƒ½ä¼šç”¨åˆ°ï¼ˆTableViewæ˜¯ç‰¹æ®Šçš„Conllection Viewï¼‰ã€‚è¿™ä¸ªCollection Viewåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>\n<ol>\n<li>æœ€ä¸Šæ–¹çš„HeaderViewæ˜¯ä¸€ä¸ªè·‘é©¬ç¯ï¼Œä½¿ç”¨äº†ä¹‹å‰å†™è¿‡çš„ä¸€ä¸ªå°ç»„ä»¶<a href=\"https://github.com/objchris/EZRecycleImageView\" target=\"_blank\" rel=\"external\">EZRecycleImageView</a>ï¼Œåœ¨å¼€å‘ä¸­è¾¹ä½¿ç”¨è¾¹æ”¹è¿›æ˜¯æœ€å¥½ä¸è¿‡çš„äº‹æƒ…äº†ã€‚</li>\n<li>ç¬¬äºŒä¸ªHeaderæ˜¯æŠ€å¸ˆä¿¡æ¯å’Œä¸‰ä¸ªæŒ‰é’®</li>\n<li>æœ€åæ˜¯æœ€ä¸‹é¢çš„Viewï¼Œä¸‰ä¸ªæŒ‰é’®åˆ†åˆ«å¯¹åº”ä¸åŒçš„å†…å®¹ï¼Œç¬¬ä¸€äºŒä¸ªä½¿ç”¨çš„æ˜¯CollectionViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewï¼›æœ€åä¸€ä¸ªæ˜¯TableViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewã€‚</li>\n</ol>\n<p>ã€€ã€€Viewé‡Œé¢åµŒå…¥Viewçš„å¤æ‚ç»“æ„ä¹Ÿæ˜¯å¾ˆå€¼å¾—æŒæ¡çš„æ‰‹æ³•~</p>\n<p>ã€€ã€€è¿˜æœ‰å¾ˆå¤šå¼€å‘è¿‡ç¨‹ä¸­çš„ä»£ç å’Œè§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæ˜¯åˆ«äººçš„é¡¹ç›®ï¼Œéå¼€æºï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºå•¦~ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¿¡ä»°Open Sourcede der~~     </p>\n<p>ã€€ã€€æœ€åé™„ä¸Šä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼š</p>\n<pre><code>platform :ios, &quot;8.0&quot;\ntarget :Beauty do\npod &#39;SVProgressHUD&#39;, &#39;~&gt; 2.0.3&#39;\npod &#39;Masonry&#39;, &#39;~&gt; 1.0.2&#39;\npod &#39;AFNetworking&#39;, &#39;~&gt; 3.0&#39;\npod &#39;SDWebImage&#39;, &#39;~&gt;3.8&#39;\npod &#39;YYModel&#39;\npod &#39;IQKeyboardManager&#39;\npod &#39;GoogleMaps&#39;\npod &#39;MJRefresh&#39;\npod &quot;MWPhotoBrowser&quot;\npod &#39;JPush&#39;\npod &#39;PayPal-iOS-SDK&#39;\n\nend\n</code></pre><h2 id=\"æ€»ç»“ä¸åæ€\"><a href=\"#æ€»ç»“ä¸åæ€\" class=\"headerlink\" title=\"æ€»ç»“ä¸åæ€\"></a>æ€»ç»“ä¸åæ€</h2><ul>\n<li><p>å¥½çš„æ–¹é¢ï¼š</p>\n<ol>\n<li><p>ä¸€ä½å¥½Partnerï¼Œä¸€ä½ä¸€èµ·å¥‹æ–—çš„å¥½æœ‹å‹ã€‚</p>\n</li>\n<li><p>å¾ˆå¤šUIæ§ä»¶å’Œåº•å±‚å®ç°éƒ½æ¥è§¦åˆ°äº†ï¼ŒåŠ æ·±äº†å°è±¡ã€‚</p>\n</li>\n<li><p>çœŸæ­£æ¥è§¦å¹¶ä½¿ç”¨åˆ°ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥ååœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°é€‚ç”¨çš„æƒ…å†µå°±ä¸ä¼šå› ä¸ºæ— çŸ¥è€Œé‡å¤é€ è½®å­ï¼ˆå¯èƒ½è¿˜é€ ä¸å¥½â€¦.ï¼‰ã€‚</p>\n</li>\n<li><p>ç§¯ç´¯äº†ç»éªŒï¼Œè¿™ä¸ªAppç®—æ˜¯è‡ªå·±ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´å¼€å‘çš„Appã€‚æ•´ä¸ªå¼€å‘æµç¨‹è™½ç„¶æ²¡æœ‰å…¬å¸é¡¹ç›®é‚£ä¹ˆæ­£è§„ï¼Œä½†æ˜¯ä¸€äº›ç›¸å…³çš„æ–‡æ¡£ã€è¯´æ˜è¿˜æ˜¯ä¸ç¼ºçš„ã€‚</p>\n</li>\n</ol>\n</li>\n<li><p>ä¸å¥½çš„æ–¹é¢ï¼š</p>\n<ol>\n<li><p>é¦–å…ˆåœ¨æ¶æ„ä¸Šæ²¡æœ‰è€ƒè™‘å¥½ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿä¸æ˜¯å¯æ§çš„ã€‚ä¸€å¼€å§‹æ‹¿åˆ°çš„é¡¹ç›®ç»“æ„å·²ç»å®šå¥½ï¼Œæ²¡åŠæ³•æ›´æ”¹ï¼Œä¸”æ—¶é—´ä¹Ÿç´§ï¼Œæ— æ³•æ¨ç¿»ä¹‹å‰å†™è¿‡çš„ä»£ç é‡æ–°æ€è€ƒå’Œé‡å»ºã€‚</p>\n</li>\n<li><p>å…¶æ¬¡ï¼Œåœ¨å’ŒPartnerä¹‹é—´çš„æ²Ÿé€šè‡ªæˆ‘è§‰å¾—ä¸è¶³ï¼Œæˆ‘çš„è¢«åŠ¨æ˜¯æˆ‘è¿™æ¬¡å¼€å‘ä½“éªŒä¸€èˆ¬çš„é‡å¤§å¼•å­ã€‚æ„Ÿè§‰è‡ªå·±åšå¾—ä¸å¥½ï¼Œæœ‰ç‚¹å¯¹ä¸èµ·è‡ªå·±çš„Partnerã€‚</p>\n</li>\n<li><p>å®¢æˆ·çš„æœ‰äº›éœ€æ±‚å¼‚å¸¸åäººç±»ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘çš„æ„è§ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„åé¦ˆå’Œè§£å†³ã€‚éœ€æ±‚ç»å¸¸æ”¹åŠ¨ï¼Œä¸”æˆ‘çš„Partneræ‰æ˜¯å’Œå®¢æˆ·æ²Ÿé€šçš„ä¸­é—´è€…ï¼Œä¸èƒ½ç›´é¢å®¢æˆ·æˆ‘å¾ˆè‹¦æ¼ã€‚</p>\n</li>\n</ol>\n</li>\n</ul>\n","excerpt":"<p>ä¸‰æœˆåº•å¼€å§‹äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªå¤–åŒ…é¡¹ç›®â€œBeautyâ€ï¼ŒAppçš„åå­—æ˜¯â€œCHARMERâ€ï¼Œæ˜¯ä¸€ä¸ªä¿ƒè¿›ç¾å®¹æŠ€å¸ˆå’Œå®¢æˆ·ä¹‹é—´è¾¾æˆæœåŠ¡åè®®çš„Appï¼Œæ­å»ºä¾›æ±‚åŒæ–¹æ²Ÿé€šå’Œäº¤æ˜“çš„æ¡¥æ¢å’Œå¹³å°ã€‚åœ¨åšå®Œç¬¬ä¸€ç‰ˆä¹‹åï¼Œå‡ ä¹æ¯æ™šéƒ½éœ€è¦ä¿®æ”¹åŠŸèƒ½ä¿®å¤Bugï¼Œç°åœ¨çªç„¶é—´ä¸€æ®µæ—¶é—´æ²¡æœ‰äº†æ¶ˆæ¯ï¼Œåº”è¯¥ç®—æ˜¯å®Œç»“äº†ã€‚    </p>","more":"<p>2017-10-12 æ›´: é¡¹ç›®è¿è¥çƒ‚å°¾ï¼Œæœ€åå¥½åƒæ²¡æœ‰ä¸Šæ¶ï¼Œéš¾è¿‡ingâ€¦ :(</p>\n<h2 id=\"æ‰€åšçš„äº‹æƒ…\"><a href=\"#æ‰€åšçš„äº‹æƒ…\" class=\"headerlink\" title=\"æ‰€åšçš„äº‹æƒ…\"></a>æ‰€åšçš„äº‹æƒ…</h2><p>æ€»çš„æ¥è¯´ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªåŠŸèƒ½ï¼š</p>\n<ul>\n<li><p>ç”¨æˆ·ç«¯ï¼š</p>\n<ol>\n<li><p>é€šè¿‡Googleåœ°å›¾æŸ¥çœ‹å½“å‰é™„è¿‘ä¸”åœ¨çº¿çš„æŠ€å¸ˆ</p>\n</li>\n<li><p>æ·»åŠ ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨Paypalæ”¯ä»˜</p>\n</li>\n<li><p>æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯</p>\n</li>\n<li><p>å‘å¸ƒå…¬å…±è®¢å•ç»™æ¯ä¸ªç¾å®¹æŠ€å¸ˆï¼ŒæŠ€å¸ˆå¯ä»¥é€šè¿‡ç«æ ‡å¾—åˆ°è®¢å•</p>\n</li>\n<li><p>æŸ¥çœ‹æŠ€å¸ˆä¿¡æ¯ï¼Œæ”¶è—å–œçˆ±çš„æŠ€å¸ˆ</p>\n</li>\n<li><p>å‘å¸ƒç§æœ‰è®¢å•ç»™ç‰¹å®šæŠ€å¸ˆ</p>\n</li>\n<li><p>è®¢å•ç»“æŸè¯„ä»·ï¼Œæ‰“åˆ†ç­‰</p>\n</li>\n<li><p>æä¾›å…¶ä»–ç”¨æˆ·å’ŒæŠ€å¸ˆçš„ç”µè¯è”ç³»æ–¹å¼</p>\n</li>\n</ol>\n</li>\n<li><p>æŠ€å¸ˆç«¯ï¼š</p>\n<ol>\n<li><p>ç«æ ‡ç”¨æˆ·çš„å…¬å…±è®¢å•    </p>\n</li>\n<li><p>æ¥å—æˆ–æ‹’ç»ç”¨æˆ·çš„ç§æœ‰è®¢å•</p>\n</li>\n<li><p>æ·»åŠ é“¶è¡Œå¡ï¼Œå¾—åˆ°è®¢å•æŠ¥é…¬</p>\n</li>\n<li><p>æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼ŒæŸ¥çœ‹æ”¶å…¥æ•°æ®ï¼Œ</p>\n</li>\n<li><p>æäº¤å°é¢å›¾ç‰‡ï¼Œä½œå“å›¾ç‰‡</p>\n</li>\n<li><p>å¢åˆ æ”¹æŸ¥æœåŠ¡ä¿¡æ¯ã€ä»·æ ¼</p>\n<p>â€‹</p>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"ä¸€äº›å…·ä½“å®ç°\"><a href=\"#ä¸€äº›å…·ä½“å®ç°\" class=\"headerlink\" title=\"ä¸€äº›å…·ä½“å®ç°\"></a>ä¸€äº›å…·ä½“å®ç°</h2><p>ã€€ã€€åŸºæœ¬å®ç°ä¸‹æ¥éƒ½ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œæ‰€ä»¥æŒ‘ä¸€äº›å€¼å¾—è®°å½•çš„å†™ä¸‹æ¥ï¼š</p>\n<h3 id=\"é¡¹ç›®æ–‡ä»¶ç»“æ„\"><a href=\"#é¡¹ç›®æ–‡ä»¶ç»“æ„\" class=\"headerlink\" title=\"é¡¹ç›®æ–‡ä»¶ç»“æ„\"></a>é¡¹ç›®æ–‡ä»¶ç»“æ„</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/yjc6f.png\" alt=\"Beauty_é¡¹ç›®å¤§è‡´ç»“æ„\"></p>\n<p>ã€€ã€€å› ä¸ºAppæ˜¯ç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸ªModuleï¼Œéƒ½åˆ†æˆCharmerå’ŒUseråˆ†åˆ«å¯¹åº”æŠ€å¸ˆå’Œç”¨æˆ·ï¼Œå†åœ¨å…¶ä¸‹åˆ†ä¸ºModelã€Viewã€Controllerï¼Œå¾ˆå¸¸è§çš„MVCæ¶æ„ã€‚    </p>\n<p>ã€€ã€€è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œåˆ†ç±»æ¸…æ¥šï¼Œä¸€ä¸‹å­å°±èƒ½æ‰¾åˆ°éœ€è¦çš„æ–‡ä»¶ï¼ˆè™½ç„¶æœç´¢æ‰æ˜¯æœ€å¿«çš„&gt;w&lt;ï¼‰ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±å‡ºç°äº†ï¼Œå‰é¢æœ‰æåˆ°è¯´ï¼šç”¨æˆ·ä¸æŠ€å¸ˆç»Ÿä¸€å®¢æˆ·ç«¯ï¼Œé‚£å°±ä¸å…æœ‰ç•Œé¢ç›¸åŒçš„æƒ…å†µå‡ºç°ï¼Œè¿™æ¬¡å¼€å‘ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯å¤ç”¨æ‰€æœ‰ç›¸åŒçš„æ–‡ä»¶ï¼Œè¿™ä¸ªé”™è¯¯çš„å†³å®šè®©åæœŸç»´æŠ¤çš„æˆ‘ä¸€ç›´æƒ³ç‹ æ‰‡è‡ªå·±å˜´å·´ã€‚æ¯•ç«Ÿé¢å‘ä¸åŒçš„ä½¿ç”¨å›¢ä½“ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦å®šåˆ¶ï¼Œæ‰€ä»¥åæœŸåŠ æ–°éœ€æ±‚çš„æ—¶å€™åªèƒ½ä¸€ç›´if-elseï¼Œif-elseï¼Œif-elseã€‚æƒ¨ç»äººå¯°ï½      </p>\n<p>ã€€ã€€è§‰å¾—ï¼Œä»¥åå†æœ‰è¿™æ ·çš„æƒ…å†µå‡ºç°ï¼Œè§†ç±»çš„å¤æ‚ç¨‹åº¦å’Œæ–‡ä»¶çš„å¤§å°è€Œå®šï¼Œ å¯èƒ½ä¼šé‡å†™ä¸€ä¸ªåŒæ ·å®ç°çš„ç±»æ–‡ä»¶ï¼Œæ„Ÿè§‰è¿™æ¡çº¿å¾ˆéš¾ç•Œå®šï¼Œåªèƒ½é ä»¥åçš„å¼€å‘ç»éªŒå»æ…¢æ…¢å­¦ã€‚     </p>\n<h3 id=\"åœ°å›¾\"><a href=\"#åœ°å›¾\" class=\"headerlink\" title=\"åœ°å›¾\"></a>åœ°å›¾</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m8ev4.jpg\" alt=\"Beauty_Googleåœ°å›¾_å°\"></p>\n<p>ã€€ã€€å› ä¸ºAppå³å°†åœ¨é¦™æ¸¯ä¸Šçº¿ï¼Œè‡ªç„¶åœ°ä½¿ç”¨Googleåœ°å›¾ã€‚ç¬¬ä¸€æ¬¡ç”¨Googleåœ°å›¾åšå¼€å‘ï¼Œæ„Ÿè§‰è·Ÿç™¾åº¦ã€é«˜å¾·æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œ æœ‰ä¸€ç‚¹å°±æ˜¯ï¼šæ–‡æ¡£åŸºæœ¬åªæœ‰å®˜æ–¹æ–‡æ¡£ï¼Œé‡åˆ°é—®é¢˜è¦Googleï¼ŒåŸºæœ¬éƒ½æ˜¯è®²ç™¾åº¦æˆ–é«˜å¾·ã€‚å…³äºGoogleåœ°å›¾ï¼Œåé¢å†é‡æ–°å†™ç¯‡æ–‡ç« ä»‹ç»ï¼ŒåŒ…æ‹¬ä½¿ç”¨ï¼Œè‡ªå®šä¹‰Markerï¼ˆåœ°å›¾ä¸Šç´«è‰²çš„æ ‡å¿—ï¼‰ï¼ŒPopViewï¼ˆç‚¹å‡»Markerå¼¹å‡ºçš„Viewï¼‰     </p>\n<h3 id=\"å·¦ä¾§æ»‘åŠ¨èœå•\"><a href=\"#å·¦ä¾§æ»‘åŠ¨èœå•\" class=\"headerlink\" title=\"å·¦ä¾§æ»‘åŠ¨èœå•\"></a>å·¦ä¾§æ»‘åŠ¨èœå•</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/1h42p.jpg\" alt=\"Beauty_å·¦è¾¹æ \"></p>\n<p>ã€€ã€€å›¾ç‰‡å¥½åƒå‹ç¼©å¾—æœ‰ç‚¹è¿‡åˆ†äº†â€¦.</p>\n<p>ã€€ã€€ä¸€å¼€å§‹å·¦ä¾§æ»‘åŠ¨èœå•æ˜¯ä¸»ç•Œé¢Controllerçš„ä¸€ä¸ªViewï¼Œæ‰€ä»¥æ»‘åŠ¨çš„æ—¶å€™ä¼šè¢«ä¸Šæ–¹çš„Navigation Controllerï¼ˆNavigation Barï¼‰é®æŒ¡ä½ï¼Œå¯ä»¥æƒ³è±¡æ˜¯å¤šä¹ˆåƒè—•ã€‚åæ¥åœ¨æ»‘åŠ¨çš„æ—¶å€™åŠ¨æ€éšè—å’Œæ˜¾ç¤ºNavigation Barï¼Œå°±å‡ºç°äº†è¯¡å¼‚çš„ä¸Šé¢ä¸€æ•´æ¡é«˜åº¦ä¸º64pxçš„ç©ºç™½åŒºåŸŸï¼Œå‘ç°æ›´åƒè—•äº†â€¦</p>\n<p>ã€€ã€€æ‰€ä»¥åœ¨AlertControllerçš„å¯å‘ä¸‹ï¼Œå†³å®šç”¨UIWindowæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ­£å¦‚å·§ç¥<a href=\"https://book.douban.com/subject/26287173/\">ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹</a>ä¸€ä¹¦çš„ç¬¬åäºŒç« æåŠï¼Œä½¿ç”¨UIWindowåœ¨æ‰€æœ‰Viewï¼ˆå½“ç„¶åŒ…æ‹¬å½“å‰Windowçš„Navigation Barï¼‰å‰å±•ç¤ºè‡ªå·±æƒ³è¦çš„å†…å®¹ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre><code class=\"objective-c\">- (void)viewDidLoad {\n    _window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n    _window.windowLevel = UIWindowLevelNormal;\n    _window.backgroundColor = [UIColor clearColor];\n    _window.hidden = YES;\n    BECDrawerView *view = [BECDrawerView new];\n    //çœç•¥å¯¹viewçš„ä¸€äº›åˆå§‹åŒ–ä»£ç \n    _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n    _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n    _leftView = view;\n    //ä¸€å¼€å§‹å…ˆæŠŠleftViewéšè—\n    _leftHidden = YES;\n    _leftView.hidden = _leftHidden;\n    [_window addSubview:_leftView];\n\n    UIScreenEdgePanGestureRecognizer *edgeGesture = [[UIScreenEdgePanGestureRecognizer alloc] initWithTarget:self action:@selector(handleRightPanGesture:)];\n    edgeGesture.delegate = self;\n    edgeGesture.edges = UIRectEdgeLeft;\n    [self.view addGestureRecognizer:edgeGesture];\n}\n\n// æ‰‹åŠ¿äº‹ä»¶\n- (void)handleRightPanGesture:(UIPanGestureRecognizer *)panGesture\n{\n    CGPoint translation = [panGesture translationInView:_window];\n    if (translation.x &gt; 0 &amp;&amp; panGesture.state == UIGestureRecognizerStateEnded) {\n        [self popLeft];\n    }\n}\n\n// æ­¤å‡½æ•°ç”¨äºå¼¹å‡ºå·¦ä¾§æ»‘åŠ¨èœå•\n- (void)popLeft\n{\n    [self addLeftGestures];    //æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè¿™é‡Œä»£ç å°±ä¸è´´å‡ºäº†\n    [_window makeKeyWindow];\n    _window.hidden = NO;\n    [_window bringSubviewToFront:_leftView];\n\n    _leftHidden = !_leftHidden;\n\n    if (_leftHidden == YES) {\n        [self removeLeftGestures];\n        [_popview removeFromSuperview];\n        NSLog(@&quot;removed&quot;);\n        self.navigationController.navigationBar.hidden = NO;\n    }\n\n    else {\n        if (!_popview) {\n            self.popview = [UIView new];\n            _popview.backgroundColor = [UIColor clearColor];\n            _popview.frame = _window.frame;\n            [_window addSubview:_popview];\n            [_window insertSubview:_popview belowSubview:_leftView];\n        }\n        _popview.hidden = NO;\n        [_window addSubview:_popview];\n        [_window insertSubview:_popview belowSubview:_leftView];\n    }\n\n    CATransition *animation = [CATransition animation];\n    if (_leftHidden == NO) {\n        _leftView.frame = CGRectMake(0, 0, MYScreenWidth * 0.8, MYScreenHeight);\n        animation.type = kCATransitionMoveIn; // åŠ¨ç”»è¿‡æ¸¡ç±»å‹\n        animation.subtype = kCATransitionFromLeft; // åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = NO;\n    }else{\n        _leftView.center = CGPointMake(- MYScreenWidth * 0.4, _leftView.center.y);\n        animation.type = kCATransitionPush;\n        animation.subtype = kCATransitionFromRight; //åŠ¨ç”»è¿‡æ¸¡æ–¹å‘\n        _leftView.hidden = YES;\n        NSLog(@&quot;%@&quot;,self.navigationController.navigationBar);\n    }\n    animation.duration = 0.3; // åŠ¨ç”»æŒç»­0.3s\n    // ä»£ç†ï¼ŒåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä¼šè°ƒç”¨delegateçš„animationDidStop:finished:\n    animation.delegate = self;\n    [_leftView.layer addAnimation:animation forKey:nil];\n\n}\n</code></pre>\n<h3 id=\"CHARMER-PROFILE\"><a href=\"#CHARMER-PROFILE\" class=\"headerlink\" title=\"CHARMER PROFILE\"></a>CHARMER PROFILE</h3><p><img src=\"https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/f7cwa.jpg\" alt=\"Beauty_CollectionView\"></p>\n<p>ã€€ã€€æŠ€å¸ˆProfileé¡µé¢ï¼Œä¸ºä»€ä¹ˆä¼šæ‹¿å‡ºæ¥å†™ï¼Ÿï¼æ˜¯å› ä¸ºConllection Viewzåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸éå¸¸éå¸¸å¸¸è§ã€‚åŸºæœ¬æ¯ä¸ªAppéƒ½ä¼šç”¨åˆ°ï¼ˆTableViewæ˜¯ç‰¹æ®Šçš„Conllection Viewï¼‰ã€‚è¿™ä¸ªCollection Viewåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>\n<ol>\n<li>æœ€ä¸Šæ–¹çš„HeaderViewæ˜¯ä¸€ä¸ªè·‘é©¬ç¯ï¼Œä½¿ç”¨äº†ä¹‹å‰å†™è¿‡çš„ä¸€ä¸ªå°ç»„ä»¶<a href=\"https://github.com/objchris/EZRecycleImageView\">EZRecycleImageView</a>ï¼Œåœ¨å¼€å‘ä¸­è¾¹ä½¿ç”¨è¾¹æ”¹è¿›æ˜¯æœ€å¥½ä¸è¿‡çš„äº‹æƒ…äº†ã€‚</li>\n<li>ç¬¬äºŒä¸ªHeaderæ˜¯æŠ€å¸ˆä¿¡æ¯å’Œä¸‰ä¸ªæŒ‰é’®</li>\n<li>æœ€åæ˜¯æœ€ä¸‹é¢çš„Viewï¼Œä¸‰ä¸ªæŒ‰é’®åˆ†åˆ«å¯¹åº”ä¸åŒçš„å†…å®¹ï¼Œç¬¬ä¸€äºŒä¸ªä½¿ç”¨çš„æ˜¯CollectionViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewï¼›æœ€åä¸€ä¸ªæ˜¯TableViewï¼Œå³åœ¨CollectionViewä¸­å†åµŒå…¥CollectionViewã€‚</li>\n</ol>\n<p>ã€€ã€€Viewé‡Œé¢åµŒå…¥Viewçš„å¤æ‚ç»“æ„ä¹Ÿæ˜¯å¾ˆå€¼å¾—æŒæ¡çš„æ‰‹æ³•~</p>\n<p>ã€€ã€€è¿˜æœ‰å¾ˆå¤šå¼€å‘è¿‡ç¨‹ä¸­çš„ä»£ç å’Œè§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæ˜¯åˆ«äººçš„é¡¹ç›®ï¼Œéå¼€æºï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºå•¦~ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¿¡ä»°Open Sourcede der~~     </p>\n<p>ã€€ã€€æœ€åé™„ä¸Šä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼š</p>\n<pre><code>platform :ios, &quot;8.0&quot;\ntarget :Beauty do\npod &#39;SVProgressHUD&#39;, &#39;~&gt; 2.0.3&#39;\npod &#39;Masonry&#39;, &#39;~&gt; 1.0.2&#39;\npod &#39;AFNetworking&#39;, &#39;~&gt; 3.0&#39;\npod &#39;SDWebImage&#39;, &#39;~&gt;3.8&#39;\npod &#39;YYModel&#39;\npod &#39;IQKeyboardManager&#39;\npod &#39;GoogleMaps&#39;\npod &#39;MJRefresh&#39;\npod &quot;MWPhotoBrowser&quot;\npod &#39;JPush&#39;\npod &#39;PayPal-iOS-SDK&#39;\n\nend\n</code></pre><h2 id=\"æ€»ç»“ä¸åæ€\"><a href=\"#æ€»ç»“ä¸åæ€\" class=\"headerlink\" title=\"æ€»ç»“ä¸åæ€\"></a>æ€»ç»“ä¸åæ€</h2><ul>\n<li><p>å¥½çš„æ–¹é¢ï¼š</p>\n<ol>\n<li><p>ä¸€ä½å¥½Partnerï¼Œä¸€ä½ä¸€èµ·å¥‹æ–—çš„å¥½æœ‹å‹ã€‚</p>\n</li>\n<li><p>å¾ˆå¤šUIæ§ä»¶å’Œåº•å±‚å®ç°éƒ½æ¥è§¦åˆ°äº†ï¼ŒåŠ æ·±äº†å°è±¡ã€‚</p>\n</li>\n<li><p>çœŸæ­£æ¥è§¦å¹¶ä½¿ç”¨åˆ°ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥ååœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°é€‚ç”¨çš„æƒ…å†µå°±ä¸ä¼šå› ä¸ºæ— çŸ¥è€Œé‡å¤é€ è½®å­ï¼ˆå¯èƒ½è¿˜é€ ä¸å¥½â€¦.ï¼‰ã€‚</p>\n</li>\n<li><p>ç§¯ç´¯äº†ç»éªŒï¼Œè¿™ä¸ªAppç®—æ˜¯è‡ªå·±ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´å¼€å‘çš„Appã€‚æ•´ä¸ªå¼€å‘æµç¨‹è™½ç„¶æ²¡æœ‰å…¬å¸é¡¹ç›®é‚£ä¹ˆæ­£è§„ï¼Œä½†æ˜¯ä¸€äº›ç›¸å…³çš„æ–‡æ¡£ã€è¯´æ˜è¿˜æ˜¯ä¸ç¼ºçš„ã€‚</p>\n</li>\n</ol>\n</li>\n<li><p>ä¸å¥½çš„æ–¹é¢ï¼š</p>\n<ol>\n<li><p>é¦–å…ˆåœ¨æ¶æ„ä¸Šæ²¡æœ‰è€ƒè™‘å¥½ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿä¸æ˜¯å¯æ§çš„ã€‚ä¸€å¼€å§‹æ‹¿åˆ°çš„é¡¹ç›®ç»“æ„å·²ç»å®šå¥½ï¼Œæ²¡åŠæ³•æ›´æ”¹ï¼Œä¸”æ—¶é—´ä¹Ÿç´§ï¼Œæ— æ³•æ¨ç¿»ä¹‹å‰å†™è¿‡çš„ä»£ç é‡æ–°æ€è€ƒå’Œé‡å»ºã€‚</p>\n</li>\n<li><p>å…¶æ¬¡ï¼Œåœ¨å’ŒPartnerä¹‹é—´çš„æ²Ÿé€šè‡ªæˆ‘è§‰å¾—ä¸è¶³ï¼Œæˆ‘çš„è¢«åŠ¨æ˜¯æˆ‘è¿™æ¬¡å¼€å‘ä½“éªŒä¸€èˆ¬çš„é‡å¤§å¼•å­ã€‚æ„Ÿè§‰è‡ªå·±åšå¾—ä¸å¥½ï¼Œæœ‰ç‚¹å¯¹ä¸èµ·è‡ªå·±çš„Partnerã€‚</p>\n</li>\n<li><p>å®¢æˆ·çš„æœ‰äº›éœ€æ±‚å¼‚å¸¸åäººç±»ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘çš„æ„è§ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„åé¦ˆå’Œè§£å†³ã€‚éœ€æ±‚ç»å¸¸æ”¹åŠ¨ï¼Œä¸”æˆ‘çš„Partneræ‰æ˜¯å’Œå®¢æˆ·æ²Ÿé€šçš„ä¸­é—´è€…ï¼Œä¸èƒ½ç›´é¢å®¢æˆ·æˆ‘å¾ˆè‹¦æ¼ã€‚</p>\n</li>\n</ol>\n</li>\n</ul>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cjfki12ao0000cqy8yiggb46n","tag_id":"cjfki12av0003cqy8i0hlk7g1","_id":"cjfki12b20008cqy8d8fw7qlq"},{"post_id":"cjfki12at0002cqy86pbdojhs","tag_id":"cjfki12b10007cqy8qow317zn","_id":"cjfki12b9000dcqy8z99qc8d0"},{"post_id":"cjfki12b6000acqy8svxuh4ib","tag_id":"cjfki12b10007cqy8qow317zn","_id":"cjfki12ba000fcqy85ey41ajq"},{"post_id":"cjfki12ax0004cqy8cb0efvhg","tag_id":"cjfki12av0003cqy8i0hlk7g1","_id":"cjfki12bc000icqy8e9t6x6p2"},{"post_id":"cjfki12az0005cqy8k08cnixm","tag_id":"cjfki12ba000gcqy8yugfrxox","_id":"cjfki12be000mcqy80essfrss"},{"post_id":"cjfki12bd000jcqy84k015rkx","tag_id":"cjfki12b10007cqy8qow317zn","_id":"cjfki12bf000ncqy8e3h41hou"},{"post_id":"cjfki12b00006cqy8k1cc0pq6","tag_id":"cjfki12bd000kcqy83d0upzua","_id":"cjfki12bg000pcqy812psw7rm"},{"post_id":"cjfki12b20009cqy8e9oq7lsn","tag_id":"cjfki12bf000ocqy8zzt1xf0v","_id":"cjfki12bh000rcqy8xz8r9sth"},{"post_id":"cjfki12b8000ccqy8pvq6w5yb","tag_id":"cjfki12bd000kcqy83d0upzua","_id":"cjfki12bi000tcqy84gwxq1z4"},{"post_id":"cjfki12b9000ecqy8asztft6a","tag_id":"cjfki12bi000scqy8wkrquv09","_id":"cjfki12bi000vcqy8lvod0oih"},{"post_id":"cjfki12bb000hcqy8py5pun6i","tag_id":"cjfki12bi000ucqy8tp2nunqq","_id":"cjfki12bi000xcqy8svdspncg"},{"post_id":"cjfki12be000lcqy8atzoa1au","tag_id":"cjfki12bi000wcqy8bpmlbimq","_id":"cjfki12bj000ycqy8zzbuw0uu"}],"Tag":[{"name":"UIView","_id":"cjfki12av0003cqy8i0hlk7g1"},{"name":"Mood","_id":"cjfki12b10007cqy8qow317zn"},{"name":"Animation","_id":"cjfki12ba000gcqy8yugfrxox"},{"name":"Thread","_id":"cjfki12bd000kcqy83d0upzua"},{"name":"Library","_id":"cjfki12bf000ocqy8zzt1xf0v"},{"name":"Block","_id":"cjfki12bi000scqy8wkrquv09"},{"name":"Security","_id":"cjfki12bi000ucqy8tp2nunqq"},{"name":"Summary","_id":"cjfki12bi000wcqy8bpmlbimq"}]}}