<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Chris Cheungâ€™s blog | iOS | Design | Mood">
    

    <!--Author-->
    
        <meta name="author" content="é˜¿æ¾¤">
    

    <!-- Title -->
    
    <title>iOSè„šæœ¬æ‰“åŒ… - xcodebuild | CHILDHOOD</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Highlight Code-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/atom-one-light.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/content.css">
    <link rel="stylesheet" href="/css/component.css">
    <link rel="stylesheet" href="/css/search.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <link rel="shortcut icon" href="/favicon.png">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-home"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>iOSè„šæœ¬æ‰“åŒ… - xcodebuild</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>xcodebuildå’Œxcrunæ˜¯Xcodeä¸ºå¼€å‘è€…æä¾›çš„ä¸€å¥—æ„å»ºæ‰“åŒ…çš„å‘½ä»¤ã€‚ä½¿ç”¨å®ƒä»¬ç¼–å†™è„šæœ¬ï¼Œå¯ä»¥å®ç°é€šè¿‡è„šæœ¬è‡ªåŠ¨åŒ–æ‰“åŒ…çš„åŠŸèƒ½ã€‚æœ¬æ–‡åŸºäºXcode9ï¼Œxcrunçš„æ‰“åŒ…å·¥å…·è¢«ç§»é™¤ï¼Œå› æ­¤ç¬”è€…ä¸»è¦ä½¿ç”¨xcodebuildæ¥å®Œæˆæ‰“åŒ…å·¥ä½œã€‚</p>
<a id="more"></a>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯æäº¤ç»™æµ‹è¯•éƒ¨æµ‹è¯•è¿˜æ˜¯æœ€ç»ˆæ‰“åŒ…ä¸Šçº¿ï¼Œéƒ½éœ€è¦å°†å·¥ç¨‹æ‰“åŒ…æˆipaæ–‡ä»¶ï¼Œé€šå¸¸æˆ‘ä»¬æ˜¯é€‰å®šSchemeï¼Œç„¶ååœ¨Xcodeä¸­ç‚¹å‡»ã€Project - Archiveã€ï¼Œå½“æ•´ä¸ªå·¥ç¨‹ archive åï¼Œåœ¨è‡ªåŠ¨å¼¹å‡ºçš„ ã€Organizerã€ ä¸­ç‚¹å‡»ã€Exportã€ï¼Œé€‰æ‹©Ad Hocæˆ–App Storeï¼Œé€‰æ‹©è¯ä¹¦æˆ–è‡ªåŠ¨ç­¾åï¼Œç­‰å¾…åœˆåœˆè½¬å®Œï¼Œå¯¼å‡ºåˆ°æŒ‡å®šä½ç½®ï¼Œæ‰èƒ½å¾—åˆ°é‡Œé¢çš„ipaæ–‡ä»¶ã€‚è™½ç„¶Xcodeå®Œç¾åœ°å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸€é¡¹å·¥ä½œï¼Œä½†å…¶ä¸­æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç‚¹å‡»5~6æ¬¡ã€‚è€Œä½¿ç”¨è„šæœ¬æ¥æ„å»ºæ‰“åŒ…ï¼Œå°±åªéœ€è¦ä¸€ä¸ªå‘½ä»¤è¿è¡Œè„šæœ¬ï¼Œåœ¨ç­‰å¾…è„šæœ¬è¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶è¿›è¡Œå…¶ä»–çš„å·¥ä½œã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡åŸºäºXcode9</p>
</blockquote>
<h2 id="xcodebuild"><a href="#xcodebuild" class="headerlink" title="xcodebuild"></a>xcodebuild</h2><blockquote>
<p>xcodebuild builds one or more targets contained in an Xcode project, or builds a scheme contained in an Xcode workspace or Xcode project.</p>
</blockquote>
<p><code>xcodebuild</code>æ˜¯æ„å»ºå·¥å…·ï¼Œå¯ä»¥å°†å·¥ç¨‹ä¸­çš„targetæˆ–schemeç¼–è¯‘ã€é“¾æ¥æˆ.appæ–‡ä»¶ã€‚è¦ä½¿ç”¨<code>xcodebuild</code>ï¼Œéœ€è¦åœ¨<code>.xcodeproj</code>å­˜æ”¾çš„æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>man</code>æ¥æŸ¥çœ‹<code>xcodebuild</code>ï¼Œå¯ä»¥çœ‹åˆ°è¯¥å‘½ä»¤æä¾›äº†ä¸€äº›å¸¸ç”¨æ¦‚è¦( <em>SYNOPSIS</em> )ï¼š</p>
<pre><code class="shell">xcodebuild [-project name.xcodeproj]
           [[-target targetname] ... | -alltargets]
           [-configuration configurationname]
           [-sdk [sdkfullpath | sdkname]] [action ...]
           [buildsetting=value ...] [-userdefault=value ...]

xcodebuild [-project name.xcodeproj] -scheme schemename
           [[-destination destinationspecifier] ...]
           [-destination-timeout value]
           [-configuration configurationname]
           [-sdk [sdkfullpath | sdkname]] [action ...]
           [buildsetting=value ...] [-userdefault=value ...]

xcodebuild -workspace name.xcworkspace -scheme schemename
           [[-destination destinationspecifier] ...]
           [-destination-timeout value]
           [-configuration configurationname]
           [-sdk [sdkfullpath | sdkname]] [action ...]
           [buildsetting=value ...] [-userdefault=value ...]

xcodebuild -version [-sdk [sdkfullpath | sdkname]] [infoitem]

xcodebuild -showsdks

xcodebuild -showBuildSettings
           [-project name.xcodeproj | [-workspace name.xcworkspace -scheme schemename]]

xcodebuild -list [-project name.xcodeproj | -workspace name.xcworkspace]

xcodebuild -exportArchive -archivePath xcarchivepath -exportPath
                destinationpath -exportOptionsPlist path

xcodebuild -exportLocalizations -project name.xcodeproj -localizationPath path [[-exportLanguage language] ...]

xcodebuild -importLocalizations -project name.xcodeproj -localizationPath path
</code></pre>
<p>å‰ä¸‰æ¡æŒ‡ä»¤æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œå…¶ä¸­æ¶‰åŠå¾ˆå¤šå‚æ•°ï¼š</p>
<ul>
<li>-projectï¼šæŒ‡å®šè¦æ„å»ºçš„projectï¼Œå½“æ–‡ä»¶å¤¹ä¸­æœ‰å¤šä¸ª<code>.xcodeproj</code>æ–‡ä»¶æ—¶éœ€è¦æŒ‡å®šã€‚</li>
<li>-targetï¼šæŒ‡å®šæ„å»ºå“ªä¸€ä¸ªtargetã€‚é»˜è®¤åœ°ï¼Œè‹¥ä¸æŒ‡å®šæ­¤å‚æ•°ï¼Œxcodebuildæ„å»ºå·¥ç¨‹ä¸­çš„ç¬¬ä¸€ä¸ªtargetã€‚</li>
<li>-alltargetsï¼šæ„å»ºæ‰€æœ‰targetã€‚</li>
<li>-workspaceï¼šå¦‚æœè¦æ„å»ºä¸€ä¸ªworkspaceï¼ˆä¾‹å¦‚ä½¿ç”¨cocoapodsç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ–æ–‡ä»¶ï¼‰ï¼Œåˆ™éœ€è¦æŒ‡å®šworkspaceï¼Œå½“ç„¶åç¼€å°±æ˜¯<code>.xcworkspace</code>ã€‚</li>
<li>-schemeï¼šæ„å»ºworkspaceï¼Œè¿˜å¿…é¡»æŒ‡å®šschemeï¼Œä½¿ç”¨æ­¤å‚æ•°ã€‚</li>
<li>-destinationï¼šæŒ‡å®šè®¾å¤‡ï¼Œå¦‚ï¼š<code>&#39;platform=OS X,arch=x86_64&#39;</code>æŒ‡ä»£å½“å‰Macæˆ–<code>generic/platform=iOS</code>æŒ‡å®šGeneric iOS deviceã€‚</li>
<li>-destination-timeoutï¼šæœç´¢æŒ‡å®šè®¾å¤‡è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤30Sã€‚</li>
<li>-configurationï¼šå¦‚æœå·¥ç¨‹ä¸­æ²¡æœ‰æ·»åŠ å…¶ä»–é…ç½®ï¼Œé»˜è®¤å°±æ˜¯Debugå’ŒReleaseè¿™ä¸¤ä¸ªç‰ˆæœ¬ã€‚æ²¡æœ‰æŒ‡å®šæ­¤å‚æ•°å’Œschemeå‚æ•°ï¼Œåˆ™é»˜è®¤ä¸ºReleaseç‰ˆæœ¬ã€‚</li>
<li>-archï¼šæŒ‡å®šæ¶æ„armv7ã€armv7sã€arm64ç­‰ã€‚</li>
<li>-sdkï¼šæŒ‡å®šæ„å»ºä½¿ç”¨çš„sdkï¼Œåè·Ÿsdkçš„ç»å¯¹è·¯å¾„æˆ–sdkåç§°ï¼Œå¯é€šè¿‡<code>xcodebuild -showsdks</code>æŸ¥çœ‹ã€‚</li>
<li>-listï¼šæŸ¥çœ‹å·¥ç¨‹çš„targetã€configurationã€schemeã€‚</li>
</ul>
<p>æˆ‘ä»¬å¸¸ç”¨<code>xcodebuild</code>æ¥æ„å»ºé¡¹ç›®ï¼Œå¾—åˆ°.appæ–‡ä»¶ï¼Œä½†å…¶å®ï¼Œ<code>xcodebuild</code>ä¹Ÿèƒ½æ‰“åŒ…å‡ºæˆ‘ä»¬éœ€è¦çš„.ipaæ–‡ä»¶ï¼Œè¿™å°±éœ€è¦äº†è§£å¤šä»¥ä¸‹å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å‚æ•°ï¼š</p>
<ul>
<li>-exportArchiveï¼šarchiveåå¯¼å‡ºï¼Œéœ€è¦-exportFormatï¼Œ-archivePathå’Œ-exportPathä¸‰ä¸ªå‚æ•°</li>
<li>-exportFormatï¼šæŒ‡å®šæ ¼å¼ä¸ºpkgï¼ˆmacOSï¼‰æˆ–ipaï¼ˆiOSï¼‰çš„ä¸€ç§</li>
<li>-archivePathï¼šæŒ‡å®šarchiveæ–‡ä»¶çš„åœ°å€ï¼Œå°†æ­¤<code>.xcarchive</code>æ‰“åŒ…æˆipa</li>
<li>-exportPathï¼šæœ€åè¾“å‡ºæ–‡ä»¶ipaæ‰€åœ¨çš„<strong>æ–‡ä»¶å¤¹</strong>ã€<strong>æ–‡ä»¶å¤¹</strong>ã€<strong>æ–‡ä»¶å¤¹</strong>ã€‚ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼‰</li>
<li>-exportOptionsPlistï¼šplistæ–‡ä»¶ï¼Œå…¶ä¸­å®šä¹‰äº†å°†<code>.xcarchive</code>å¯¼å‡ºæˆipaæ‰€éœ€è¦çš„é…ç½®å‚æ•°ã€‚åé¢ä¼šè¯´åˆ°ã€‚</li>
</ul>
<p><code>xcodebuild</code>è¿˜èƒ½è¿›è¡Œå„ç§æ“ä½œï¼ŒæŒ‘é€‰ä¸€äº›å¸¸ç”¨çš„æ¥è®²ï¼š</p>
<ul>
<li>buildï¼šæ„å»ºï¼Œé»˜è®¤æ“ä½œã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºbuildï¼Œå°†ä¼šåœ¨<code>SYMROOT</code>ä¸­ç”Ÿæˆæ–‡ä»¶å¤¹<code>[configuration]-iphones</code>çš„æ–‡ä»¶å¤¹ï¼ˆconfigurationè§ä¸Šè¿°å‚æ•°ä»‹ç»ï¼‰ã€‚å…¶ä¸­æœ‰é¡¹ç›®ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“çš„frameworkã€<code>.app</code>æ–‡ä»¶ã€<code>.dSYM</code>æ–‡ä»¶ã€‚</li>
<li>archiveï¼šå¯¹åº”Xcodeä¸­çš„Archiveï¼Œåœ¨buildçš„åŸºç¡€ä¸Šè¿˜å°†ç”Ÿæˆ<code>.xcarchive</code>æ–‡ä»¶ã€‚</li>
<li>cleanï¼šå¯¹åº”Xcodeä¸­çš„cleanï¼Œåˆ é™¤ä¸Šæ¬¡æ„å»ºè¿‡ç¨‹äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶ã€‚</li>
</ul>
<h2 id="xcrun"><a href="#xcrun" class="headerlink" title="xcrun"></a>xcrun</h2><pre><code class="shell">xcrun -sdk iphoneos PackageApplication &quot;./Release-iphoneos/${APP_NAME}.app&quot; -o ~/&quot;${IPANAME}&quot;
</code></pre>
<p>xcrunæ›´å¤šåœ°ç”¨æ¥å°†appæ–‡ä»¶æ‰“åŒ…åˆ°ipaä¸­ï¼Œå¾—ä»¥å®‰è£…åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Šã€‚å…¶ä¸­ä½¿ç”¨åˆ° <em>PackageApplication</em> è¿™ä¸ªå·¥å…·ï¼Œå‘½ä»¤ä¹Ÿç›¸å¯¹ç®€å•ï¼Œå°±ä¸å¤šè¯´äº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä»Xcode8.3å¼€å§‹ï¼Œ<em>PackageApplication</em> ä»å¼€å‘å·¥å…·ä¸­è¢«ç§»é™¤ï¼Œå› æ­¤æˆ‘ä»¬ç”¨æ¥å°†.appæ‰“åŒ…æˆipaæœ€å¸¸ç”¨çš„<code>xcrun</code>æŒ‡ä»¤ä¹Ÿå˜å¾—ä¸å¥½ç”¨äº†ã€‚å½“ç„¶å¯ä»¥ä»æ—§ç‰ˆæœ¬çš„Xcodeä¸­å°† <em>PackageApplication</em> æ‹·è´ä¸€ä»½æ”¾åœ¨æ–°çš„Xcodeä¸­ï¼Œè®© <em>PackageApplication</em> ç»§ç»­å‘å…‰å‘çƒ­ã€‚è¯·è§<a href="https://stackoverflow.com/questions/43068608/xcrun-error-unable-to-find-utility-packageapplication-not-a-developer-tool" target="_blank" rel="external">stackoverflow</a>ã€‚</p>
<p>ä¸è¿‡ä½¿ç”¨<code>xcrun</code>è¿˜å¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šå½“è§£å‹ipaåï¼Œä½ ä¼šå‘ç°ï¼Œåœ¨appæ–‡ä»¶ä¸­ï¼Œ<code>Payload</code>æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œä½†æ˜¯<code>BCSymbolMaps</code>ã€<code>SwiftSupport</code> å’Œ<code>Symbols</code>å´æ‰¾ä¸åˆ°äº†ï¼Œè¿™æœ‰å¯èƒ½ä¼šåœ¨æäº¤åˆ°App Storeçš„æ—¶å€™å‡ºç°é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ä»Xcodeä¸­Export xcarchiveåˆ™ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œè¯´æ˜å•çº¯ä½¿ç”¨xcrunçš„æ‰“åŒ…æ—§å‘½ä»¤å·²ç»ä¸è¢«å»ºè®®ä½¿ç”¨äº†ã€‚</p>
<h2 id="DemonstrationğŸŒ°"><a href="#DemonstrationğŸŒ°" class="headerlink" title="DemonstrationğŸŒ°"></a>DemonstrationğŸŒ°</h2><p>ç¬”è€…åœ¨ä½¿ç”¨è„šæœ¬æ‰“åŒ…çš„æ—¶å€™èˆå¼ƒäº†xcrunï¼Œç›´æ¥ç”¨xcodebuildæ¥å®Œæˆå·¥ä½œï¼Œæä¾›ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="shell"># å·¥ç¨‹å
APP_NAME=&quot;KeyX_iOS&quot;
# info.plistè·¯å¾„
PROJECT_INFOPLIST_PATH=&quot;./${APP_NAME}/Supporting Files/Info.plist&quot;
# exportOptions.plistè·¯å¾„
EXPORT_PLIST=&quot;./KeyXExportOptions.plist&quot;
echo &quot;==============some message==============&quot;
echo &quot;info.plistè·¯å¾„ = ${PROJECT_INFOPLIST_PATH}&quot;
# å–ç‰ˆæœ¬å·
BUNDLE_SHORT_VERSION=$(/usr/libexec/PlistBuddy -c &quot;print CFBundleShortVersionString&quot; &quot;${PROJECT_INFOPLIST_PATH}&quot;)
echo &quot;ç‰ˆæœ¬å· = ${BUNDLE_SHORT_VERSION}&quot;
# å–buildå€¼
BUNDLE_VERSION=$(/usr/libexec/PlistBuddy -c &quot;print CFBundleVersion&quot; &quot;${PROJECT_INFOPLIST_PATH}&quot;)
echo &quot;å¼€å‘ç‰ˆæœ¬ = ${BUNDLE_VERSION}&quot;
DATE=&quot;$(date +%Y%m%d)&quot;
IPA_NAME=&quot;${APP_NAME}_V${BUNDLE_SHORT_VERSION}.${BUNDLE_VERSION}_${DATE}.ipa&quot;
# ipaæ–‡ä»¶è·¯å¾„ï¼Œä¿å­˜èµ·æ¥ä»¥ä¾¿åé¢ä½¿ç”¨
IPA_PATH=&quot;$PWD/${IPA_NAME}&quot;
echo &quot;è¦ä¸Šä¼ çš„ipaæ–‡ä»¶è·¯å¾„ = ${IPA_PATH}&quot;
echo &quot;${IPA_PATH}&quot;&gt;&gt; ipa_path
# ä¸‹é¢3è¡Œæ˜¯é›†æˆæœ‰Cocopodsçš„ç”¨æ³•
echo &quot;=============pod install===============&quot;
pod install

echo &quot;================clean==================&quot;
xcodebuild \
    -workspace &quot;${APP_NAME}.xcworkspace&quot; \
    -scheme &quot;${APP_NAME}&quot;  \
    -configuration &#39;Release&#39; \
    clean

echo &quot;===============archive=================&quot;
xcodebuild \
    -workspace &quot;${APP_NAME}.xcworkspace&quot; \
    -scheme &quot;${APP_NAME}&quot; \
    -sdk iphoneos \
    -configuration &#39;Release&#39; \
    -archivePath &quot;${APP_NAME}.xcarchive&quot; \
    PROVISIONING_PROFILE_SPECIFIER=&quot;PROVISIONING_PROFILE_NAME_OR_ID&quot; \
    DEVELOPMENT_TEAM=&quot;TEAMID&quot; \
    -allowProvisioningUpdates \
    SYMROOT=&#39;$PWD&#39; \
    archive

# å°†appæ‰“åŒ…æˆipa
echo &quot;================export=================&quot;
xcodebuild \
    -exportArchive \
    -archivePath &quot;${APP_NAME}.xcarchive&quot; \
    -exportOptionsPlist &quot;${EXPORT_PLIST}&quot; \
    -exportPath &quot;$PWD&quot;

# å°†ipaçš„åç§°ä¿®æ”¹æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„åç§° IPA_NAME
mv &quot;${APP_NAME}.ipa&quot; &quot;${IPA_NAME}&quot;
</code></pre>
<p>éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p>
<ol>
<li>archiveå‰cleanæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ï¼Œæ¸…é™¤ä¸Šæ¬¡æ„å»ºå½¢æˆçš„ä¸­é—´æ–‡ä»¶ã€‚</li>
<li>archiveæ—¶é…ç½®äº†<code>PROVISIONING_PROFILE_SPECIFIER</code>å’Œ<code>DEVELOPMENT_TEAM</code>ï¼Œç”¨äºæŒ‡å®šarchiveçš„ç­¾åä½¿ç”¨çš„è¯ä¹¦ï¼Œéœ€è¦ä½¿ç”¨developmentç”¨çš„ppæ–‡ä»¶ï¼Œä¸å¯ä»¥ç”¨app storeæˆ–ad-hocçš„ã€‚</li>
<li>ç¬¬2ç‚¹ä¸­é‚£ä¸¤ä¸ªé…ç½®ï¼Œå¦‚æœå»æ‰ï¼Œåˆ™é»˜è®¤ä¸ºautomaticè‡ªåŠ¨ç­¾åã€‚æ­¤æ—¶éœ€è¦åœ¨Xcodeçš„<code>Target-&gt;Signing-&gt;Automaticall manage signing</code>æ‰“å‹¾å¹¶ç¡®ä¿é…ç½®æ— è¯¯ã€‚</li>
<li>è¿˜æ˜¯ç¬¬2ç‚¹çš„é…ç½®ï¼Œåœ¨å‘½ä»¤ä¸­å¯ä»¥é…ç½®çš„å‘½ä»¤è¯·è§<a href="https://help.apple.com/xcode/mac/current/#/itcaec37c2a6?sub=dev186481df2" target="_blank" rel="external">è¿™é‡Œ</a></li>
<li><code>allowProvisioningUpdates</code>æ˜¯Xcode9æ‰å¼•å…¥çš„ï¼Œå…è®¸xcodebuildè‡ªåŠ¨æ›´æ–°Provisioning profileç­‰ã€‚</li>
</ol>
<h3 id="exportOptionsPlist"><a href="#exportOptionsPlist" class="headerlink" title="exportOptionsPlist"></a>exportOptionsPlist</h3><p>ExportOptions.plistå­˜åœ¨å¾ˆä¹…äº†ï¼Œåªæ˜¯ä¸€ç›´æ²¡æœ‰è¢«æ‹¿æ¥ä½¿ç”¨ã€‚åœ¨xcodebuildæ‰“åŒ…çš„æ—¶å€™ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šExportOptions.plistçš„ä½ç½®ï¼Œç”¨æ¥å‘Šè¯‰xcodebuildæ€ä¹ˆå°†xcarchiveæ–‡ä»¶æ‰“åŒ…ã€‚</p>
<p>ä¸‹é¢æ˜¯ç¬”è€…æ‰€ä½¿ç”¨çš„plistæ–‡ä»¶ï¼š</p>
<p><img src="https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/gq8g9.png" alt=""></p>
<p>provisioningProfilesä¸­ï¼Œkeyæ˜¯bundleidï¼Œvalueæ˜¯å¯¹åº”çš„provisioningProfileçš„åç§°æˆ–IDã€‚</p>
<p>æœ‰å“ªäº›é”®å¯ä»¥é€šè¿‡<code>xcodebuild -help</code>ï¼Œç„¶åæ‹‰åˆ°æœ€ä¸‹é¢æŸ¥çœ‹ã€‚</p>
<p><img src="https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/l89oh.png" alt=""></p>
<p>å¦‚æœè¿˜æ˜¯è§‰å¾—åˆ›å»ºéº»çƒ¦ï¼Œå¯ä»¥å…ˆåœ¨Xcodeä¸­æ‰‹åŠ¨æ‰“åŒ…ä¸€éï¼Œåœ¨Exportåçš„æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°<code>ExportOptions.plist</code>ï¼Œè¿™å°±æ˜¯é€‚ç”¨äºé¡¹ç›®çš„plistæ–‡ä»¶äº†ã€‚</p>
<h2 id="Problem-Shotting"><a href="#Problem-Shotting" class="headerlink" title="Problem Shotting"></a>Problem Shotting</h2><p>ç¼–å†™æ­¤ç« èŠ‚ï¼Œæ˜¯ä¸ºäº†è®°å½•æ‰“åŒ…æ—¶å‡ºç°çš„é”™è¯¯ï¼Œé•¿æœŸæ›´æ–°ï¼š</p>
<h3 id="1-ipatool-json-filepath-XXXXXX-â€œNo-valueâ€"><a href="#1-ipatool-json-filepath-XXXXXX-â€œNo-valueâ€" class="headerlink" title="1.ipatool-json-filepath-XXXXXX â€œNo valueâ€."></a>1.ipatool-json-filepath-XXXXXX â€œNo valueâ€.</h3><p><img src="https://oaoa-1256157051.cos.ap-guangzhou.myqcloud.com/blog/m5j01.png" alt=""></p>
<p>ç¬”è€…é‡åˆ°æ­¤é—®é¢˜çš„æ—¶å€™ï¼Œæ˜¯å› ä¸ºarchiveå¤±è´¥ï¼Œä½†æ˜¯è·¯å¾„ä¸­è¿˜æ˜¯å‡ºç°äº†<code>.xcarchive</code>æ–‡ä»¶ï¼Œç»§ç»­å¾€ä¸‹exportçš„æ—¶å€™å°±æŠ¥é”™äº†ï¼Œæ­¤æ—¶ä¸å¦¨å°è¯•ä¸€ä¸‹ï¼Œåªæ˜¯archiveæ˜¯å¦æœ‰é—®é¢˜ï¼Ÿå…·ä½“åŸå› ç¬”è€…å°šæœªå‘ç°ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://developer.apple.com/library/content/technotes/tn2339/_index.html" target="_blank" rel="external">1.Building from the Command Line with Xcode FAQ</a></p>
<p><a href="http://subathrathanabalan.com/2016/01/07/building-ipa-export-archive/" target="_blank" rel="external">2.Using -exportArchive instead of Package Application to export an IPA</a></p>
<p><a href="https://encyclopediaofdaniel.com/blog/xcarchive-to-ipa/" target="_blank" rel="external">3.XCArchive to ipa</a></p>
<p><a href="https://help.apple.com/xcode/mac/current/#/dev3a05256b8" target="_blank" rel="external">4.Xcode Help</a></p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    
                    <div class="post-tags">
                        
                            

<a href="/tags/Distribution/">#Distribution</a>


                        
                    </div>
                    <div class="post-date">
                        2018 å¹´ 04 æœˆ 08 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!--<div id="container"></div>

<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">

<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
//var gitment = new Gitment({
//   id: '',
//   owner: 'objchris',
//   repo: 'testGitment',
//   oauth: {
//     client_id: 'f0f51ce99c6a9e1537f5',
//     client_secret: 'a8e1135e9756220826b2290f670bb269f43566d3',
//   },
// })
// gitment.render('container')
</script>
-->
            </div>
        </div>
    </div>
</article>
</section>
<!-- Back to top -->
<a id="returnTop">
  <i class="fa fa-rocket"></i>
</a>



    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

<script src="/js/backtop.js"></script>

<script type="text/javascript">
	console.log('Chris Cheung â¤ 2016 - ' + (new Date()).getFullYear());
</script>


    <!-- Google Analytics -->
    

</body>

</html>